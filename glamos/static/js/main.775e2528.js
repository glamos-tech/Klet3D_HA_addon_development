/*! For license information please see main.775e2528.js.LICENSE.txt */
"use strict";(this.webpackChunkintegration=this.webpackChunkintegration||[]).push([[179],{8044:(e,t,i)=>{var o=i(537),s=i(336);const n=document.URL+"static/media/logo-text@2x.23f596ec.png",a=document.URL+"static/media/logo-text.23f596ec.png",r={default:n,retina:a};var l=i(683);class h extends o.Component{render(){return(0,l.jsxs)("header",{className:"layout__header",children:[this.props.title&&(0,l.jsx)("h1",{className:"layout__title",children:this.props.title}),this.props.controls&&(0,l.jsx)("div",{className:"layout__controls",children:this.props.controls})]})}}const c=h;var d=i(6226),p=i.n(d);const m=document.URL+"static/media/http-error.cf84c924.png";var u=i(1317);const g=p().default.create({headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}),f=(e,t,i)=>{let o,s={headers:{}};return t?(o="https://app.glamos.eu/api",o+="/glamos",o+=e):o=e,i&&(s.headers["Cache-Control"]="no-store"),{headers:s,apiURI:encodeURI(o)}};function b(e){u.log("HTTP error"),u.log(e),u.log(this.mounted);const t=x(this.mounted,w(e));this.props.setResponseError?this.props.setResponseError({responseError:t}):this.setState({responseError:t}),this.loadingComponentContainer&&this.loadingComponentContainer.current&&s.unmountComponentAtNode(this.loadingComponentContainer.current),this.props.loadingComponentContainer&&s.unmountComponentAtNode(this.props.loadingComponentContainer),this.props.mainComponentThis&&this.props.mainComponentThis.loadingComponentContainer&&this.props.mainComponentThis.loadingComponentContainer.current&&s.unmountComponentAtNode(this.props.mainComponentThis.loadingComponentContainer.current)}const w=e=>String(e).includes("403")?"403":String(e).includes("401")?"401":String(e).includes("400")?"400":String(e).includes("404")?"404":String(e).includes("500")?"500":String(e).includes("501")?"501":String(e).includes("502")?"502":String(e).includes("Error: Network Error")?"Network Error":e,C={get:function(e,t){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=f(e,!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3?arguments[3]:void 0);return g.get(o.apiURI,{...i,...o.headers}).then((e=>{t(e.data)})).catch(b.bind(this))},post:function(e,t,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=f(e,!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length>4?arguments[4]:void 0);return g.post(s.apiURI,t,{...o,...s.headers}).then((e=>{i(e)})).catch(b.bind(this))},put:function(e,t,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=f(e,!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length>4?arguments[4]:void 0);return g.put(o.apiURI,t,{...o,...s.headers}).then((e=>{i(e)})).catch(b.bind(this))},patch:function(e,t,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=f(e,!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length>4?arguments[4]:void 0);return g.patch(s.apiURI,t,{...o,...s.headers}).then((e=>{i(e)})).catch(b.bind(this))},delete:function(e,t){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=f(e,!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3?arguments[3]:void 0);return g.delete(o.apiURI,{...i,...o.headers}).then((e=>{t(e)})).catch(b.bind(this))}},x=(e,t)=>t&&e&&("403"===t||"401"===t)?(u.log("Invalid token"),t):!(!t||!e||"400"!==t&&"404"!==t&&"500"!==t&&"501"!==t&&"502"!==t&&"Network Error"!==t)&&t,y=e=>!(!e||"Network Error"!==e&&"400"!==e&&"404"!==e&&"500"!==e&&"501"!==e&&"502"!==e),S=e=>"no_servers"===e?(0,l.jsxs)("div",{className:"error-container",children:[(0,l.jsx)("p",{children:"Please create server and then add gateways (hotspots) to that server here."}),(0,l.jsx)("p",{children:"Add gateways for area you want to test/track"}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("p",{children:"You will find your API key for integration of your devices in account."}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["For support contact: ",(0,l.jsx)("a",{href:"mailto: slaven@glamos.eu",children:"slaven@glamos.eu"})]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["Find instructions at"," ",(0,l.jsx)("a",{target:"_blank",href:"https://glamos.eu/manual",rel:"noreferrer",children:"https://glamos.eu/manual"})]})]}):"no_gateways"===e?(0,l.jsxs)("div",{className:"error-container",children:[(0,l.jsx)("p",{children:"Please add gateways (hotspots) to your server in gateways."}),(0,l.jsx)("p",{children:"Add gateways for area you want to test/track"}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("p",{children:"You will find your API key for integration of your devices in account."}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["For support contact: ",(0,l.jsx)("a",{href:"mailto: slaven@glamos.eu",children:"slaven@glamos.eu"})]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["Find instructions at"," ",(0,l.jsx)("a",{target:"_blank",href:"https://glamos.eu/manual",rel:"noreferrer",children:"https://glamos.eu/manual"})]})]}):"no_devices"===e?(0,l.jsxs)("div",{className:"error-container",children:[(0,l.jsx)("p",{children:"Please first add your device here"}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("p",{children:"You will find your API key for integration of your devices inaccount."}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["For support contact: ",(0,l.jsx)("a",{href:"mailto: slaven@glamos.eu",children:"slaven@glamos.eu"})]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["Find instructions at"," ",(0,l.jsx)("a",{target:"_blank",href:"https://glamos.eu/manual",rel:"noreferrer",children:"https://glamos.eu/manual"})]})]}):"no_online_devices"===e?(0,l.jsxs)("div",{className:"error-container",children:[(0,l.jsx)("p",{children:"Looks like you didn't activate any device. In order to see device data you must activate licence for it."}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["Please go to devices page and activate licence."," ",(0,l.jsx)("a",{target:"_blank",href:"https://glamos.eu/blog/new-chapter-glamos/",rel:"noreferrer",children:"More details"})]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["For support contact: ",(0,l.jsx)("a",{href:"mailto: slaven@glamos.eu",children:"slaven@glamos.eu"})]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["Find instructions at"," ",(0,l.jsx)("a",{target:"_blank",href:"https://glamos.eu/manual",rel:"noreferrer",children:"https://glamos.eu/manual"})]})]}):"Network Error"===e?(0,l.jsxs)("div",{className:"error-container",children:[(0,l.jsx)("p",{children:"Error getting data (network error)"}),(0,l.jsx)("p",{children:"Check your internet connnection and try again."}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["If that doesn't work, please contact support at ",(0,l.jsx)("a",{href:"mailto: slaven@glamos.eu",children:"slaven@glamos.eu"})]})]}):"400"===e?(0,l.jsxs)("div",{className:"http-error error-container",children:[(0,l.jsx)("img",{alt:"HTTP error",src:m}),(0,l.jsx)("p",{children:"Ooops, looks like an error happened."}),(0,l.jsx)("p",{children:(0,l.jsx)("b",{children:"HTTP 400 Bad request"})})]}):"404"===e?(0,l.jsxs)("div",{className:"http-error error-container",children:[(0,l.jsx)("img",{alt:"HTTP error",src:m}),(0,l.jsx)("p",{children:"Ooops, looks like an error happened."}),(0,l.jsx)("p",{children:(0,l.jsx)("b",{children:"HTTP 404 Not Found"})})]}):"500"===e?(0,l.jsxs)("div",{className:"http-error error-container",children:[(0,l.jsx)("img",{alt:"HTTP error",src:m}),(0,l.jsx)("p",{children:"Ooops, looks like an error happened."}),(0,l.jsx)("p",{children:(0,l.jsx)("b",{children:"HTTP 500 Internal Server Error"})})]}):"501"===e?(0,l.jsxs)("div",{className:"http-error error-container",children:[(0,l.jsx)("img",{alt:"HTTP error",src:m}),(0,l.jsx)("p",{children:"Ooops, looks like an error happened."}),(0,l.jsx)("p",{children:(0,l.jsx)("b",{children:"HTTP 501 Not Implemented"})})]}):"502"===e?(0,l.jsxs)("div",{className:"http-error error-container",children:[(0,l.jsx)("img",{alt:"HTTP error",src:m}),(0,l.jsx)("p",{children:"Ooops, looks like an error happened."}),(0,l.jsx)("p",{children:(0,l.jsx)("b",{children:"HTTP 502 Bad Gateway"})})]}):null,v="eagrar_storage";let D={};D={...(()=>{const e=localStorage.getItem(v);return e?JSON.parse(e):{}})()};var T=i(1614);const j=(e,t)=>{const i=Number(Math.round(e+"e"+t)+"e-"+t);return isNaN(i)?0:i},_=(e,t,i)=>{let o,s;return()=>{let n=+new Date;o&&n<o+i?(clearTimeout(s),s=setTimeout((function(){o=n,t(e)}),i)):(o=n,t(e))}},I=e=>(()=>{let e,t=0;for(e in window.localStorage)t+=2*((window.localStorage[e].length||0)+(e.length||0));return t})()+(e=>{let t=new ArrayBuffer(2*e.length),i=new Uint16Array(t);for(let o=0,s=e.length;o<s;o++)i[o]=e.charCodeAt(o);return i})(JSON.stringify(e)).byteLength<5138022.4,k=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,P=e=>!e&&0!==e&&!1!==e,F=e=>!e&&0!==e,O=e=>!e&&0!==e,M=(e,t,i)=>(0,T.ZP)(e,t).to(i),L=(e,t,i)=>e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height,R=e=>e*(Math.PI/180),B=e=>e*(180/Math.PI),A=e=>e.getDate().toString().padStart(2,"0")+"."+(e.getMonth()+1).toString().padStart(2,"0")+"."+e.getFullYear()+" "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0"),W=e=>{const t={timeZone:e,hour12:!1,weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},i=Intl.DateTimeFormat("en-US",t).formatToParts(new Date),o=i.find((e=>"year"===e.type)).value,s=new Date("".concat(i.find((e=>"month"===e.type)).value," 1, 2000")).getMonth(),n=i.find((e=>"day"===e.type)).value,a=i.find((e=>"hour"===e.type)).value,r=i.find((e=>"minute"===e.type)).value,l=i.find((e=>"second"===e.type)).value;return new Date(o,s,n,a,r,l)};var V=i(1317);function N(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;C.get.call(this,"/location",(t=>{V.log("Ipapify response:"),V.log(t),this.mounted&&t?t.latitude&&t.longitude?(V.log("Postavi lat long u prvom"),this.setState({[e]:[t.longitude,t.latitude]},(()=>!!i&&i()))):t.geoplugin_latitude&&t.geoplugin_longitude?(V.log("postavi lat long u drugom"),this.setState({[e]:[t.geoplugin_longitude,t.geoplugin_latitude]},(()=>!!i&&i()))):i&&i():i&&i()}),!0,!0)}var E=i(1317);const z={isEmpty:function(){return!String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ").replace(/ /g,"").length&&"Entry can not be empty."},isNumber:function(){return!!isNaN(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")&&"Entry can be just a number."},isEmail:function(){return!/\S+@\S+\.\S+/.test(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")&&"Invalid e-mail format."},isGpsCoordinate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return z.isEmpty(e)?"Entry can not be empty.":z.isNumber(e)?"Entry can be just a number.":"gps_lat"===t?!(Number(e)>=-90&&Number(e)<=90)&&"Latitude out of bounds([-90, 90]).":!(Number(e)>=-180&&Number(e)<=180)&&"Longitude out of bounds([-180, 180])."},isValidGpsCoordinates:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";E.log("Ptimljen koordinate: "+e);const t=e.replace(/\s+/g,"").split(",");return t&&2===t.length?z.isGpsCoordinate(t[0],"gps_lat")||z.isGpsCoordinate(t[1],"gps_long"):"Invalid GPS coordinates. Please follow specified format."},deviceEUI:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.length>0&&(16!==e.length&&"DevEUI must be 16 characters long")},isLicenseNumber:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!1;if("string"===typeof e)if(19!==e.length)t=!0;else{const i=e.split("-");if(E.log("License parts"),E.log(i),4!==i.length)t=!0;else for(let e=0;e<i.length;e++)if(4!==i[e].length){t=!0;break}}else t=!0;return!!t&&"Invalid license format"},isHexColor:function(){return!/^#?([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/.test(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")&&"Invalid hex color format"}},H=(e,t)=>{for(let i=0;i<t.length;i++)if(e[i].value!==t[i].value)return!0;return!1};var G=i(6773),U=i(3044),q=i.n(U),Y=i(1317);const K=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"block",s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];0!==t?requestAnimationFrame((()=>{e.style.display=o,s?(e=e.firstChild).style.transitionDuration="".concat(t,"ms"):e.style.transitionDuration="".concat(t,"ms"),i&&e.addEventListener("transitionend",i,{once:!0}),0!==t?requestAnimationFrame((()=>{Y.log("Callback"),s?e.classList.add("indoor-modal-fade-in"):e.classList.add("fade-in")})):i&&i()})):e.style.display=o},X=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];0!==t?requestAnimationFrame((()=>{let n;o?(n=e.firstChild,n.style.transitionDuration="".concat(t,"ms")):(n=e,n.style.transitionDuration="".concat(t,"ms"));const a=t=>{t.target===n&&(s||(e.style.display="none"),i&&i(),n.removeEventListener("transitionend",a))};n.addEventListener("transitionend",a),requestAnimationFrame((()=>{o?n.classList.remove("indoor-modal-fade-in"):n.classList.remove("fade-in")}))})):e.style.display="none"},Z=e=>{let t=[],i=[];for(let o=0;o<e.coords.length;o++)t.push(e.coords[o].x),i.push(e.coords[o].y);return t.sort(((e,t)=>e-t)),i.sort(((e,t)=>e-t)),{minX:t[0],maxX:t[t.length-1],minY:i[0],maxY:i[i.length-1]}},J=e=>{let t=e.filter((e=>!re(e.start,e.end)));if(0===t.length)return null;{let e,i,o,s,n;if(1===t.length)n=Z(t[0]),e=n.minX,i=n.maxX,o=n.minY,s=n.maxY;else for(let a=0;a<t.length;a++)n=Z(t[a]),0===a?(e=n.minX,i=n.maxX,o=n.minY,s=n.maxY):(e=n.minX<e?n.minX:e,i=n.maxX>i?n.maxX:i,o=n.minY<o?n.minY:o,s=n.maxY>s?n.maxY:s);return{minX:e,minY:o,maxX:i,maxY:s}}},Q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e?{x:(e.minX+(e.maxX-e.minX)/2)*t,y:(e.minY+(e.maxY-e.minY)/2)*t}:null},$=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;return"v"===t.A?0===Number((e.x-t.B).toFixed(i)):"h"===t.A?0===Number((e.y-t.B).toFixed(i)):0===Number((e.y-t.A*e.x-t.B).toFixed(i))},ee=function(e,t,i,o,s){let n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6?arguments[6]:void 0;const r=j(t,e),l=j(i,e),h=j(o.minX,e),c=j(o.maxX,e),d=j(o.minY,e),p=j(o.maxY,e),m=j(s.minX,e),u=j(s.maxX,e),g=j(s.minY,e),f=j(s.maxY,e);return n?r>=h&&r>=m&&r<=c&&r<=u&&l>=d&&l>=g&&l<=p&&l<=f:n?void 0:"h"===a?r>h&&r>m&&r<c&&r<u&&l>=d&&l>=g&&l<=p&&l<=f:"v"===a?r>=h&&r>=m&&r<=c&&r<=u&&l>d&&l>g&&l<p&&l<f:r>h&&r>m&&r<c&&r<u&&l>d&&l>g&&l<p&&l<f},te=(e,t)=>{let i={minX:null,maxX:null,minY:null,maxY:null};return e.y>t.y?(i.maxY=e.y,i.minY=t.y):(i.maxY=t.y,i.minY=e.y),e.x>t.x?(i.maxX=e.x,i.minX=t.x):(i.maxX=t.x,i.minX=e.x),i},ie=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},oe=(e,t)=>{let i=["svg","g"];for(let o=0;o<e.children.length;o++){let s=e.children[o];if(-1!==i.indexOf(s.tagName)){oe(s,t.children[o]);continue}let n=t.children[o].currentStyle||window.getComputedStyle(t.children[o]);if("undefined"!==n&&null!=n)for(let e=0;e<n.length;e++)s.style.setProperty(n[e],n.getPropertyValue(n[e]))}},se=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i&&Y.log(i);let o=!0;for(let s in e)if(e[s]!==t[s]){o=!1;break}return o},ne=function(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];o&&Y.log(o);let s,n,a=i.x,r=i.y,l=e.A,h=e.B;if("v"===l)s={x:a,y:r-t/2},n={x:a,y:r+t/2};else if("h"===l)s={x:a-t/2,y:r},n={x:a+t/2,y:r};else{let e=1+l*l,i=-2*a+2*l*h+-2*r*l,o=i*i-4*e*(a*a+h*h-2*r*h+r*r-t*t/4),c=(-i-Math.sqrt(o))/(2*e),d=(-i+Math.sqrt(o))/(2*e);s={x:c,y:l*c+h},n={x:d,y:l*d+h}}return[s,n]},ae=()=>document.querySelector(".rightBox.active"),re=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;return 0===Number((e.x-t.x).toFixed(i))&&0===Number((e.y-t.y).toFixed(i))},le=e=>{let t,i,o=0;for(let s=0;s<e.length-1;s++)t=s,i=s+1,s===e.length-2&&(i=0),Y.log(t+" -> "+i),o+=(e[i].x-e[t].x)*(e[i].y+e[t].y);return o<0},he=e=>e>180?e-360:e,ce=(e,t)=>Math.log2(2*Math.cos(e*Math.PI/180)*Math.PI*6378137/(512*t)),de=function(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const n=q()([t,e]),a=(0,G.Z)(n,i/1e3,he(90+s)),r=(0,G.Z)(a,o/1e3,he(180+s)),l=(0,G.Z)(n,o/1e3,he(180+s));return[[t,e],a.geometry.coordinates,r.geometry.coordinates,l.geometry.coordinates]},pe=function(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,s=0,n=2;i>90&&i<=180?(s=3,n=1):i>180&&i<=270?(s=2,n=0):i>270&&i<=359&&(s=1,n=3),e.fitBounds([t[n],t[s]],{padding:o})},me=(e,t)=>{let i=e.x,o=e.y,s=!1;for(let n=0,a=t.length-1;n<t.length;a=n++){let e=t[n].x,r=t[n].y,l=t[a].x,h=t[a].y;r>o!==h>o&&i<(l-e)*(o-r)/(h-r)+e&&(s=!s)}return s},ue=(e,t)=>{if(me(e,t))return!0;{let i=!1;for(let o=0;o<t.length-1;o++)if(e.x<=Math.max(t[o].x,t[o+1].x)&&e.x>=Math.min(t[o].x,t[o+1].x)&&e.y<=Math.max(t[o].y,t[o+1].y)&&e.y>=Math.min(t[o].y,t[o+1].y)&&$(e,we(t[o].x,t[o].y,t[o+1].x,t[o+1].y,0),0)){i=!0;break}return i}},ge=function(e,t){let i,o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"array";if(e.A===t.A&&(i=!1,o=!1),"v"===e.A&&"h"===t.A&&(i=[e.B,t.B],o={x:e.B,y:t.B}),"h"===e.A&&"v"===t.A&&(i=[t.B,e.B],o={x:t.B,y:e.B}),"h"===e.A&&"v"!==t.A&&"h"!==t.A&&(i=[(e.B-t.B)/t.A,e.B],o={x:(e.B-t.B)/t.A,y:e.B}),"v"===e.A&&"v"!==t.A&&"h"!==t.A&&(i=[e.B,t.A*e.B+t.B],o={x:e.B,y:t.A*e.B+t.B}),"h"===t.A&&"v"!==e.A&&"h"!==e.A&&(i=[(t.B-e.B)/e.A,t.B],o={x:(t.B-e.B)/e.A,y:t.B}),"v"===t.A&&"v"!==e.A&&"h"!==e.A&&(i=[t.B,e.A*t.B+e.B],o={x:t.B,y:e.A*t.B+e.B}),"h"!==e.A&&"v"!==e.A&&"v"!==t.A&&"h"!==t.A){let s=(t.B-e.B)/(e.A-t.A),n=e.A*s+e.B;i=[s,n],o={x:s,y:n}}return"array"===s?i:o},fe=function(e,t){let i=[],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?"coordsInsideWithOrphans":"coordsInside";for(let s=0;s<t.length;s++){me(e,t[s][o])&&i.push(s)}if(i.length>0){let e,o=t[i[0]].realRoomArea;for(let s=0;s<i.length;s++)t[i[s]].realRoomArea<=o&&(o=t[i[s]].realRoomArea,e=t[i[s]]);return e}return!1},be=function(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{wallNode1:e[t],wallNode2:e[i],wallEquation:o&&we(e[t].x,e[t].y,e[i].x,e[i].y)}},we=function(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:12;return 0===Number((i-e).toFixed(s))?{A:"v",B:e}:0===Number((o-t).toFixed(s))?{A:"h",B:t}:{A:(o-t)/(i-e),B:o-i*((o-t)/(i-e))}},Ce=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),xe=(e,t)=>{let i,o,s;"v"===t.A?(i=1,o=0,s=-t.B):"h"===t.A?(i=0,o=1,s=-t.B):(i=t.A,o=-1,s=t.B);const n=e.x,a=e.y,r=(o*(o*n-i*a)-i*s)/(i**2+o**2),l=(i*(i*a-o*n)-o*s)/(i**2+o**2);return{distance:Ce({x:n,y:a},{x:r,y:l}),projectedPoint:{x:r,y:l}}},ye=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2)),Se=e=>{for(let t=0;t<e.length;t++)if(!e[t])return!1;return!0},ve=e=>e.area>0?e.area:Math.sign(e.realArea)>0&&Math.sign(e.outsideArea)>0?Math.min(e.realArea,e.outsideArea):Math.sign(e.realArea)>0?e.realArea:Math.sign(e.outsideArea)>0?e.outsideArea:null,De=function(e,t){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return("metric"!==t||arguments.length>7&&void 0!==arguments[7]&&arguments[7])&&(e=M(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"meter",arguments.length>3&&void 0!==arguments[3]?arguments[3]:"feet")),e=j(e,i),o&&(s&&(e+=" "),e+="metric"===t?"m":"ft"),e},Te=function(e,t){return("metric"!==t||arguments.length>4&&void 0!==arguments[4]&&arguments[4])&&(e=M(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"feet",arguments.length>3&&void 0!==arguments[3]?arguments[3]:"meter")),e},je=function(e,t){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return("metric"!==t||arguments.length>7&&void 0!==arguments[7]&&arguments[7])&&(e=M(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"square meter",arguments.length>3&&void 0!==arguments[3]?arguments[3]:"square foot")),e=j(e,i),o&&(s&&(e+=" "),e+="metric"===t?"m\xb2":"ft\xb2"),e},_e=(e,t,i)=>{const{arrowHalfLength:o}=Ie(i),s=-o,n=o,a=.5*(n+s),r=Math.atan2(0,n-s)-Math.PI/2,l="start"===e?15:-15,h=a+l*Math.cos(r),c=0+l*Math.sin(r),d=new DOMMatrix;d.translateSelf(i.x,i.y),d.rotateSelf(i.angle+90);const p=new DOMPoint(h,c).matrixTransform(d),{translateX:m,translateY:u}=Ie(i,t),g=new DOMMatrix;g.translateSelf(m,u),g.rotateSelf(i.angle+90);return{curvePoint1X:s,curvePoint1Y:0,curvePoint2X:n,curvePoint2Y:0,controlPointX:h,controlPointY:c,transformedControlPointOnWallCoordinates:p,transformedArrowControlPointCoordinates:new DOMPoint(h,c).matrixTransform(g)}},Ie=(e,t)=>{let i={arrowHalfLength:0,translateX:0,translateY:0};if(i.arrowHalfLength=e.thick/2+5,t){const o=e.angle*(Math.PI/180),s="up"===t?0:Math.PI;i.translateX=e.x+i.arrowHalfLength*Math.sin(o+s),i.translateY=e.y-i.arrowHalfLength*Math.cos(o+s)}return i},ke=(e,t,i)=>{for(let o=0;o<e.length;o++){const s=e[o].x-t.x,n=e[o].y-t.y;e[o].x=s*Math.cos(i)-n*Math.sin(i),e[o].y=s*Math.sin(i)+n*Math.cos(i),e[o].x+=t.x,e[o].y+=t.y}},Pe=e=>{let t=1/0,i=-1/0,o=1/0,s=-1/0;for(let n=0;n<e.length;n++)e[n].x<t&&(t=e[n].x),e[n].x>i&&(i=e[n].x),e[n].y<o&&(o=e[n].y),e[n].y>s&&(s=e[n].y);return{minX:t,maxX:i,minY:o,maxY:s,width:i-t,height:s-o}},Fe=e=>({...e,objData:e.objData.map((e=>{let{bbox:t,realBbox:i,size:o,thick:s,height:n,width:a,...r}=e;return r}))}),Oe=e=>{let t=e.parent;for(;t;){if(t.isScene)return t;t=t.parent}return null},Me=(e,t)=>{let i=[],o=[];for(let s=0;s<e.coords.length;s++)$(e.coords[s],e.equations.up,t)?i.push(e.coords[s]):o.push(e.coords[s]);return{interiorLineCoords:i,exteriorLineCoords:o}};function Le(e){return t=>{const i=t&&t.target?t.target.value:t,o=this.state.edit.map((t=>({...t,value:t.field===e.field?i:t.value})));this.setState({edit:o,needsSave:H(o,this.state.originalData)})}}function Re(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=((e,t)=>{let i=0,o=e.map((e=>{let t,o,{value:s,validate:n,...a}=e;return a.isGpsCoord?(E.log("Comma value"+s),o=s.toString()&&s.toString().replace(",","."),E.log("Dotted value"+o),t=n&&n(o),t||(s=o)):t=n&&n(s),t&&i++,{...a,validate:n,value:s,error:t}}));return t(o),!i})(this.state.edit,(e=>{this.setState({edit:e})}));if(i){let i=[...this.props.mainComponentThis.klet3DLastSavedData],o=i.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));o&&(t?t(o):this.state.edit.forEach((e=>this.props.mainComponentThis.setKlet3DDataParamValue(o,this.props.targetObject2D,[e.field],e))),this.callSaveAPI(o,i,e))}}function Be(){const e=this.props.mainComponentThis.floorplan3DComponent.current.objectConnectorsArray.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));e&&e.update(this.props.mainComponentThis.floorplan3DComponent.current.getObjectConnectorParamsData(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]))}function Ae(e){this.state.needsSave&&(Y.log("original data",this.state.originalData,this.props.klet3DBinder),this.state.originalData.forEach((t=>{e.find((e=>e.field===t.field))&&this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[t.field],t)})),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState())}function We(e,t,i){let o={entitydata:t};this.setState({loading:!0},(()=>{C.post.call(this,"/klet3d/entity/".concat(this.props.mainComponentThis.props.floorplanID,"/").concat(this.props.mainComponentThis.props.licenseKey),o,(o=>{Y.log("Klet post API response"),Y.log(o),this.props.mainComponentThis.klet3DLastSavedData=t,this.props.updateKlet3DBinderState(e),i&&i(),this.setState({loading:!1,originalData:this.state.edit,needsSave:!1})}))}))}const Ve=(e,t)=>"<div ".concat(t?'class="'.concat(t,'"'):"",'>\n<div>\n  <span style="font-weight: bold;">Floor number: </span>\n  <span>').concat(e.floorNumber,"</span>\n</div>\n").concat(e.floorNote?'<div>\n        <span>\n          <span style="font-weight: bold;">Floor note: </span>\n          <span>'.concat(e.floorNote,"</span>\n        </span>\n      </div>"):"","\n</div>");var Ne=i(8569),Ee=i(1317);const ze=e=>{let{children:t,title:i,controls:o,responseError:s,indoorMapping:n=!1,hideLayoutHeader:a=!1}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("main",{className:"layout container ".concat("Map"===i?"fieldmap-container":""," ").concat(n?"layout-indoormapping":""),children:[!a&&(0,l.jsx)(c,{title:i,controls:!y(s)&&o}),y(s)?S(s):t]})})};class He extends o.PureComponent{render(){const{className:e,onClick:t,children:i,type:o,disabled:s,disabledNative:n,style:a={}}=this.props;return(0,l.jsx)("button",{className:n?"":"button ".concat(o?"button--type-".concat(o):""," ").concat(s?"button-disabled":""," ").concat(e||""),onClick:s||n?null:t,disabled:n,style:a,children:i})}}const Ge=He;var Ue=i(5807);class qe extends o.Component{render(){const{buttonType:e,ButtonIcon:t,buttonText:i,loading:o,spinnerLoading:s,spinnerColor:n}=this.props;return(0,l.jsxs)(Ge,{type:e,disabled:this.props.disabled||!1,style:{position:o?"relative":"static"},onClick:()=>!o&&this.props.onClick&&this.props.onClick(),children:[(0,l.jsxs)("div",{className:"loading-button-content-container",style:{visibility:o?"hidden":"visible"},children:[t,(0,l.jsx)("span",{children:i})]})," ",o?s?(0,l.jsx)("div",{style:{height:"0.875rem",width:"0.875rem",borderColor:n,borderRightColor:"transparent",position:"absolute",top:"0.6rem",left:"calc(50% - 0.4375rem)",boxSizing:"border-box"},className:"spinner"}):(0,l.jsx)(Ue.Z,{style:{position:"absolute",top:0,left:0,height:"2.75rem",width:"100%"},animation:"pulse"}):null]})}}const Ye=qe;class Ke extends o.Component{render(){return(0,l.jsx)("div",{className:"button-centered-container edit-button",children:(0,l.jsx)(Ge,{type:"primary",style:{paddingLeft:"1.2rem",paddingRight:"1.2rem"},children:(0,l.jsx)("a",{href:"https://app.klet3d.com/floorplan/".concat(this.props.mainComponentThis.getFloorplanID()),target:"_blank",rel:"noreferrer",style:{textDecoration:"none",color:"#fff"},children:"Edit values"})})})}}const Xe=Ke;var Ze=i(9150);class Je extends o.Component{render(){return(0,l.jsxs)("div",{className:"screen-centered response-error-container",children:[(0,l.jsx)("div",{className:"popup-icon-container",children:(0,l.jsx)(Ze.Z,{className:"popup-alert-icon"})}),(0,l.jsx)("p",{className:"error-message",children:this.props.message})]})}}const Qe=Je;class $e extends o.Component{render(){return"403"===this.props.responseError?(0,l.jsx)(Qe,{message:"You do not have access to this site."}):"401"===this.props.responseError?(0,l.jsx)(Qe,{message:"Session expired, please log in again."}):!this.props.errorMessageCheckDisabled&&y(this.props.responseError)?this.props.contextError?(0,l.jsx)("div",{style:{padding:"1rem"},children:S(this.props.responseError)}):S(this.props.responseError):this.props.customResponseError?(0,l.jsx)(Qe,{message:this.props.customResponseError}):(0,l.jsx)(o.Fragment,{children:this.props.children})}}const et=$e;var tt=i(4827),it=i(1317);class ot extends o.Component{constructor(){super(),this.state={displayMessage:!1},this.infoIconRef=o.createRef()}render(){return(0,l.jsxs)("div",{ref:this.infoIconRef,className:"info-icon-container",style:{...this.props.infoContainerStyles},children:[(0,l.jsx)(tt.Z,{className:"info-icon",onMouseOver:()=>{if(!this.state.displayMessage){if(this.props.indoorPanelExplanationBox){let e=this.infoIconRef.current.getBoundingClientRect();it.log(e),this.props.indoorPanelExplanationBox.current.style.top=e.top+"px",this.props.indoorPanelExplanationBox.current.style.left=e.left+20+"px",this.props.indoorPanelExplanationBox.current.innerHTML=this.props.infoText,this.props.indoorPanelExplanationBox.current.style.display="block"}this.setState({displayMessage:!0})}},onMouseLeave:()=>{this.state.displayMessage&&(this.props.indoorPanelExplanationBox&&(this.props.indoorPanelExplanationBox.current.style.display="none"),this.setState({displayMessage:!1}))}}),this.props.indoorPanelExplanationBox?null:(0,l.jsx)("div",{className:"explanation-info-box ".concat(this.props.persistExplanationBox?"explanation-box-persist":""),style:{display:this.state.displayMessage||this.props.persistExplanationBox?"inline-block":"none",...this.props.explanationInfoBoxStyles},children:this.props.infoText})]})}}const st=ot;class nt extends o.Component{constructor(e){super(e),this.setInitialValue=e=>this.initialValue=e,this.setValue=e=>this.inputRef.current.value=e,this.getValue=()=>this.inputRef.current.value,this.setRangeValues=(e,t)=>{this.inputRef.current.setAttribute("min",e),this.inputMin=e,this.inputRef.current.setAttribute("max",t),this.inputMax=t},this.setValueInsideInterval=e=>(this.props.allowEmpty&&""===e||(e>this.inputMax?e=this.inputMax:e<this.inputMin&&(e=this.inputMin)),e),this.onInputChange=e=>{let t=j(e.target.value,this.decimalPrecision),i=e.target.value,o=!1;(!isNaN(t)||this.props.allowEmpty&&""===i)&&(i=this.props.allowEmpty&&""===i?i:t,i===this.setValueInsideInterval(i)&&(o=!0)),this.inputRef.current.value=i,this.setState({isInvalid:!o},(()=>{this.props.callOnlyOnBlur||!o||!this.props.onInputValueChanged||this.props.checkInputValueChangeBeforeCall&&this.inputValueChangedCalledWithValue===i||(this.inputValueChangedCalledWithValue=i,this.props.onInputValueChanged())}))},this.onInputBlur=e=>{let t=j(e.target.value,this.decimalPrecision),i=this.initialValue;(!isNaN(t)||this.props.allowEmpty&&""===e.target.value)&&(i=this.props.allowEmpty&&""===e.target.value?e.target.value:t,i=this.setValueInsideInterval(i)),this.inputRef.current.value=i,this.setState({isInvalid:!1},(()=>{!this.props.onInputValueChanged||this.props.checkInputValueChangeBeforeCall&&this.inputValueChangedCalledWithValue===i||(this.inputValueChangedCalledWithValue=i,this.props.onInputValueChanged())}))},this.state={isInvalid:!1},this.inputMin=e.inputMin,this.inputMax=e.inputMax,this.initialValue=void 0!==e.defaultValue?e.defaultValue:e.inputMin,this.decimalPrecision=-Math.log10(e.inputStep),this.inputValueChangedCalledWithValue=null,this.inputRef=o.createRef(),this.setValue=this.setValue.bind(this),this.getValue=this.getValue.bind(this),this.setRangeValues=this.setRangeValues.bind(this),this.setInitialValue=this.setInitialValue.bind(this),this.setValueInsideInterval=this.setValueInsideInterval.bind(this),this.onInputChange=this.onInputChange.bind(this),this.onInputBlur=this.onInputBlur.bind(this)}componentDidMount(){this.props.defaultValue&&(this.inputRef.current.value=this.props.defaultValue)}render(){return(0,l.jsx)("input",{ref:this.inputRef,type:"number",disabled:this.props.disabled,min:this.inputMin,max:this.inputMax,step:this.props.inputStep,placeholder:this.props.placeholder||"",title:this.props.title||"",style:this.props.inputStyle||{},lang:"en",className:"form-control input ".concat(this.state.isInvalid?"is-invalid":""," ").concat(this.props.hideNumberArrows?"hide-number-arrows":""," ").concat(this.props.disabled?"form-disabled-input":""),onChange:this.props.disabled?void 0:this.onInputChange,onBlur:this.props.disabled?void 0:this.onInputBlur,onKeyDown:e=>!this.props.disabled&&"Enter"===e.key&&this.props.callOnlyOnBlur&&e.target.blur()})}}const at=nt;var rt=i(1317);class lt extends o.Component{constructor(e){super(e),this.setInitialValue=e=>this.initialValue=e,this.setValue=e=>this.setState({value:e}),this.getValue=()=>this.state.value,this.setRangeValues=(e,t)=>{this.setState({min:e,max:t})},this.setValueInsideInterval=e=>(this.props.allowEmpty&&""===e||(e>this.state.max?e=this.state.max:e<this.state.min&&(e=this.state.min)),e),this.onInputChange=e=>{let t=j(e.target.value,this.decimalPrecision),i=e.target.value,o=!1;(!isNaN(t)||this.props.allowEmpty&&""===i)&&(i=this.props.allowEmpty&&""===i?i:t,i===this.setValueInsideInterval(i)&&(o=!0)),this.setState({value:i,isInvalid:!o},(()=>{!this.props.callOnlyOnBlur&&o&&this.props.onInputValueChanged&&this.inputValueChangedCalledWithValue!==i&&(this.inputValueChangedCalledWithValue=i,this.props.onInputValueChanged(this.state.value))}))},this.onInputBlur=e=>{let t=j(e.target.value,this.decimalPrecision),i=this.initialValue;(!isNaN(t)||this.props.allowEmpty&&""===e.target.value)&&(i=this.props.allowEmpty&&""===e.target.value?e.target.value:t,i=this.setValueInsideInterval(i)),this.setState({value:i,isInvalid:!1},(()=>{(this.props.callOnlyOnBlur||this.props.onInputValueChanged&&this.inputValueChangedCalledWithValue!==i)&&(this.inputValueChangedCalledWithValue=i,this.props.onInputValueChanged(this.state.value))}))},this.state={value:e.value||"",min:e.inputMin,max:e.inputMax,isInvalid:!1},this.decimalPrecision=-Math.log10(e.inputStep),this.initialValue=void 0!==e.value?e.value:e.inputMin,this.inputValueChangedCalledWithValue=null,this.setValue=this.setValue.bind(this),this.getValue=this.getValue.bind(this),this.setRangeValues=this.setRangeValues.bind(this),this.setInitialValue=this.setInitialValue.bind(this),this.setValueInsideInterval=this.setValueInsideInterval.bind(this),this.onInputChange=this.onInputChange.bind(this),this.onInputBlur=this.onInputBlur.bind(this)}render(){rt.log("Is invalid "+this.state.isInvalid);const{value:e,min:t,max:i,isInvalid:o}=this.state;return(0,l.jsx)("input",{type:"number",min:t,max:i,step:this.props.inputStep,placeholder:this.props.placeholder||"",title:this.props.title||"",style:this.props.inputStyle||{},lang:"en",className:"form-control input ".concat(o?"is-invalid":""," ").concat(this.props.hideNumberArrows?"hide-number-arrows":""," ").concat(this.props.inputClasses||""," ").concat(this.props.disabled?"form-disabled-input":""),value:this.props.usePropsValue?this.props.value:e,onChange:this.props.disabled?void 0:this.onInputChange,onBlur:this.props.disabled?void 0:this.onInputBlur,onKeyDown:e=>!this.props.disabled&&"Enter"===e.key&&this.props.callOnlyOnBlur&&e.target.blur()})}}const ht=lt;var ct=i(648);class dt extends o.Component{render(){return(0,l.jsxs)("div",{className:"screen-centered-tabs-and-close-button-modal ".concat(this.props.className||""),style:this.props.modalStyles||{},children:[(0,l.jsx)("div",{className:"tab-labels-container",children:this.props.modalTabs||(0,l.jsx)("div",{className:"keep-height",children:"Keep height"})}),(0,l.jsx)("div",{className:"close-button-container",onClick:this.props.onCloseModalClick,children:(0,l.jsx)(ct.Z,{})}),this.props.children]})}}const pt=dt;class mt extends o.Component{render(){return(0,l.jsxs)(xt,{containerRef:this.props.formGroupRef||null,containerClasses:this.props.containerClasses,containerStyle:this.props.formGroupStyle,label:this.props.label,labelStyle:this.props.labelStyle,labelClasses:this.props.labelClasses,children:[this.props.inputLoading?(0,l.jsx)("div",{children:(0,l.jsx)(Mt,{center:!0,noMargin:!0,spinnerStyle:{width:20,height:20}})}):(0,l.jsx)(o.Fragment,{children:this.props.selectInput?this.props.selectBoxComboInput?(0,l.jsx)(Ht,{item:this.props.item,handleChange:this.props.onChange}):(0,l.jsx)(Ut,{ref:this.props.selectInputRef||null,fullWidth:this.props.fullWidth,item:this.props.item,handleChange:this.props.onChange}):(0,l.jsx)(St,{inputProps:{item:this.props.item,onChange:this.props.onChange,inputRef:this.props.inputRef,inputClasses:this.props.inputClasses,disabled:this.props.disabled,inputStyle:this.props.inputStyle,value:this.props.value,error:this.props.error,type:this.props.type,placeholder:this.props.placeholder,accept:this.props.accept}})}),this.props.error&&(0,l.jsx)("div",{className:"form-control feedback ".concat(this.props.errorClasses||""),children:this.props.error}),this.props.bellowInputElements&&this.props.bellowInputElements]})}}const ut=mt;class gt extends o.Component{render(){return(0,l.jsxs)("div",{className:"checked-input-container ".concat(this.props.disabled?"disabled":""," ").concat(this.props.containerClasses||""),children:[(0,l.jsx)("input",{ref:this.props.inputRef||null,title:this.props.title,type:"checkbox",onChange:this.props.disabled?void 0:this.props.onChange,defaultChecked:this.props.defaultChecked,disabled:this.props.disabled,checked:this.props.checked}),this.props.label&&(0,l.jsx)("label",{children:this.props.label}),this.props.infoLabel&&(0,l.jsxs)("div",{className:"label-info-box-container",children:[(0,l.jsx)("label",{children:this.props.infoLabelTitle}),(0,l.jsx)(st,{infoText:this.props.infoText,explanationInfoBoxStyles:this.props.explanationInfoBoxStyles||{}})]})]})}}const ft=gt;class bt extends o.Component{render(){return(0,l.jsxs)(xt,{label:this.props.label,containerStyle:this.props.formGroupContainerStyle||{},children:[(0,l.jsx)("div",{className:"form-radio-group",style:this.props.radioGroupContainerStyle||{},children:this.props.item.choices.map(((e,t)=>(0,l.jsxs)("div",{style:this.props.choiceRowStyle||{},children:[!this.props.rightLabel&&(0,l.jsx)("label",{className:"left-label",children:e.name}),(0,l.jsx)("input",{disabled:this.props.disabled,value:e.value,type:"radio",checked:this.props.item.value===e.value,onChange:this.props.disabled?void 0:this.props.onChange(this.props.item)}),this.props.rightLabel&&(0,l.jsx)("label",{className:"right-label",children:e.name}),e.inputSiblingElement||null]},t)))}),this.props.item.error&&(0,l.jsx)("div",{className:"form-control feedback",children:this.props.item.error})]})}}const wt=bt;class Ct extends o.Component{render(){return(0,l.jsxs)("div",{ref:this.props.containerRef||null,className:"form-group ".concat(this.props.containerClasses||""),style:this.props.containerStyle||{},children:[this.props.label&&(0,l.jsx)("label",{style:this.props.labelStyle||{},className:"label form-control ".concat(this.props.labelClasses||""),children:this.props.label}),this.props.children]})}}const xt=Ct;class yt extends o.Component{render(){return(0,l.jsx)("input",{ref:this.props.inputProps.inputRef||null,className:"form-control input ".concat(this.props.inputProps.inputClasses||""," ").concat(this.props.inputProps.error?"is-invalid":""," ").concat(this.props.inputProps.disabled?"form-disabled-input":""),style:this.props.inputProps.inputStyle||{},value:this.props.inputProps.value,disabled:this.props.inputProps.disabled,type:this.props.inputProps.type||"text",placeholder:this.props.inputProps.placeholder||"",onChange:this.props.inputProps.onChange&&this.props.inputProps.onChange(this.props.inputProps.item),accept:this.props.inputProps.accept})}}const St=yt;var vt=i(8735);class Dt extends o.Component{constructor(){super(),this.onColorChange=e=>!this.props.disabled&&this.props.onChange(this.props.item)({target:{value:e}}),this.onOpenColorPickerClick=()=>{this.setState({isColorPickerVisible:!this.state.isColorPickerVisible})},this.colorPickerPopupRaycasting=e=>{this.state.isColorPickerVisible&&(L(e.clientX,e.clientY,this.colorPickerPopupContainerRef.current.getElementsByClassName("react-colorful")[0].getBoundingClientRect())||L(e.clientX,e.clientY,this.colorPickerInputContainerRef.current.getBoundingClientRect())||this.setState({isColorPickerVisible:!1}))},this.state={isColorPickerVisible:!1},this.colorPickerPopupContainerRef=o.createRef(),this.colorPickerInputContainerRef=o.createRef(),this.paddingValue=3,this.onColorChange=this.onColorChange.bind(this),this.onOpenColorPickerClick=this.onOpenColorPickerClick.bind(this),this.colorPickerPopupRaycasting=this.colorPickerPopupRaycasting.bind(this)}componentWillUnmount(){this.props.boxContainer&&this.props.boxContainer.removeEventListener("click",this.colorPickerPopupRaycasting)}componentDidMount(){const e=this.colorPickerInputContainerRef.current.getElementsByClassName("input");for(let t=0;t<e.length;t++)e[t].style.paddingLeft=this.colorPickerInputContainerRef.current.offsetHeight+this.paddingValue+"px";this.props.boxContainer&&this.props.boxContainer.addEventListener("click",this.colorPickerPopupRaycasting)}render(){return(0,l.jsxs)("div",{className:"color-picker-container",style:this.props.containerStyle||{},children:[(0,l.jsx)("div",{ref:this.colorPickerPopupContainerRef,className:"color-picker-popup-container",style:{display:this.state.isColorPickerVisible?"block":"none",opacity:this.state.isColorPickerVisible?1:0,pointerEvents:this.state.isColorPickerVisible?"auto":"none"},children:(0,l.jsx)(vt.gW,{color:this.props.item.value,onChange:this.onColorChange,disabled:this.props.disabled})}),(0,l.jsxs)("div",{ref:this.colorPickerInputContainerRef,className:"color-picker-input-container input-auto-width",children:[(0,l.jsx)("span",{className:"form-control input keep-width-span",style:{paddingRight:this.paddingValue},children:"#000000"}),(0,l.jsx)(vt.ZE,{className:"form-control input color-picker-input",style:{paddingRight:this.paddingValue},color:this.props.item.value,prefixed:!0,disabled:this.props.disabled,onChange:this.onColorChange}),(0,l.jsx)("div",{className:"color-value-layout",style:{backgroundColor:this.props.item.value},onClick:this.onOpenColorPickerClick})]})]})}}const Tt=Dt;class jt extends o.Component{render(){return(0,l.jsxs)("div",{ref:this.props.containerRef||null,className:"form-group inline ".concat(this.props.autoWidth?"auto-width-container":""," ").concat(this.props.containerClasses||""),style:this.props.containerStyle||{},children:[(0,l.jsx)("div",{className:"label-container",children:(0,l.jsx)("label",{style:this.props.labelStyle||{},className:"label form-control ".concat(this.props.labelClasses||""),children:this.props.label})}),(0,l.jsxs)("div",{className:"input-container ".concat(this.props.autoWidth?"input-auto-width":""),children:[this.props.autoWidth&&(0,l.jsx)("span",{className:"form-control input ".concat(this.props.autoWidthClass),children:this.props.keepWidthValue}),this.props.isColorInput?(0,l.jsx)(Tt,{disabled:this.props.disabled,item:this.props.item,onChange:this.props.onChange,boxContainer:this.props.colorPickerBoxContainer}):this.props.isNumberInput?this.props.controledNumberInput?(0,l.jsx)(ht,{placeholder:this.props.item.placeholder,disabled:this.props.disabled,inputStep:this.props.item.step,inputMin:this.props.item.min,inputMax:this.props.item.max,usePropsValue:this.props.usePropsValue,value:this.props.item.value,onInputValueChanged:this.props.onChange(this.props.item)}):(0,l.jsx)(at,{ref:this.props.uncontroledNumberInputRef,disabled:this.props.disabled,placeholder:this.props.item.placeholder,inputStep:this.props.item.step,inputMin:this.props.item.min,inputMax:this.props.item.max,onInputValueChanged:this.props.onChange(this.props.item)}):(0,l.jsx)(St,{inputProps:{item:this.props.item,onChange:this.props.onChange,inputRef:this.props.inputRef,inputClasses:this.props.inputClasses,disabled:this.props.disabled,inputStyle:this.props.inputStyle,value:this.props.value,error:this.props.error,type:this.props.type,placeholder:this.props.placeholder,accept:this.props.accept}}),this.props.error&&(0,l.jsx)("div",{className:"form-control feedback ".concat(this.props.errorClasses||""),children:this.props.error})]})]})}}const _t=jt;var It=i(2661);class kt extends o.Component{constructor(e){super(),this.setValue=e=>this.setState({value:e}),this.copyInputValue=()=>{if(navigator.clipboard)navigator.clipboard.writeText(this.inputRef.current.textContent).then((()=>{this.setState({showCopyStatus:!0,copyStatusText:"Copied!"},(()=>{setTimeout((()=>{this.setState({showCopyStatus:!1})}),1e3)}))})).catch((()=>{this.setState({showCopyStatus:!0,copyStatusText:"Can't copy!"})}));else{const e=document.createElement("textarea");e.value=this.inputRef.current.textContent,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove(),this.setState({showCopyStatus:!0,copyStatusText:"Copied!"},(()=>{setTimeout((()=>{this.setState({showCopyStatus:!1})}),1e3)}))}},this.state={showCopyStatus:!1,value:e.value},this.inputRef=o.createRef(),this.setValue=this.setValue.bind(this),this.copyInputValue=this.copyInputValue.bind(this)}render(){const{showCopyStatus:e,copyStatusText:t,value:i}=this.state;return i?(0,l.jsxs)("div",{style:{width:"100%",...this.props.containerStyle},children:[(0,l.jsxs)("div",{className:"copy-alert-and-label-container",children:[(0,l.jsx)("label",{className:"label form-control",children:this.props.label}),(0,l.jsx)("div",{style:{display:e?"block":"none"},children:t})]}),(0,l.jsxs)("div",{className:"clipboard-label",children:[(0,l.jsx)("div",{ref:this.inputRef,style:{wordBreak:"break-all"},className:"form-control input form-disabled-input",children:i}),(0,l.jsx)("div",{className:"clipboard-container copy-input",onClick:this.copyInputValue,children:(0,l.jsx)(It.Z,{className:"copy-icon"})})]})]}):null}}const Pt=kt;class Ft extends o.Component{constructor(){super(),this.closeDropdownMenu=()=>this.actionButtonRef.current.nextSibling.classList.remove("show"),this.setValue=e=>{this.actionButtonRef.current.innerHTML=e+' <span class="caret"></span>',this.setState({selectedValue:e}),this.closeDropdownMenu()},this.onActionButtonClick=e=>{!this.props.disabled&&e.target.nextSibling&&e.target.nextSibling.classList.toggle("show")},this.handleClickOutside=e=>{this.props.disableCloseOnOutsideClick||this.containerRef.current&&!this.containerRef.current.contains(e.target)&&this.closeDropdownMenu()},this.state={selectedValue:null},this.onActionButtonClick=this.onActionButtonClick.bind(this),this.setValue=this.setValue.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.closeDropdownMenu=this.closeDropdownMenu.bind(this),this.actionButtonRef=o.createRef(),this.containerRef=o.createRef()}componentDidMount(){document.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleClickOutside)}render(){return(0,l.jsxs)("div",{ref:this.containerRef,className:"select-custom-mini-container ".concat(this.props.containerClasses||""),children:[(0,l.jsx)("button",{disabled:this.props.disabled,ref:this.actionButtonRef,className:"btn btn-default form-control input",onClick:this.onActionButtonClick}),(0,l.jsx)("ul",{ref:this.props.dropdownMenuRef||null,className:"list-unstyled select-custom-mini-dropdown-menu",children:this.props.listItems.map(((e,t)=>(0,l.jsx)("li",{className:"".concat(e===this.state.selectedValue?"selected":""),onClick:e=>!this.props.disabled&&this.props.onListItemClick(e,t),children:e},e)))})]})}}const Ot=Ft,Mt=e=>{let{center:t,screenCenter:i,spinnerHolderStyle:o={},spinnerStyle:s={},noMargin:n}=e;return(0,l.jsx)("div",{style:{...o,textAlign:t?"center":"auto"},className:"spinner-holder ".concat(i?"screen-centered":""," ").concat(n?"spinner-holder-no-margin":""),children:(0,l.jsx)("div",{style:s,className:"spinner"})})};var Lt=i(8039),Rt=i(6508),Bt=i(309),At=i(8364),Wt=i(1504),Vt=i(3702);const Nt=(0,Vt.ZP)({overrides:{MuiPopover:{root:{zIndex:"1402!important"}},MuiSelect:{root:{"&:$focus":{border:"2px solid #19ab7f !important"}}},MuiInput:{underline:{"&:after":{borderBottomColor:"#19ab7f !important"},"&:before":{borderBottomColor:"#ffffff !important"}}},MuiFormLabel:{root:{"&$focused":{color:"#19ab7f !important"}},focused:{}},MuiIconButton:{colorSecondary:{"&:hover":{backgroundColor:"rgba(27, 215, 65, 0.04)"}}},MuiCheckbox:{colorSecondary:{color:"#19ab7f !important"}},MuiChecked:{root:{"&:$hover":{backgroundColor:"#transparent !important"}}},MuiTypography:{root:{fontSize:"0.875rem !important"}},MuiListItemText:{root:{margin:"0 !important",textAlign:"center"}},MuiMenu:{paper:{maxHeight:"50vh"}}}});var Et=i(7664);class zt extends o.Component{constructor(e){super(e),this.handleSelectChange=e=>{"Other..."===e.target.value?this.state.showInputBox||(this.inputRef.current.focus(),e.target.value="",this.setState({showInputBox:!0,inputValue:"",selectValue:this.props.item.options[this.props.item.options.length-1]},(()=>this.props.handleChange(this.props.item)(e)))):this.setState({showInputBox:!1},(()=>this.handleChangeSelect(e)))},this.onInputChange=()=>e=>this.handleChangeInput(e),this.handleChangeInput=e=>{e.persist(),this.setState({inputValue:e.target.value},(()=>this.props.handleChange(this.props.item)(e)))},this.handleChangeSelect=e=>{e.persist(),this.setState({selectValue:e.target.value},(()=>this.props.handleChange(this.props.item)(e)))},this.state={selectValue:e.item.options.find((t=>t===e.item.value))||""===e.item.value?e.item.value:e.item.options[e.item.options.length-1],inputValue:e.item.options.find((t=>t===e.item.value))||""===e.item.value?"":e.item.value||"",showInputBox:!e.item.options.find((t=>t===e.item.value))&&""!==e.item.value},this.inputRef=o.createRef(),this.handleSelectChange=this.handleSelectChange.bind(this),this.onInputChange=this.onInputChange.bind(this),this.handleChangeInput=this.handleChangeInput.bind(this),this.handleChangeSelect=this.handleChangeSelect.bind(this)}render(){return(0,l.jsx)(Et.Z,{theme:Nt,children:(0,l.jsxs)("div",{children:[(0,l.jsx)(Wt.Z,{style:{width:"50%",border:"1px solid #e2e7f1"},children:(0,l.jsx)(Bt.Z,{MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}},labelId:"select-device-label",value:this.state.selectValue,renderValue:e=>(0,l.jsx)(Rt.Z,{children:e}),onChange:e=>this.handleSelectChange(e),children:this.props.item.options.map((e=>(0,l.jsxs)(At.Z,{value:e,children:[(0,l.jsx)(Lt.Z,{checked:e===this.state.selectValue,style:{visibility:e===this.state.selectValue?"visible":"hidden"}}),(0,l.jsx)(Rt.Z,{children:e})]},e)))})}),(0,l.jsx)(ut,{formGroupRef:this.inputRef,formGroupStyle:{width:"50%",display:this.state.showInputBox?"block":"none"},placeholder:"Type name",value:this.state.inputValue,error:this.props.item.error,onChange:this.onInputChange})]})})}}const Ht=zt;class Gt extends o.Component{constructor(e){super(e),this.onChange=e=>{e.persist(),this.setState({value:e.target.value},(()=>this.props.handleChange(this.props.item)(e)))},this.resetValue=()=>{this.setState({value:""})},this.state={value:e.item.value},this.onChange=this.onChange.bind(this),this.resetValue=this.resetValue.bind(this)}render(){return(0,l.jsx)(Et.Z,{theme:Nt,children:(0,l.jsx)("div",{children:(0,l.jsx)(Wt.Z,{style:{width:this.props.fullWidth?"100%":"50%",border:"1px solid #e2e7f1"},children:(0,l.jsx)(Bt.Z,{MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}},labelId:"select-device-label",defaultValue:"",value:this.state.value,renderValue:e=>(0,l.jsx)(Rt.Z,{children:e.name||e}),onChange:e=>this.onChange(e),children:this.props.item.options.map((e=>(0,l.jsxs)(At.Z,{value:e,children:[(0,l.jsx)(Lt.Z,{checked:(e.value||e)===(this.state.value.value||this.state.value),style:{visibility:(e.value||e)===(this.state.value.value||this.state.value)?"visible":"hidden"}}),(0,l.jsx)(Rt.Z,{children:e.name||e})]},e.value||e)))})})})})}}const Ut=Gt;var qt=i(4312);const Yt=(0,Vt.ZP)({overrides:{MuiSwitch:{switchBase:{color:"#fff","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)!important"}},colorSecondary:{"&$checked":{color:"#19ab7f","&:hover":{backgroundColor:"rgba(27, 215, 65, 0.04)!important"}}},track:{"$checked$checked + &":{opacity:.7,backgroundColor:"#19ab7f"}}},MuiSlider:{root:{color:"#19ab7f"}}}});class Kt extends o.Component{render(){return(0,l.jsxs)("div",{className:"map-onhover-dropdown-list-options-container",children:[(0,l.jsx)("div",{className:"bolded-title",children:"STYLES"}),this.props.mapStyles.map((e=>(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{children:e.name}),(0,l.jsx)("div",{children:(0,l.jsx)(Et.Z,{theme:Yt,children:(0,l.jsx)(qt.Z,{checked:this.props.selectedMapStyle===e.value,onChange:this.props.switchLayer(e.value)})})})]},e.value)))]})}}const Xt=Kt;var Zt=i(9675);class Jt extends o.PureComponent{constructor(){super(),this.state={mapConstructed:!1},this.reactMapboxGlMap=null}componentDidMount(){this.reactMapboxGlMap=(0,Zt.ZP)({accessToken:"pk.eyJ1Ijoic2xhdmVuZGFtIiwiYSI6ImNrZ3pudHFxZzE1ZHoycnIxOXEzMndidTEifQ.sKPryHAJXxnH32c2W0HPsQ",preserveDrawingBuffer:this.props.preserveDrawingBuffer}),this.setState({mapConstructed:!0})}render(){if(this.state.mapConstructed){const e=this.reactMapboxGlMap;return(0,l.jsx)(e,{style:this.props.mapStyle,center:this.props.center,zoom:this.props.zoom,minZoom:this.props.minZoom,maxZoom:this.props.maxZoom,onClick:this.props.onClick,onZoom:this.props.onZoom,onZoomStart:this.props.onZoomStart,onZoomEnd:this.props.onZoomEnd,onPitchStart:this.props.onPitchStart,onPitchEnd:this.props.onPitchEnd,children:this.props.children})}return null}}const Qt=Jt;var $t=i(3693);class ei extends o.Component{constructor(){super(),this.handleYesClick=()=>{const e=this.props.statePropertyName;this.props.setChoice({[e]:!0},(()=>{this.props.userChoice()}))},this.handleOkClick=()=>{const e=this.props.statePropertyName;this.props.setChoice({[e]:!1},(()=>{this.props.userChoice&&this.props.userChoice()}))},this.handleNoClick=()=>{const e=this.props.statePropertyName;this.props.setChoice({[e]:!1},(()=>{this.props.userChoice&&this.props.userChoice()}))},this.handleYesClick=this.handleYesClick.bind(this),this.handleNoClick=this.handleNoClick.bind(this),this.handleOkClick=this.handleOkClick.bind(this)}render(){const{message:e,visible:t,loading:i,loadingText:s,singleButton:n,type:a,error:r,buttonGreenText:h,buttonCancelText:c}=this.props;return t?(0,l.jsx)("div",{className:"popup-disable-background",children:(0,l.jsx)("div",{className:"popup-container",style:this.props.containerStyle||{},children:this.props.children?this.props.children:(0,l.jsxs)(o.Fragment,{children:[r?(0,l.jsx)("div",{className:"popup-icon-container",children:(0,l.jsx)(Ze.Z,{className:"popup-alert-icon"})}):1===a?n&&!i?(0,l.jsx)("div",{className:"popup-icon-container",children:(0,l.jsx)($t.Z,{className:"popup-success-icon"})}):n?null:(0,l.jsx)("div",{className:"popup-icon-container",children:(0,l.jsx)(Ze.Z,{className:"popup-alert-icon"})}):2===a?(0,l.jsx)("div",{className:"popup-icon-container",children:(0,l.jsx)(Ze.Z,{className:"popup-alert-icon"})}):3===a?(0,l.jsx)("div",{className:"popup-icon-container",children:(0,l.jsx)(tt.Z,{className:"popup-alert-icon"})}):void 0,i?(0,l.jsxs)(o.Fragment,{children:[s?(0,l.jsx)("div",{className:"popup-message",children:s}):null,(0,l.jsx)(Mt,{center:!0})]}):(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{className:"popup-message",children:r||e}),(0,l.jsx)("div",{className:"popup-button-container",children:(()=>n?(0,l.jsx)(Ge,{type:"primary",onClick:this.handleOkClick,children:"OK"}):n||1!==a?n||2!==a?null:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(Ge,{type:"popup-delete",onClick:this.handleYesClick,children:"Delete"}),(0,l.jsx)(Ge,{type:"popup-cancel",onClick:this.handleNoClick,children:"Cancel"})]}):(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(Ge,{type:"primary",style:{borderRadius:"0.75rem"},onClick:this.handleYesClick,children:h||"Confirm"}),(0,l.jsx)(Ge,{type:"popup-cancel",onClick:this.handleNoClick,children:c||"Cancel"})]}))()})]})]})})}):null}}class ti extends o.Component{render(){return(0,l.jsxs)("div",{style:{position:"relative"},children:[(0,l.jsx)("span",{style:{visibility:"hidden"},children:this.props.longText}),(0,l.jsx)("div",{style:{position:"absolute",left:0,top:0},children:(0,l.jsx)("span",{children:this.props.shortText})})]})}}const ii=ti;class oi extends o.Component{render(){return(0,l.jsxs)("div",{className:"label form-control info-label",children:[(0,l.jsx)("span",{children:this.props.labelText}),(0,l.jsx)(st,{infoText:this.props.infoText,explanationInfoBoxStyles:{top:20,left:0,width:150,zIndex:2}})]})}}const si=oi;var ni=i(4006);class ai extends o.Component{constructor(){super(),this.setTimeoutCallback=e=>{this.state.setVisibleCounter===e&&this.mounted&&this.setState({visible:!1,setVisibleCounter:this.state.setVisibleCounter+1})},this.showAlert=(e,t)=>{const i=this.state.setVisibleCounter+1;this.setState({visible:!0,alertMessage:e,alertType:t,setVisibleCounter:i},(()=>{void 0!==this.props.delay?this.containerRef.current.animate([{opacity:0,offset:0},{opacity:1,offset:.1},{opacity:1,offset:.9},{opacity:0,offset:.91}],this.props.delay):this.containerRef.current.style.opacity=1})),void 0!==this.props.delay&&setTimeout(this.setTimeoutCallback.bind(this,i),this.props.delay)},this.hideAlert=()=>this.setState({visible:!1}),this.state={visible:!1,setVisibleCounter:0,alertType:null,alertMessage:null},this.containerRef=o.createRef(),this.showAlert=this.showAlert.bind(this),this.hideAlert=this.hideAlert.bind(this),this.setTimeoutCallback=this.setTimeoutCallback.bind(this),this.mounted=!1}componentWillUnmount(){this.mounted=!1}componentDidMount(){this.mounted=!0}render(){return this.state.visible?(0,l.jsxs)("div",{ref:this.containerRef,className:"alert ".concat("error"===this.state.alertType?"alert-error":""," ").concat("success"===this.state.alertType?"alert-success":""," ").concat("warning"===this.state.alertType?"alert-warning":""),style:this.props.style?{...this.props.style,animationDuration:void 0!==this.props.delay?this.props.delay+"ms":"auto"}:{animationDuration:void 0!==this.props.delay?this.props.delay+"ms":"auto"},children:[(0,l.jsx)("p",{children:this.state.alertMessage}),(0,l.jsx)("div",{className:"svg-center-inside-container alert-close",onClick:()=>this.setState({visible:!1,setVisibleCounter:this.state.setVisibleCounter+1}),children:(0,l.jsx)(ni.Z,{})})]}):null}}const ri=ai;var li=i(1317);class hi extends o.Component{constructor(){super(),this.callErrorLogAPI=e=>{let t,i;if(t=window._env_.floorplanID,i=window._env_.licenseKey,li.log("callErrorLogAPI",e,t,i),t&&i){!0&&C.post.call(this,"/klet3d/error/".concat(t,"/").concat(i),{error:e},(e=>{li.log("Error logged succesfully",e)}))}},this.windowErrorEventHandler=(e,t,i,o,s)=>{this.callErrorLogAPI(JSON.stringify({message:e.message,source:t,lineno:i,colno:o,error:JSON.stringify(s)}))},this.windowUnhandledRejectionEventHandler=e=>{this.callErrorLogAPI(JSON.stringify({message:e.reason.message,stack:e.reason.stack}))},this.state={responseError:null},this.mounted=!1,this.callErrorLogAPI=this.callErrorLogAPI.bind(this),this.windowErrorEventHandler=this.windowErrorEventHandler.bind(this),this.windowUnhandledRejectionEventHandler=this.windowUnhandledRejectionEventHandler.bind(this)}componentDidCatch(e,t){this.callErrorLogAPI(JSON.stringify({error:JSON.stringify(e),errorInfo:t}))}componentDidMount(){this.mounted=!0,window.addEventListener("error",this.windowErrorEventHandler),window.addEventListener("unhandledrejection",this.windowUnhandledRejectionEventHandler)}componentWillUnmount(){this.mounted=!1,window.removeEventListener("error",this.windowErrorEventHandler),window.removeEventListener("unhandledrejection",this.windowUnhandledRejectionEventHandler)}render(){return(0,l.jsx)(et,{responseError:this.state.responseError,children:this.props.children})}}const ci=hi;var di=i(4916);const pi=[...[{field:"gps_lat",label:"Floorplan latitude",placeholder:"e.g. 43.5079",validate:e=>z.isEmpty(e)||z.isGpsCoordinate(e,"gps_lat"),isGpsCoord:!0},{field:"gps_long",label:"Floorplan longitude",placeholder:"e.g. 16.43699",validate:e=>z.isEmpty(e)||z.isGpsCoordinate(e,"gps_long"),isGpsCoord:!0}],{field:"bearing_angle",label:"Floorplan bearing(\xb0)",placeholder:"e.g. 45\xb0",validate:e=>z.isEmpty(e)||z.isNumber(e),defaultValue:0}],mi=[{name:"Light",value:"light-v8"},{name:"Satellite",value:"satellite-v9"},{name:"Outdoors",value:"outdoors-v9"},{name:"3D Terrain",value:"TERRAIN"},{name:"3D Buildings",value:"BUILDINGS"},{name:"Dark",value:"dark-v10"}];const ui=class{constructor(){this.hover=!1,this.selected=!1,this.highlighted=!1,this.emissiveColor=4473924,this.defaultEmissiveColor=0}updateMeshHighlight(){const e=this.hover||this.selected;this.highlighted=e;const t=e?this.emissiveColor:this.defaultEmissiveColor;this.mesh.traverse((i=>{if(i instanceof Ne.Kj0){(i.material.isMaterial?[i.material]:i.material).forEach((i=>{i.emissive?i.emissive.setHex(t):this.mesh.textColor&&!e?i.color.setHex(this.mesh.textColor.getHex()):i.color.setHex(t)}))}}))}mouseOver(){this.hover=!0,this.updateMeshHighlight()}mouseOff(){this.hover=!1,this.updateMeshHighlight()}setSelected(){this.selected=!0,this.updateMeshHighlight()}setUnselected(){this.selected=!1,this.updateMeshHighlight()}customIntersectionPlanes(){return[]}};const gi=class{constructor(){this.name="DefaultAnimationName",this.clock=new Ne.SUY,this.running=!1}start(){throw new Error("Method start of class that implements interface Animation must be implemented")}stop(){throw new Error("Method stop of class that implements interface Animation must be implemented")}animate(){throw new Error("Method animate of class that implements interface Animation must be implemented")}remove(){throw new Error("Method remove of class that implements interface Animation must be implemented")}};var fi=i(1317);const bi=class extends ui{constructor(e,t,i,o,s,n,a,r){let l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];if(super(),this.animations=[],this.scene=e,this.errorGlow=new Ne.Kj0,this.error=!1,this.originalMaterialColors=[],this.paintedMaterialColors=[],this.customMaterialTextures=[],this.errorColor=16711680,this.highlightedColor=null,this.highlightEntitiesColorOn=2600544,this.highlightEntitiesColorOff=12597547,this.highlightEntitiesColorClickable=2719929,this.allowRotate="lightSource"!==s,this.disabled=!1,this.fixed=r.fixed||!1,this.resizable=r.resizable||!1,this.dragOffset=new Ne.Pa4,this.position=new Ne.Pa4,this.scale=new Ne.Pa4,this.meshPositionOffsetFromCenter=new Ne.Pa4(0,0,0),this.loadedObjectPositionOffsetFromCenter=new Ne.Pa4(0,0,0),this.loadedObjectSizeVector=new Ne.Pa4,this.initialHalfSize=new Ne.Pa4,this.rotation=0,this.rotateLastAngle=0,this.floorNumber=n,this.itemStartHeight=a.props.mainComponentThis.getFloorStartElevation(this.floorNumber,!0),this.floorplan3DThis=a,this.objectType=s,this.objects3DArray=t,this.object3DProperties=i,this.object2D=o,this.object2DPositionTolerance=Math.pow(10,-8),this.meshScaleXSign=this.calculateMeshScaleXSign(),Zi.includes(this.objectType)&&(this.meshScaleXSign*=-1),this.meshScaleYSign=1,this.meshScaleZSign=Xi.includes(this.objectType)?-1:1,this.sceneTransformedCalled=!1,this.debugMode=l,"lightSource"===this.objectType){const e=20,t=new Ne.xo$(e,32,15),i=new Ne.xoR({emissive:this.floorplan3DThis.lightSourceLightSphereMaterialColor});this.mesh=new Ne.Kj0(t,i)}else{const{object:e}=this.objects3DArray.find((e=>e.floorplanItemType===this.objectType)),t=e.deepClone();this.mesh=t,this.loadedObjectPositionOffsetFromCenter=this.position.clone().sub(this.getMeshCenter()),this.meshPositionOffsetFromCenter=this.loadedObjectPositionOffsetFromCenter.clone()}this.mesh.isFloorplanItem=!0,this.mesh.itemObject=this,(new Ne.ZzF).setFromObject(this.mesh).getSize(this.loadedObjectSizeVector);for(let d in this.object3DProperties)this.mesh[d]=this.object3DProperties[d];this.initialHalfSize=this.meshHalfSize(),this.halfSize=this.initialHalfSize.clone();let h=this.itemStartHeight/this.floorplan3DThis.scaleFactor;O(this.object2D.additionalParams.positionY)||(h+=this.object2D.additionalParams.positionY+this.object2D.additionalParams.height3D/2);const c=new Ne.Pa4(this.object2D.x,h,this.object2D.y).multiplyScalar(this.floorplan3DThis.scaleFactor);if(this.setItemPosition(c),this.debugMode){const e=new Ne.xo$(5,32,15),t=new Ne.vBJ({color:16776960}),i=new Ne.Kj0(e,t);i.position.set(c.x,c.y,c.z),this.scene.add(i)}this.position_set=!0,this.floorplan3DThis.props.mainComponentThis.isLightObject(this.objectType)&&(this.mesh.light=new Ne.Tme),this.scene===this.floorplan3DThis.floorplan3DOnMapScene&&document.addEventListener("sceneTransformed",(e=>this.onSceneTransformed(e)),{once:!0}),this.mesh.traverse((e=>{if(e instanceof Ne.Kj0){(e.material.isMaterial?[e.material]:e.material).forEach(((t,i)=>{this.originalMaterialColors.push({meshName:e.name,materialIndex:i,color:t.color.getHex(),map:t.map})}))}}))}getPartColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const o=this.originalMaterialColors.filter((e=>t===e.meshName)),s=this.paintedMaterialColors.filter((e=>t===e.meshName));let n;return"default"===e&&(n=s.length>0?s:o),"original"===e&&(n=o),"painted"===e&&(n=s||null),n?i?n[0].color:n:null}setPartColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=!this.highlightedColor&&["default","original","painted"].includes(e),s=this.highlightedColor?this.highlightedColor:o?this.getPartColor(e,t,!1):e;this.mesh.traverse((n=>{if(n instanceof Ne.Kj0&&n.name===t){(n.material.isMaterial?[n.material]:n.material).forEach(((n,a)=>{const r=o?s.find((e=>e.materialIndex===a)).color:s;"original"===e||"default"===e&&!this.paintedMaterialColors.find((e=>t===e.meshName))?(n.flatShading=!1,i&&(n.map=this.originalMaterialColors.find((e=>t===e.meshName&&e.materialIndex===a)).map)):(n.flatShading=!0,i&&(n.map=null)),n.color.setHex(r),n.needsUpdate=!0}))}}))}setAllPartsColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";this.mesh.traverse((t=>{t instanceof Ne.Kj0&&this.setPartColor(e,t.name)}))}setCustomTexture(e,t,i){if(e instanceof Ne.xEZ===!1)throw new Error("Invalid texture provided");this.mesh.traverse((o=>{if(o instanceof Ne.Kj0&&o.name===t){(o.material.isMaterial?[o.material]:o.material).forEach(((o,s)=>{o.map=e,o.color=new Ne.Ilk(16777215),o.needsUpdate=!0;const n=this.customMaterialTextures.find((e=>e.meshName===t&&e.materialIndex===s));n?n.map=e:this.customMaterialTextures.push({textureName:i,meshName:t,materialIndex:s,map:e})}))}}))}setCustomTextureByName(e,t){const i="https://app.klet3d.com/textures//".concat(e,".png"),o=this.floorplan3DThis.loadedTextures.find((t=>t.name===e));o?this.setCustomTexture(o.textureData,t,e):this.floorplan3DThis.textureLoader.load(i,(i=>{this.floorplan3DThis.loadedTextures.push({name:e,textureData:i}),this.setCustomTexture(i,t,e)}),void 0,(e=>{fi.error("Error loading texture:",e)}))}isPartUVUnwrapped(e){return void 0!==this.mesh.getObjectByName(e).geometry.attributes.uv}removeCustomTexture(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.mesh.traverse((i=>{if(i instanceof Ne.Kj0&&i.name===e){(i.material.isMaterial?[i.material]:i.material).forEach(((o,s)=>{const n=this.originalMaterialColors.find((e=>e.meshName===i.name&&e.materialIndex===s));if(n&&(o.color.setHex(n.color),o.map=n.map,o.needsUpdate=!0,t)){const t=this.customMaterialTextures.findIndex((t=>t.meshName===e&&t.materialIndex===s));-1!==t&&this.customMaterialTextures.splice(t,1)}}))}}))}restoreCustomTexture(e){const t=this.customMaterialTextures.find((t=>t.meshName===e));return t?(this.setCustomTexture(t.map,e),t.textureName):(this.setPartColor("original",e),null)}setPaintedColor(e,t){this.setPartColor(e,t);const i=this.paintedMaterialColors.filter((e=>e.meshName===t));if(i.length>0)i.forEach((t=>t.color=e));else{const i=this.mesh.getObjectByName(t);if(i instanceof Ne.Kj0){(i.material.isMaterial?[i.material]:i.material).forEach(((i,o)=>{this.paintedMaterialColors.push({meshName:t,materialIndex:o,color:e})}))}}}removePaintedColor(e){const t=this.paintedMaterialColors.length;this.paintedMaterialColors=this.paintedMaterialColors.filter((t=>t.meshName!==e)),this.paintedMaterialColors.length!==t&&this.setPartColor("original",e)}calculateMeshScaleXSign(){return this.floorplan3DThis.props.mainComponentThis.isDoorObject(this.objectType)&&"reverse"===this.object2D.hinge||this.floorplan3DThis.props.mainComponentThis.isFurnitureObject(this.objectType)&&this.object2D.additionalParams.mirrored?-1:1}recalculateMeshScaleXSign(){this.meshScaleXSign=this.calculateMeshScaleXSign()}initObject(){if("lightSource"===this.objectType)this.resize(this.loadedObjectSizeVector.x/this.floorplan3DThis.scaleFactor,this.loadedObjectSizeVector.y/this.floorplan3DThis.scaleFactor,this.loadedObjectSizeVector.z/this.floorplan3DThis.scaleFactor);else{this.resize(this.object2D.additionalParams.width3D,this.object2D.additionalParams.height3D,this.object2D.additionalParams.depth3D);const e=this.object2D.additionalParams.materials;e&&this.mesh.traverse((t=>{const i=e.find((e=>e.meshName===t.name));if(i)if("color"===i.type&&i.color){const e=parseInt(i.color.split("#").at(-1),16);this.setPaintedColor(e,t.name)}else"texture"===i.type&&i.textureName&&this.setCustomTextureByName(i.textureName,t.name)}))}this.rotateItem(R(this.object2D.angle),-1),this.rotateLastAngle=-R(this.object2D.angle);let e=this.getItemCenter();if("onWall"===this.object2D.family){const t=1===this.object2D.angleSign?-1:1,i=t*(this.object2D.additionalParams.onWallThick/2+this.object2D.additionalParams.depth3D/2)*Math.sin(this.object2D.additionalParams.onWallAngle)*this.floorplan3DThis.scaleFactor,o=-t*(this.object2D.additionalParams.onWallThick/2+this.object2D.additionalParams.depth3D/2)*Math.cos(this.object2D.additionalParams.onWallAngle)*this.floorplan3DThis.scaleFactor;e.x=this.object2D.x*this.floorplan3DThis.scaleFactor+i,e.z=this.object2D.y*this.floorplan3DThis.scaleFactor+o,this.floorplan3DThis.props.mainComponentThis.isLightObject(this.objectType)&&this.mesh.light.position.set(this.mesh.position.x,this.mesh.position.y,this.mesh.position.z)}if(this.setItemPosition(e),this.placeInRoom(),this.floorplan3DThis.isFloorHidden(this.floorNumber)&&(this.mesh.visible=!1),this.scene.add(this.mesh),this.floorplan3DThis.props.mainComponentThis.isLightObject(this.objectType)&&(this.scene.add(this.mesh.light),this.debugMode)){const e=new Ne.xG9(this.mesh.light,20,16711680);this.scene.add(e)}this.scene.needsUpdate=!0}setItemPosition(e,t){(t=t||this.mesh)===this.mesh&&1===this.floorplan3DThis.props.mainComponentThis.getObjectItemType(this.objectType)&&(e.y=this.itemStartHeight+(this.object2D.additionalParams.positionY+this.object2D.additionalParams.height3D/2)*this.floorplan3DThis.scaleFactor);const i=e.clone().add(this.getItemMeshRotatedPositionOffsetFromCenter());if(t.position.set(i.x,i.y,i.z),t===this.mesh)if(this.position.copy(i),"onWall"!==this.object2D.family&&"inWall"!==this.object2D.family){const t=e.x/this.floorplan3DThis.scaleFactor-this.object2D.x,i=e.z/this.floorplan3DThis.scaleFactor-this.object2D.y;Math.abs(t)>this.object2DPositionTolerance&&(this.object2D.x+=t),Math.abs(i)>this.object2DPositionTolerance&&(this.object2D.y+=i),this.object2D.update(this.floorplan3DThis.props.mainComponentThis)}else if(!this.boundToFloor){const t=this.floorplan3DThis.props.mainComponentThis.convertSvgToValueUnits((e.y-this.itemStartHeight)/this.floorplan3DThis.scaleFactor-this.object2D.additionalParams.height3D/2);this.object2D.additionalParams.positionY=this.floorplan3DThis.props.mainComponentThis.convertValueToSvgUnits(t),this.floorplan3DThis.props.mainComponentThis.activeItemPositionsRef.current&&this.floorplan3DThis.props.mainComponentThis.activeItemPositionsRef.current.setPositionYInputValues(t)}this.floorplan3DThis.props.mainComponentThis.isLightObject(this.objectType)&&this.mesh.light&&this.mesh.light.position.set(e.x,e.y,e.z)}rotateItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i=i||this.mesh,"onWall"===this.object2D.family&&(e+=R(this.object2D.params.onWallOffsetAngle));let s=e*=t;i===this.mesh&&(s=e-this.rotation);const n=i===this.mesh?this.getItemCenter():this.getMeshCenter(i);if(this.floorplan3DThis.rotateAroundPoint(i,n,new Ne.Pa4(0,1,0),s),i===this.mesh&&(this.rotation=e,this.position=n.add(this.getItemMeshRotatedPositionOffsetFromCenter())),this.floorplan3DThis.props.mainComponentThis.isWindowObject(this.objectType)&&!o)if(this.object2D.angleSign!==this.object2D.additionalParams.arrowControlPointAngleSign){let e=R(this.object2D.angle);0===this.object2D.angleSign&&1===this.object2D.additionalParams.arrowControlPointAngleSign?e+=Math.PI:e-=Math.PI,this.rotateItem(e,-1,this.mesh,!0)}else this.rotateItem(R(this.object2D.angle),-1,this.mesh,!0)}remove(){this.floorplan3DThis.props.mainComponentThis.isLightObject(this.objectType)&&(this.mesh.light instanceof Ne.PMe&&(this.scene.remove(this.mesh.light.target),this.floorplan3DThis.disposeObject(this.mesh.light.target)),this.scene.remove(this.mesh.light),this.floorplan3DThis.disposeObject(this.mesh.light));let e=[this.mesh];this.error&&e.push(this.errorGlow),e.forEach((e=>{this.scene.remove(e),this.floorplan3DThis.disposeObject(e)})),this.stopAllAnimations(),this.removed()}resize(e,t,i){const o=new Ne.Pa4(e/this.loadedObjectSizeVector.x,t/this.loadedObjectSizeVector.y,i/this.loadedObjectSizeVector.z).multiplyScalar(this.floorplan3DThis.scaleFactor);this.scale.set(this.meshScaleXSign*o.x,this.meshScaleYSign*o.y,this.meshScaleZSign*o.z);const s=this.getMeshCenter();this.mesh.scale.set(this.scale.x,this.scale.y,this.scale.z);const n=this.getMeshCenter(),a=s.sub(n);this.floorplan3DThis.translateObjectInWorld(this.mesh,a.x,a.y,a.z),this.position.copy(this.mesh.position),this.meshPositionOffsetFromCenter=this.loadedObjectPositionOffsetFromCenter.clone().multiply(this.scale),this.halfSize=this.initialHalfSize.clone().multiply(o),this.resized(),this.mesh.needsUpdate=!0}resizeByReferencePoint(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>this.getMeshCenter(this.mesh);const s=new Ne.Pa4(e/this.loadedObjectSizeVector.x,t/this.loadedObjectSizeVector.y,i/this.loadedObjectSizeVector.z).multiplyScalar(this.floorplan3DThis.scaleFactor),n=o();this.mesh.scale.set(this.meshScaleXSign*s.x,this.meshScaleYSign*s.y,this.meshScaleZSign*s.z),this.mesh.updateMatrixWorld(!0);const a=o(),r=(new Ne.Pa4).subVectors(n,a);this.mesh.position.add(r),this.mesh.updateMatrixWorld(!0),this.position.copy(this.mesh.position),this.meshPositionOffsetFromCenter=this.loadedObjectPositionOffsetFromCenter.clone().multiply(this.mesh.scale),this.halfSize=this.initialHalfSize.clone().multiply(s),this.mesh.needsUpdate=!0}rotateByEulerByReferencePoint(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>this.getMeshCenter(this.mesh);const o=(new Ne.Pa4).copy(i());t.setRotationFromEuler(e);const s=(new Ne.Pa4).copy(i()),n=(new Ne.Pa4).subVectors(o,s);t.position.add(n),t.updateMatrixWorld(!0),"function"===typeof this.rotated&&this.rotated(),t.needsUpdate=!0}clickPressed(e){this.dragOffset.copy(e.point).sub(this.position)}clickDragged(e,t){if(e){if(t){const t=e.point.clone().sub(this.dragOffset);this.moveToPosition(t.sub(this.getItemMeshRotatedPositionOffsetFromCenter()),e)}else this.moveToPosition(e.point,e);if(this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.isWallItem){const t=this.floorplan3DThis.getFloorplanViewSceneItem(this.object2D);if(t){const i={};i.point=e.point,i.object={};const o=this.floorplan3DThis.floorplanViewWalls3D.find((e=>e.wall2D.wallId===this.itemWall.wall3D.wall2D.wallId));i.object.wall3D=o,i.object.uuid=this.itemWall.wallPlane.planeObject.uuid===this.itemWall.wall3D.interiorWallPlane.planeObject.uuid?o.interiorWallPlane.planeObject.uuid:o.exteriorWallPlane.planeObject.uuid,t.moveToPosition(this.getItemCenter(),i)}}}}rotate(e){if(e){const t=this.getItemCenter();let i=this.floorplan3DThis.props.mainComponentThis.qSVG.angleBetweenLines(0,1,e.point.x-t.x,e.point.z-t.z);const o=Math.PI/16;for(let e=-4;e<=4;e++)if(Math.abs(i-e*(Math.PI/2))<o){i=e*(Math.PI/2);break}if(this.isValidRotation(i))this.hideError(),this.rotateItem(i),"onWall"!==this.object2D.family&&"inWall"!==this.object2D.family&&(this.object2D.angle=-j(B(i),0),this.floorplan3DThis.props.mainComponentThis.activeItemRotationsRef.current&&this.floorplan3DThis.props.mainComponentThis.activeItemRotationsRef.current.setRotationInputValues(this.object2D.angle),this.object2D.update(this.floorplan3DThis.props.mainComponentThis));else{this.error||(this.error=!0,this.errorGlow=this.createErrorGlow(this.errorColor,.8,!0),this.scene.add(this.errorGlow));const e=t.clone().add(this.getItemMeshRotatedPositionOffsetFromCenter(this.errorGlow));this.errorGlow.position.set(e.x,e.y,e.z),this.floorplan3DThis.rotateAroundPoint(this.errorGlow,t,new Ne.Pa4(0,1,0),i-this.rotateLastAngle)}this.rotateLastAngle=i}}moveToPosition(e){this.setItemPosition(e)}clickReleased(){this.rotateLastAngle=this.rotation,this.error&&this.hideError()}meshHalfSize(){const e=new Ne.ZzF;return e.setFromObject(this.mesh),e.max.clone().sub(e.min).divideScalar(2)}getXZCorners(){const e=new Ne.ZzF;e.setFromObject(this.mesh);const t=[new Ne.Pa4(e.min.x,e.min.y,e.min.z),new Ne.Pa4(e.max.x,e.min.y,e.min.z),new Ne.Pa4(e.min.x,e.max.y,e.min.z),new Ne.Pa4(e.min.x,e.min.y,e.max.z),new Ne.Pa4(e.max.x,e.max.y,e.min.z),new Ne.Pa4(e.max.x,e.min.y,e.max.z),new Ne.Pa4(e.min.x,e.max.y,e.max.z),new Ne.Pa4(e.max.x,e.max.y,e.max.z)],i=Pe(t.map((e=>new Ne.FM8(e.x,e.z))));return[{x:i.minX,y:i.minY},{x:i.minX,y:i.maxY},{x:i.maxX,y:i.minY},{x:i.maxX,y:i.maxY}]}getItemMeshRotatedPositionOffsetFromCenter(e){e=e||this.mesh;const t=new Ne.yGw;return t.makeRotationFromEuler(e.rotation),this.meshPositionOffsetFromCenter.clone().applyMatrix4(t)}getMeshCenter(e){e=e||this.mesh;const t=new Ne.Pa4;return(new Ne.ZzF).setFromObject(e).getCenter(t),this.sceneTransformedCalled&&this.floorplan3DThis.processSceneVec3(t),t}getMeshPoint(e,t){t=t||this.mesh,(e=e||{}).x=Math.max(-1,Math.min(1,e.x))||0,e.y=Math.max(-1,Math.min(1,e.y))||0,e.z=Math.max(-1,Math.min(1,e.z))||0;const i=t.clone();this.rotateByEulerByReferencePoint(new Ne.USm(0,0,0),i,(()=>this.getMeshCenter(i)));const o=(new Ne.ZzF).setFromObject(t),s=(new Ne.ZzF).setFromObject(i),n=new Ne.Pa4;s.getCenter(n);const a=new Ne.Pa4;s.getSize(a),n.x=s.min.x+(e.x+1)/2*a.x,n.y=s.min.y+(e.y+1)/2*a.y,n.z=s.min.z+(e.z+1)/2*a.z;const r=new Ne.Pa4;return o.getCenter(r),n.sub(r),n.applyQuaternion(t.quaternion),n.add(r),n}getItemCenter(){return this.position.clone().sub(this.getItemMeshRotatedPositionOffsetFromCenter())}showError(e){e=e||this.getItemCenter(),this.error||(this.error=!0,this.errorGlow=this.createErrorGlow(this.errorColor,.8,!0),this.scene.add(this.errorGlow)),this.setItemPosition(e,this.errorGlow)}hideError(){this.error&&(this.error=!1,this.scene.remove(this.errorGlow))}createErrorGlow(e,t,i){i=i||!1,t=t||.2;const o=new Ne.vBJ({color:e,blending:Ne.WMw,opacity:.2,transparent:!0,depthTest:!i}),s=this.mesh.deepClone();return s.traverse((e=>{e instanceof Ne.Kj0&&(e.material.isMaterial?(e.material=o,e.material.needsUpdate=!0):(e.material=e.material.map((()=>o)),e.material.needsUpdate=!0))})),s.position.copy(this.position),s.scale.copy(this.scale),s}placeInRoom(){}resized(){}removed(){}isValidPosition(){return!0}isValidRotation(){return!0}onSceneTransformed(){this.sceneTransformedCalled=!0}stopAllAnimations(){this.animations.forEach((e=>{e instanceof gi&&e.stop()}))}removeAllAnimations(){this.stopAllAnimations(),this.animations.forEach((e=>{e instanceof gi&&e.remove()})),this.animations=[]}addAnimation(e){return this.animations.push(e),e}setMaterialOpacity(e){this.mesh.traverse((t=>{if(t instanceof Ne.Kj0){(t.material.isMaterial?[t.material]:t.material).forEach((t=>{t.transparent=e<1,t.opacity=e,t.visible=0!==e,t.needsUpdate=!0}))}}))}getMaterialOpacity(){let e=1;return this.mesh.traverse((t=>{t instanceof Ne.Kj0&&(e=t.material.isMaterial?t.material.opacity:t.material[0].opacity)})),e}setHighlightColor(e){this.highlightedColor=e,this.setAllPartsColor(e)}highlightOnColor(){this.setHighlightColor(this.highlightEntitiesColorOn)}highlightOffColor(){this.setHighlightColor(this.highlightEntitiesColorOff)}highlightClickableColor(){this.setHighlightColor(this.highlightEntitiesColorClickable)}resetHighlightColor(){this.highlightedColor=null,this.setAllPartsColor("default")}unrenderLight(){this.mesh.light&&(this.mesh.light instanceof Ne.PMe&&(this.scene.remove(this.mesh.light.target),this.floorplan3DThis.disposeObject(this.mesh.light.target)),this.scene.remove(this.mesh.light),this.floorplan3DThis.disposeObject(this.mesh.light))}renderLight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"spot",t=arguments.length>1?arguments[1]:void 0;if(!t)if("spot"===e)t={spotAngle:45,spotDistance:1e3};else t={};if("point"===e&&!(this.mesh.light instanceof Ne.cek)||"spot"===e&&!(this.mesh.light instanceof Ne.PMe)){if(this.unrenderLight(),"spot"===e){this.mesh.light=this.floorplan3DThis.createSpotLight(this.position,this.floorNumber,t);const e=this.getItemCenter();this.setItemPosition(e),this.mesh.light.target.position.set(e.x,e.y-100,e.z),this.scene.add(this.mesh.light.target)}else{this.mesh.light=this.floorplan3DThis.createPointLight(this.position,this.floorNumber);let e=this.getItemCenter();this.setItemPosition(e)}this.scene.add(this.mesh),this.scene.add(this.mesh.light),this.mesh.needsUpdate=!0,this.mesh.light.needsUpdate=!0}else if("spot"===e){const e=t.spotAngle;R(e)!==this.mesh.light.angle&&(this.mesh.light.angle=R(e),this.mesh.light.needsUpdate=!0);const i=t.spotDistance;this.mesh.light&&i!==this.mesh.light.distance&&(this.mesh.light.distance=i,this.mesh.light.needsUpdate=!0)}}};const wi=class extends bi{constructor(e,t,i,o,s,n,a,r){super(e,t,i,o,s,n,a,r)}placeInRoom(){}resized(){const e=this.getItemCenter();this.setItemPosition(new Ne.Pa4(e.x,this.halfSize.y+this.itemStartHeight,e.z))}moveToPosition(e){if(!this.isValidPosition(e))return e.y=this.halfSize.y+this.itemStartHeight,void this.showError(e);this.hideError(),e.y=this.halfSize.y+this.itemStartHeight,this.setItemPosition(e)}isValidPosition(e){const t=this.floorplan3DThis.floorplanFloors.find((e=>e.floorNumber===this.floorNumber)).wallData;return!!this.floorplan3DThis.props.mainComponentThis.floorFreeObjectPositionValidation(new Ne.FM8(e.x,e.z).divideScalar(this.floorplan3DThis.scaleFactor),t,this.halfSize.x/this.floorplan3DThis.scaleFactor,this.halfSize.z/this.floorplan3DThis.scaleFactor,-B(this.rotation))}isValidRotation(e){const t=this.floorplan3DThis.floorplanFloors.find((e=>e.floorNumber===this.floorNumber)).wallData,i=this.getItemCenter();return this.floorplan3DThis.props.mainComponentThis.floorFreeObjectPositionValidation(new Ne.FM8(i.x,i.z).divideScalar(this.floorplan3DThis.scaleFactor),t,this.halfSize.x/this.floorplan3DThis.scaleFactor,this.halfSize.z/this.floorplan3DThis.scaleFactor,-B(e))}};const Ci=class extends bi{constructor(e,t,i,o,s,n,a,r){super(e,t,i,o,s,n,a,r),this.allowRotate=!1,this.wallOffsetScalar=0,this.isWallItem=!0,this.itemWall=null,this.floorWallsData=this.floorplan3DThis.floorplanFloors.find((e=>e.floorNumber===this.floorNumber)).wallData,this.walls3DArray=this.scene===this.floorplan3DThis.floorplan3DOnMapScene?this.floorplan3DThis.currentWalls3D:this.floorplan3DThis.floorplanViewWalls3D}createItemWall(e,t){const i=new Ne.FM8(t.x,t.z).divideScalar(this.floorplan3DThis.scaleFactor),o=this.walls3DArray.find((t=>t.wall2D.wallId===e.wallId));return xe(i,o.interiorLineEquation).distance<xe(i,o.exteriorLineEquation).distance?{wall3D:o,wallPlane:o.interiorWallPlane}:{wall3D:o,wallPlane:o.exteriorWallPlane}}closestItemWall(){const e=this.getItemCenter(),t=new Ne.FM8(e.x,e.z).divideScalar(this.floorplan3DThis.scaleFactor),i=this.floorplan3DThis.props.mainComponentThis.editor.nearWall(t,this.floorWallsData);if(i){if(this.addToWall){const e=this.floorplan3DThis.props.mainComponentThis.isWindowObject(this.objectType)?this.object2D.additionalParams.arrowControlPointAngleSign:this.object2D.angleSign,t=this.walls3DArray.find((e=>e.wall2D.wallId===i.wall.wallId));return 1===e?{wall3D:t,wallPlane:t.exteriorWallPlane}:{wall3D:t,wallPlane:t.interiorWallPlane}}return this.createItemWall(i.wall,e)}return null}removed(){null!=this.itemWall&&(this.itemWall.wall3D.removeWallObject(this,this.addToWall?"inWall":"onWall"),this.addToWall&&this.redrawWall())}redrawWall(){this.addToWall&&this.itemWall&&this.itemWall.wall3D.redrawWallExteriorInteriorPlanes()}updateSize(){this.wallOffsetScalar=this.halfSize.z,this.sizeX=2*this.halfSize.x,this.sizeY=2*this.halfSize.y}resized(){this.updateSize();const e=this.getItemCenter();this.itemWall?(this.boundToFloor&&(e.y=this.halfSize.y),this.boundMove(e),e.y+=this.itemStartHeight,this.setItemPosition(e)):this.boundToFloor&&this.setItemPosition(new Ne.Pa4(e.x,this.halfSize.y+this.itemStartHeight,e.z)),this.redrawWall()}placeInRoom(){const e=this.closestItemWall();if(e){const t=this.getItemCenter();this.changeItemWall(t,t,e,!0),this.updateSize()}}moveToPosition(e,t){if(t){const i=t.object.wall3D.interiorWallPlane.planeObject.uuid===t.object.uuid?t.object.wall3D.interiorWallPlane:t.object.wall3D.exteriorWallPlane;this.changeItemWall(e,t.point,{wall3D:t.object.wall3D,wallPlane:i})}this.boundMove(e),e.y+=this.itemStartHeight,this.setItemPosition(e),this.redrawWall()}getWallOffset(e){return-1*e*this.wallOffsetScalar}changeItemWall(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new Ne.FM8(t.x,t.z).divideScalar(this.floorplan3DThis.scaleFactor),n=this.floorplan3DThis.props.mainComponentThis.editor.nearWall(s,this.floorWallsData);if(n){let a=!0;o&&this.position_set||(this.floorplan3DThis.props.mainComponentThis.inWallonWallObjectBinderJoinToWall(n.wall,n,s,this.object2D)?this.rotateItem(R(this.object2D.angle),-1):a=!1,e.x=this.object2D.x*this.floorplan3DThis.scaleFactor,e.z=this.object2D.y*this.floorplan3DThis.scaleFactor),a&&(null!=this.itemWall&&(this.addToWall?(this.itemWall.wall3D.removeWallObject(this,"inWall"),this.redrawWall()):this.itemWall.wall3D.removeWallObject(this,"onWall")),i.wall3D.wall2D.wallId===n.wall.wallId?this.itemWall=i:this.itemWall=this.createItemWall(n.wall,t),this.addToWall?(i.wall3D.addWallObject(this,"inWall"),this.redrawWall()):i.wall3D.addWallObject(this,"onWall"))}}customIntersectionPlanes(){let e=[];const t=this.walls3DArray.filter((e=>e.floorNumber===this.floorNumber));for(let i=0;i<t.length;i++)e.push(t[i].interiorWallPlane.planeObject),e.push(t[i].exteriorWallPlane.planeObject);return e}boundMove(e){const t=this.itemWall.wallPlane.planeObject.uuid===this.itemWall.wall3D.interiorWallPlane.planeObject.uuid;let i=t?this.itemWall.wall3D.interiorLineCoords:this.itemWall.wall3D.exteriorLineCoords;i=i.map((e=>new Ne.FM8(e.x,e.y)));const o=Ce(i[0],i[1])*this.floorplan3DThis.scaleFactor,{transform3Dto2DMatrix:s,transform2Dto3DMatrix:n}=this.itemWall.wall3D.calculateWallPlaneTransformMatrices(i[0].multiplyScalar(this.floorplan3DThis.scaleFactor),i[1].multiplyScalar(this.floorplan3DThis.scaleFactor));e.applyMatrix4(s),e.y-=this.itemStartHeight,e.x<this.sizeX/2+0?e.x=this.sizeX/2+0:e.x>o-this.sizeX/2-0&&(e.x=o-this.sizeX/2-0),this.boundToFloor?e.y=this.halfSize.y+.01:e.y<this.sizeY/2+0?e.y=this.sizeY/2+0:e.y>this.itemWall.wall3D.wallHeight-this.sizeY/2-0&&(e.y=this.itemWall.wall3D.wallHeight-this.sizeY/2-0),e.z=this.getWallOffset(t?1:-1),e.applyMatrix4(n)}};const xi=class extends Ci{constructor(e,t,i,o,s,n,a,r){super(e,t,i,o,s,n,a,r),this.addToWall=!0}getWallOffset(e){return e*this.itemWall.wall3D.wall2D.thick*this.floorplan3DThis.scaleFactor/2}changeDoorHinge(){this.floorplan3DThis.props.mainComponentThis.isDoorObject(this.objectType)&&(this.floorplan3DThis.props.mainComponentThis.setDoorObject2DHinge(this.object2D),this.meshScaleXSign*=-1,this.resize(this.object2D.additionalParams.width3D,this.object2D.additionalParams.height3D,this.object2D.additionalParams.depth3D))}onWindowRotationOptionsChange(){this.floorplan3DThis.props.mainComponentThis.isWindowObject(this.objectType)&&this.rotateItem(Math.abs(this.rotation),Math.sign(this.rotation))}};const yi=class extends xi{constructor(e,t,i,o,s,n,a,r){super(e,t,i,o,s,n,a,r),this.boundToFloor=!0}};const Si=class extends wi{constructor(e,t,i,o,s,n,a,r){super(e,t,i,o,s,n,a,r),this.obstructFloorMoves=!1,this.mesh.receiveShadow=!0}};const vi=class extends Ci{constructor(e,t,i,o,s,n,a,r){super(e,t,i,o,s,n,a,r),this.boundToFloor=!0}},Di=[{gradientStartColor:"rgb(245, 88, 71)",gradientStopColor:"rgb(255, 0, 0)"},{gradientStartColor:"rgb(228, 192, 110)",gradientStopColor:"rgb(255, 176, 0)"},{gradientStartColor:"rgb(136, 204, 108)",gradientStopColor:"rgb(96, 196, 55)"},{gradientStartColor:"rgb(119, 225, 244)",gradientStopColor:"rgb(0, 217, 255)"},{gradientStartColor:"rgb(79, 114, 166)",gradientStopColor:"rgb(40, 77, 126)"},{gradientStartColor:"rgb(102, 102, 102)",gradientStopColor:"rgb(170, 170, 170)"},{gradientStartColor:"rgb(250, 250, 250)",gradientStopColor:"rgb(234, 234, 234)"},{gradientStartColor:"rgb(249, 173, 103)",gradientStopColor:"rgb(249, 127, 0)"},{gradientStartColor:"rgb(167, 132, 217)",gradientStopColor:"rgb(137, 81, 218)"},{gradientStartColor:"rgb(223, 103, 189)",gradientStopColor:"rgb(226, 42, 174)"},{gradientStartColor:"rgb(60, 59, 59)",gradientStopColor:"rgb(0, 0, 0)"},{gradientStartColor:"rgb(226, 198, 149)",gradientStopColor:"rgb(198, 157, 86)"}],Ti=["None","Lounge","Lunchroom","Kitchen","Bathroom","Bedroom","Locker","Office","Hall","Loggia","Balcony","Terrace","Corridor","Garage"],ji=[{title:"Color",fill:"#f9f3e4"},{title:"Unknown",fill:"#666666",width:256,height:256},{id:"concrete",title:"Concrete",fill:"url(#Concrete)",width:256,height:256,scale:128},{id:"brick",title:"Brick",fill:"url(#Brick)",width:256,height:256,scale:128},{id:"stone",title:"Stone",fill:"url(#Stone)",width:256,height:256,scale:128},{id:"knauf",title:"Knauf",fill:"url(#Knauf)",width:256,height:256,scale:128},{id:"wood",title:"Wood",fill:"url(#Wood)",width:256,height:256,scale:128},{id:"glass",title:"Glass",fill:"url(#Glass)",width:256,height:256,scale:128},{id:"plastic",title:"Plastic",fill:"url(#Plastic)",width:256,height:256,scale:128},{id:"metal",title:"Metal",fill:"url(#Metal)",width:256,height:256,scale:128},{id:"granite",title:"Granite",fill:"url(#Granite)",width:256,height:256,scale:128}],_i=[{field:"interiorPlaneMaterial",label:"Side 1:",validate:e=>z.isEmpty(e)||z.isHexColor(e),defaultColorValue:ji.find((e=>"Color"===e.title)).fill,selectRefPropertyName:"interiorPlaneMaterialSelectRef",dropdownRefPropertyName:"interiorPlaneMaterialDropdownRef"},{field:"exteriorPlaneMaterial",label:"Side 2:",validate:e=>z.isEmpty(e)||z.isHexColor(e),defaultColorValue:ji.find((e=>"Color"===e.title)).fill,selectRefPropertyName:"exteriorPlaneMaterialSelectRef",dropdownRefPropertyName:"exteriorPlaneMaterialDropdownRef"}],Ii=[{name:"Light",value:"light-v8"},{name:"Satellite",value:"satellite-v9"},{name:"Dark",value:"dark-v10"}],ki={1:bi,2:wi,3:yi,4:xi,5:Si,6:vi,7:Ci},Pi=[2,3,5,6],Fi=[3,4,6,7],Oi={1:"free",2:"floorFree",3:"inWall",4:"inWall",5:"floorFree",6:"onWall",7:"onWall"},Mi=["CCTV","hangingLight","fluorescent","ceiling-lamp","lamp2","ceilingFan","minispot","lightSource"],Li=["frenchWindow2","frenchWindow85x200","window85x123","window85x163","turn-window","smallWindow2","window_2x3_frame_sill","window_deep","fixed_window_2x2","doubleOutwardOpeningWindow","doubleWindow126x123","doubleWindow126x163","doubleWindow2","window_double_2x3_frame_sill","doubleFrenchWindow2","doubleFrenchWindow126x200","window_2x4","window_2x6","window_4x5","window_3x1","window_4x1","window_2x1_medium_with_large_pane","sliderWindow126x200","window_2x1_with_sliders","window-08","window_shop","window_stain_glass","fixedWindow85x123","glassblock","serviceHatch","fivePanesWindowWithWallPart","rectangularFivePanesWindow","pictureWindow","simpleShutter","traditionalShutter","twoPartsShutter","fancyWindow","newWindowDk","windowFrostedGlass","window_shutter","window_double_3x3","door_window_thick_double_2x4","door_window_thick_double","door_window_thick","window_double_frame_sill","window_urban_neoclassic","window2","window-01","window-08-02","window-shutter","window_2x3_arched","window_2x3_regular","window_2x3","window_2x4_arched","window_4x3_arched","window_4x3"],Ri=["door","glass_door_framless","screen-door","puerta","craftsmanDoorClosed","sliderPocketDoor","doorFrame","double_door_2","double_door","double_plain_door_with_little_part","exterior-door-05","exterior-door-07","frontDoor","frontDoor2","glass_door","double_door_with_little_part","glassDoor2","japanesedoor","garage-door","garage-door2","emergencyGlassDoubleDoor","revdoor","elevator","elevator-door","slidingDoors","frontDoorDark","garageDoor","patioGlassDoorUnit","sixDoorFrenchStyle","frenchDoors","DianaWindow","accordionFoldDoors","garageDoor2","doorGlassPanels","door1","glassDoorsOpened","patioDoorOpened","patioDoor","patioSideDoor","fancyFrontDoor","door_glass","exterior-door-01","exterior-door-02","exterior-door-03"],Bi=["hangingLight","lamp2","pendantLamp","lustreBoule","ceiling-lamp","minispot","painting_light","track-lights","spotlight","wall-spotlight","wallUplight","wall_lamp","fluorescent","fluorescent-strip","lightSource","lightSource2","floorUplight","porch-light","street_light_modern","farola1","lampeHalogene","led_striplight","wallLight","bougeoir","neon","candleOrnament","deskLamp1","deskLight","ceiling_lamp_globo_feria","lamp_paraffin_feuerhand","lamp_wall_outside","classic-lamppost","flashlight","hanging-restaurant-light","park-light","pedestal-vase-lamp","wall-lamp-artwork","desk_lamp1","desk_lamp2","little_lamp1","little_lamp3","saloon_lamp","table_lamp","living_room_lamp1","living_lamp","chandelier-lamp","candelabre","candle"],Ai=["washbasin_jay_hardy","bathroom3","hand-washbasin","stone-washbasin","ergonomic-washbasin","bathroom_vanity","modernVanity","washbasin","bathroom_sink","mobilettoLavaboWenge","wash_basin_corner","washbasinWithCabinet","islandBath","bathtub_jet_system","fittedBath","bath","corner_bathtub","bacADouchePlat","mixer-tap-for-shower","shower","doccia","shower_cabin","shower-cabin-with-seat","toilet_hang_round","japanese-toilet","toiletUnit","small-urinal","bidet","towel2","com_bath3","towel3","showerCurtain","barreAppuiCoude","barreAppui","folding-grab-bar","savon","com_bath2_jabon_pijo","potBrossesADent","secheCheveux","potty","toiletBrush","bathroom-tissue","pesePersonne","basin","bathmat","clothes-basket","clothes_line","clothes_washing_machine","clothesWasher","dryer_machine","fer","plancheARepasser","comb","cosmeticsPot","showerDoor","toiletPaperDispenser","toiletsUnit","flacon","showerStall","urinal","bath_jay_hardy","bathroomRadiator","lipStick","toilets_unit_jay_hardy","radiatorAndTowels","modernToilet","meubleSalleDeBain","bidon","robinet","parfumAmbiance","rasoir","shampoo","gelDouche","boiteDeMouchoirs","derouleurWC","tube","pareDouche","bathroomFurniture","towelMedicineCabinet","bath_L","bathroom_cupboard_mirror","towel_rack","tendaDoccia","barreAppuiL","towel-rack","showerHeadAndFaucet","mobilettoSpecchioBlu","mobilettoSpecchioWenge","mobilettowenge","water","bathroom4","bathroom1","double_vanity","com_bath","com_bath2_cepillo","com_bath2_esponja","com_bath2_peineta","com_bath2_soap","com_bath3_toalla","medicoscopia_bottle","medicoscopia_bottle2","medicoscopia_box","small_lavatory","folding-wall-seat","mixer-tap-for-bath-and-shower","mixer-tap-for-bath","shower-armchair","shower-chair","turkish-toilet"],Wi=["bedFlowers","air-mattress","bed3","bed","bed1","bed140x190","bed90x190","bedWithTexture","captains-bed","juniorBed","convertible-sofa-BZ-opened","bunkBed","bunkBed90x190","loftBed140x190","cornerBunkBed90x190","litMezzanine","litMezzanine2","mezzanine-bed","crib","adjustable-hospital-bed","armoireLotus","mobileCiliegio","mobileangoloCiliegio","mobileAngoloInterno","mobileAzzurro","corner","wardrobe","wardrobe2","changing-table","chest","kommode","petiteCommode","armoire","bedsideTable","bedsideTable2","comoCiliegio","mensolaCurvaAcero","pensileAcero","clothes-rack","clothes-hanger","clothes-horse","portemanteaux2","folded_clothes","futon","hanging-clothes1","backpack","casque","hospital-table-on-wheels","hotelSafe","sleepingBag","bootieSeparated","slippersSeparated","sneakersSeparated","mocassinSeparated","womanShoesSeparated","blocks","doll","doll-house","smiley","teddyBear","train","letters","housePuzzle","rubix2","bed2","caballito","cartoon_biplane","wardrobeWithSlidingDoors","cupboard","babyRockingBed","cardGame","briefcase","handbag","woodToy","carrito-de-madera","clock","suit","chessboard","lettoCloud","toyTrain","xylophone","petitReveil","p40","daybed","captainsBed","trundleBed","litParents","clicClacOuvert","lit","meubleChevet","suits_racked","childBed","hanging-clothes2","comodinoSinistroCiliegio","lettoCiliegio","mensolaCiliegio","comodinoAzzurro","lettoAzzurro","lettoSoppalcoAzzurro","mensolaAcero","scaletta","iron_bed","wardrobe1","children_bed","kids_shelves","robe","casquette","chapeau","short-shadows","pantalon-shadows","blouson","jupe","jupe-doeskin","chaussette","montre-with-pose","montre","bague","gant-textured","dressing-table","day_bed_frame","tasDeVetements","oreiller","flipFlops"],Vi=["awning_bracket","barnum","umbrella","hangingUmbrella","pergola","deckChair","hammock","cafe-chair","silla_teca","ext_table","cafe-table","rattanArmchair","rattanSofa","rattanTable","picnic_table","painted-bench","barbecue","grillNgauge","basketball_net_and_board","football-goal","big-football-goal","campingTent","campingLamp","swimming-pool","diving-board","pool_ladder","round-swimming-pool","jacuzzi","sandpit","motorbike","trampoline","child_swing","parque","bonecoDeNeve","fence","iron-railing-separated-hooks-2","gardeCorps","railing","railing_glass","privacyFence2","portillon","fence_grid","fence_picket","pedestrianRailing1","pedestrianRailing2","gate_grind","column_balustrade","column_balustrade_corner","waterFountain","fountain","greenhouse","garden-hut","dog-house","boiteALettre","feu-de-signalisation-simple","stoneLantern","outdoorLamp","window_flat_roof_skylight_bubble","porch-column-03","rainGutterPart1","rainGutterPart2","passage-pieton","croisement2et2","routeCourbe2VoiesAvecTrottoirs90Deg","route2VoiesAvecTrottoirs","voiesFerreesAiguillage","voiesFerreesCourbe20m","voiesFerreesDroit10m","birch","bush","hedgeTextured","lavender-bush","palm","pansy","tree","lombardyPoplar","pine","plantie","rock1","rock2","rock3","roses-bush","bump","wheelie_bin","flowerBox","mofx_mailbox","relaxChair","bench","childHut","childSwing","seesaw","wheelbarrow","lantern","chair_deck","poolLounge","rowboat","transat","table_footrest","fencepost1","fencepost2","borderfence-main","borderfence-small","dogHouse","blackDeckTable","gardenUmbrella","blackDeckChair","privacyFence","canapeJardin","swimmingPool","balancelle","cloture","fence_grid_gate","bordure","gate_iron","portail","etendoirLinge","flag_hinged_pole","parasol_str","traffic_light_ped","concrete-bench","park-trashcan","porch-column-01","porch-column-02","residential-trashcan","spray-bottle","concrete-sidewalk","fire-hydrant","hose-reel","ext_chair","littlebank","wood_bank","beach_chair","letters_box","rectangle-swimming-pool","garden-faucet","passage-a-niveau","rails","fleche-tout-droit","fleche-tourner-a-droite-et-direct","fleche-tourner-a-droite","stationnement-creneau","stationnement-en-bataille","stationnement-epi-45","stationnement-epi-60","stationnement-epi-75","high-hedge","hedge","acacia","bamboo","ficusTree","bluePineSnow","coconutTree","coconutTreeBended","copperBeech","cypress","japaneseMaple","poplar","peachBlossom","pineSnow","sabalPalmeto","sycamoreMaple","tasDeTerre","tasDeSable","tasDeGravillons","tasDeGravats","voiesFerreesCourbe10m","voiesFerreesCourbe40m","voiesFerreesDroit1m","routeCourbe2VoiesAvecTrottoirs26m","routeCourbe1VoieAvecTrottoirs26m","routeCourbe2VoiesAvecTrottoirs6.5m","routeCourbe1VoieAvecTrottoirs6.5m","routeCourbe1VoieAvecTrottoirs13m","routeCourbe2VoiesAvecTrottoirs13m","route1VoieAvecTrottoirs","croisement1et1","croisement1et2","pont2Voies","pont1Voie","separateurDeVoie","pilierPont1Voie","autoroute2Voies","routeCourbe1VoieAvecTrottoirs90Deg","filElectrique","poteau-en-beton","poteau-en-bois","feu-de-signalisation-avec-signalisation-au-dessus","hydrangea","blackTupelo","quakingAspen","fanPalm","sassafras","weepingWillow"],Ni=["lowerCabinet","lowerCornerCabinet","drawersCabinet","smallUpperCabinet","upperCabinet","sinkCabinet2","kitchenSmallLowerCabinet","kitchenLowerCabinet","kitchenIsland","kitchenDrawersCabinet","kitchenSink","kitchenUpperCabinet","kitchenSmallUpperCabinet","kitchenGlassDoorCabinet","kitchenCabinet","cabinet","cabinetWithBasin","drawers","upperCabinet2","highCabinet","meubleMicroOnde","sink","islandExtension","tableCuisine","meubleChaussures","dishwasher","fridge","fridgeFreezer","refrigerator","largeFridge","rangeHood","chest-freezer","stove1","stove","largeStove","oven","ovenFront","hood","kitchenHood","induction-cooker-2-zones","induction-cooker-4-zones","mano_cooktop","lavastoviglie","doubleOven","sgabello","tabouretBar","stool2","baby_high_chair","boiler","bouilloire","toaster","coffeeBrewer","percolateur","coffee-maker","cooker","electronicScale","autocuiseur","sandwichMaker","small-oven","spiceTower","saltShaker","grillePain","towel","poubelleInox","tray","kitchenKnife","kitchenKnifeStandSet","poele","casserole","paperTowelHolder","bouteille","bolDeRiz","plate-and-ustensils","ensemble-assiette-couteau-fourchette-cuillere-verre","kitchen-glass-jar-high","cocktailGlass","glass","coffee-mug","coffeePress","choppingBoard","baguettes","bowl","mamadeira","utensilsPot","aspirateur","broom","bucket","eponge","food-box-pasta","food-box-corn-flakes","tetrapak","container","caffe_final","butter","cupcake","birthday_cake","bowlWithFruits","bowlWithSalad","bread","apples","baguettePain","toast","steak","roasted-chicken","citrouille","pizza","hotDog","hamburger","frenchFries","kitchenaid","knifeStandSwap","plasticCup","silla2","yogurtBottle","beerGlass","upperCornerCabinet","upperShelves","beer_bottle","coffee_cup","fork","kitchenblender","kitchenTools","knife","largePan","microwave","spoon","washing_machine","breadBox","kitchenScale","espressokettle","boiteMetal","chaiseCuisine","verreFlute","glassDoorKitchenCabinet","verreLongDrink","microOnde","mug","assietteVerresCouverts","smallGlass","carafeEau","verreEau","carafeVin","verreVin","glassdoorCabinet","mobile_cucina_60x60","lavello_doppio_90x60","cassetti_cucina_45x60","isola_cucina_150x90","pensile_cucina_45x90","pensile_cucina_60x70","capa","piano_cottura","frigorifero","ceramicHob","cornerCabinet","3DrawerCabinet","2GlassDoorCabinet","2DoorUpperCabinet","2DoorLowerCabinet","1GlassDoorCabinet","1DoorUpperCabinet","1DoorLowerCabinet","refridgerator","pantry","kitchenSinkWithMarble","cornerChina","couteauADecouper","couteauAPain","plancheADecouper","barCusisine","frigo","desserte","casierBouteilles","cookingPlate","gaz","washer_dryer","ashtray","bullet-trash-can","12-oz-glass","highball-glass","oil-servers","dinner-plate","bread-plate","propane-stove","red-wine-bottle-01","angolo","cucina","curva","curvaEsterna30","curvaInterna30","doppio","pensileAngolo","pensileCurva","pensileDoppio","pensileVetro","pianoIsola","singolo","lavello","cassettiera","mobilettoGrande","mobilettoPiccolo","gasHob","old_jar","pottery","sushi_tray","kitchen_tool1","kitchen_tool2","kitchen_tool3","kitchen_tool4","wine_bottle","bar_chair","kitchen_stool","coffee_machine","creamer","cup","sugar","teapot","shovel","shopping-basket","squeezer","deepFryerWithFrenchFries","stoneGrillDevice","food-spaghetti-box","kitchen-glass-jar-low","waitress-table-on-wheels"],Ei=["clear_sofa","beige_sofa","L_shaped_sofa","cornerSofa","sofa","couch2","futon-couch","simple_sofa","sofa1","sofa2","convertible-sofa-BZ-closed","clicClac","bookcase","dining_room","cabinet2","elementHautSalon","meubleHiFiHaut","stainlessSteelShelf","shelves_storage_steel","shelves_storage_wood","dresserWithDrawers","full-bookcase","tourRangeCD","glassDoorCabinet","pinewoodRackLowHeight","pinewoodRackMediumHeight","etageres","etagereEnfant","longcase_clock","winchesterArmchair","rocking_chair","fotel","armchair","armchair2","armchair3","chair_granmother","chair","kitchenChair","thonet","chair3","chair4","white_kitchen_chair","childChair","children_chair","foldingChair","folding_chair","chaiseOrange","osakaChair","ryokanChair","stool_small","green_stool","stool","pianoBench","tabouretPiano","puff","black_table","folding-table","children_table","coffeeTable","coffee_table","table_wood_and_iron","tableBasse2","couchTable","round-table","roundTable","squareTable","table-on-trestles","white_kitchen_table","table","table2","table-with-leaning-feet","tableCuisine2","glass-dining-table","meubleHiFiBas","table_half_round","oakTable","tableWithTablecloth","wall-flat-tv","curvedTVForTable","curvedWallOLEDTV","flatTV","tvUnit","dresser","dvd","playstation4","ps4-joystick","tv-remote-control","video-projector","wirelessOfficePhone3","aquarium","filledBookcase","fireplace","cheminee","fireplace1","fireplace2","AtorHaut","furnace","guitar","piano","pianoDroit","MIDI-keyboard","batterie","microphone-with-foot","carpet","oriental-rug","round-carpet","desklamp","lamp","little_lamp2","JapaneseLantern","luckyBamboo","bonsai-tree","boston-fern","cactus","decorativePlant","flowers","mediumIndoorPlant","orchids","augalas","maceta","plant","roses","succulentPlant","yuccaPlant","christmas_tree","deer","led_tv","oakChair","pianoAQueue","plasticChair","shelves","televisionCabinet","verticalShelves","electricGuitar","littlePlant","sillaBlanca","couch","modernArmchair","antiqueChair","chairWithCushion","winchesterSofa","designChair","arbolito","cafe_set_mota_chair","cafe_set_mota_table","cafe_set_tonon_chair","cafe_set_tonon_table","ella_chair_f","leaf_chair","spatifilum","tvStand","armchair1","spider_plant","tulip","white_lily","plaidChair","sofa3","tulips","couch3","barStool","bookcase2","computerWorkstation","cornerWorkstation","bocalPoisson","tableGnome","rectangularTable","squareCoffeeTable","ecran16_9","tableBasseBois","woodTable","priseTV","petiteTableSalon","bibliothequeDroite","allenOrgan","highBoyDresser","smallbookshelves","salontafel","couchTwoSeats","kleed_grieks","pinewoodRackFullHeightHalfWidth","pinewoodRackFullHeight","latticeChair","meubleMural","CDrack","displayCabinet","hallTable","potplant2","roundTable2","shelving","sofa3Single","sofa4","couchPoofyPillows","largeCouch","singleChair","throwPillow","counter","tableBasse","pancaFratinoSing","tavoloFratino","TVCenter","chair_high","shelves_storage_wood2","table_granmother_marble","armchair_wing","bar_stool","dropLeafTable","mid-century-chair","chair-ottoman","bar-stool","dining-chair","utility-shelving","mid-century-bench-sofa","mid-century-sofa","credenza","sedia","tavolino","tavolo","box_room","saloon_table","table3","table4","tv","wooden_table_office","tubular_chair","metal_glass_table","glass_table_office","desk_table","bar_table","beige_sofa_2seats","burlap_sofa","contemp_living_room","leather_sofa","living_room_table","modern_armchair","plastic_chair","calla_lily_with_roses","sofa_white_beige","ficus","coffee-table2","lavender"],zi=["box","cylinder","sphere","internal-unity-air-conditioning","external-unity-air-conditioning","CCTV","surveillanceCamera","smoke-detector","emergencySign","estintore","antenaTV","antenaParabolica","solar_panel_140W","iphone","mobile","tablet","intercom","intercom_with_screen","headphones","mini_stereo","speaker2","reflex_camera","abdominalBench","treadmill","indoor-bike","punching-ball","flipper","table_football","dart_game","poolTable","table_tennis","ballonFoot","tatami","livreAvecReliure","book","livres","foldedNewspaper","revue","pileMagazines","bdOuverte","revueOuverte","cardboard-box","crate","litiere","lockedLocker","gift","suitcase","putekasse","cageFuret","arbreAChat","clock2","corniceConcaveCorner","cornice","doormat","folding-armchair","rectangularMirror","ovalMirror","mirror","frame","frame1","frame3HorizontalNorwayPhotos","frame3VerticalSummerPhotos","HaiVanPassFrame","ButterflyFrame","frame_square","cendrier","complements2","keys","glasses","hotWaterRadiator","radiateur","radiator3","radiateurVertical","radiator1","electricRadiator","electric_water_heater","gaz_water_heater","entry-bell-ring","entry-bell-speech-unit","marteau","tournevis","square-double-switch","square-switch","square-plug-TypeB","square-plug-TypeE","double-switch-whites","switch-whites","plug-TypeB-whites","plug-TypeE-whites","electricOutlet","electricOutlet2","boucheVMC","step-ladder-metal","mower","sewing_machine","pallet","wood_logs","umbrellaFolded","vase3","jar","wheelchairSymbol","electricWheelchair","wheelchair","walker-with-wheels","wall_handrail","japanese_style_screen","shippingContainer","radiator2","radiator","speaker3","tableFan","ammoBox","barrel","basketball","fireExtinguisher","numberLock","cuckooClock","riggedFan","tennisRacket","radio","thermometer","wallDoubleSocket","wallSocket","wire-coathanger","sunglasses","tableTennisBat","modernRadiator","mp3Station","workbench","fitnessTower","fut","pompeBiere","curtainRod","priseTelephonique","rampe","tableauMulet","tableauVisage","tableauVisage2","tableauVisage3","tableauYing","prise","railing1","roundedEdgesRailing","roundedEdgesRailing1","scie","rampeArcCercle","interrupteur","tableauElectrique","horlogeUbuntu","venetianBlind","etau","portemanteaux","arch","AntelopeCanyonFrame","EiffelTowerFrame","InariFrame","MontBlancFrame","lightSwitch","smallWroughtIronRails","wroughtIronRails","pavesDeVerre","appleIpod","pile","polygonalRoof","toitureArdoiseRouge","TorontoOntarioPlaceFrame","TigerFrame","NiagaraFallsFrame","VeniceFrame","picture","guacal","LakeMoraineFrame","SquirrelFrame","StatueOfLibertyFrame","VaticanMuseumFrame","EtretatFrame","ColoredFountainFrame","HorseShoeBendFrame","TucanFrame","YosemiteFrame","WaterLilyFrame","ruffledVase","radiator_7section","bd","livreJava","sh3dMag","SweetHome3DKompakt","enceinteColonne","AtorArriere","bathroom_fan","frame_horizontal","frame_vertical","frame3HorizontalMomijiPhotos","frame3VerticalTowerPhotos","ladder_simple","ladder_water","plastic_storage_box","sauna_120x120","vent_round","staircase_handrail_hor","metalBeam","pwdRamp","iron-railing-02","recycling-bin","tape-measure","trunk-large","newspaper","vase1","vase2","vase5","frame2","basic_camera","electric_water_heater_big","mp3_base_for_ipad","stereo_amplifier","open-cardboard-box","step-ladder-wood","wall-hanger","iron-railing-separated-hooks-1","iron-railing-separated-hooks-3","scie-egoine","rouleau-de-ruban-adhesif","pelle","cone","perceuse-electrique","meuleuse-electrique","billet-10-euros","billet-20-euros","billet-50-euros","rounded-antenna","rounded-dimmer","rounded-double-switch","rounded-plug-TypeA","rounded-plug-TypeB","rounded-plug-TypeCFlat","rounded-plug-TypeE","rounded-plug-TypeG","rounded-RJ-45","rounded-switch","square-antenna","square-dimmer","square-plug-TypeA","square-plug-TypeCFlat","square-plug-TypeG","square-RJ-45","antenna-whites","dimmer-whites","plug-TypeA-whites","plug-TypeCFlat-whites","plug-TypeG-whites","RJ-45-whites","chimney","round-chimney","pince-coupante","parpaing","cageALapin","roueAvecJante","newspapersPile","openedNewspaper","safeOnFeet","fil-electrique-1m","pileRevues","walker"],Hi=["angolo160W","angolo198W","angolo80W","mobile45160W","mobile45198W","mobile4580W","cassettieraW","office_furniture1","office_box","chair2","office_chair","chair_office_y","desk","lbDesk","office_desk","bureauInfoOuvert","wooden_office_pear_table","bureau3","pcstul","inkjet_and_scanner_printer","laptop","monitorLCD","souris","tourPC","phone","imprimanteFaxPhotocopieur","penbox","pencil1","water_cooler","whiteBoard","lamp_office","workLamp","dustbin","cissors_swap","ruler","technicalTable1","technicalTable2","textMarker","kalender","biurko3","sef-kasa","simpleDesk","officeTable","classSeat","armChair2","bureauInformatique","clavier","portable","bigCornerDesk","plantersDesk","stylo","secretarysDesk","desk2","officeChair","officeChair2","officeChair3","escritorio","bureauEcolier","invoice","bureauInfoClair","chair_office_x","scissors","apple-ibook-2001","office-chair","custom-desk","filing-cabinet","apple-imac-1998","stapler","raccordo80W","scrivania160W","mobile90160W","mobile90198W","mobile9080W","apple_pc","kids_desk_chair","kids_desk_table","kids_wooden_desk","wooden_office_alder_table","wooden_office_pear_table_rect","wooden_office_teak_table","bandeja","pencil2"],Gi=["staircase_90_bottom","curveStaircase","staircase_180_long","escalator","staircase_180_landing","staircase_90_landing","stairs_90_closed_legal_high","stairs_rail","stairs_180_circular_notopstep_rail","spiralStaircase","staircase_360_circle","stairs_180_square","staircase","stair_ladder_loft","staircase_samba_265x150x85","stair_straight_open_stringer","staircase_ladder_steep","staircase_90_top","staircase_270_box","staircase_u2h","grandStaircaseDark","escalierColimacon2","outdoor_staircase","stairs_topcurve_90","staircase_90_high_open","staircase_straight","stairs_legal","stairs_spiral","quarterSlope","home-lift","stair-lift-rail","stair-lift"],Ui=["seat_leon","smart-car","sportive","break","decapotable","monospace","renault-scenic","pickup","4x4","renaultKangoo","van","truck","dafTruck","scooter","bicycle","scooter2","remorque","caravane","stroller","bus","cityBus","tramway","locomotive","wagon","forkLift","peterbilt","bike","fordFocus","peugeot103","concept-sedan-01v2","concept-sedan-02","concept-sedan-02-sport","VW-new-beetle","concept-sedan-01v1","peugeot-308","yamaha-yzr-r6","tricycle","chevrolet","skateboard","suv2","carSegmentA"],qi=["ceilingFan"],Yi=["window-blinds","cover_outdoor1","storeCalifornien","curtain","blind","curtains"],Ki=["man","mannequinMale","boyStanding","male03","male01","male02","holdingMale01","mannequinBrunette","female01","female02","female03","girlStanding","holdingFemale01","holdingFemale02","holdingFemale03","nourrison","boySitting","sitMale01","sitMale02","sitMale03","sitFemale03","girlSittingTable","sitFemale02","girlSittingGround","boyLying","lyingDownMale02","lyingDownMale01","lyingDownFemale01","dog","cat","siameseCat","rabbit","horse2","chicken","bulldog","horse","female-01-casual-clothing","male-01-suit","sitFemale01","fille","boy"],Xi=["craftsmanDoorClosed","door","exterior-door-05","exterior-door-07","garage-door2","glassDoor2","glass_door","glass_door_framless","puerta","double_door_with_little_part","double_door_2","doubleFrenchWindow2","doubleWindow2","fixed_window_2x2","frenchWindow2","smallWindow2","window_2x1_medium_with_large_pane","window_2x1_with_sliders","window_2x4","window_2x6","window_3x1","window_4x1","window_4x5","window_deep","window_double_2x3_frame_sill","awning_bracket","fireplace1","fireplace2","curvedWallOLEDTV","wall-flat-tv","ergonomic-washbasin","wash_basin_corner","toiletBrush","turkish-toilet","bathroom_vanity","highCabinet","largeFridge","largeStove","refrigerator","sinkCabinet2","dishwasher","stove1","barreAppuiCoude","barreAppui","folding-grab-bar","toilet_hang_round","mixer-tap-for-shower","shower","stone-washbasin","bathroom-tissue","towel2","com_bath3","towel3","small-urinal","bathroom3","awning_bracket","basketball_net_and_board","entry-bell-ring","entry-bell-speech-unit","window_shutter","doubleOven","kitchenGlassDoorCabinet","upperCabinet","upperCabinet2","hood","kitchenHood","oven","rangeHood","kitchenSmallUpperCabinet","smallUpperCabinet","towel","tray","curvedWallOLEDTV","glassDoorCabinet","stainlessSteelShelf","clock","clock2","curtain","curtains","dart_game","emergencySign","ButterflyFrame","frame","frame3VerticalSummerPhotos","frame3HorizontalNorwayPhotos","HaiVanPassFrame","intercom","intercom_with_screen","mirror","ovalMirror","wheelchairSymbol","radiator3","rectangularMirror","smoke-detector","square-double-switch","frame_square","square-switch","square-plug-TypeB","square-plug-TypeE","surveillanceCamera","double-switch-whites","wall_handrail","switch-whites","plug-TypeB-whites","plug-TypeE-whites","window-blinds","radiator1","stairs_rail","hand-washbasin","washbasin_jay_hardy","external-unity-air-conditioning","kitchenUpperCabinet","drawersCabinet","lavastoviglie","AtorHaut","putekasse","doccia"],Zi=["door","double_door","double_plain_door_with_little_part","exterior-door-05","exterior-door-07.","frontDoor2","glassDoor2","glass_door","double_door_with_little_part","doubleFrenchWindow2","doubleWindow2","frenchWindow2","smallWindow2","window_2x1_medium_with_large_pane","window_2x4","window_2x6","window_3x1","window_4x1","window_4x5"],Ji=(e,t,i,o,s,n)=>({dimensions:{width3D:e,depth3D:t,height3D:i},author:o,itemType:n,title:s}),Qi={doubleFrenchWindow2:Ji(150,25,221,"Seber Rider","Double French window",4),doubleWindow2:Ji(150,25,126,"Seber Rider","Double window",4),fixed_window_2x2:Ji(60,16,60,"Ola-Kristian Hoff","Fixed small window",4),smallWindow2:Ji(100,25,76,"Seber Rider","Small window",4),frenchWindow2:Ji(100,25,221,"Seber Rider","French window",4),"turn-window":Ji(59,13.5,102,"Scopia","Turn window",4),"window-08":Ji(62.6,16.6,128,"Kator Legaz","Double hung window",4),window_2x1_medium_with_large_pane:Ji(110,31.3,130,"Scopia","Double window with large pane",4),window_2x1_with_sliders:Ji(188,25,218,"Scopia","Sliding window",4),window_2x3_frame_sill:Ji(56,35,110,"Ola-Kristian Hoff","Window 2x3",4),window_2x4:Ji(108.5,31.3,200,"Scopia","Double window 4 panes",4),window_2x6:Ji(108.5,31.3,218,"Scopia","Double French window small panes",4),window_3x1:Ji(188,32.2,218,"Scopia","Triple French window",4),window_4x1:Ji(250.3,32.2,218,"Scopia","Quadruple French window",4),window_4x5:Ji(160.3,32.2,218,"Scopia","Quadruple French window small panes",4),window_deep:Ji(105,60,150,"Ola-Kristian Hoff","Deep window",4),window_double_2x3_frame_sill:Ji(123,25,110,"Ola-Kristian Hoff","Double small window 2x3 panes with sill",4),window_shop:Ji(180,15,120,"Ola-Kristian Hoff","Shop window",4),window_stain_glass:Ji(80,16,120,"Ola-Kristian Hoff","Window stain glass",4),glassblock:Ji(21,8.8,168,"RonnieTandriady","Glass blocks",4),doubleFrenchWindow126x200:Ji(132,34,210,"eTeks","Double French window",4),doubleHungWindow80x122:Ji(81,27,128,"eTeks","Double-hung window",4),doubleOutwardOpeningWindow:Ji(115.2,26,134,"eTeks","Outward opening window",4),doubleWindow126x123:Ji(132,34,134,"eTeks","Double small window",4),doubleWindow126x163:Ji(132,34,174,"eTeks","Double window",4),fixedWindow85x123:Ji(91,27,134,"eTeks","Fixed window",4),frenchWindow85x200:Ji(91,34,210,"eTeks","French window",4),sliderWindow126x200:Ji(132,31.5,210,"eTeks","Slider window",4),window85x123:Ji(91,34,134,"eTeks","Small window",4),window85x163:Ji(91,34,174,"eTeks","Window",4),roundWindow:Ji(91,25,91,"eTeks","Round window",4),fixedTriangleWindow85x85:Ji(91,27,91,"eTeks","Fixed triangle window",4),halfRoundWindow:Ji(91,25,46,"eTeks","Half round window",4),serviceHatch:Ji(50,16,50,"eTeks","Service hatch",4),fivePanesWindowWithWallPart:Ji(213.2,11.6,174,"Pencilart","Five panes window",4),rectangularFivePanesWindow:Ji(213.2,12,133.19992,"Pencilart","Five panes window",4),pictureWindow:Ji(213.2,54.3,135.8,"Pencilart","Picture window",4),simpleShutter:Ji(61,5,124,"Pencilart","Simple shutter",4),traditionalShutter:Ji(61,5,124,"Pencilart","Traditional shutter",4),twoPartsShutter:Ji(61,5,124,"Pencilart","Two parts shutter",4),fancyWindow:Ji(60.9,5.6,128,"Pencilart","Fancy window",4),newWindowDk:Ji(60.9,3.4,94.9,"Pencilart","Window",4),windowFrostedGlass:Ji(60.9,2.8,94.9,"Pencilart","Window frosted glass",4),window_shutter:Ji(43.9,2.9,129,"Ola-Kristian Hoff","Window shutter",4),window_double_3x3:Ji(135,16,90,"Ola-Kristian Hoff","Double small window 3x3 panes",4),door_window_thick_double_2x4:Ji(160,23,210,"Ola-Kristian Hoff","Double door window small panes",4),door_window_thick_double:Ji(160,23,210,"Ola-Kristian Hoff","Double door window",4),door_window_thick:Ji(80,23,210,"Ola-Kristian Hoff","Door window",4),window_double_frame_sill:Ji(123,25,110,"Ola-Kristian Hoff","Double small window with sill",4),window_urban_neoclassic:Ji(200,60,220,"Ola-Kristian Hoff","Neoclassic window",4),window2:Ji(100,25,126,"Seber Rider","Window",4),"window-01":Ji(55.3,16.6,128,"Kator Legaz","Double-hung window",4),"window-08-02":Ji(62.6,16.6,128,"Kator Legaz","Double-hung window",4),"window-shutter":Ji(30.6,1.8,125,"Kator Legaz","Window shutter",4),window_2x3_arched:Ji(108.5,31.3,226,"Scopia","Double arched window",4),window_2x3_regular:Ji(108.5,31.3,200,"Scopia","Double window 3 panes",4),window_2x3:Ji(108.5,31.3,218,"Scopia","Double French window 3 panes",4),window_2x4_arched:Ji(108.5,31.3,229,"Scopia","Double arched window",4),window_4x3_arched:Ji(160.3,32.2,226,"Scopia","Quadruple arched window",4),window_4x3:Ji(160.3,32.2,218,"Scopia","Quadruple French window 3 panes",4)},$i={craftsmanDoorClosed:Ji(100.9,18.7,209.6,"Mchnz","Craftsman door",3),door:Ji(91.5,14.5,208.5,"eTeks","Door",3),double_door:Ji(176,17.5,210,"Scopia","Double door with panes",3),double_plain_door_with_little_part:Ji(132.7,17.5,210,"Scopia","Double door with small part",3),"elevator-door":Ji(185.6,21.5,244.9,"Scopia","Elevator door",3),emergencyGlassDoubleDoor:Ji(219.1,28.4,210,"Siath","Emergency glass double door",3),"exterior-door-05":Ji(99,18.5,205,"Kator Legaz","Exterior door",3),"exterior-door-07":Ji(102,18,205,"Kator Legaz","Exterior door",3),frontDoor2:Ji(112,20,216,"Seber Rider","Front door",3),"garage-door":Ji(391,26,221.3,"Scopia","Garage door",3),"garage-door2":Ji(441.2,32,216.7,"Scopia","Garage door",3),glassDoor2:Ji(84.5,14.1,204,"Scopia","Glass door",3),glass_door:Ji(104.4,17.5,210,"Scopia","Glass door",3),glass_door_framless:Ji(91,20,210.5,"Ola-Kristian Hoff","Glass door",3),puerta:Ji(87,13.7,210,"Scopia","Door",3),revdoor:Ji(384,300,230,"Ola-Kristian Hoff","Revolving door",3),"screen-door":Ji(87.6,9.7,200,"Kator Legaz","Screen door",3),sliderPocketDoor:Ji(94.8,12.2,212.5,"Ola-Kristian Hoff","Slider pocket door",3),double_door_2:Ji(176,17.5,210,"Scopia","Double door",3),double_door_with_little_part:Ji(132.7,17.5,210,"Scopia","Double door with panes",3),japanesedoor:Ji(298,9.7,210,"RonnieTandriady","Japanese door",3),elevator:Ji(185.6,189.6,245.4,"Scopia","Elevator",3),doorFrame:Ji(91,16,210,"eTeks","Door frame",3),frontDoor:Ji(101.5,23,208.5,"eTeks","Front door",3),openDoor:Ji(91.5,68,208.5,"eTeks","Open door",3),slidingDoors:Ji(154,8,205,"eTeks","Sliding doors",3),roundDoorFrame:Ji(80,15,200,"eTeks","Round door frame",3),roundedDoor:Ji(91.5,14.5,208.5,"eTeks","Rounded door",3),frontDoorDark:Ji(112.8,40,205,"Pencilart","Front door",3),garageDoor:Ji(420,25,210,"Geantick","Garage door",3),patioGlassDoorUnit:Ji(161,18.4,200,"Pencilart","Patio glass door unit",3),sixDoorFrenchStyle:Ji(595,101.3,210,"Siath","Six door French style",3),frenchDoors:Ji(239.2,28.4,210,"Pencilart","Sliding French doors",3),DianaWindow:Ji(389.6,25.6,210,"Pencilart","Triple window",3),accordionFoldDoors:Ji(284,126.5,220,"Pencilart","Accordion fold doors",3),garageDoor2:Ji(210,15,220,"Pencilart","Garage door",3),doorGlassPanels:Ji(77.1,11.2,205.7,"Peter Smolik","Glass door",3),door1:Ji(91.44,18.23,213.7,"Peter Smolik","Door",3),glassDoorsOpened:Ji(336,86.66,203,"Pencilart","Opened quadruple glass doors",3),patioDoorOpened:Ji(168.3,82.7,203,"Pencilart","Opened patio door",3),patioDoor:Ji(99.4,18.4,200,"Pencilart","Patio door",3),patioSideDoor:Ji(60.7,6.2,200,"Pencilart","Patio side door",3),fancyFrontDoor:Ji(99.8,24,200,"Pencilart","Fancy front door",3),door_glass:Ji(96,17,209.7,"Dorin Vatavu","Glass door",3),"exterior-door-01":Ji(104.9,18,208,"Kator Legaz","Exterior door",3),"exterior-door-02":Ji(98.6,17.8,205,"Kator Legaz","Exterior door",3),"exterior-door-03":Ji(104.2,16.3,205,"Kator Legaz","Exterior door",3)},eo={floorUplight:Ji(33,33,181,"eTeks","Floor uplight",2),fluorescent:Ji(105,24.3,10.6,"Kator Legaz","Fluorescent light",1),hangingLight:Ji(43.9,43.9,86,"Jay-Artist","Hanging light",1),lightSource:Ji(0,0,0,"eTeks","Simple light",1),lightSource2:Ji(40,40,40,"eTeks","Simple light",1),lustreBoule:Ji(30,30,67.6,"Sheep","Pendant light",1),painting_light:Ji(40,14.6,2.6,"Ronnie Tantriady","Painting light",7),"porch-light":Ji(17.7,17,32,"Kator Legaz","Porch light",7),spotlight:Ji(6.8,9.9,13.1,"eTeks","Spotlight",1),street_light_modern:Ji(34,245,770,"Ola-Kristian Hoff","Street light",2),"track-lights":Ji(100,17,13.8,"Kator Legaz","Track lights",7),"wall-spotlight":Ji(6,23.5,10.3,"Kator Legaz","Wall spotlight",7),wall_lamp:Ji(22.3,11,9,"alaX","Wall lamp",7),"ceiling-lamp":Ji(30,30,5.4,"Scopia","Ceiling lamp",1),farola1:Ji(43.9,43.5,250,"Scopia","Street lamp",2),lampeHalogene:Ji(31.3,68.9,180,"GdB","Floor lamp",2),lamp2:Ji(53.4,51.3,63.4,"Megeon","Lamp",1),pendantLamp:Ji(60,60,80,"eTeks","Pendant lamp",1),minispot:Ji(25,25,1,"Emmanuel Puybaret","Mini spot",1),"fluorescent-strip":Ji(55,8.9,8.3,"Kator Legaz","Fluorescent strip",7),wallUplight:Ji(24,12,26,"eTeks","Wall uplight",7),led_striplight:Ji(100,4,3,"eTeks","LED striplight",1),wallLight:Ji(22.8,24.6,53.8,"Ndakasha","Wall light",2),bougeoir:Ji(12.7,11.7,25.7,"Sleipnir1","Candlestick",2),neon:Ji(42,6.4,5,"Snduc","Fluorescent strip",2),candleOrnament:Ji(8,12.5,31.9,"Peter Smolik","Candle ornament",2),deskLamp1:Ji(40.6,40.601,61.23814,"Peter Smolik","Desk lamp",2),deskLight:Ji(23.2,73.766,56.23,"Peter Smolik","Desk lamp",2),ceiling_lamp_globo_feria:Ji(46,46,11,"MineaCristian","Ceiling lamp",2),lamp_paraffin_feuerhand:Ji(12.3,11,33.1,"Ola-Kristian Hoff","Oil lamp",2),lamp_wall_outside:Ji(45,50,65,"Ola-Kristian Hoff","Wall lamp",2),"classic-lamppost":Ji(30,30,250,"Kator Legaz","Classic lamppost",2),flashlight:Ji(4.5,15,4.5,"Kator Legaz","Flashlight",2),"hanging-restaurant-light":Ji(39.3,39.3,66.2,"Kator Legaz","Hanging light",2),"park-light":Ji(61.4,56.4,300,"Kator Legaz","Park light",2),"pedestal-vase-lamp":Ji(28.2,28.2,80,"Kator Legaz","Pedestal vase lamp",2),"wall-lamp-artwork":Ji(30,37.2,27.3,"Kator Legaz","Wall lamp artwork",2),desk_lamp1:Ji(13.7,34.2,45,"Scopia","Desk lamp",2),desk_lamp2:Ji(22.5,41.7,40,"Scopia","Desk lamp",2),little_lamp1:Ji(33.1,33.1,41.9,"Scopia","Little lamp",2),little_lamp3:Ji(41,41,72.8,"Scopia","Little lamp",2),saloon_lamp:Ji(13.2,83.6,60,"Scopia","Pendant lamp",2),table_lamp:Ji(20,20,50.1,"Scopia","Lamp",2),living_room_lamp1:Ji(27.2,27.2,66.9,"Scopia","Lamp",2),living_lamp:Ji(39.6,58.3,142.9,"Scopia","Lamp",2),"chandelier-lamp":Ji(130.6,130.6,174.4,"Scopia","Chandelier lamp",2),candelabre:Ji(43,145.2,738.2,"Scopia","Street light",2),candle:Ji(10.6,10.4,43.6,"Scopia","Candle",2)},to={barreAppuiCoude:Ji(76.9,11,36.4,"Emmanuel Puybaret","Angled grab bar",7),barreAppui:Ji(57.6,11,7.5,"Emmanuel Puybaret","Grab bar",7),basin:Ji(76.8,65.8,27,"Scopia","Basin",1),bathmat:Ji(73.3,47,1.4,"Kator Legaz","Bathmat",5),bathtub_jet_system:Ji(160,70,58,"Ola-Kristian Hoff","Bathtub jet system",2),bidet:Ji(39.9,53.6,51.3,"Arusano","Bidet",2),com_bath2_jabon_pijo:Ji(5.7,5.7,13.7,"Scopia","Bottle",1),"clothes-basket":Ji(53.9,53.8,67.4,"Scopia","Clothes basket",1),clothes_line:Ji(500,15,140,"Ola-Kristian Hoff","Clothes line",1),corner_bathtub:Ji(160,160,80.3,"Scopia","Corner bathtub",2),wash_basin_corner:Ji(50,50,81,"Ola-Kristian Hoff","Corner washbasin",6),"ergonomic-washbasin":Ji(60,46,53.8,"Scopia","Ergonomic washbasin",7),"folding-grab-bar":Ji(7,62.4,17.7,"Scopia","Folding grab bar",7),secheCheveux:Ji(15.8,15.3,7.2,"Toomy","Hair dryer",1),"hand-washbasin":Ji(49.1,30,27,"Scopia","Hand washbasin",7),toilet_hang_round:Ji(38,56.5,82,"Ola-Kristian Hoff","Hanged toilet",7),islandBath:Ji(169.6,93.7,108.1,"Scopia","Island bath",5),"japanese-toilet":Ji(52.7,83.6,98,"Scopia","Japanese toilet unit",2),"mixer-tap-for-shower":Ji(29,34.7,99.1,"Scopia","Mixer tap for shower",7),potty:Ji(30.3,30.3,18.4,"Icarus","Potty",1),pesePersonne:Ji(28.2,32.1,2.8,"Emmanuel Puybaret","Scale",2),"shower-cabin-with-seat":Ji(100.5,170.4,213.5,"Scopia","Shower cabin",2),shower_cabin:Ji(90,90,199,"Ola-Kristian Hoff","Shower cabin",2),doccia:Ji(70,70,200,"LucaPresidente","Shower cabin",2),showerCurtain:Ji(90.3,29.4,190,"Kator Legaz","Shower curtain",1),shower:Ji(20.8,53.8,114.3,"Wfg5001","Shower head and faucet",7),savon:Ji(7,5.8,16.7,"Toomy","Soap",1),"stone-washbasin":Ji(53.7,45.5,36.8,"Scopia","Stone washbasin",7),toiletBrush:Ji(9.6,12.9,38.6,"Nhumrod","Toilet brush",6),"bathroom-tissue":Ji(21.3,17.3,15,"Kator Legaz","Toilet paper dispenser",7),potBrossesADent:Ji(7.2,8.7,18.2,"Toomy","Tooth brushes and paste",1),towel2:Ji(21.8,13.7,66.9,"Wfg5001","Towel",7),com_bath3:Ji(60,16.8,41.8,"Scopia","Towel rack",7),towel3:Ji(59.6,8.1,47.8,"Wfg5001","Towel rack",7),"small-urinal":Ji(34,27.1,61.8,"Scopia","Urinal",7),bathroom_vanity:Ji(107.1,38.5,207.8,"Scopia","Vanity",6),modernVanity:Ji(90.4,70.8,93.3,"Dobbs","Vanity",2),washbasin_jay_hardy:Ji(59.7,43.1,86.7,"Jay-Artist","Washbasin",6),bathroom3:Ji(71.9,40.3,48.4,"Scopia","Washbasin",7),bathroom_sink:Ji(122,55,78,"Ola-Kristian Hoff","Washbasin with cabinet",2),mobilettoLavaboWenge:Ji(81,42.5,101.3,"LucaPresidente","Washbasin with cabinet",2),dryer_machine:Ji(59,61.8,84.2,"Scopia","Dryer machine",2),clothes_washing_machine:Ji(59,60.1,84.2,"Scopia","Clothes washing machine",2),clothesWasher:Ji(59,60.1,84.2,"Scopia","Clothes washing machine",2),fer:Ji(13.7,13.2,30.6,"Toomy","Iron",1),plancheARepasser:Ji(54.5,137.1,79.5,"Toomy","Ironing board",2),washbasin:Ji(56,47,97,"eTeks","Washbasin",2),washbasinWithCabinet:Ji(62,57,97,"eTeks","Washbasin with cabinet",7),fittedBath:Ji(178,77,72,"eTeks","Fitted bath",2),bacADouchePlat:Ji(90,90,6.5,"Snduc","Shower cubicle",2),toiletUnit:Ji(40,80,62,"eTeks","Toilet unit",2),bath:Ji(163,73,57,"eTeks","Bath",2),comb:Ji(12.5,3.6,.4,"JonFreer","Comb",2),cosmeticsPot:Ji(7.7,7.8,7.1,"Bocko","Cosmetics pot",2),showerDoor:Ji(90.5,22.5,229.9,"Wfg5001","Shower door",2),toiletPaperDispenser:Ji(15.6,10.4,18.45,"Nhumrod","Toilet paper dispenser",2),toiletsUnit:Ji(35.3,69.2,77.2,"Nhumrod","Toilet unit",2),flacon:Ji(3.7,2.1,13,"Tappi","Flacon",2),showerStall:Ji(93.05768,111.88634,200.01599,"Asterlil","Shower stall",2),urinal:Ji(36.1,30,88.1,"Ndakasha","Urinal",2),bath_jay_hardy:Ji(180.1,70.1,65.1,"Jay-Artist","Bath",2),bathroomRadiator:Ji(48.4,18.8,110.75,"Nikitron","Radiator",2),lipStick:Ji(2.04,2.04,9.54,"Bjo.bernis","Lip stick",2),toilets_unit_jay_hardy:Ji(41.25,54.4,76.6,"Jay-Artist","Toilet unit",2),radiatorAndTowels:Ji(60,10,154,"Gianmariaveronese","Radiator",2),modernToilet:Ji(44.8,85,76.5,"Starapple","Toilet unit",2),meubleSalleDeBain:Ji(60,59.2,91.9,"Snduc","Washbasin with cabinet",2),bidon:Ji(6.5,6.5,16.7,"Snduc","Bottle",2),robinet:Ji(5.1,14.4,12,"Snduc","Faucet",2),parfumAmbiance:Ji(8.7,4.6,8.3,"Snduc","Perfume",2),rasoir:Ji(12.5,5,2,"Snduc","Razor",2),shampoo:Ji(7.4,3.4,16.7,"Snduc","Shampoo",2),gelDouche:Ji(8,4.2,15.3,"Snduc","Soap bottle",2),boiteDeMouchoirs:Ji(22.5,11.5,13.6,"Snduc","Tissue box",2),derouleurWC:Ji(16,13.5,19.5,"Snduc","Toilet paper dispenser",2),tube:Ji(2,2,6.8,"Snduc","Tube",2),pareDouche:Ji(90,8,180,"Snduc","Shower door",2),bathroomFurniture:Ji(119,50.9,131.1,"Maui","Cabinet",2),towelMedicineCabinet:Ji(62.2,61.4,144.8,"Pencilart","Towel and medicine cabinet",2),bath_L:Ji(170,85,186,"Ola-Kristian Hoff","Bath L shape",2),bathroom_cupboard_mirror:Ji(60,15,78,"Ola-Kristian Hoff","Cupboard mirror",2),towel_rack:Ji(45,20.7,29.8,"Ola-Kristian Hoff","Towel rack",2),tendaDoccia:Ji(73.6,93.4,197.9,"Alex","Corner shower curtain",2),barreAppuiL:Ji(59.2,11.5,127.6,"Emmanuel Puybaret","L shaped grab bar",2),"towel-rack":Ji(50,9.5,10.9,"Kator Legaz","Towel rack",2),showerHeadAndFaucet:Ji(24.5,22.55,88.8,"Kator Legaz","Shower head and faucet",2),mobilettoSpecchioBlu:Ji(70,12.5,60,"LucaPresidente","Mirror",2),mobilettoSpecchioWenge:Ji(80,22,72,"LucaPresidente","Mirror cabinet",2),mobilettowenge:Ji(80,42,82,"LucaPresidente","Cabinet",2),water:Ji(36,55.7,45.25,"LucaPresidente","Toilet unit",2),bathroom4:Ji(61.5,61.5,50,"Scopia","Washbasin",2),bathroom1:Ji(73.2,77.9,172.7,"Scopia","Washbasin",2),double_vanity:Ji(185.2,68.1,225.4,"Scopia","Double vanity",2),com_bath:Ji(5.4,5.4,12,"Scopia","Bottle",2),com_bath2_cepillo:Ji(19.2,5.5,3.5,"Scopia","Brush",2),com_bath2_esponja:Ji(9.5,9.3,10.1,"Scopia","Sponge",2),com_bath2_peineta:Ji(6.6,6.1,.8,"Scopia","Comb",2),com_bath2_soap:Ji(11,5.3,20.1,"Scopia","Soap",2),com_bath3_toalla:Ji(17.9,11.6,3.39,"Scopia","Towel",2),medicoscopia_bottle:Ji(4.3,4.3,8.7,"Scopia","Medicine bottle",2),medicoscopia_bottle2:Ji(5.7,5.7,13.9,"Scopia","Medicine bottle",2),medicoscopia_box:Ji(10.9,4.3,6.6,"Scopia","Medicine box",2),small_lavatory:Ji(50,42.4,34.4,"Scopia","Small lavatory",2),"folding-wall-seat":Ji(40,45,14.7,"Scopia","Folding wall seat",2),"mixer-tap-for-bath-and-shower":Ji(29,34.7,106.5,"Scopia","Mixer tap for bath and shower",2),"mixer-tap-for-bath":Ji(29,16.6,6.7,"Scopia","Mixer tap for bath",2),"shower-armchair":Ji(43.6,43.2,85.2,"Scopia","Shower armchair",2),"shower-chair":Ji(46.1,44.5,84.7,"Scopia","Shower chair",2),"turkish-toilet":Ji(45,70.5,68.6,"Scopia","Turkish toilet",2)},io={bedFlowers:Ji(202.2,228.2,144.2,"Flowers","Bed",2),"air-mattress":Ji(69.4,181.9,15.8,"Scopia","Air mattress",2),mobileangoloCiliegio:Ji(86.7,86,240,"LucaPresidente","Angle wardrobe cherry",2),bed3:Ji(202.2,228.2,144.2,"SVAFnemesis","Bed",2),bed1:Ji(170.5,216.5,110.8,"Scopia","Bed",2),bedWithTexture:Ji(198,226.4,76.5,"Nhumrod","Bed",2),bedsideTable:Ji(50,41.4,48,"SirOccor","Bedside table",2),bedsideTable2:Ji(48.6,48.1,45.4,"Nhumrod","Bedside table",2),blocks:Ji(60,50,34.6,"LucaPresidente","Blocks",1),mobileAngoloInterno:Ji(105,105,240,"LucaPresidente","Blue corner wardrobe",2),mobileAzzurro:Ji(100,57,240,"LucaPresidente","Blue wardrobe",2),bootieSeparated:Ji(21,26.8,17.5,"Cgrifter","Bootie",1),bunkBed:Ji(113.1,205,160,"NabHlEsCK & eTeks","Bunk bed",2),"captains-bed":Ji(98.2,209.2,86.6,"Scopia","Captain's bed",2),"changing-table":Ji(122.7,48.1,97.5,"Scopia","Changing table",2),chest:Ji(143.5,53.6,82,"Elhzar","Chest",2),kommode:Ji(95.1,41.9,93,"JabberWalky","Chest",2),juniorBed:Ji(105.7,197.8,65.6,"SirOccor & eTeks","Child bed",2),"clothes-rack":Ji(111.9,35.8,125.1,"Scopia","Clothes rack",2),"clothes-hanger":Ji(43,1.3,21.5,"Kator Legaz","Clothes hanger",1),"clothes-horse":Ji(65,95,87,"Scopia","Clothes horse",2),portemanteaux2:Ji(46,46,161.8,"Baffab","Hat and coat stand",1),corner:Ji(52.5,52.5,240,"LucaPresidente","Corner bookcase",2),mensolaCurvaAcero:Ji(40,40,3,"LucaPresidente","Corner shelf maple",7),crib:Ji(72.8,124.3,110.9,"Scopia","Crib",2),pensileAcero:Ji(40,25,40,"LucaPresidente","Cube shelf maple",1),doll:Ji(14.4,12.1,16,"Scopia","Doll",1),"doll-house":Ji(69,32.4,86.8,"Scopia","Doll house",1),comoCiliegio:Ji(160,60,70,"LucaPresidente","Dresser cherry",2),folded_clothes:Ji(26.3,40.4,12.2,"Scopia","Folded clothes",1),futon:Ji(142,211.3,18.2,"Scopia","Futon",5),"hanging-clothes1":Ji(32.5,59,142.5,"Kator Legaz","Hanging clothes",1),backpack:Ji(28.9,33.7,40,"Jo.3D","Backpack",1),casque:Ji(26,37.9,30.1,"Scopia","Helmet",1),"adjustable-hospital-bed":Ji(100,209.6,89.7,"Scopia","Hospital bed",2),"hospital-table-on-wheels":Ji(76.6,45.5,74.5,"Scopia","Hospital table on wheels",2),hotelSafe:Ji(44,39.6,20,"Scopia","Hotel safe",1),letters:Ji(40.1,12.7,18,"LucaPresidente","Letter cubes",1),litMezzanine2:Ji(296.4,184.9,210,"Clyriss","Mezzanine bed",2),"mezzanine-bed":Ji(121.8,259,192.6,"Scopia","Mezzanine bed",2),mocassinSeparated:Ji(22.2,28.1,10.5,"Mocassin","Scopia",1),"convertible-sofa-BZ-opened":Ji(158.3,190.1,47.8,"Scopia","Opened convertible sofa BZ",2),housePuzzle:Ji(15.5,15.6,1.3,"Snu","Puzzle",1),rubix2:Ji(5.6,5.6,5.6,"Farcgs","Rubik's cube",1),sleepingBag:Ji(88.2,200,10.1,"Scopia","Sleeping bag",2),slippersSeparated:Ji(23.7,28.1,6.1,"Mik1190","Slippers",1),smiley:Ji(13.4,13.4,20.9,"LucaPresidente","Smiley tower",1),sneakersSeparated:Ji(23.7,30.1,11.8,"Scopia","Sneakers",1),teddyBear:Ji(33.1,21.8,32.2,"Mantislate","Teddy bear",1),train:Ji(119,97,10.2,"LucaPresidente","Train",2),armoireLotus:Ji(179.5,67.5,221.4,"Ga\xebl Bettinelli","Wardrobe",2),mobileCiliegio:Ji(100,50,240,"LucaPresidente","Wardrobe cherry",2),wardrobe2:Ji(173.5,60,208,"Richu","Wardrobe",2),womanShoesSeparated:Ji(18.9,24.9,16.5,"Scopia","Woman shoes",1),bed:Ji(144.6,193.1,52.8,"eTeks","Bed",2),bed140x190:Ji(158,208,70,"eTeks","Bed 140x190",2),bed90x190:Ji(108,208,70,"eTeks","Bed 90x190",2),bunkBed90x190:Ji(115,208,180,"eTeks","Bunk bed",2),wardrobe:Ji(100,54,165,"eTeks","Wardrobe",2),cornerBunkBed90x190:Ji(208,208,155,"eTeks","Corner bunk bed",2),petiteCommode:Ji(82,46.4,83,"Snduc","Small chest",2),armoire:Ji(109,52.8,200.5,"Icybones","Wardrobe",1),litMezzanine:Ji(200.5,216.8,200.4,"Infernal-quack","Loft bed",2),loftBed140x190:Ji(165,208,180,"eTeks","Loft bed 140x190",2),bed2:Ji(144.7,213.7,107.7,"Blend Swap","Bed",2),caballito:Ji(67.65,29.1,49.8,"Sangio","Rocking horse",2),cartoon_biplane:Ji(13.8,12.4,5.7,"Robo3dguy","Biplane",2),wardrobeWithSlidingDoors:Ji(200,66,236.4,"Ashaihullin","Wardrobe",2),cupboard:Ji(100.5,39,150,"Mahmood","Cupboard",2),babyRockingBed:Ji(59.7,82.5,76.2,"SVAFnemesis","Baby bed",2),cardGame:Ji(21.1,11.3,.38,"Bagiryu","Card game",2),briefcase:Ji(40,10.4,33.3,"Ulanbek","Briefcase",2),handbag:Ji(26.1,12.4,19.4,"Ulanbek","Handbag",2),woodToy:Ji(7.7,6,11.7,"Miroljub","Wood toy",2),"carrito-de-madera":Ji(12.6,26.9,12.7,"Oldtimer","Car model",2),clock:Ji(7,4.3,7,"Krabz","Clock",2),suit:Ji(44,11.8,60,"Rosenth","Suit",2),chessboard:Ji(30,30,8,"Swapnilrocks98","Chessboard",2),lettoCloud:Ji(188.9,216.5,78.8,"Fabbyone & eTeks","Bed",2),toyTrain:Ji(30.1,12.4,9.6,"RegusTtef","Toy train",2),xylophone:Ji(48.3,28.9,6,"SonnySee","Xylophone",2),petitReveil:Ji(9,4.6,5,"Snduc","Alarm clock",2),p40:Ji(18,15.2,5.1,"Geantick","P40",2),daybed:Ji(264.8,210,105.7,"Pencilart","Trundle bed",2),captainsBed:Ji(131.8,208,119.3,"Pencilart","Captain's bed",2),trundleBed:Ji(215.7,95,117.1,"Pencilart","Daybed",2),litParents:Ji(188.8,225.6,88.8,"Icybones","Bed",2),clicClacOuvert:Ji(182,132,39.9,"Ga\ufffdl Bettinelli","Opened sofa bed",2),lit:Ji(167.2,220.1,78.5,"Ga\ufffdl Bettinelli","Bed",2),meubleChevet:Ji(39.86778,29,54,"Ga\ufffdl Bettinelli","Bedside table",2),suits_racked:Ji(80,60,94,"Ola-Kristian Hoff","Hanging suits",2),childBed:Ji(105,210,110,"Jabberwalky","Child bed",2),"hanging-clothes2":Ji(62.1,54.4,116.2,"Kator Legaz","Hanging clothes",2),comodinoSinistroCiliegio:Ji(150,45,65,"LucaPresidente","Bedside table cherry",2),lettoCiliegio:Ji(184,197,65,"LucaPresidente","Bed cherry",2),mensolaCiliegio:Ji(102,20,34,"LucaPresidente","Shelf cherry",2),comodinoAzzurro:Ji(50,42.5,48,"LucaPresidente","Blue bedside table",2),lettoAzzurro:Ji(80,180,56,"LucaPresidente","Blue child bed",2),lettoSoppalcoAzzurro:Ji(82.9,180,146,"LucaPresidente","Blue loft bed",2),mensolaAcero:Ji(60,20,5,"LucaPresidente","Shelf maple",2),scaletta:Ji(44,46.1,128.5,"LucaPresidente","Ladder",2),iron_bed:Ji(131.7,215,116,"Scopia","Iron bed",2),wardrobe1:Ji(217.4,53,200,"Scopia","Wardrobe",2),children_bed:Ji(91.8,205.3,87.4,"Scopia","Child bed",2),kids_shelves:Ji(101,42.4,190.7,"Scopia","Shelves",2),robe:Ji(75.9,82.7,2.7,"Scopia","Dress",2),casquette:Ji(23.7,32.7,15.2,"Scopia","Cap",2),chapeau:Ji(36.1,42.4,15,"Scopia","Hat",2),"short-shadows":Ji(37.8,51.9,1.9,"Scopia","Short",2),"pantalon-shadows":Ji(40.8,98.6,2,"Scopia","Trousers",2),blouson:Ji(51.3,73.15,3.2,"Scopia","Jacket",2),jupe:Ji(40.7,40.6,3.6,"Scopia","Skirt",2),"jupe-doeskin":Ji(40.2,32.3,1.75,"Scopia","Skirt",2),chaussette:Ji(21.9,30.6,.7,"Scopia","Socket",2),"montre-with-pose":Ji(4.3,8.7,4.9,"Scopia","Watch",2),montre:Ji(4.3,24.3,.6,"Scopia","Watch",2),bague:Ji(2.2,2.4,.38,"Scopia","Ring",2),"gant-textured":Ji(14.8,26.6,6,"Scopia","Glove",2),"dressing-table":Ji(85.7,46.5,135.9,"Scopia","Dressing table",2),day_bed_frame:Ji(208,97,70,"Scopia","Day bed",2),tasDeVetements:Ji(122.2,103.8,37.7,"Scopia","Clothes heap",2),oreiller:Ji(40.5,40.5,13.9,"Scopia","Pillow",2),flipFlops:Ji(19.9,19.3,4.6,"Scopia","Flip flops",2)},oo={awning_bracket:Ji(310,169.4,61.6,"Ola-Kristian Hoff","Awning",7),column_balustrade:Ji(30,24.4,92.5,"Ola-Kristian Hoff","Balustrade column",1),column_balustrade_corner:Ji(54.4,54.4,92.5,"Ola-Kristian Hoff","Balustrade corner",1),barbecue:Ji(39.2,48.4,50.9,"Sophie","Barbecue",2),barnum:Ji(300.3,300.5,340.1,"Scopia","Barnum",2),basketball_net_and_board:Ji(109,60.9,105.6,"Scopia","Basketball net",7),birch:Ji(394,375,750,"Ola-Kristian Hoff","Birch Tree",2),bush:Ji(151.6,143.5,131.2,"Scopia","Bush Tree",2),"cafe-chair":Ji(49.5,51.7,85,"Kator Legaz","Cafe chair",2),"cafe-table":Ji(74.2,74.2,70,"Kator Legaz","Cafe table",2),campingLamp:Ji(15.4,15.4,36.7,"Bloknayrb","Camping lamp",1),campingTent:Ji(248.1,236.2,141.4,"Scopia","Camping tent",2),child_swing:Ji(162.8,160.7,176.3,"Scopia","Child swing",2),parque:Ji(406.9,95.9,200,"Scopia","Children game",2),croisement2et2:Ji(1045,1045,18,"Scopia","Crossroad 2x2 lanes",5),routeCourbe2VoiesAvecTrottoirs90Deg:Ji(1045,1045,18,"Scopia","Curved road lanes 90\xb0",5),deckChair:Ji(71.4,125.5,82.2,"BigMouse","Deck chair",2),"diving-board":Ji(42,183,28,"Scopia","Diving board",1),"dog-house":Ji(71.6,90,71.9,"Scopia","Dog house",2),privacyFence2:Ji(100,15,100.8,"Pencilart","Fence",2),"iron-railing-separated-hooks-2":Ji(135,11,70,"Scopia","Iron railing",1),railing:Ji(94.4,5,90,"eTeks","Railing",1),railing_glass:Ji(155,5,130,"Ola-Kristian Hoff","Railing glass",1),gardeCorps:Ji(140,6,107.8,"Julie Fabre","Railing",2),fence:Ji(179.6,5.8,104.9,"Dobbs","Fence",1),fence_grid:Ji(200,5,105,"Ola-Kristian Hoff","Fence grid",1),fence_picket:Ji(85,6,125,"Ola-Kristian Hoff","Fence picket",1),"football-goal":Ji(152.4,89,120,"Scopia","Football goal",2),"big-football-goal":Ji(732,180.9,244,"Scopia","Big football goal",2),waterFountain:Ji(51.4,51.4,46.5,"Sparkywalk","Fountain",2),fountain:Ji(184.9,184.9,150,"NabHlEsCK & eTeks","Fountain",2),"garden-hut":Ji(171,182,198,"Scopia","Garden hut",2),gate_grind:Ji(191,11.5,86,"Ola-Kristian Hoff","Gate",2),greenhouse:Ji(310,310,290,"Ola-Kristian Hoff","Greenhouse",2),grillNgauge:Ji(180,69.5,135,"Pencilart","Grill",2),hammock:Ji(350.5,164.3,158.5,"Scopia","Hammock",2),hangingUmbrella:Ji(240,297,272.1,"Seber Rider","Hanging umbrella",2),hedgeTextured:Ji(154.7,59.4,100,"Scopia","Hedge",1),jacuzzi:Ji(228,228,94.8,"Scopia","Jacuzzi",2),"lavender-bush":Ji(81.8,82.1,64.7,"Scopia","Lavender bush",2),boiteALettre:Ji(31,30,30,"Venceslas","Letters box",1),lombardyPoplar:Ji(203,192,750,"Wolfram Diestel","Lombardy poplar",2),motorbike:Ji(91.4,33,74.6,"Ulanbek","Motorbike",2),"painted-bench":Ji(142.6,51.8,80,"Kator Legaz","Painted bench",2),palm:Ji(530,547,950,"Wolfram Diestel","Palm tree",2),pansy:Ji(30.8,30.3,21.5,"Scopia","Pansy",2),"passage-pieton":Ji(400,750,.3,"Scopia","Pedestrian crossing",5),pedestrianRailing1:Ji(208.1,4.8,103.9,"Colkaih","Pedestrian railing",2),pedestrianRailing2:Ji(200,5,108.9,"Colkaih","Pedestrian railing",2),pergola:Ji(240,255.6,263,"Sophie","Pergola",2),picnic_table:Ji(180.2,145.3,75,"Hawkdawg","Picnic table",2),pine:Ji(340,320,600,"Ola-Kristian Hoff","Pine Tree",2),plantie:Ji(68.9,27.7,37.3,"Rendars","Plant box",2),pool_ladder:Ji(50,50,190,"Ola-Kristian Hoff","Pool ladder",1),"porch-column-03":Ji(33.3,33.3,250,"Kator Legaz","Porch column",2),voiesFerreesDroit10m:Ji(1e3,440,39.9,"Scopia","Railroad 10m",5),voiesFerreesCourbe20m:Ji(2034.3,692.8,39.9,"Scopia","Railroad curve 20m",5),voiesFerreesAiguillage:Ji(2006.6,692.8,39.9,"Scopia","Railroad switch",5),rainGutterPart1:Ji(200,12,6.5,"Dingenskirchen","Rain gutter Part 1",1),rainGutterPart2:Ji(10,91.6,260,"Dingenskirchen","Rain gutter Part 2",1),rattanArmchair:Ji(71,72.4,78.7,"Scopia","Rattan armchair",2),rattanSofa:Ji(128.5,72.4,78.7,"Scopia","Rattan sofa",2),rattanTable:Ji(120,60,40,"Scopia","Rattan table",2),route2VoiesAvecTrottoirs:Ji(1300,1045,18,"Scopia","Road 2 lanes",5),rock1:Ji(50.5,33.7,50,"1000bones","Rock",1),rock2:Ji(69,53.4,30.7,"1000bones","Rock",1),rock3:Ji(68.5,42.3,43.8,"1000bones","Rock",1),"roses-bush":Ji(39.6,45.3,36.1,"Scopia","Roses bush",1),"round-swimming-pool":Ji(165,165,52,"Scopia","Round swimming pool",1),sandpit:Ji(130.3,120.2,26,"Scopia","Sandpit",1),bonecoDeNeve:Ji(94,71.1,98.8,"Zema","Snowman",1),stoneLantern:Ji(34.7,34.7,49.4,"Argonius","Stone lantern",1),"swimming-pool":Ji(1713.4,997.6,100.5,"Scopia","Swimming pool",2),ext_table:Ji(202.2,154.7,40,"Scopia","Table",2),silla_teca:Ji(58,67,98.4,"Scopia","Teck chair",2),"feu-de-signalisation-simple":Ji(37.5,53.3,316.6,"Scopia","Traffic light",2),trampoline:Ji(300,300,53.2,"Scopia","Trampoline",2),tree:Ji(600,640,800,"Ola-Kristian Hoff","Tree",2),umbrella:Ji(223.1,222.7,199.8,"BigMouse","Umbrella",2),wheelie_bin:Ji(60,62.5,101.5,"Ola-Kristian Hoff","Wheelie bin",2),outdoorLamp:Ji(21.3,21.3,59.1,"Mindfront","Outdoor lamp",1),window_shutter:Ji(43.9,2.9,129,"Ola-Kristian Hoff","Window shutter",7),window_flat_roof_skylight_bubble:Ji(100,100,45,"Ola-Kristian Hoff","Flat roof skylight bubble",1),bump:Ji(100,100,10.6,"Emmanuel Puybaret","Bump",2),portillon:Ji(122,6.5,110,"Roger Lonqueux","Gate",2),flowerBox:Ji(55,16.75,19.4,"MattMump","Flower box",2),mofx_mailbox:Ji(15.9,46.5,81.55,"Mofx","Mailbox",2),relaxChair:Ji(66,190,84.7,"Semhustej","Relax chair",2),bench:Ji(170.1,45.9,50.8,"Ulanbek","Bench",2),childHut:Ji(328,520.7,302.3,"Ulanbek","Child hut",2),childSwing:Ji(213.4,124.8,207,"Ulanbek","Child swing",2),seesaw:Ji(239.7,41.7,90.7,"Ulanbek","Seesaw",2),wheelbarrow:Ji(166.3,59.8,56.7,"Grs","Wheelbarrow",2),lantern:Ji(37.7,32.6,80,"CerFriBar","Stone lantern",2),chair_deck:Ji(67.35,208.5,55.3,"North.star","Deck chair",2),poolLounge:Ji(88,200,88.5,"LarryStephenRobb","Pool lounge",2),rowboat:Ji(125.8,309,58.5,"Asterlil","Rowboat",2),transat:Ji(60,104.6,97.7,"GdB","Deck chair",2),table_footrest:Ji(150,34,32.5,"Pencilart","Table",2),fencepost1:Ji(12,12,100,"Pencilart","Fence post",2),fencepost2:Ji(12,12,95,"Pencilart","Fence post",2),"borderfence-main":Ji(96.4,11.8,65,"Pencilart","Border fence",2),"borderfence-small":Ji(56.7,11.8,65,"Pencilart","Small border fence",2),dogHouse:Ji(104,133.8,73,"Theo Blonk","Dog house",2),blackDeckTable:Ji(155,156.6,72,"Pencilart","Black deck table",2),gardenUmbrella:Ji(256.7,222,250,"Pencilart","Garden umbrella",2),blackDeckChair:Ji(51.5,66,110,"Pencilart","Black deck chair",2),privacyFence:Ji(73.3,7.6,104.5,"Pencilart","Fence",2),canapeJardin:Ji(221,75,180,"Ga\ufffdl Bettinelli","Garden sofa",2),swimmingPool:Ji(832,339.1,212.7,"Emmanuel Puybaret","Swimming pool",2),balancelle:Ji(150,147.1,182.4,"Roger Lonqueux","Swinging chair",2),cloture:Ji(117,10,118.8,"Roger Lonqueux","Fence",2),fence_grid_gate:Ji(85,5,110,"Ola-Kristian Hoff","Fence grid gate",2),bordure:Ji(45,3,18,"Roger Lonqueux","Edge",2),gate_iron:Ji(98.1,1,234.6,"Ola-Kristian Hoff","Gate",2),portail:Ji(190.5,12.7,210,"Roger Lonqueux","Gate",2),etendoirLinge:Ji(416.8,90.1,204.4,"Julie Fabre","Cloth lines",2),flag_hinged_pole:Ji(230,140,820,"Ola-Kristian Hoff","Flag hinged pole",2),parasol_str:Ji(200,200,249.2,"Ola-Kristian Hoff","Umbrella",2),traffic_light_ped:Ji(53.2,53.2,300,"Ola-Kristian Hoff","Traffic light",2),"concrete-bench":Ji(142.3,60,72.9,"Kator Legaz","Concrete bench",2),"park-trashcan":Ji(79,79,85.8,"Kator Legaz","Park trashcan",2),"porch-column-01":Ji(33.2,33.2,250,"Kator Legaz","Porch column",2),"porch-column-02":Ji(43.2,43.2,250,"Kator Legaz","Porch column",2),"residential-trashcan":Ji(58.6,58.6,80,"Kator Legaz","Residential trashcan",2),"spray-bottle":Ji(9.6,11.9,30,"Kator Legaz","Spray bottle",2),"concrete-sidewalk":Ji(549,96.2,16.1,"Kator Legaz","Concrete sidewalk",2),"fire-hydrant":Ji(41.4,33.3,76.4,"Kator Legaz","Fire hydrant",2),"hose-reel":Ji(34.2,26.7,46.1,"Kator Legaz","Hose reel",2),ext_chair:Ji(100,76.4,73.4,"Scopia","Chair",2),littlebank:Ji(259.5,67,47.3,"Scopia","Little bank",2),wood_bank:Ji(200,100.3,98.5,"Scopia","Wood bank",2),beach_chair:Ji(69.6,193.5,108.1,"Scopia","Beach chair",2),letters_box:Ji(31,12.2,40.5,"Scopia","Letters box",2),"rectangle-swimming-pool":Ji(500,275.5,139.9,"Scopia","Rectangle swimming pool",2),"garden-faucet":Ji(4.96,20,15.5,"Scopia","Garden faucet",2),"passage-a-niveau":Ji(596.5,92.8,262.1,"Scopia","Rail crossing",2),rails:Ji(1e3,163.1,13.4,"Scopia","Rails",2),"fleche-tout-droit":Ji(70,400,.3,"Scopia","Arrow straight ahead",2),"fleche-tourner-a-droite-et-direct":Ji(127.5,400,.3,"Scopia","Arrow turn right and ahead",2),"fleche-tourner-a-droite":Ji(100,400,.3,"Scopia","Arrow turn right",2),"stationnement-creneau":Ji(510,205,.3,"Scopia","Parking slot",2),"stationnement-en-bataille":Ji(237.5,504.9,.3,"Scopia","Parking slot 90\ufffd",2),"stationnement-epi-45":Ji(801.9,485.1,.3,"Scopia","Parking slot 45\ufffd",2),"stationnement-epi-60":Ji(573.7,519.9,.3,"Scopia","Parking slot 60\ufffd",2),"stationnement-epi-75":Ji(385.1,514.4,.3,"Scopia","Parking slot 75\ufffd",2),"high-hedge":Ji(150.7,104.1,179,"Scopia","High hedge",2),hedge:Ji(150.9,104.6,106.3,"Scopia","Hedge",2),acacia:Ji(770.8,645.7,649.4,"Scopia","Acacia",2),bamboo:Ji(299.5,277.7,500,"Scopia","Bamboo",2),ficusTree:Ji(275,283.9,500,"Scopia","Ficus",2),bluePineSnow:Ji(351.8,369.6,559.4,"Scopia","Blue pine under snow",2),coconutTree:Ji(777.2,800,1100,"Scopia","Coconut tree",2),coconutTreeBended:Ji(729.4,750.9,1e3,"Scopia","Bended coconut tree",2),copperBeech:Ji(751.3,730,800,"Scopia","Copper beech",2),cypress:Ji(132.2,134.2,560,"Scopia","Cypress",2),japaneseMaple:Ji(790.3,697.1,700,"Scopia","Japanese maple",2),poplar:Ji(404.4,375.4,730,"Scopia","Poplar",2),peachBlossom:Ji(503.9,746.4,500,"Scopia","Peach blossom",2),pineSnow:Ji(374.5,378.9,545.7,"Scopia","Pine under snow",2),sabalPalmeto:Ji(347.4,310.4,1150,"Scopia","Palm tree",2),sycamoreMaple:Ji(908.6,1060.2,1200,"Scopia","Sycamore maple",2),tasDeTerre:Ji(92.3,93,19.8,"Scopia","Ground heap",2),tasDeSable:Ji(95.1,97.5,15.7,"Scopia","Sand heap",2),tasDeGravillons:Ji(98,89.4,14.8,"Scopia","Gravel heap",2),tasDeGravats:Ji(96,91.5,13.7,"Scopia","Rubble heap",2),voiesFerreesCourbe10m:Ji(1045.1,562.6,39.9,"Scopia","Railroad curve 10m",2),voiesFerreesCourbe40m:Ji(3933.3,942.8,39.9,"Scopia","Railroad curve 40m",2),voiesFerreesDroit1m:Ji(100,440,39.9,"Scopia","Railroad 1m",2),routeCourbe2VoiesAvecTrottoirs26m:Ji(2705.7,1365.7,18,"Scopia","Curved road 2 lanes 26m",2),routeCourbe1VoieAvecTrottoirs26m:Ji(2660.4,1021.6,18,"Scopia","Curved road 1 lane 26m",2),"routeCourbe2VoiesAvecTrottoirs6.5m":Ji(778,1111.9,18,"Scopia","Curved road 2 lanes 6.5m",2),"routeCourbe1VoieAvecTrottoirs6.5m":Ji(732.9,769.9,18,"Scopia","Curved road 1 lane 6.5m",2),routeCourbe1VoieAvecTrottoirs13m:Ji(1375.9,852.6,18,"Scopia","Curved road 1 lane 13m",2),routeCourbe2VoiesAvecTrottoirs13m:Ji(1421.2,1196.6,18,"Scopia","Curved road 2 lanes 13m",2),route1VoieAvecTrottoirs:Ji(1300,695,18,"Scopia","Road 1 lane",2),croisement1et1:Ji(695,695,18,"Scopia","Crossroad 1x1 lane",2),croisement1et2:Ji(695,1045,18,"Scopia","Crossroad 1x2 lanes",2),pont2Voies:Ji(1300,1045,228,"Scopia","Bridge 2 lanes",2),pont1Voie:Ji(1300,695,228,"Scopia","Bridge 1 lane",2),separateurDeVoie:Ji(240,60,75,"Scopia","Traffic lane separator",2),pilierPont1Voie:Ji(70,450,450,"Scopia","Bridge pillar",2),autoroute2Voies:Ji(5200,1061.2,75.2,"Scopia","Highway 2 lanes",2),routeCourbe1VoieAvecTrottoirs90Deg:Ji(695,695,18,"Scopia","Curved road 1 lane 90\ufffd",2),filElectrique:Ji(2287.1,3.46,34.8,"Scopia","Electric wire",2),"poteau-en-beton":Ji(339.9,240.6,1202,"Scopia","Concrete pole",2),"poteau-en-bois":Ji(339.9,107,1202.3,"Scopia","Wood pole",2),"feu-de-signalisation-avec-signalisation-au-dessus":Ji(320.6,56.4,499.1,"Scopia","Traffic light",2),hydrangea:Ji(79.8,78.2,64.9,"Scopia","Hydrangea",2),blackTupelo:Ji(666,650,1e3,"Wolfram Diestel","Black tupelo",2),quakingAspen:Ji(355,369,700,"Wolfram Diestel","Quaking aspen",2),fanPalm:Ji(246,257,300,"Wolfram Diestel","Fan palm tree",2),sassafras:Ji(607,592,950,"Wolfram Diestel","Sassafras",2),weepingWillow:Ji(700,683,800,"Wolfram Diestel","Weeping willow",2)},so={apples:Ji(25.7,25.7,16,"Scopia","Apples",1),mamadeira:Ji(5,5,14.7,"Valdps","Baby bottle",1),baby_high_chair:Ji(60,64.4,104,"Scopia","Baby high chair",2),sgabello:Ji(32,36,85,"LucaPresidente","Bar stool",2),birthday_cake:Ji(24,24,10.6,"Scopia","Birthday cake",1),boiler:Ji(17.9,16.2,20,"Jay-Artist","Boiler",1),bouilloire:Ji(16.7,20.2,22.1,"Toomy","Boiler",1),bowl:Ji(20.1,20.1,12.4,"Scopia","Bowl",1),bowlWithFruits:Ji(32,33.6,14.1,"Scopia","Bowl with fruits",1),bowlWithSalad:Ji(25,25,11.7,"Scopia","Bowl with salad",1),bread:Ji(6,23.5,10.3,"Yd","Bread",1),baguettePain:Ji(54.7,7.5,4.1,"Emmanuel Puybaret","Baguette",1),broom:Ji(36.6,8.2,156,"Scopia","Broom",1),bucket:Ji(30,28,26.5,"Ola-Kristian Hoff","Bucket",1),butter:Ji(16,7.5,3.4,"BMF","Butter",1),"chest-freezer":Ji(130,85.8,74,"Scopia","Chest freezer",2),choppingBoard:Ji(37.6,26,4.5,"Jay-Artist","Chopping board",1),baguettes:Ji(1.4,21,.6,"Toomy","Chopsticks",1),cocktailGlass:Ji(8.3,8.3,13.1,"Xablend1222","Cocktail glass",1),coffeeBrewer:Ji(13.4,38.5,27.2,"TreyClaine","Coffee brewer",1),caffe_final:Ji(10,10,4.3,"Reduno","Coffee cup",1),percolateur:Ji(20.5,30.4,27.9,"Toomy","Coffee machine",1),"coffee-maker":Ji(18.6,28.7,30,"Kator Legaz","Coffee maker",1),"coffee-mug":Ji(8.5,12,10.8,"Kator Legaz","Coffee mug",1),coffeePress:Ji(16.3,10.3,26.5,"Cephei","Coffee press",1),cooker:Ji(28.9,40,27.1,"Scopia","Cooker",1),mano_cooktop:Ji(58,50,3.8,"Mano","Cooktop",1),"food-box-corn-flakes":Ji(19.1,9.1,27.1,"Kator Legaz","Corn flakes box",1),cupcake:Ji(5.9,5.9,7.5,"Dvachib","Cup cake",1),lavastoviglie:Ji(60,62.6,78,"LucaPresidente","Dishwasher",2),doubleOven:Ji(60,51.5,108.9,"Martanda","Double oven",1),drawersCabinet:Ji(60,61.2,88.5,"Vladoffsky","Drawers cabinet",2),kitchenDrawersCabinet:Ji(44.2,61.2,87.8,"Jay-Artist","Drawers cabinet",2),electronicScale:Ji(15,22,2,"Scopia","Electronic scale",1),frenchFries:Ji(20.4,19.2,3.5,"Scopia","French fries",1),glass:Ji(7.5,7.4,19.5,"Jay-Artist","Glass",1),kitchenGlassDoorCabinet:Ji(33.6,32.1,77.1,"Jay-Artist & eTeks","Glass door cabinet",7),"kitchen-glass-jar-high":Ji(9.9,9.9,21.8,"Scopia","Glass jar",1),upperCabinet:Ji(60,41,56.6,"Vladoffsky","Upper cabinet",7),upperCabinet2:Ji(60,41,56.6,"Vladoffsky","Upper cabinet",7),hamburger:Ji(11,11,8.6,"SaiZyca2","Hamburger",1),highCabinet:Ji(60,61.2,217,"Vladoffsky","High cabinet",6),hood:Ji(101.6,39.2,48.6,"Jay-Artist","Hood",7),kitchenHood:Ji(59.8,51.4,14.3,"Scopia","Hood",1),hotDog:Ji(21.1,7.3,6.5,"Erickfree","Hot dog",1),"induction-cooker-2-zones":Ji(30,52,.4,"Scopia","Induction cooker 2 zones",1),"induction-cooker-4-zones":Ji(56,49.5,.4,"Scopia","Induction cooker 4 zones",1),kitchenIsland:Ji(93.9,69.9,83.1,"Jay-Artist","Island",2),islandExtension:Ji(60,123.7,88.5,"Vladoffsky","Island extension",2),kitchenKnife:Ji(3.5,26.3,2.1,"Jay-Artist","Kitchen knife",1),kitchenUpperCabinet:Ji(109.4,32.1,77.1,"Jay-Artist","Upper cabinet",7),kitchenKnifeStandSet:Ji(9,27.1,21.9,"Scopia","Knife stand",1),largeFridge:Ji(92.5,80.6,184.3,"Vladoffsky","Large fridge",2),largeStove:Ji(103.9,72.3,85.2,"Jay-Artist","Large stove",2),lowerCabinet:Ji(60,61.2,88.5,"Vladoffsky","Lower cabinet",2),kitchenLowerCabinet:Ji(97.6,61.6,87.8,"Jay-Artist","Lower cabinet",2),lowerCornerCabinet:Ji(81,82.3,88.5,"Vladoffsky","Lower corner cabinet",2),tetrapak:Ji(9.6,9.5,26.5,"Tastykle3d & eTeks","Milk",1),oven:Ji(60,51.5,57.8,"Martanda","Oven",7),ovenFront:Ji(60,6.7,55,"LucaPresidente","Oven front",1),poele:Ji(25.7,43.2,5.4,"Toomy","Pan",1),casserole:Ji(17.4,30.3,8.5,"Toomy","Pan",1),paperTowelHolder:Ji(16,16,29.2,"Scopia","Paper towel holder",1),"food-box-pasta":Ji(13.9,5.4,19.7,"Scopia","Pasta box",1),pizza:Ji(29.7,30,.9,"Toomy","Pizza",1),"plate-and-ustensils":Ji(27,34,13.2,"Kator Legaz","Plate, glass and cultery",1),"ensemble-assiette-couteau-fourchette-cuillere-verre":Ji(41.7,38.9,14,"Scopia","Plate, glasses and cutlery",1),citrouille:Ji(29.4,29.4,24.7,"Sophie","Pumpkin",1),rangeHood:Ji(60,31.8,42.6,"Donypolo","Range hood",7),refrigerator:Ji(90,90,172,"Hilander","Refrigerator",2),bolDeRiz:Ji(15,15,12,"Toomy","Rice bowl",1),autocuiseur:Ji(25.8,22.5,22.8,"Tommy","Rice cooker",1),"roasted-chicken":Ji(30,20.3,19.5,"Scopia","Roasted chicken",1),saltShaker:Ji(4.1,4.1,7.9,"Jswing","Salt shaker",1),sandwichMaker:Ji(24,25.2,6.8,"Scopia","Sandwich maker",1),meubleChaussures:Ji(71.7,39.6,102.3,"Ga\xebl Bettinelli","Shoe cabinet",2),kitchenSink:Ji(97.6,61.6,97.6,"Jay-Artist & Kator Legaz & eTeks","Sink",2),sinkCabinet2:Ji(60,61.2,121.2,"Vladoffsky","Sink cabinet",2),dishwasher:Ji(45,60,84.5,"Scopia","Small dishwasher",2),kitchenSmallLowerCabinet:Ji(48.7,61.6,87.8,"Jay-Artist","Small lower cabinet",2),"small-oven":Ji(56.4,47.3,36.4,"Scopia","Small oven",1),kitchenSmallUpperCabinet:Ji(33.6,32.1,77.1,"Jay-Artist","Small upper cabinet",7),smallUpperCabinet:Ji(60,41,56.6,"Vladoffsky","Small upper cabinet",7),spiceTower:Ji(15.9,15.9,31,"Scopia","Spice tower",1),eponge:Ji(10,6,1.4,"Toomy","Sponge",1),steak:Ji(32.4,19.3,5.1,"Scopia","Steak",1),tabouretBar:Ji(51.1,44.2,101.7,"Ga\xebl Bettinelli","Stool",2),stool2:Ji(36.1,36.1,78,"Vladoffsky","Stool",2),stove1:Ji(83.3,93.6,104,"Pencilart","Stove",2),stove:Ji(33.3,60,5.6,"Doniypolo","Stove",1),toast:Ji(10.1,9.9,.8,"Toomy","Toast",1),grillePain:Ji(34.2,11.9,18,"Toomy","Toaster",1),toaster:Ji(27,15.5,17.4,"Scopia","Toaster",1),towel:Ji(14.5,13.4,45.4,"Jay-Artist","Towel",7),poubelleInox:Ji(29,34.2,65.2,"Ga\xebl Bettinelli","Trash can",2),tray:Ji(39,29.4,5.5,"Scopia","Tray",1),utensilsPot:Ji(12.2,11.1,40.2,"Oldtimer","Utensils pot",1),aspirateur:Ji(142.8,32.8,82.3,"Tommy","Vacuum",2),kitchenCabinet:Ji(60,64,85,"eTeks","Kitchen cabinet",2),meubleMicroOnde:Ji(62.6,44,118.3,"Infernal-quack","Microwave cabinet",2),sink:Ji(120,64,105.72,"eTeks","Sink",2),fridge:Ji(60,66,85,"eTeks","Fridge",2),fridgeFreezer:Ji(60,66,185,"eTeks","Fridge & Freezer",2),cabinet:Ji(80,62,86,"Robert Pastierovic","Gray cabinet",2),cabinetWithBasin:Ji(80,62,86,"Robert Pastierovic","Gray cabinet",2),bouteille:Ji(8.2,8.2,29.2,"Snduc","Plastic bottle",1),container:Ji(13.3,9.1,31,"Rlocatelli","Container",1),drawers:Ji(40,62,86,"Robert Pastierovic","Gray drawers",2),tableCuisine:Ji(120,40,88,"Infernal-quack","Table",2),kitchenaid:Ji(21.4,36,35.3,"Swno","Mixer",2),knifeStandSwap:Ji(39.15,3.5,35.6,"PrinterKiller","Knife stand",2),plasticCup:Ji(7.9,7.9,10,"Chemsciguy","Plastic cup",2),silla2:Ji(32.6,31.1,78.8,"Starkblend","Stool",2),yogurtBottle:Ji(6.85,6.85,21.2,"Tastykle3d","Yogurt bottle",2),beerGlass:Ji(15.4,10.2,16.5,"Hedgehogpro","Beer glass",2),upperCornerCabinet:Ji(81,81,72,"Vladoffsky","Upper corner cabinet",2),upperShelves:Ji(35,35,72,"Vladoffsky","Upper shelves cabinet",2),beer_bottle:Ji(5.1,5.1,20,"Poifox","Beer bottle",2),coffee_cup:Ji(8.5,8.5,13,"Dzerbs","Coffee cup",2),fork:Ji(1.9,17.85,.95,"Jay-Artist","Fork",2),kitchenblender:Ji(15.6,22.3,42.7,"PrinterKiller","Blender",2),kitchenTools:Ji(44,9.8,31.6,"Jay-Artist","Kitchen tools",2),knife:Ji(1.8,20.8,.3,"Jay-Artist","Knife",2),largePan:Ji(33.1,26.8,28.2,"Jay-Artist","Large pan",2),microwave:Ji(40.2,35.8,24.75,"Jay-Artist","Microwave",2),spoon:Ji(3.2,18,1.1,"Jay-Artist","Spoon",2),washing_machine:Ji(60,62.4,73.5,"Cattail","Washing machine",2),breadBox:Ji(56.2,27.5,27.5,"Oldtimer","Bread box",2),kitchenScale:Ji(23,23,27.5,"Oldtimer","Kitchen scale",2),espressokettle:Ji(17.9,9.4,15.2,"Krabz","Espresso kettle",2),boiteMetal:Ji(6.7,6.7,11.2,"Snduc","Metal box",2),chaiseCuisine:Ji(36.6,54.2,80.6,"Infernal-quack","Chair",2),verreFlute:Ji(4.2,4.2,17,"Geantick","Flute",2),glassDoorKitchenCabinet:Ji(132.6,36,121,"Pencilart","Glass door cabinet",2),verreLongDrink:Ji(5.5,5.5,17.8,"Geantick","Long drink glass",2),microOnde:Ji(49,35.3,27.4,"Infernal-quack","Microwave",2),mug:Ji(8,10.8,9.7,"Geantick","Mug",2),assietteVerresCouverts:Ji(37,36.2,10.9,"Sleipnir1","Plate, glasses and cutlery",2),smallGlass:Ji(10,10,7.9,"Pencilart","Small glass",2),carafeEau:Ji(31.1,31.1,30,"Sleipnir1","Water carafe",2),verreEau:Ji(7,7,7.2,"Geantick","Water glass",2),carafeVin:Ji(31.1,31.1,30,"Sleipnir1","Wine carafe",2),verreVin:Ji(7.3,7.3,10.1,"Geantick","Wine glass",2),glassdoorCabinet:Ji(40,44,80.1,"Robert Pastierovic","Gray glass door cabinet",2),mobile_cucina_60x60:Ji(60,65.5,100.6,"Ben Omari","Red cabinet",2),lavello_doppio_90x60:Ji(120,65.5,124.4,"Ben Omari","Red cabinet with basin",2),cassetti_cucina_45x60:Ji(45,65.5,100.6,"Ben Omari","Red drawers",2),isola_cucina_150x90:Ji(150,105,100,"Ben Omari","Red island",2),pensile_cucina_45x90:Ji(90,68.3,42.7,"Ben Omari","Upper cabinet",2),pensile_cucina_60x70:Ji(70,49.5,59,"Ben Omari","Glass door cabinet",2),capa:Ji(66.5,50,61.5,"Ben Omari","Hood",2),piano_cottura:Ji(60,61.6,96.5,"Ben Omari","Cooker",2),frigorifero:Ji(60,72.5,218.2,"Ben Omari","Fridge",2),ceramicHob:Ji(60,52,.9,"Emmanuel Puybaret","Ceramic hob",2),cornerCabinet:Ji(79,78,86,"Pencilart","Wood corner cabinet",2),"3DrawerCabinet":Ji(52.66595,64,86,"Pencilart","Wood drawer cabinet",2),"2GlassDoorCabinet":Ji(96,39.2,70,"Pencilart","Wood glass door cabinet",2),"2DoorUpperCabinet":Ji(96,39.2,70.9,"Pencilart","Wood upper cabinet",2),"2DoorLowerCabinet":Ji(96,64,86,"Pencilart","Wood lower cabinet",2),"1GlassDoorCabinet":Ji(45.2,39.2,70,"Pencilart","Wood glass door cabinet",2),"1DoorUpperCabinet":Ji(45.2,39.2,70.9,"Pencilart","Wood upper cabinet",2),"1DoorLowerCabinet":Ji(51.9,64,86,"Pencilart","Wood lower cabinet",2),refridgerator:Ji(76.4,65,167,"Pencilart","Refrigerator",2),pantry:Ji(98.3,64,184.6,"Pencilart","Wood pantry",2),kitchenSinkWithMarble:Ji(90.9,64,111.35,"Pencilart","Wood cabinet with sink",2),cornerChina:Ji(77,77,171.5,"Pencilart","Wood corner China",2),couteauADecouper:Ji(3.1,31.9,1.6,"Toomy","Kitchen knife",2),couteauAPain:Ji(2.5,28.6,1.2,"Toomy","Bread knife",2),plancheADecouper:Ji(35,23.8,1.7,"Toomy","Chopping board",2),barCusisine:Ji(121.1,45,108.4,"Ga\ufffdl Bettinelli","Bar table",2),frigo:Ji(57,60,113.2,"Ga\ufffdl Bettinelli","Fridge",2),desserte:Ji(46.7,37.2,85.8,"Ga\ufffdl Bettinelli","Cart",2),casierBouteilles:Ji(60,25,60,"Sophie","Bottles rack",2),cookingPlate:Ji(40,20.5,3,"Peter Glas","Cooking plate",2),gaz:Ji(31,31,63.14828,"Sophie","Gaz bottle",2),washer_dryer:Ji(59.5,55,85,"Ola-Kristian Hoff","Washer dryer",2),ashtray:Ji(7.8,7.8,3,"Kator Legaz","Ashtray",2),"bullet-trash-can":Ji(33,33,74,"Kator Legaz","Bullet trash can",2),"12-oz-glass":Ji(7,7,9.7,"Kator Legaz","Glass",2),"highball-glass":Ji(6,6,12.1,"Kator Legaz","Glass",2),"oil-servers":Ji(14.3,7.2,34.6,"Kator Legaz","Oil servers",2),"dinner-plate":Ji(25,17.9,2.2,"Kator Legaz","Oval plate",2),"bread-plate":Ji(20,20,2.2,"Kator Legaz","Plate",2),"propane-stove":Ji(60.05,59.6,58.4,"Kator Legaz","Propane stove",2),"red-wine-bottle-01":Ji(8.5,8.5,30,"Kator Legaz","Wine bottle",2),angolo:Ji(65,65,78,"LucaPresidente","Corner cabinet",2),cucina:Ji(80,66,81.1,"LucaPresidente","Cooker",2),curva:Ji(60,60,78,"LucaPresidente","Corner shelves",2),curvaEsterna30:Ji(30,60,78,"LucaPresidente","Corner shelves 30\ufffd",2),curvaInterna30:Ji(30,60,78,"LucaPresidente","Corner cabinet 30\ufffd",2),doppio:Ji(80,63.4,78,"LucaPresidente","Lower cabinet",2),pensileAngolo:Ji(65,65,60,"LucaPresidente","Upper corner cabinet",2),pensileCurva:Ji(27.5,27.5,60,"LucaPresidente","Upper corner shelves",2),pensileDoppio:Ji(80,33.4,60,"LucaPresidente","Upper cabinet",2),pensileVetro:Ji(40,29.75,60,"LucaPresidente","Glass door cabinet",2),pianoIsola:Ji(40,120,78,"LucaPresidente","Island extension",2),singolo:Ji(40,63.4,78,"LucaPresidente","Lower cabinet",2),lavello:Ji(80,63.4,95,"LucaPresidente","Sink",2),cassettiera:Ji(40,63.4,78,"LucaPresidente","Drawers",2),mobilettoGrande:Ji(80,63.4,141,"LucaPresidente","Large pantry",2),mobilettoPiccolo:Ji(40,63.4,141,"LucaPresidente","Pantry",2),gasHob:Ji(60,40,3.1,"LucaPresidente","Gas hob",2),old_jar:Ji(24.2,20.2,25,"Scopia","Old jar",2),pottery:Ji(11,11,9,"Scopia","Pottery",2),sushi_tray:Ji(32,24.8,4.5,"Scopia","Sushi tray",2),kitchen_tool1:Ji(7,46.5,3.3,"Scopia","Tool",2),kitchen_tool2:Ji(9.6,44.6,4.7,"Scopia","Tool",2),kitchen_tool3:Ji(7.9,46.4,2.4,"Scopia","Tool",2),kitchen_tool4:Ji(6,43.6,3,"Scopia","Tool",2),wine_bottle:Ji(7.8,7.8,30,"Scopia","Wine bottle",2),bar_chair:Ji(44.7,48.6,107.8,"Scopia","Bar chair",2),kitchen_stool:Ji(45.5,45.5,98.4,"Scopia","Stool",2),coffee_machine:Ji(58.2,40.2,36.4,"Scopia","Coffee machine",2),creamer:Ji(12.2,8.4,8.9,"Scopia","Creamer",2),cup:Ji(12,12,6.8,"Scopia","Cup",2),sugar:Ji(10.1,10.1,10.1,"Scopia","Sugar",2),teapot:Ji(21.7,14.7,21.3,"Scopia","Teapot",2),shovel:Ji(27,53.8,16.1,"Scopia","Shovel",2),"shopping-basket":Ji(60,50.2,61.1,"Scopia","Shopping basket",2),squeezer:Ji(16.2,12,8.1,"Scopia","Squeezer",2),deepFryerWithFrenchFries:Ji(27.9,56.8,27.8,"Scopia","Deep fryer",2),stoneGrillDevice:Ji(31.6,25.5,11.6,"Scopia","Stone grill device",2),"food-spaghetti-box":Ji(27.7,4.8,9,"Scopia","Spaghetti box",2),"kitchen-glass-jar-low":Ji(9.9,9.9,12.8,"Scopia","Glass jar",2),"waitress-table-on-wheels":Ji(83.5,41.6,89.6,"Scopia","Waitress table on wheels",2)},no={"convertible-sofa-BZ-closed":Ji(143.2,102.3,87.3,"Scopia","Convertible sofa BZ",2),clicClac:Ji(182,93.3,93.1,"Ga\xebl Bettinelli","Sofa bed",2),chair_granmother:Ji(61,58,105,"Ola-Kristian Hoff","Armchair",2),fotel:Ji(73.5,61.1,69.7,"TripleJ","Armchair",2),fauteuil:Ji(73.5,61.1,69.7,"TripleJ","Armchair",2),armchair3:Ji(59.1,69.4,94.9,"eTeks","Armchair",2),luckyBamboo:Ji(15.5,14.9,34,"Renderbob","Bamboo",1),black_table:Ji(170.1,90,75,"Scopia","Black table",2),"bonsai-tree":Ji(44.5,38.2,42.9,"Scopia","Bonsai tree",1),bookcase:Ji(166.4,33.1,186.4,"Gerardbelnder","Bookcase",2),dining_room:Ji(255.6,36.4,175,"Scopia","Bookcase",2),cabinet2:Ji(223.4,64.5,210.6,"Peter Smolik","Bookcase",2),elementHautSalon:Ji(51.9,42.6,163.2,"Ga\xebl Bettinelli","Bookcase",2),"boston-fern":Ji(65,61,44.5,"Scopia","Boston fern",1),cactus:Ji(14.8,12.8,22.5,"Evivivi","Cactus",1),carpet:Ji(160,225,1,"Emmanuel Puybaret","Carpet",5),tourRangeCD:Ji(19.9,17,179.6,"Ga\xebl Bettinelli","CD rack",2),chair:Ji(42,47.4,88,"Scopia","Chair",2),kitchenChair:Ji(43,44,91,"Cisco336","Chair",2),thonet:Ji(54.7,57.7,75.4,"JoelEapen","Chair",2),chair3:Ji(43.3,50.4,90.6,"MatBot","Chair",2),chair4:Ji(48.4,44.2,88.4,"Scopia","Chair",2),white_kitchen_chair:Ji(42.7,46.9,86,"Scopia","Chair",2),childChair:Ji(38.2,39.5,67,"Radio hate","Child chair",2),children_chair:Ji(28,28,51,"Scopia","Children chair",2),children_table:Ji(63,48,45,"Scopia","Children table",2),christmas_tree:Ji(127.8,129.6,202.9,"Scopia","Christmas tree",2),clear_sofa:Ji(193.9,75.9,80,"Scopia","Clear sofa",2),coffee_table:Ji(89.6,45.9,47.5,"Scopia","Coffee table",2),table_wood_and_iron:Ji(121.4,75.9,50.3,"Scopia","Coffee table",2),tableBasse2:Ji(112.5,59.8,39.1,"Ga\xebl Bettinelli","Coffee table",2),L_shaped_sofa:Ji(233.7,143.6,80,"Nhumrod","Corner sofa",2),sofa:Ji(147,87,87,"eTeks","Corner sofa",2),couch2:Ji(230,159.7,86.6,"Karagez","Couch",2),couchTable:Ji(101.1,70.1,44,"Jabberwalky","Couch table",2),curvedTVForTable:Ji(126.3,18.1,79.9,"Jabberwalky","Curved TV",1),curvedWallOLEDTV:Ji(151,13,87,"RonnieTantriady","Curved wall TV",7),decorativePlant:Ji(31.8,32.2,60.6,"Nmn9","Decorative plant",1),dresserWithDrawers:Ji(160.5,51.9,81,"Hsdevys","Dresser with drawers",2),batterie:Ji(104.9,92.8,115.6,"Sophie","Drums",2),dvd:Ji(43,28.2,5.6,"Scopia","DVD player",1),fireplace1:Ji(115.4,35.1,105,"Scopia","Fireplace",6),fireplace2:Ji(121,44.9,250,"Scopia","Fireplace",6),flowers:Ji(20.9,15.9,50,"Peter Smolik","Flowers",1),foldingChair:Ji(50.8,60,91.2,"Giovagiova","Folding chair",2),folding_chair:Ji(49,50.9,76.5,"alaX","Folding chair",2),"folding-table":Ji(186,77.6,75,"Kator Legaz","Folding table",2),"full-bookcase":Ji(89.8,34.7,221,"Kator Legaz","Full bookcase",2),"futon-couch":Ji(196,89.8,87.8,"Kator Legaz","Futon couch",2),glassDoorCabinet:Ji(70,38.7,198.2,"eTeks","Glass door cabinet",2),"glass-dining-table":Ji(161.8,97.6,75,"Kator Legaz","Glass table",2),table_half_round:Ji(102,58.6,78,"Ola-Kristian Hoff","Half round table",2),mediumIndoorPlant:Ji(72.5,76.6,67.9,"Betomo16","Indoor plant",1),"ps4-joystick":Ji(16.2,10.6,6.2,"Scopia","Joystick",1),longcase_clock:Ji(50,30,200,"Ola-Kristian Hoff","Longcase clock",2),"microphone-with-foot":Ji(67.4,98.7,142.8,"Scopia","Microphone with foot",2),oakTable:Ji(124,124,74.1,"Doug C","Oak table",2),chaiseOrange:Ji(41.2,46.7,95,"Icybones","Orange chair",2),orchids:Ji(31.1,35.3,57.4,"Elysia","Orchids",1),"oriental-rug":Ji(185.8,257.7,2.5,"Kator Legaz","Oriental rug",5),osakaChair:Ji(47.5,52.5,77,"Daniliescudsg","Osaka chair",2),pianoBench:Ji(61.9,35.5,52.2,"Simonrepp","Piano bench",2),pinewoodRackLowHeight:Ji(89.8,30.2,56.5,"Dingenskirchen","Pinewood rack low height",2),pinewoodRackMediumHeight:Ji(89.8,30.2,143,"Dingenskirchen","Pinewood rack medium height",2),augalas:Ji(60.9,34.9,31.5,"MZiemys","Plant",1),maceta:Ji(59,65,58,"Scopia","Plant",1),plant:Ji(81.8,69,117.1,"Ndakasha","Plant",1),playstation4:Ji(32.7,29.5,5.5,"Scopia","PlayStation4",1),puff:Ji(91.3,84.8,60.3,"Scopia","Puff",2),rocking_chair:Ji(65,80,109,"Ola-Kristian Hoff","Rocking chair",2),roses:Ji(22.8,27.3,52.9,"Scopia","Roses",1),"round-carpet":Ji(80,80,.5,"Scopia","Round carpet",5),"round-table":Ji(110,110,75.7,"Scopia","Round table",2),ryokanChair:Ji(53.3,59,54.8,"Scopia","Ryokan chair",1),meubleHiFiHaut:Ji(155.9,41.4,183,"Ga\xebl Bettinelli","Shelf unit",2),simple_sofa:Ji(179.8,67.3,95,"Scopia","Sofa",2),sofa1:Ji(234,79.4,79.2,"Peter Smolik","Sofa",2),sofa2:Ji(200,86.5,88,"eTeks","Sofa",2),stainlessSteelShelf:Ji(78,28,15,"N Mi","Stainless steel shelf",7),shelves_storage_steel:Ji(80,30,180,"Ola-Kristian Hoff","Steel shelves",2),stool_small:Ji(30,30,45,"alaX","Stool",2),green_stool:Ji(42.9,42.9,46,"Dalenryder","Stool",2),stool:Ji(40,40,46,"eTeks","Stool",2),succulentPlant:Ji(13.7,12.9,11.4,"Nmn9","Succulent plant",1),"table-on-trestles":Ji(160,66.4,76.1,"Scopia","Table on trestles",2),white_kitchen_table:Ji(110,70.1,75,"Scopia","Table",2),table:Ji(144.3,93.4,72.4,"Jay-Artist","Table",2),table2:Ji(144.3,93.4,72.4,"Jay-Artist","Table",2),"table-with-leaning-feet":Ji(150,65,75,"Scopia","Table",2),tableCuisine2:Ji(174.2,91.1,75,"Icybones","Table",2),tableWithTablecloth:Ji(80.3,81.2,75,"Sizzler","Table with table cloth",2),"tv-remote-control":Ji(4.5,18,1.7,"Scopia","TV remote control",1),meubleHiFiBas:Ji(103.8,44.4,33.3,"Ga\xebl Bettinelli","TV shelf unit",2),"video-projector":Ji(47,37.8,15.1,"Scopia","Video projector",1),"wall-flat-tv":Ji(102.8,10.9,65.9,"Scopia","Wall flat TV",7),winchesterArmchair:Ji(112,93.4,80.4,"Gnanasaireddy","Winchester armchair",2),wirelessOfficePhone3:Ji(11.2,15.8,17.1,"DennisH2010","Wireless phone",1),shelves_storage_wood:Ji(78,31.5,171,"Ola-Kristian Hoff","Wood shelves",2),yuccaPlant:Ji(107.9,102.4,180,"Betomo16","Yucca",2),desklamp:Ji(24.4,24.4,40,"ColdShiverGames","Desk lamp",1),JapaneseLantern:Ji(15.6,15.6,35.1,"Mindfront","Japanese lantern",1),lamp:Ji(30.5,30.5,40.9,"Bulgakov","Lamp",1),little_lamp2:Ji(31,31,43,"Scopia","Little lamp",1),"MIDI-keyboard":Ji(80,25.3,8.4,"Kator Legaz","Musical keyboard",1),cornerSofa:Ji(233,168,87,"eTeks","Corner sofa",2),aquarium:Ji(60,30,35,"eTeks","Aquarium",1),armchair:Ji(87,92,87,"eTeks","Armchair",2),armchair2:Ji(80,78.1,77.2,"eTeks","Armchair",2),coffeeTable:Ji(125,46,40,"eTeks","Coffee table",2),roundTable:Ji(126,126,74,"eTeks","Round table",2),etageres:Ji(150,39,150,"Icybones","Shelves",2),etagereEnfant:Ji(70,30.1,188.8,"Icybones","Shelves",2),squareTable:Ji(115,115,74,"eTeks","Square table",2),guitar:Ji(38.6,97.6,6,"Robert Pastierovic","Guitar",1),dresser:Ji(170,50,64.7,"eTeks","Dresser",2),fireplace:Ji(145,85,250,"eTeks","Fireplace",2),cheminee:Ji(145,85,250,"eTeks","Fireplace cheminee",2),AtorHaut:Ji(60.2,52.8,203.1,"Ga\xebl Bettinelli","Stove",2),filledBookcase:Ji(85,35,180,"eTeks","Filled bookcase",2),flatTV:Ji(121,30,79.3,"eTeks","Flat TV",1),piano:Ji(140,43,82,"eTeks","Piano",2),tabouretPiano:Ji(35.6,37.6,48,"GdB","Piano stool",2),pianoDroit:Ji(128,55.4,121,"GdB","Upright piano",2),tvUnit:Ji(100,52,93,"eTeks","TV unit",2),beige_sofa:Ji(193.9,75.9,80,"Scopia","Clear beige sofa",2),furnace:Ji(66.7,97.7,125.6,"Scopia","Furnace",2),deer:Ji(4.6,10,20,"Sizzler","Deer",2),led_tv:Ji(77.5,14.2,50.8,"Nhumrod","TV",2),oakChair:Ji(49.1,61.2,117.8,"Doug C","Oak chair",2),pianoAQueue:Ji(132,170,178,"Dante","Grand piano",2),plasticChair:Ji(44.4,58.4,82,"exL","Chair",2),shelves:Ji(79,39.4,79,"jclevet.net","Shelves",2),televisionCabinet:Ji(135.4,69.3,160,"Niebieski","Television cabinet",2),verticalShelves:Ji(44,39,185,"jclevet.net","Vertical shelves",2),electricGuitar:Ji(34.5,32.1,110,"Seavenois","Electric guitar",2),littlePlant:Ji(26.6,26.6,23.2,"Rameshrj","Little plant",2),sillaBlanca:Ji(50.5,58.4,85,"Jviersalas","Chair",2),couch:Ji(207.4,87.6,85.6,"TowerCG","Couch",2),modernArmchair:Ji(77.3,84.9,86.5,"Dreadbwai","Armchair",2),antiqueChair:Ji(49.8,63.2,98.2,"Niuskir","Chair",2),chairWithCushion:Ji(44.1,44.1,94.8,"MZiemys","Chair with cushion",2),winchesterSofa:Ji(231.9,93.8,80.4,"Gnanasaireddy","Winchester sofa",2),designChair:Ji(77.9,62.8,99.4,"Semhustej","Chair",2),arbolito:Ji(25.4,26.2,38,"Hermescn","Christmas tree",2),cafe_set_mota_chair:Ji(60.9,55.8,78.3,"Voodoc","Chair",2),cafe_set_mota_table:Ji(62.2,62.2,74,"Voodoc","Round table",2),cafe_set_tonon_chair:Ji(48,53.3,82.2,"Voodoc","Chair",2),cafe_set_tonon_table:Ji(66,52.8,64.4,"Voodoc","Table",2),ella_chair_f:Ji(46,57,92,"Sizzler","Chair",2),leaf_chair:Ji(67.1,81.3,82.65,"Voodoc","Chair",2),spatifilum:Ji(79.8,74.9,87.5,"HeraSK","Spathiphyllum",2),tvStand:Ji(135.1,46.5,52.6,"Leximumxii","TV stand",2),armchair1:Ji(100.5,88.2,80,"Aymanslman","Armchair",2),spider_plant:Ji(66.6,63.6,34.2,"Nmn9","Spider plant",2),tulip:Ji(38.1,43.8,39.9,"Nmn9","Tulips",2),white_lily:Ji(37.1,31.2,60,"Nmn9","White lily",2),plaidChair:Ji(40.5,42.6,80,"Cezar","Chair",2),sofa3:Ji(204.2,76.9,80,"3dModeling","Sofa",2),tulips:Ji(31.8,25.2,42.7,"Nad451","Tulips",2),couch3:Ji(201,90.9,84.3,"MatBot","Couch",2),barStool:Ji(33,33,74,"Geantick","Bar stool",2),bookcase2:Ji(82,44,150,"Geantick","Bookcase",2),computerWorkstation:Ji(124,138.5,182,"GdB","Computer desk",2),cornerWorkstation:Ji(109,108,171,"Geantick","Computer desk",2),bocalPoisson:Ji(33.5,33.5,28.4,"Geantick","Fish bowl",2),tableGnome:Ji(103.4,66.2,44,"Sleipnir1","Gnome table",2),rectangularTable:Ji(175,100.5,74,"Sleipnir1","Rectangular table",2),squareCoffeeTable:Ji(67.1,67.1,44,"GdB","Square coffee table",2),ecran16_9:Ji(86.7,28.1,58,"Geantick","TV 16:9",2),tableBasseBois:Ji(95,50,37.8,"Infernal-quack","Wooden coffee table",2),woodTable:Ji(171,106,74,"Pencilart","Wood table",2),priseTV:Ji(8,1.1,8,"Sheep","TV plug",2),petiteTableSalon:Ji(32,32,57,"Snduc","Small table",2),bibliothequeDroite:Ji(50,40.1,229,"Snduc","Bookcase",2),allenOrgan:Ji(185.9,155.9,186.3,"Don Ravey","Allen organ",2),highBoyDresser:Ji(96.6,56.7,168.4,"Don Ravey","High boy dresser",2),smallbookshelves:Ji(87.4,33.5,105.9,"Don Ravey","Small bookshelves",2),salontafel:Ji(100,100,30,"Theo Blonk","Coffee table",2),couchTwoSeats:Ji(198,90.6,72,"Theo Blonk","Couch two seats",2),kleed_grieks:Ji(170,120,1,"Theo Blonk","Greek carpet",2),pinewoodRackFullHeightHalfWidth:Ji(48.8,30.2,227,"Dingenskirchen","Pinewood rack full height half width",2),pinewoodRackFullHeight:Ji(89.8,30.2,227,"Dingenskirchen","Pinewood rack full height",2),latticeChair:Ji(43,42.3,87.3,"Pencilart","Lattice chair",2),meubleMural:Ji(261.5,55.3,215,"Icybones","Bookcase",2),CDrack:Ji(65.7,20.3,122.4,"Peter Smolik","CD rack",2),displayCabinet:Ji(84,84,179.8,"Peter Smolik","Display cabinet",2),hallTable:Ji(117.42,62.9,87.62,"Peter Smolik","Dresser",2),potplant2:Ji(96.68,96.19,85.35,"Peter Smolik","Plant",2),roundTable2:Ji(53.81,53.81,68.8,"Peter Smolik","Round table",2),shelving:Ji(119,30.9,45.6,"Peter Smolik","Shelving",2),sofa3Single:Ji(138.43,102.7,91.63,"Peter Smolik","Armchair",2),sofa4:Ji(185,74,83.54,"Peter Smolik","Sofa",2),couchPoofyPillows:Ji(156.1,70.6,75,"Pencilart","Couch",2),largeCouch:Ji(236.7,76.7,75,"Pencilart","Large couch",2),singleChair:Ji(101.2,77.1,75,"Pencilart","Armchair",2),throwPillow:Ji(35,17,32.1,"Pencilart","Pillow",1),counter:Ji(191.2,288.4,93.3,"Wrosun","Counter",2),tableBasse:Ji(112.5,59.8,39.1,"Ga\ufffdl Bettinelli","Coffee table",2),pancaFratinoSing:Ji(85,49.8,85,"Nictac","Bench",2),tavoloFratino:Ji(110,70.1,75,"Nictac","Table",2),TVCenter:Ji(77.2,53.8,129.9,"Pencilart","TV center",2),chair_high:Ji(65,70,135,"Ola-Kristian Hoff","Armchair",2),shelves_storage_wood2:Ji(77,37,170,"Ola-Kristian Hoff","Wood shelves",2),table_granmother_marble:Ji(120,120,70,"Ola-Kristian Hoff","Marble table",2),armchair_wing:Ji(85,90,112,"Ola-Kristian Hoff","Armchair",2),bar_stool:Ji(44.5,42,70,"alaX","Bar stool",2),dropLeafTable:Ji(260,78,72,"Seber Rider","Drop leaf table",2),"mid-century-chair":Ji(73.5,84.4,80,"Kator Legaz","Armchair",2),"chair-ottoman":Ji(77,155.2,100,"Kator Legaz","Armchair ottoman",2),"bar-stool":Ji(53.2,59.3,110,"Kator Legaz","Bar stool",2),"dining-chair":Ji(42.3,57.3,100,"Kator Legaz","Chair",2),"utility-shelving":Ji(60,30,120,"Kator Legaz","Shelves",2),"mid-century-bench-sofa":Ji(278.9,107.3,75,"Kator Legaz","Sofa",2),"mid-century-sofa":Ji(199,84,80,"Kator Legaz","Sofa",2),credenza:Ji(166,50,78,"LucaPresidente","Sideboard",2),sedia:Ji(44.7,45.8,79,"LucaPresidente","Chair",2),tavolino:Ji(60,30,27,"LucaPresidente","Coffee table",2),tavolo:Ji(160,70,78,"LucaPresidente","Table",2),box_room:Ji(157.6,47.8,104,"Scopia","Box",2),saloon_table:Ji(143.9,64.1,51.1,"Scopia","Coffee table",2),table3:Ji(100,100,90.7,"Scopia","Table",2),table4:Ji(140,90,75,"Scopia","Table",2),tv:Ji(56,31.9,50,"Scopia","TV 16:9",2),wooden_table_office:Ji(151.1,80.4,77.5,"Scopia","Table",2),tubular_chair:Ji(53.2,49.9,81.4,"Scopia","Chair",2),metal_glass_table:Ji(160.8,89.7,76.7,"Scopia","Glass table",2),glass_table_office:Ji(186.05267,80.29927,76.64766,"Scopia","Glass table",2),desk_table:Ji(191.6,88.4,76.7,"Scopia","Glass table",2),bar_table:Ji(80,80,102.4,"Scopia","Bar table",2),beige_sofa_2seats:Ji(158.86,73.5,86.6,"Scopia","Sofa 2 seats",2),burlap_sofa:Ji(170,90,79.7,"Scopia","Burlap sofa",2),contemp_living_room:Ji(330.9,40.3,199.5,"Scopia","Contemporary living room",2),leather_sofa:Ji(192.5,90.3,100.1,"Scopia","Sofa",2),living_room_table:Ji(106.7,72.5,53.6,"Scopia","Table",2),modern_armchair:Ji(63.1,52.9,72,"Scopia","Modern armchair",2),plastic_chair:Ji(48.3,55.7,96.5,"Scopia","Plastic chair",2),calla_lily_with_roses:Ji(43.6,38.6,52.4,"Scopia","Flowers",2),sofa_white_beige:Ji(173.8,81.6,85,"Scopia","Sofa",2),ficus:Ji(42.5,41.5,82.4,"Scopia","Ficus",2),"coffee-table2":Ji(123.8,51.2,47.7,"Scopia","Coffee table",2),lavender:Ji(13.4,12,53.5,"Scopia","Lavender",2)},ao={ceilingFan:Ji(91.3,79.8,39.2,"PrinterKiller","Ceiling fan",1)},ro={"window-blinds":Ji(100,7,120,"Kator Legaz","Window blind",7),cover_outdoor1:Ji(100,7,120,"Kator Legaz","Outdoor window blind",7),storeCalifornien:Ji(200.4,16.2,170,"Julie Fabre","Blind",7),curtain:Ji(110,5,180,"Scopia","Curtain",7),blind:Ji(100,7,120,"Scopia","Curtain Blind",7),curtains:Ji(70,15,200,"eTeks","Curtains",7)},lo={man:Ji(60,25,180,"Scopia","Presence",1),mannequinMale:Ji(60,25,180,"Scopia","Presence",1),boyStanding:Ji(60,35,180,"Scopia","Presence",1),male01:Ji(55,45,180,"Scopia","Presence",1),male03:Ji(55,40,180,"Scopia","Presence",1),male02:Ji(80,50,180,"Scopia","Presence",1),holdingMale01:Ji(60,60,180,"Scopia","Presence",1),mannequinBrunette:Ji(60,25,180,"Scopia","Presence",1),female01:Ji(55,55,170,"Scopia","Presence",1),female02:Ji(60,50,170,"Scopia","Presence",1),female03:Ji(60,60,170,"Scopia","Presence",1),girlStanding:Ji(40,40,165,"Scopia","Presence",1),holdingFemale01:Ji(50,60,170,"Scopia","Presence",1),holdingFemale02:Ji(70,70,170,"Scopia","Presence",1),holdingFemale03:Ji(50,50,170,"Scopia","Presence",1),nourrison:Ji(30,50,15,"Scopia","Presence",1),boySitting:Ji(50,60,110,"Scopia","Presence",1),sitMale01:Ji(60,70,110,"Scopia","Presence",1),sitMale02:Ji(60,70,110,"Scopia","Presence",1),sitMale03:Ji(60,90,70,"Scopia","Presence",1),sitFemale03:Ji(50,60,110,"Scopia","Presence",1),girlSittingTable:Ji(35,60,110,"Scopia","Presence",1),sitFemale02:Ji(75,100,70,"Scopia","Presence",1),girlSittingGround:Ji(60,55,70,"Scopia","Presence",1),boyLying:Ji(60,180,70,"Scopia","Presence",1),lyingDownMale02:Ji(60,170,60,"Scopia","Presence",1),lyingDownMale01:Ji(60,180,30,"Scopia","Presence",1),lyingDownFemale01:Ji(70,150,70,"Scopia","Presence",1),dog:Ji(30,90,50,"Scopia","Presence",1),cat:Ji(18,35,35,"Scopia","Presence",1),siameseCat:Ji(13,60,35,"Scopia","Presence",1),rabbit:Ji(15,25,30,"Scopia","Presence",1),horse2:Ji(60,250,190,"Scopia","Presence",1),chicken:Ji(24.2,32.8,45.6,"CDmir230","Chicken",1),bulldog:Ji(38.8,64.5,47.4,"Priide","Bulldog",1),horse:Ji(58.7,229.2,193,"B2przemo","Horse",1),"female-01-casual-clothing":Ji(47.5,37.1,170,"Kator Legaz","Female",1),"male-01-suit":Ji(55.9,41.3,185,"Kator Legaz","Male",1),sitFemale01:Ji(56.2,81.7,75.8,"Reallusion","Sitting female",1),fille:Ji(49.1,22.9,146.8,"Scopia","Mannequin girl",1),boy:Ji(53.9,27.3,159.6,"Scopia","Mannequin boy",1)},ho={abdominalBench:Ji(67.2,192.9,86.9,"Muhtesemozcinar","Abdominal bench",2),"internal-unity-air-conditioning":Ji(88.5,19.8,28.5,"Scopia","Air conditioning - Internal unit",7),iphone:Ji(5.8,11.5,.9,"Bheema","Apple iPhone",1),livreAvecReliure:Ji(17.6,10.9,3.8,"Toomy","Book",1),book:Ji(28.1,18.4,2.4,"Jay-Artist","Book",1),livres:Ji(24,16.9,26.9,"Toomy","Books",1),cageFuret:Ji(79,50,74.5,"Ga\xebl Bettinelli","Cage",1),"cardboard-box":Ji(55,35,30,"Scopia","Cardboard box",1),arbreAChat:Ji(65,48.8,89.6,"Scopia","Cat tree",2),CCTV:Ji(14,14,11.7,"Scopia","CCTV",1),clock:Ji(33.4,1.9,33.4,"Robert Pastierovic","Clock",7),clock2:Ji(30,3,30,"alaX","Clock",7),crate:Ji(60,58.9,59.4,"GyngaNynja","Crate",1),dart_game:Ji(45.3,16.3,45.3,"Scopia","Dart game",7),doormat:Ji(60,30,1.1,"Scopia","Doormat",5),electric_water_heater:Ji(45.6,45.9,61.9,"Scopia","Electric water heater",1),electricWheelchair:Ji(55.4,88.6,91.4,"Scopia","Electric wheelchair",2),emergencySign:Ji(30,3.5,9,"Marcinc53","Emergency sign",7),flipper:Ji(72,132.6,184.8,"Scopia","Flipper",2),foldedNewspaper:Ji(29.3,20.2,2.1,"Scopia","Folded newspaper",1),"folding-armchair":Ji(59.2,60.6,90.7,"Scopia","Folding armchair",2),table_football:Ji(150.3,124.6,100.9,"Jeff2207","Football table",2),ButterflyFrame:Ji(48.7,1.6,47.9,"Emmanuel Puybaret","Frame Butterfly",7),frame:Ji(50,2.2,35,"eTeks","Frame",7),frame1:Ji(14.5,14.5,19.6,"Scopia & eTeks","Frame Chambord",1),frame3HorizontalNorwayPhotos:Ji(25.4,3,52.5,"Emmanuel Puybaret","Frame Norway photos",7),frame3VerticalSummerPhotos:Ji(52.5,3,25.4,"Kator Legaz","Frame summer photos",7),HaiVanPassFrame:Ji(77.2,1.5,47.9,"Emmanuel Puybaret","Frame Hai Van Pass",7),gaz_water_heater:Ji(40.5,34.5,67.6,"Scopia","Gaz water heater",1),gift:Ji(23.2,18.1,25.1,"Tadine","Gift",1),glasses:Ji(15,14.4,2.8,"Scopia","Glasses",1),marteau:Ji(34.6,12.9,3.3,"Scopia","Hammer",1),cendrier:Ji(12,12,3.4,"Scopia","Ash tray",1),headphones:Ji(18.9,8.2,20,"Alaskaman","Headphones",1),"indoor-bike":Ji(71.8,101.2,131.3,"Scopia","Indoor bike",2),intercom:Ji(9.8,5.4,36.4,"Scopia","Intercom",7),intercom_with_screen:Ji(19,6.2,36,"Scopia","Intercom with screen",7),keys:Ji(11.5,11.4,2.9,"Scopia","Keys",1),litiere:Ji(28.9,50.2,42.9,"Scopia","Litter",2),lockedLocker:Ji(20,22,40,"Twin97","Locked locker",1),revue:Ji(20,28,.6,"Scopia","Magazine",1),pileMagazines:Ji(27.3,33.7,1.2,"Toomy","Magazines pile",1),mini_stereo:Ji(48.9,21,21,"Scopia","Mini stereo",1),mirror:Ji(40,.5,40,"Emmanuel Puybaret","Mirror",7),mobile:Ji(4.9,11,1.3,"Songkro","Mobile phone",1),mower:Ji(51,96.5,104.2,"Scopia","Mower",2),bdOuverte:Ji(42.4,29.8,2.6,"Toomy","Opened comics book",1),revueOuverte:Ji(39.3,28.2,2.8,"Scopia","Opened magazine",1),ovalMirror:Ji(55,1,105,"Emmanuel Puybaret","Oval mirror",7),pallet:Ji(120,120.4,12,"Shivraj","Pallet",1),poolTable:Ji(256,139.2,82.3,"Jeffie","Pool table",2),"punching-ball":Ji(45.9,45.9,152.8,"Scopia","Punching ball",2),wheelchairSymbol:Ji(149,149,.1,"Emmanuel Puybaret","PWD symbol",7),radiator3:Ji(55.4,20.7,64.3,"Testinator","Radiator",7),rectangularMirror:Ji(50,1,70,"Emmanuel Puybaret","Rectangular mirror",7),reflex_camera:Ji(12.5,14.9,9.8,"Scopia","Reflex camera",1),japanese_style_screen:Ji(178,15.8,189,"Scopia","Japanese style screen",2),tournevis:Ji(25.5,3.1,3.1,"Scopia","Screwdriver",1),sewing_machine:Ji(52,12,44,"Ola-Kristian Hoff","Sewing machine",1),shippingContainer:Ji(243,606,259,"Bhoult","Shipping container",2),"smoke-detector":Ji(10,1.8,10,"Scopia","Smoke detector",7),ballonFoot:Ji(22,22,22,"DooL","Soccer ball",2),speaker2:Ji(22.1,25.4,35.4,"Nhumrod","Speaker",1),"square-double-switch":Ji(8.5,1.1,8.5,"Scopia","Square double switch",7),frame_square:Ji(100,10,100,"Ola-Kristian Hoff & Annik","Square frame",7),"square-switch":Ji(8.5,1.1,8.5,"Scopia","Square switch",7),"square-plug-TypeB":Ji(8.5,.7,8.5,"Scopia","Square type B plug",7),"square-plug-TypeE":Ji(8.5,.7,8.5,"Scopia","Square type E plug",7),"step-ladder-metal":Ji(57.8,75.9,180,"Step ladder","Scopia",2),suitcase:Ji(99.8,31.5,72.5,"Pyrophorus","Suitcase",1),surveillanceCamera:Ji(22.9,39,18.3,"Starkerg","Surveillance camera",7),table_tennis:Ji(274,173,96,"Bheema","Table tennis",2),tablet:Ji(17,24,.8,"Scopia","Tablet",1),tatami:Ji(100,200,5.5,"Scopia","Tatami",5),treadmill:Ji(88.5,195.8,152.6,"Muhtesemozcinar","Treadmill",2),putekasse:Ji(118,45,58,"Ola-Kristian Hoff","Trunk",2),umbrellaFolded:Ji(35.8,35.7,80,"Ralmon","Umbrella",1),vase3:Ji(23.5,23.5,50.9,"Scopia","Vase",1),jar:Ji(24.4,24.4,40,"Scopia","Vase",1),"walker-with-wheels":Ji(60.2,72.2,93,"Scopia","Walker with wheels",2),"double-switch-whites":Ji(8.5,1.1,8.5,"Scopia","Wall double switch",7),wall_handrail:Ji(230,9.9,9.8,"Ola-Kristian Hoff","Wall handrail",7),"switch-whites":Ji(8.5,1.1,8.5,"Scopia","Wall switch",7),"plug-TypeB-whites":Ji(8.5,.7,8.5,"Scopia","Wall type B plug",7),"plug-TypeE-whites":Ji(8.5,.7,8.5,"Scopia","Wall type E plug",7),wheelchair:Ji(64.4,76.9,91,"Bgamage","Wheelchair",2),wood_logs:Ji(40.3,69.9,31.8,"Scopia","Wood logs",2),complements2:Ji(13,13,15,"Scopia","Candle",1),radiator1:Ji(216.3,14.3,83.4,"Knyghtfall13x","Horizontal radiator",1),cornice:Ji(100,10,10,"Emmanuel Puybaret","Cornice",1),corniceConcaveCorner:Ji(10,10,10,"Emmanuel Puybaret","Concave corner cornice",1),electricOutlet:Ji(7.1,.5,11.2,"Pencilart","Electric outlet",1),electricOutlet2:Ji(7.1,.5,11.2,"Pencilart","Electric outlet 2",1),electricRadiator:Ji(37,10,45,"eTeks","Electric radiator",1),estintore:Ji(35.5,20.7,60,"Sergio Capretta","Extinguisher",1),hotWaterRadiator:Ji(65,25,61,"eTeks","Hot water radiator",1),radiateur:Ji(50.2,6,164.4,"Snduc","Radiator",1),boucheVMC:Ji(21.5,2,21.5,"Snduc","Vent",1),radiateurVertical:Ji(61,4.4,187,"Snduc","Vertical radiator",1),antenaTV:Ji(200,80.3,266.6,"Miguel Angel Serra","Antenna TV",1),antenaParabolica:Ji(65,70.4,71.1,"Miguel Angel Serra","Satellite dish",1),"external-unity-air-conditioning":Ji(77.1,28.4,54.2,"Scopia","Air conditioning - External unit",7),solar_panel_140W:Ji(125,66.8,3,"Ola-Kristian Hoff","Solar panel",1),"entry-bell-ring":Ji(3.8,2.4,10,"Scopia","Entry bell ring",7),"entry-bell-speech-unit":Ji(10.4,2,20.3,"Scopia","Entry speech unit",7),box:Ji(50,50,50,"Klet3D","Box empty",1),cylinder:Ji(50,50,50,"Klet3D","Cylinder empty",1),sphere:Ji(50,50,50,"Klet3D","Sphere empty",1),radiator2:Ji(132.6,41.4,45.66,"Redsymbzone","Radiator",2),radiator:Ji(140.3,24.7,73.1,"Redsymbzone","Radiator",2),speaker3:Ji(22.1,25.4,55.1,"Nhumrod","Speaker",2),tableFan:Ji(27.1,21.8,40.1,"Shivraj","Table fan",2),ammoBox:Ji(100,52.1,30.6,"Mahesh","Box",2),barrel:Ji(81.5,81.5,89.7,"GyngaNynja","Barrel",2),basketball:Ji(23.8,23.8,23.8,"SEspider","Basketball",2),fireExtinguisher:Ji(31.1,18,62.3,"Bastable","Extinguisher",2),numberLock:Ji(10,.45,10.2,"Avi9526","Number lock",2),cuckooClock:Ji(26.6,17.7,73.8,"Guclu","Cuckoo clock",2),riggedFan:Ji(32.7,20.7,32.2,"Kagi","Rigged fan",2),tennisRacket:Ji(26,68.5,2.9,"Ndakasha","Tennis racket",2),radio:Ji(30.7,8.4,26.3,"Jay-Artist","Radio",2),thermometer:Ji(7.7,5.9,17.1,"DennisH2010","Thermometer",2),wallDoubleSocket:Ji(15.5,1,7.9,"Jay-Artist","Wall double socket",2),wallSocket:Ji(7.7,.8,7.9,"Jay-Artist","Wall socket",2),"wire-coathanger":Ji(41,1.2,26.8,"Loopo","Wire coathanger",2),sunglasses:Ji(15.1,15.7,3.5,"Krabz","Sunglasses",2),tableTennisBat:Ji(14.7,25.4,1.3,"BrunoMatheus","Table tennis bat",2),modernRadiator:Ji(50.4,11.6,60,"Atszgo","Radiator",2),mp3Station:Ji(39.8,9.8,12.1,"TrueCryer","MP3 station",2),workbench:Ji(123.3,62.4,173.8,"Victorbied","Workbench",2),fitnessTower:Ji(222.8,173.9,208,"Blenderik","Fitness tower",2),fut:Ji(45,45,64.1,"Geantick","Beer barrel",2),pompeBiere:Ji(58.9,25.2,30,"Geantick","Beer pump",2),curtainRod:Ji(150,16.5,7.7,"Geantick","Curtain rod",2),priseTelephonique:Ji(8,1,8,"Sheep","French telephone plug",2),rampe:Ji(200,11.7,85.2,"Geantick","Handrail",2),tableauMulet:Ji(32,.4,21.2,"Sleipnir1","Picture mule",2),tableauVisage:Ji(21.3,.6,30,"Sleipnir1","Picture portrait",2),tableauVisage2:Ji(33.2,.2,33.1,"Sleipnir1","Picture portrait",2),tableauVisage3:Ji(26.6,.4,35,"Sleipnir1","Picture portrait",2),tableauYing:Ji(37,.5,42.9,"Sleipnir1","Picture Ying",2),prise:Ji(8,1.6,8,"Sheep","Plug",2),railing1:Ji(162.7,11.3,62,"Pencilart","Railing",2),roundedEdgesRailing:Ji(80,9.3,62,"Pencilart","Rounded edges railing",2),roundedEdgesRailing1:Ji(83.7,9.7,62,"Pencilart","Rounded edges railing",2),scie:Ji(11.9,45,1.8,"Geantick","Saw",2),rampeArcCercle:Ji(176.3,101.1,85.2,"Geantick","Semicircle handrail",2),interrupteur:Ji(8,1.4,8,"Sheep","Switch",2),tableauElectrique:Ji(25,10.6,25,"Sheep","Switchboard",2),horlogeUbuntu:Ji(38.3,7.7,38.5,"Sleipnir1","Ubuntu clock",2),venetianBlind:Ji(90,9,60,"Geantick","Venetian blind",2),etau:Ji(12.6,20,13.3,"Geantick","Vise",2),portemanteaux:Ji(79.4,79.3,184.8,"Sheep","Hat and coat stand",2),arch:Ji(100,16,65,"Robert Pastierovic","Arch",2),AntelopeCanyonFrame:Ji(50.1,1.6,88,"Emmanuel Puybaret","Frame Antelope Canyon",2),EiffelTowerFrame:Ji(67,1.6,47.9,"Emmanuel Puybaret","Frame Eiffel Tower",2),InariFrame:Ji(48,1.6,67.9,"Emmanuel Puybaret","Frame Inari",2),MontBlancFrame:Ji(94.5,1.6,47.9,"Emmanuel Puybaret","Frame Mont Blanc",2),lightSwitch:Ji(7.1,2,11.2,"Pencilart","Light switch",2),smallWroughtIronRails:Ji(117.9,10.6,110,"Pencilart","Small wrought iron rails",2),wroughtIronRails:Ji(186.8,10.6,110,"Pencilart","Wrought iron rails",2),pavesDeVerre:Ji(21,5,188,"Snduc","Glass blocks",2),appleIpod:Ji(6.2,10.3,1.6,"Snduc","Apple iPod",2),pile:Ji(1.4,5,1.4,"Snduc","Battery",2),polygonalRoof:Ji(501,150,150,"Pencilart","Polygonal roof",2),toitureArdoiseRouge:Ji(200,143,153,"Emmanuel Puybaret","Red slate roof",2),TorontoOntarioPlaceFrame:Ji(61.1,1.6,47.9,"Emmanuel Puybaret","Frame Toronto Ontario Place",2),TigerFrame:Ji(62.8,1.6,47.9,"Emmanuel Puybaret","Frame Tiger",2),NiagaraFallsFrame:Ji(80.9,1.6,47.9,"Emmanuel Puybaret","Frame Niagara Falls",2),VeniceFrame:Ji(73.5,1.6,47.9,"Emmanuel Puybaret","Frame Venice",2),picture:Ji(133.97,9.49,81.46,"Peter Smolik","Picture",2),guacal:Ji(59.1,39.8,19.7,"Arturo Matheus","Crate",2),LakeMoraineFrame:Ji(73.5,1.6,47.9,"Emmanuel Puybaret","Frame Lake Moraine",2),SquirrelFrame:Ji(48.7,1.6,47.9,"Emmanuel Puybaret","Frame Squirrel",2),StatueOfLibertyFrame:Ji(50.1,1.6,88,"Emmanuel Puybaret","Frame Statue Of Liberty",2),VaticanMuseumFrame:Ji(61.2,1.6,47.9,"Emmanuel Puybaret","Frame Vatican Museum",2),EtretatFrame:Ji(67,1.6,47.9,"Emmanuel Puybaret","Frame Etretat",2),ColoredFountainFrame:Ji(73.5,1.6,47.9,"Emmanuel Puybaret","Frame Colored Fountain",2),HorseShoeBendFrame:Ji(61.2,1.6,47.9,"Emmanuel Puybaret","Frame Horse Shoe Bend",2),TucanFrame:Ji(48.7,1.6,47.9,"Emmanuel Puybaret","Frame Tucan",2),YosemiteFrame:Ji(73.5,1.6,47.8,"Emmanuel Puybaret","Frame Yosemite",2),WaterLilyFrame:Ji(67,1.6,47.9,"Emmanuel Puybaret","Frame Water Lily",2),ruffledVase:Ji(26.7,28.7,38,"Pencilart","Ruffled vase",2),radiator_7section:Ji(68.3,19,91,"Russian","Radiator",2),bd:Ji(21.44196,29.8,.7,"Toomy","Comics book",2),livreJava:Ji(21,23.9,2.55,"Emmanuel Puybaret","Book Java 7",2),sh3dMag:Ji(21,29.7,.3,"Toomy","Magazine",2),SweetHome3DKompakt:Ji(14.5,20.6,1.3,"Emmanuel Puybaret","Book Sweet Home 3D kompakt",2),enceinteColonne:Ji(22,29.62183,91.00232,"Ga\ufffdl Bettinelli","Speaker",2),AtorArriere:Ji(60.2,56.1,117.2,"Ga\ufffdl Bettinelli","Stove",2),bathroom_fan:Ji(20,33,20,"Ola-Kristian Hoff","Fan",2),frame_horizontal:Ji(155,10,130,"Ola-Kristian Hoff & Annick","Horizontal frame",2),frame_vertical:Ji(127.5,7.5,155,"Ola-Kristian Hoff & Annick","Vertical frame",2),frame3HorizontalMomijiPhotos:Ji(25.4,3,52.5,"Emmanuel Puybaret","Frame momiji photos",2),frame3VerticalTowerPhotos:Ji(52.5,3,25.4,"Emmanuel Puybaret","Frame Towers",2),ladder_simple:Ji(56,86.6,283.2,"Ola-Kristian Hoff","Ladder",2),ladder_water:Ji(44,85,225,"Ola-Kristian Hoff","Ladder",2),plastic_storage_box:Ji(58,41,19.5,"Ola-Kristian Hoff","Plastic storage box",2),sauna_120x120:Ji(120,131.6,198,"Ola-Kristian Hoff","Sauna",2),vent_round:Ji(22,30,24,"Ola-Kristian Hoff","Round vent",2),staircase_handrail_hor:Ji(94,3,87.8,"Ola-Kristian Hoff","Handrail",2),metalBeam:Ji(200,20,20,"Emmanuel Puybaret","Metal beam",2),pwdRamp:Ji(75.6,118.7,19.5,"Emmanuel Puybaret","PWD ramp",2),"iron-railing-02":Ji(112,13.6,70,"Kator Legaz","Iron railing",2),"recycling-bin":Ji(36.1,27,25.49968,"Kator Legaz","Recycling bin",2),"tape-measure":Ji(14.58,1.8,5,"Kator Legaz","Tape measure",2),"trunk-large":Ji(100,50.8,34.4,"Kator Legaz","Trunck",2),newspaper:Ji(26.8,24.1,2,"Kator Legaz","Newspaper",2),vase1:Ji(22.7,22.7,30,"Scopia","Vase",2),vase2:Ji(27.2,27.2,30,"Scopia","Vase",2),vase5:Ji(32.6,31.2,87.4,"Scopia","Vase",2),frame2:Ji(14.5,14.5,19.9,"Scopia & eTeks","Frame H\ufffdi An",2),basic_camera:Ji(9.7,2.3,6,"Scopia","Camera",2),electric_water_heater_big:Ji(45.6,45.9,100.8,"Scopia","Electric water heater",2),mp3_base_for_ipad:Ji(26.3,16.3,13.5,"Scopia","MP3 base",2),stereo_amplifier:Ji(45.4,38.8,16.8,"Scopia","Stereo amplifier",2),"open-cardboard-box":Ji(81.5,62.5,43.7,"Scopia","Open cardboard box",2),"step-ladder-wood":Ji(45.5,74.5,82.7,"Scopia","Small step ladder",2),"wall-hanger":Ji(45,6.1,7.9,"Scopia","Wall hanger",2),"iron-railing-separated-hooks-1":Ji(165,11,80,"Scopia","Iron railing",2),"iron-railing-separated-hooks-3":Ji(113,13.4,70,"Scopia","Iron railing",2),"scie-egoine":Ji(61.56,17.3,2,"Scopia","Saw",2),"rouleau-de-ruban-adhesif":Ji(15.1,3.4,12.7,"Scopia","Tape",2),pelle:Ji(22.2,99,10,"Scopia","Shovel",2),cone:Ji(37.9,37.9,70,"Scopia","Cone",2),"perceuse-electrique":Ji(6.9,27,25.9,"Scopia","Drill",2),"meuleuse-electrique":Ji(31.1,51.3,12.6,"Scopia","Grinder",2),"billet-10-euros":Ji(12.7,6.7,.1,"Scopia","Bill 10\\u20ac",2),"billet-20-euros":Ji(13.3,7.2,.1,"Scopia","Bill 20\\u20ac",2),"billet-50-euros":Ji(14,7.7,.1,"Scopia","Bill 50\\u20ac",2),"rounded-antenna":Ji(8.5,.7,8.5,"Scopia","Rounded antenna plug",2),"rounded-dimmer":Ji(8.5,1.7,8.5,"Scopia","Rounded dimmer switch",2),"rounded-double-switch":Ji(8.5,1.2,8.5,"Scopia","Rounded double switch",2),"rounded-plug-TypeA":Ji(8.5,.7,8.5,"Scopia","Rounded type A plug",2),"rounded-plug-TypeB":Ji(8.5,.7,8.5,"Scopia","Rounded type B plug",2),"rounded-plug-TypeCFlat":Ji(8.5,.7,8.5,"Scopia","Rounded type C plug",2),"rounded-plug-TypeE":Ji(8.5,.7,8.5,"Scopia","Rounded type E plug",2),"rounded-plug-TypeG":Ji(8.5,.7,8.5,"Scopia","Rounded type G plug",2),"rounded-RJ-45":Ji(8.5,.7,8.5,"Scopia","Rounded RJ45 plug",2),"rounded-switch":Ji(8.5,1.2,8.5,"Scopia","Rounded switch",2),"square-antenna":Ji(8.5,.6,8.5,"Scopia","Square antenna plug",2),"square-dimmer":Ji(8.5,1.6,8.5,"Scopia","Square dimmer switch",2),"square-plug-TypeA":Ji(8.5,.7,8.5,"Scopia","Square type A plug",2),"square-plug-TypeCFlat":Ji(8.5,.7,8.5,"Scopia","Square type C plug",2),"square-plug-TypeG":Ji(8.5,.6,8.5,"Scopia","Square type G plug",2),"square-RJ-45":Ji(8.5,.6,8.5,"Scopia","Square RJ45 plug",2),"antenna-whites":Ji(8.5,.6,8.5,"Scopia","Wall antenna plug",2),"dimmer-whites":Ji(8.5,1.7,8.5,"Scopia","Wall dimmer switch",2),"plug-TypeA-whites":Ji(8.5,.7,8.5,"Scopia","Wall type A plug",2),"plug-TypeCFlat-whites":Ji(8.5,.7,8.5,"Scopia","Wall type C plug",2),"plug-TypeG-whites":Ji(8.5,.6,8.5,"Scopia","Wall type G plug",2),"RJ-45-whites":Ji(8.5,.6,8.5,"Scopia","Wall RJ45 plug",2),chimney:Ji(67.3,67.3,118.1,"Scopia","Chimney",2),"round-chimney":Ji(36.6,36.5,99.7,"Scopia","Round chimney",2),"pince-coupante":Ji(60,17.5,3,"Scopia","Cutting pliers",2),parpaing:Ji(50,19.5,20,"Scopia","Cinder block",2),cageALapin:Ji(102.5,57.6,46.1,"Scopia","Rabbit cage",2),roueAvecJante:Ji(18.1,58.6,58.6,"Scopia","Wheel",2),newspapersPile:Ji(30.1,23.6,7.7,"Scopia","Newspapers pile",2),openedNewspaper:Ji(58.3,40.2,.92,"Scopia","Opened newspaper",2),safeOnFeet:Ji(46,46.1,71.7,"Scopia","Safe on feet",2),"fil-electrique-1m":Ji(100.135,.3,.3,"Scopia","Electric wire 1m",2),pileRevues:Ji(21.5,28.6,3.4,"Scopia","Magazines pile",2),walker:Ji(66.6,44,83.4,"Scopia","Walker",2)},co={angolo160W:Ji(45,45,160,"LucaPresidente","Angle shelf",2),angolo198W:Ji(45,45,198,"LucaPresidente","Angle shelf",2),angolo80W:Ji(45,45,80,"LucaPresidente","Angle shelf",2),office_furniture1:Ji(299.5,54.5,150,"Scopia","Bookcase",2),mobile45160W:Ji(45,48.8,160,"LucaPresidente","Bookcase 45x160",2),mobile45198W:Ji(45,48.8,190,"LucaPresidente","Bookcase 45x198",2),mobile4580W:Ji(45,48.8,80,"LucaPresidente","Bookcase 45x80",2),office_box:Ji(212,53.5,174.9,"Scopia","Box",2),chair2:Ji(57.9,60.9,90.2,"Peter Smolik","Chair",2),office_chair:Ji(63.5,63.7,100,"Scopia","Office chair",2),chair_office_y:Ji(48,49.5,87,"Ola-Kristian Hoff","Chair",2),pcstul:Ji(136.3,93.1,144.3,"Jarda Benkowsky","Computer desk",2),lbDesk:Ji(160,80,72.3,"Wiresoulstudio","Desk",2),office_desk:Ji(160,80,72,"Ola-Kristian Hoff","Desk",2),bureauInfoOuvert:Ji(77.9,85.9,76.4,"Ga\xebl Bettinelli","Desk2",2),bureau3:Ji(120,59,72.5,"Ga\xebl Bettinelli","Desk1",2),cassettieraW:Ji(42,53.8,53.5,"LucaPresidente","Drawer unit on casters",2),dustbin:Ji(23.3,23.3,35,"Ndakasha","Dustbin",1),inkjet_and_scanner_printer:Ji(44.6,33.2,18.9,"Scopia","Inkjet printer and scanner",1),laptop:Ji(33.9,25.3,26.6,"Mayollo","Laptop",1),monitorLCD:Ji(66.4,30.7,56.8,"Carvalho","Monitor LCD",1),penbox:Ji(7.3,8.3,17,"Scopia","Penbox",1),pencil1:Ji(1,13.5,.7,"Scopia","Pencil",1),phone:Ji(19.7,21.9,7.3,"Scopia","Phone",1),imprimanteFaxPhotocopieur:Ji(105.8,69.5,110,"Cristophe Tellerain","Photocopier printer",2),water_cooler:Ji(27.4,31.8,132.2,"Scopia","Water cooler",2),whiteBoard:Ji(124.7,55.1,129,"Redsymbzone","White board",2),wooden_office_pear_table:Ji(160,120,75.4,"Scopia","Wooden table",2),lamp_office:Ji(16,50,47,"Ola-Kristian Hoff","Desk lamp",1),tourPC:Ji(12,24,25,"Carvalho","Desktop computer",1),workLamp:Ji(16,50,47,"eTeks","Work Desk lamp",1),souris:Ji(6,10.1,2.4,"Geantick","Mouse",1),desk:Ji(140,67.8,77,"eTeks","Desk",2),cissors_swap:Ji(13.7,6.9,1.5,"Celticluis","Scissors",2),ruler:Ji(31.2,3.4,.17,"Doujon","Ruler",2),technicalTable1:Ji(214.7,118.8,95,"Redsymbzone","Technical table",2),technicalTable2:Ji(136.6,171.4,101.3,"Redsymbzone","Technical table",2),textMarker:Ji(3.1,10.3,1.7,"Mothome","Text marker",2),kalender:Ji(12,7.9,10.8,"Teguh9384","Calendar",2),biurko3:Ji(120.1,60.2,72,"Hilux","Desk",2),"sef-kasa":Ji(50,54.7,50,"Bocko","Safe",2),simpleDesk:Ji(140.1,81.1,72,"SirOccor","Desk",2),officeTable:Ji(189.2,83.4,75.1,"Nmn9","Desk",2),classSeat:Ji(62.5,67.7,80,"Ericblender7","Class seat",2),armChair2:Ji(97.8,82.1,88.5,"TreyClaine","Armchair",2),bureauInformatique:Ji(117.1,60,86.7,"Infernal-quack","Computer desk",2),clavier:Ji(42.5,13.9,2.1,"Geantick","Keyboard",2),portable:Ji(30,25.3,19.2,"Sleipnir1","Laptop",2),bigCornerDesk:Ji(199.6,167.3,140,"Pencilart","Corner desk",2),plantersDesk:Ji(76,66,160,"Pencilart","Planters desk",2),stylo:Ji(.8,15,.8,"Snduc","Pen",2),secretarysDesk:Ji(106.7,79.8,150,"Pencilart","Secretary's desk",2),desk2:Ji(180,163,72,"Peter Smolik","Desk",2),officeChair:Ji(62.62,59.67,87.34,"Peter Smolik","Office chair",2),officeChair2:Ji(62.88,68.8,101.5,"Peter Smolik","Office chair",2),officeChair3:Ji(55.88,56.35,107,"Peter Smolik","Office chair",2),escritorio:Ji(140,59.1,75.8,"Migdalia Lopez","PC table",2),bureauEcolier:Ji(88.5,56.1,90,"Fabrice Delobe","School desk",2),invoice:Ji(21,29.7,.49,"Emmanuel Puybaret","Invoice",2),bureauInfoClair:Ji(77.9,54.6,76.4,"Ga\ufffdl Bettinelli","Desk",2),chair_office_x:Ji(52,51,87,"Ola-Kristian Hoff","Armchair",2),scissors:Ji(4.4,12,.6,"alaX","Scissors",2),"apple-ibook-2001":Ji(28.5,27.2,22.9,"Kator Legaz","Apple iBook",2),"office-chair":Ji(64.3,64.3,91,"Kator Legaz","Chair",2),"custom-desk":Ji(235.1,83.8,180,"Kator Legaz","Desk",2),"filing-cabinet":Ji(38.6,52.6,60,"Kator Legaz","Filing cabinet",2),"apple-imac-1998":Ji(42.5,50,40.1,"Kator Legaz","Apple iMac 1998",2),stapler:Ji(2.9,11.6,3.5,"Kator Legaz","Stapler",2),raccordo80W:Ji(80,80,72,"LucaPresidente","Desk extension",2),scrivania160W:Ji(160,80,72,"LucaPresidente","Desk",2),mobile90160W:Ji(90,48.74561,160,"LucaPresidente","Bookcase 90x160",2),mobile90198W:Ji(90,48.75,198,"LucaPresidente","Bookcase 90x198",2),mobile9080W:Ji(90,48.75,80,"LucaPresidente","Bookcase 90x80",2),apple_pc:Ji(44,36.2,38,"Scopia","Apple iMac 2004",2),kids_desk_chair:Ji(53.4,51.9,88.3,"Scopia","Chair",2),kids_desk_table:Ji(112,60.5,74.6,"Scopia","Desk table",2),kids_wooden_desk:Ji(100.4,61.8,74.6,"Scopia","Wooden desk",2),wooden_office_alder_table:Ji(161.5,94.2,75.4,"Scopia","Wooden alder table",2),wooden_office_pear_table_rect:Ji(160,80,75.4,"Scopia","Wooden table",2),wooden_office_teak_table:Ji(160,120,75.4,"Scopia","Wooden teak table",2),bandeja:Ji(26.9,37.8,6.5,"Scopia","Letter tray",2),pencil2:Ji(.8,14,.6,"Scopia","Pencil",2)},po={staircase_90_bottom:Ji(100,330,352.2,"Ola-Kristian Hoff","Bottom winder staircase",2),staircase_180_long:Ji(100,330,353.1,"Ola-Kristian Hoff","Double winder staircase",2),escalator:Ji(129.1,882.2,424.8,"Scopia","Escalator",2),staircase_180_landing:Ji(200,260,349,"Ola-Kristian Hoff","Half landing staircase",2),staircase_90_landing:Ji(225,228.3,347.8,"Ola-Kristian Hoff","Quarter landing staircase",2),stairs_90_closed_legal_high:Ji(166,300,362.8,"Ola-Kristian Hoff","Quarter landing staircase",2),stairs_rail:Ji(329.8,6,234.5,"Ola-Kristian Hoff","Stairs rail",1),stairs_180_circular_notopstep_rail:Ji(600,301,355,"Ola-Kristian Hoff","Semiciruclar staircase",2),staircase_360_circle:Ji(230,230,353.4,"Ola-Kristian Hoff","Spiral staircase",2),stairs_180_square:Ji(200,100,335.6,"Ola-Kristian Hoff","Square spiral staircase",2),stair_ladder_loft:Ji(58,114,262,"Ola-Kristian Hoff","Staircase ladder",2),staircase_samba_265x150x85:Ji(85,150,262,"Ola-Kristian Hoff","Staircase samba",2),stair_straight_open_stringer:Ji(80,334.3,350.2,"Ola-Kristian Hoff","Staircase with open stringer",2),staircase_ladder_steep:Ji(94.4,167.1,356.7,"Ola-Kristian Hoff","Steep staircase",2),staircase_90_top:Ji(100,330,353.1,"Ola-Kristian Hoff","Top winder staircase",2),staircase_270_box:Ji(225,225,341.4,"Ola-Kristian Hoff","Triple winder staircase",2),staircase_u2h:Ji(338,176,342.5,"Ola-Kristian Hoff","Triple winder staircase",2),curveStaircase:Ji(72,238,362.4,"eTeks","Curve staircase",1),spiralStaircase:Ji(140,140,362,"eTeks","Spiral staircase",1),staircase:Ji(72,222,362.4,"eTeks","Staircase",1),grandStaircaseDark:Ji(507.6,288.1,400,"Pencilart","Grand staircase",2),escalierColimacon2:Ji(201.3,216.4,356.5,"Geantick","Spiral staircase",2),outdoor_staircase:Ji(128,282,205.5,"DaniFeri","Outdoor staircase",2),stairs_topcurve_90:Ji(200,401,358.6,"Ola-Kristian Hoff","Staircase curved at top",2),staircase_90_high_open:Ji(179,254,358.8,"Ola-Kristian Hoff","Winder staircase",2),staircase_straight:Ji(90,341.7,349.8,"Ola-Kristian Hoff","Straight staircase",2),stairs_legal:Ji(90,307.8,355.9,"Ola-Kristian Hoff","Straight staircase",2),stairs_spiral:Ji(200,200,358.1,"Ola-Kristian Hoff","Spiral staircase",2),quarterSlope:Ji(800,800,151,"Emmanuel Puybaret","Quarter slope",2),"home-lift":Ji(101.6,73.6,512,"Scopia","Home lift",2),"stair-lift-rail":Ji(539.9,11.4,20.4,"Scopia","Stair lift rail",2),"stair-lift":Ji(59.8,54.4,83.9,"Scopia","Stair lift",2)},mo={"4x4":Ji(186.4,381.6,194.3,"Scopia","4x4",2),bicycle:Ji(46,149.2,84.3,"Scopia","Bicycle",2),bus:Ji(279.5,1404.3,366.7,"Scopia","Bus",2),caravane:Ji(211.9,547,236.3,"Scopia","Caravan",2),cityBus:Ji(303.1,1219.2,302,"Scopia","City bus",2),decapotable:Ji(210.4,459.2,141.2,"Scopia","Convertible",2),locomotive:Ji(247.3,1500.2,647.2,"Scopia","Locomotive",2),monospace:Ji(212.7,467.2,179,"Scopia","Minivan",2),pickup:Ji(215.2,524.3,180.8,"Scopia","Pickup",2),renaultKangoo:Ji(203.4,403.4,177,"Scopia","Renault Kangoo",2),"renault-scenic":Ji(212.7,426.2,196.2,"Scopia","Renault Scenic",2),scooter:Ji(34,86.4,88,"Scopia","Scooter",2),scooter2:Ji(76.4,173.1,120.8,"Scopia","Scooter",2),seat_leon:Ji(192.4,419.5,146,"Scopia","Seat Leon",2),"smart-car":Ji(170.8,252.8,154.6,"Scopia","Smart car",2),sportive:Ji(210.2,447.8,128,"Scopia","Sports car",2),break:Ji(200.4,457.3,155.4,"Scopia","Station wagon",2),stroller:Ji(48,81.2,99.2,"Scopia","Stroller",2),remorque:Ji(180.2,313.4,102.4,"Scopia","Trailer",2),tramway:Ji(250.4,3000.8,481.6,"Scopia","Tramway",2),truck:Ji(271.8,630,340,"Scopia","Truck",2),dafTruck:Ji(305.8,1653.6,400.5,"Kartoffelphantom","DAF truck",2),van:Ji(240.5,595.8,256.5,"Scopia","Van",2),wagon:Ji(215.5,1500,412.4,"Scopia","Wagon",2),forkLift:Ji(351.4,130.1,215.7,"TheGIWI","Fork lift",2),peterbilt:Ji(287.2,2104.9,403,"Thomaswornall","Truck",2),bike:Ji(40.7,116.3,76.5,"Rodrigoalves123","Bike",2),fordFocus:Ji(204.5,435.8,155.1,"Ruff","Ford Focus",2),peugeot103:Ji(56.7,170,96.5,"Sleipnir1","Peugeot 103",2),"concept-sedan-01v2":Ji(184.9,455.9,155,"Kator Legaz","Concept Sedan 01",2),"concept-sedan-02":Ji(210.7,439.8,150,"Kator Legaz","Concept Sedan 02",2),"concept-sedan-02-sport":Ji(210.7,424.9,150,"Kator Legaz","Concept Sedan 02 Sport",2),"VW-new-beetle":Ji(193.6,409.1,154.5,"Kator Legaz","VW new beetle",2),"concept-sedan-01v1":Ji(191.1,471.1,155,"Kator Legaz","Concept Sedan 01",2),"peugeot-308":Ji(210,444,138.9,"Scopia","Peugeot 308 CC",2),"yamaha-yzr-r6":Ji(79.6,203.1,114.8,"Scopia","Yamaha YZR R6",2),tricycle:Ji(37.4,60,43.4,"Scopia","Tricycle",2),suv:Ji(209.1,463.1,162.7,"Scopia","SUV",2),chevrolet:Ji(210.15,445.7,121.1,"Scopia","Chevrolet",2),skateboard:Ji(20,80.2,10.4,"Scopia","Skateboard",2),suv2:Ji(209.2,427.2,176.2,"Scopia","SUV",2),carSegmentA:Ji(170.8,274.2,154.6,"Scopia","Small car",2),carSegmentB:Ji(184.4,393.9,141.3,"Scopia","City car",2)},uo={seat_leon:{width:231,height:504},"smart-car":{width:205,height:304},sportive:{width:253,height:538},break:{width:241,height:549},decapotable:{width:253,height:551},monospace:{width:256,height:561},"renault-scenic":{width:256,height:512},pickup:{width:259,height:630},"4x4":{width:224,height:458},renaultKangoo:{width:245,height:485},van:{width:289,height:715},truck:{width:327,height:756},dafTruck:{width:367,height:1985},scooter:{width:41,height:104},bicycle:{width:56,height:180},scooter2:{width:92,height:208},remorque:{width:217,height:377},caravane:{width:255,height:657},stroller:{width:58,height:98},bus:{width:336,height:1686},cityBus:{width:364,height:1463},tramway:{width:301,height:3601},locomotive:{width:297,height:1801},wagon:{width:259,height:1800},washbasin_jay_hardy:{width:72,height:52},bathroom3:{width:87,height:49},"hand-washbasin":{width:59,height:36},"stone-washbasin":{width:65,height:55},"ergonomic-washbasin":{width:72,height:56},bathroom_vanity:{width:129,height:47},modernVanity:{width:109,height:85},bathroom_sink:{width:147,height:66},mobilettoLavaboWenge:{width:98,height:51},wash_basin_corner:{width:60,height:60},islandBath:{width:204,height:113},bathtub_jet_system:{width:192,height:84},corner_bathtub:{width:192,height:192},"mixer-tap-for-shower":{width:35,height:42},shower:{width:25,height:65},doccia:{width:84,height:84},shower_cabin:{width:108,height:108},"shower-cabin-with-seat":{width:121,height:205},toilet_hang_round:{width:46,height:68},"japanese-toilet":{width:64,height:101},"small-urinal":{width:41,height:33},bidet:{width:48,height:65},towel2:{width:27,height:17},com_bath3:{width:72,height:21},towel3:{width:72,height:10},showerCurtain:{width:109,height:36},barreAppuiCoude:{width:93,height:14},"folding-grab-bar":{width:9,height:75},savon:{width:9,height:7},com_bath2_jabon_pijo:{width:7,height:7},potBrossesADent:{width:9,height:11},secheCheveux:{width:19,height:19},potty:{width:37,height:37},toiletBrush:{width:12,height:16},"bathroom-tissue":{width:26,height:21},pesePersonne:{width:34,height:39},basin:{width:93,height:79},bathmat:{width:88,height:57},"clothes-basket":{width:65,height:65},clothes_line:{width:600,height:18},clothes_washing_machine:{width:71,height:73},dryer_machine:{width:71,height:75},fer:{width:17,height:16},plancheARepasser:{width:66,height:165},bedFlowers:{width:243,height:274},"air-mattress":{width:84,height:219},bed3:{width:243,height:274},bed1:{width:205,height:260},bedWithTexture:{width:238,height:272},"captains-bed":{width:118,height:252},juniorBed:{width:127,height:238},"convertible-sofa-BZ-opened":{width:190,height:229},bunkBed:{width:136,height:246},litMezzanine2:{width:356,height:222},"mezzanine-bed":{width:147,height:311},crib:{width:88,height:150},"adjustable-hospital-bed":{width:120,height:252},armoireLotus:{width:216,height:81},mobileCiliegio:{width:120,height:60},mobileangoloCiliegio:{width:105,height:104},mobileAngoloInterno:{width:126,height:126},mobileAzzurro:{width:120,height:69},corner:{width:63,height:63},wardrobe2:{width:209,height:72},"changing-table":{width:148,height:58},chest:{width:173,height:65},kommode:{width:115,height:51},bedsideTable:{width:60,height:50},bedsideTable2:{width:59,height:58},comoCiliegio:{width:192,height:72},"clothes-rack":{width:135,height:43},mensolaCurvaAcero:{width:48,height:48},pensileAcero:{width:48,height:30},folded_clothes:{width:32,height:49},futon:{width:171,height:254},"hanging-clothes1":{width:39,height:71},casque:{width:32,height:46},"hospital-table-on-wheels":{width:92,height:55},hotelSafe:{width:53,height:48},sleepingBag:{width:106,height:240},bootieSeparated:{width:26,height:33},slippersSeparated:{width:29,height:34},sneakersSeparated:{width:29,height:37},mocassinSeparated:{width:27,height:34},womanShoesSeparated:{width:23,height:30},blocks:{width:72,height:60},doll:{width:18,height:15},"doll-house":{width:83,height:39},smiley:{width:17,height:17},teddyBear:{width:40,height:27},train:{width:143,height:117},letters:{width:49,height:16},housePuzzle:{width:19,height:19},rubix2:{width:7,height:7},awning_bracket:{width:372,height:204},barbecue:{width:48,height:59},basketball_net_and_board:{width:131,height:74},barnum:{width:361,height:361},campingLamp:{width:19,height:19},campingTent:{width:298,height:284},deckChair:{width:86,height:151},"diving-board":{width:51,height:220},"dog-house":{width:86,height:108},"entry-bell-ring":{width:5,height:3},"entry-bell-speech-unit":{width:13,height:3},privacyFence2:{width:120,height:18},fence_grid:{width:240,height:6},fence_picket:{width:102,height:8},"football-goal":{width:183,height:107},"big-football-goal":{width:879,height:217},waterFountain:{width:62,height:62},fountain:{width:222,height:222},"garden-hut":{width:206,height:219},gate_grind:{width:230,height:14},greenhouse:{width:372,height:372},grillNgauge:{width:216,height:84},hammock:{width:421,height:198},hangingUmbrella:{width:288,height:357},jacuzzi:{width:274,height:274},boiteALettre:{width:38,height:36},motorbike:{width:110,height:40},"painted-bench":{width:172,height:63},"passage-pieton":{width:480,height:900},pedestrianRailing1:{width:250,height:6},pedestrianRailing2:{width:240,height:6},pergola:{width:288,height:307},picnic_table:{width:217,height:175},pool_ladder:{width:60,height:60},"porch-column-03":{width:40,height:40},rainGutterPart1:{width:240,height:15},rainGutterPart2:{width:12,height:110},rattanArmchair:{width:86,height:87},rattanSofa:{width:155,height:87},rattanTable:{width:144,height:72},"round-swimming-pool":{width:198,height:198},sandpit:{width:157,height:145},bonecoDeNeve:{width:113,height:86},solar_panel_140W:{width:150,height:81},stoneLantern:{width:42,height:42},"swimming-pool":{width:2057,height:1198},ext_table:{width:243,height:186},silla_teca:{width:70,height:81},"feu-de-signalisation-simple":{width:45,height:64},trampoline:{width:360,height:360},umbrella:{width:268,height:268},wheelie_bin:{width:72,height:75},outdoorLamp:{width:26,height:26},window_flat_roof_skylight_bubble:{width:120,height:120},"external-unity-air-conditioning":{width:93,height:35},column_balustrade:{width:36,height:30},column_balustrade_corner:{width:66,height:66},birch:{width:473,height:450},bush:{width:182,height:173},"cafe-chair":{width:60,height:63},"cafe-table":{width:90,height:90},child_swing:{width:196,height:193},parque:{width:489,height:116},croisement2et2:{width:1254,height:1254},routeCourbe2VoiesAvecTrottoirs90Deg:{width:1254,height:1254},route2VoiesAvecTrottoirs:{width:1560,height:1254},voiesFerreesAiguillage:{width:2408,height:832},voiesFerreesCourbe20m:{width:2442,height:832},voiesFerreesDroit10m:{width:1200,height:528},hedgeTextured:{width:186,height:72},"lavender-bush":{width:99,height:99},palm:{width:636,height:657},pansy:{width:37,height:37},tree:{width:720,height:768},lombardyPoplar:{width:244,height:231},pine:{width:408,height:384},plantie:{width:83,height:34},rock1:{width:61,height:41},rock2:{width:83,height:65},rock3:{width:83,height:51},"roses-bush":{width:48,height:55},kitchenUpperCabinet:{width:132,height:39},kitchenSmallUpperCabinet:{width:41,height:39},kitchenSmallLowerCabinet:{width:59,height:74},lowerCabinet:{width:72,height:74},lowerCornerCabinet:{width:98,height:99},drawersCabinet:{width:72,height:74},kitchenLowerCabinet:{width:118,height:74},kitchenIsland:{width:113,height:84},kitchenDrawersCabinet:{width:54,height:74},smallUpperCabinet:{width:72,height:50},upperCabinet:{width:72,height:50},highCabinet:{width:72,height:74},kitchenSink:{width:118,height:74},sinkCabinet2:{width:72,height:74},islandExtension:{width:72,height:149},meubleChaussures:{width:87,height:48},kitchenGlassDoorCabinet:{width:41,height:39},dishwasher:{width:54,height:72},refrigerator:{width:108,height:108},largeFridge:{width:111,height:97},rangeHood:{width:72,height:39},"chest-freezer":{width:156,height:103},stove1:{width:100,height:113},stove:{width:40,height:72},largeStove:{width:125,height:87},oven:{width:72,height:62},ovenFront:{width:72,height:9},hood:{width:122,height:48},kitchenHood:{width:72,height:62},"induction-cooker-2-zones":{width:36,height:63},"induction-cooker-4-zones":{width:68,height:60},mano_cooktop:{width:70,height:60},lavastoviglie:{width:72,height:76},doubleOven:{width:72,height:62},sgabello:{width:39,height:44},tabouretBar:{width:62,height:54},stool2:{width:44,height:44},baby_high_chair:{width:72,height:78},boiler:{width:22,height:20},bouilloire:{width:21,height:25},toaster:{width:33,height:19},coffeeBrewer:{width:17,height:47},percolateur:{width:25,height:37},"coffee-maker":{width:23,height:35},cooker:{width:35,height:48},electronicScale:{width:18,height:27},autocuiseur:{width:31,height:27},sandwichMaker:{width:29,height:31},"small-oven":{width:68,height:57},spiceTower:{width:20,height:20},saltShaker:{width:5,height:5},grillePain:{width:42,height:15},towel:{width:18,height:17},poubelleInox:{width:35,height:42},tray:{width:47,height:36},kitchenKnife:{width:5,height:32},kitchenKnifeStandSet:{width:11,height:33},poele:{width:31,height:52},casserole:{width:21,height:37},paperTowelHolder:{width:20,height:20},bolDeRiz:{width:18,height:18},"plate-and-ustensils":{width:33,height:41},"ensemble-assiette-couteau-fourchette-cuillere-verre":{width:51,height:47},"kitchen-glass-jar-high":{width:12,height:12},cocktailGlass:{width:10,height:10},glass:{width:9,height:9},"coffee-mug":{width:11,height:15},coffeePress:{width:20,height:13},choppingBoard:{width:46,height:32},baguettes:{width:2,height:26},bowl:{width:25,height:25},mamadeira:{width:6,height:6},utensilsPot:{width:15,height:14},aspirateur:{width:172,height:40},broom:{width:44,height:10},bucket:{width:36,height:34},eponge:{width:12,height:8},"food-box-pasta":{width:17,height:7},"food-box-corn-flakes":{width:23,height:11},tetrapak:{width:12,height:12},caffe_final:{width:12,height:12},butter:{width:20,height:9},cupcake:{width:8,height:8},birthday_cake:{width:29,height:29},bowlWithFruits:{width:39,height:41},bowlWithSalad:{width:30,height:30},bread:{width:8,height:29},apples:{width:31,height:31},baguettePain:{width:66,height:9},toast:{width:13,height:12},steak:{width:39,height:24},"roasted-chicken":{width:36,height:25},citrouille:{width:36,height:36},pizza:{width:36,height:36},hotDog:{width:26,height:9},hamburger:{width:14,height:14},frenchFries:{width:25,height:24},clear_sofa:{width:233,height:92},L_shaped_sofa:{width:281,height:173},couch2:{width:276,height:192},"futon-couch":{width:236,height:108},simple_sofa:{width:216,height:81},sofa1:{width:281,height:96},"convertible-sofa-BZ-closed":{width:172,height:123},clicClac:{width:219,height:112},dining_room:{width:307,height:44},cabinet2:{width:269,height:78},elementHautSalon:{width:63,height:52},meubleHiFiHaut:{width:188,height:50},stainlessSteelShelf:{width:94,height:34},shelves_storage_steel:{width:96,height:36},shelves_storage_wood:{width:94,height:38},dresserWithDrawers:{width:193,height:63},"full-bookcase":{width:108,height:42},tourRangeCD:{width:24,height:21},pinewoodRackLowHeight:{width:108,height:37},pinewoodRackMediumHeight:{width:108,height:37},longcase_clock:{width:60,height:36},rocking_chair:{width:78,height:96},fotel:{width:89,height:74},armchair3:{width:71,height:84},chair_granmother:{width:74,height:70},chair:{width:51,height:57},kitchenChair:{width:52,height:53},thonet:{width:66,height:70},chair3:{width:52,height:61},chair4:{width:59,height:54},white_kitchen_chair:{width:52,height:57},childChair:{width:46,height:48},children_chair:{width:34,height:34},foldingChair:{width:61,height:72},folding_chair:{width:59,height:62},chaiseOrange:{width:50,height:57},osakaChair:{width:57,height:63},ryokanChair:{width:64,height:71},stool_small:{width:36,height:36},green_stool:{width:52,height:52},pianoBench:{width:75,height:43},black_table:{width:205,height:108},"folding-table":{width:224,height:94},children_table:{width:76,height:58},coffee_table:{width:108,height:56},table_wood_and_iron:{width:146,height:92},couchTable:{width:122,height:85},"round-table":{width:132,height:132},"table-on-trestles":{width:192,height:80},white_kitchen_table:{width:132,height:85},table:{width:174,height:113},"table-with-leaning-feet":{width:180,height:78},tableCuisine2:{width:210,height:110},"glass-dining-table":{width:195,height:118},meubleHiFiBas:{width:125,height:54},table_half_round:{width:123,height:71},oakTable:{width:149,height:149},tableWithTablecloth:{width:97,height:98},"wall-flat-tv":{width:124,height:14},curvedTVForTable:{width:152,height:22},curvedWallOLEDTV:{width:182,height:16},dvd:{width:52,height:34},playstation4:{width:40,height:36},"ps4-joystick":{width:20,height:13},"tv-remote-control":{width:6,height:22},"video-projector":{width:57,height:46},wirelessOfficePhone3:{width:14,height:19},fireplace1:{width:139,height:43},fireplace2:{width:146,height:54},carpet:{width:192,height:270},puff:{width:110,height:102},"round-carpet":{width:96,height:96},desklamp:{width:30,height:30},JapaneseLantern:{width:19,height:19},lamp:{width:37,height:37},little_lamp2:{width:38,height:38},"MIDI-keyboard":{width:96,height:31},batterie:{width:126,height:112},"microphone-with-foot":{width:81,height:119},luckyBamboo:{width:19,height:18},"bonsai-tree":{width:54,height:46},"boston-fern":{width:78,height:74},cactus:{width:18,height:16},decorativePlant:{width:39,height:39},flowers:{width:26,height:20},mediumIndoorPlant:{width:87,height:92},orchids:{width:38,height:43},augalas:{width:74,height:42},maceta:{width:71,height:78},plant:{width:99,height:83},roses:{width:28,height:33},succulentPlant:{width:17,height:16},yuccaPlant:{width:130,height:123},christmas_tree:{width:154,height:156},abdominalBench:{width:81,height:232},"internal-unity-air-conditioning":{width:107,height:24},iphone:{width:7,height:14},backpack:{width:35,height:41},storeCalifornien:{width:241,height:20},livreAvecReliure:{width:22,height:14},book:{width:34,height:23},livres:{width:29,height:21},cageFuret:{width:95,height:60},"cardboard-box":{width:66,height:42},arbreAChat:{width:78,height:59},CCTV:{width:17,height:17},ceilingFan:{width:110,height:96},clock2:{width:36,height:4},"clothes-hanger":{width:52,height:2},"clothes-horse":{width:78,height:114},crate:{width:72,height:71},curtain:{width:132,height:6},curtains:{width:180,height:28},dart_game:{width:55,height:20},doormat:{width:72,height:36},electric_water_heater:{width:55,height:56},electricWheelchair:{width:67,height:107},emergencySign:{width:36,height:5},fence:{width:216,height:7},flipper:{width:87,height:160},foldedNewspaper:{width:36,height:25},"folding-armchair":{width:72,height:73},table_football:{width:181,height:150},ButterflyFrame:{width:59,height:2},frame:{width:60,height:3},frame1:{width:18,height:18},frame3HorizontalNorwayPhotos:{width:31,height:4},frame3VerticalSummerPhotos:{width:63,height:4},HaiVanPassFrame:{width:93,height:2},furnace:{width:81,height:118},gaz_water_heater:{width:49,height:42},gift:{width:28,height:22},glasses:{width:18,height:18},barreAppui:{width:70,height:14},marteau:{width:42,height:16},cendrier:{width:15,height:15},headphones:{width:23,height:10},"indoor-bike":{width:87,height:122},intercom:{width:12,height:7},intercom_with_screen:{width:23,height:8},"iron-railing-separated-hooks-2":{width:162,height:14},keys:{width:14,height:14},litiere:{width:35,height:61},lockedLocker:{width:24,height:27},revue:{width:24,height:34},mini_stereo:{width:59,height:26},mirror:{width:48,height:1},mobile:{width:6,height:14},mower:{width:62,height:116},bdOuverte:{width:51,height:36},revueOuverte:{width:48,height:34},ovalMirror:{width:66,height:2},pallet:{width:144,height:145},poolTable:{width:308,height:168},"punching-ball":{width:56,height:56},wheelchairSymbol:{width:179,height:179},radiator3:{width:67,height:25},gardeCorps:{width:168,height:8},railing_glass:{width:186,height:6},rectangularMirror:{width:60,height:2},reflex_camera:{width:15,height:18},japanese_style_screen:{width:214,height:19},tournevis:{width:31,height:4},sewing_machine:{width:63,height:15},shippingContainer:{width:292,height:728},"smoke-detector":{width:12,height:3},ballonFoot:{width:27,height:27},speaker2:{width:27,height:31},"square-double-switch":{width:11,height:2},frame_square:{width:120,height:12},"square-switch":{width:11,height:2},"square-plug-TypeB":{width:11,height:1},"square-plug-TypeE":{width:11,height:1},"step-ladder-metal":{width:70,height:92},AtorHaut:{width:73,height:64},suitcase:{width:120,height:38},surveillanceCamera:{width:28,height:47},table_tennis:{width:329,height:208},tablet:{width:21,height:29},tatami:{width:120,height:240},treadmill:{width:107,height:235},putekasse:{width:142,height:54},umbrellaFolded:{width:43,height:43},vase3:{width:29,height:29},jar:{width:30,height:30},"walker-with-wheels":{width:73,height:87},"double-switch-whites":{width:11,height:2},wall_handrail:{width:276,height:12},"switch-whites":{width:11,height:2},"plug-TypeB-whites":{width:11,height:1},"plug-TypeE-whites":{width:11,height:1},wheelchair:{width:78,height:93},"window-blinds":{width:120,height:9},cover_outdoor1:{width:120,height:9},wood_logs:{width:49,height:84},complements2:{width:16,height:16},mobile45160W:{width:54,height:59},mobile45198W:{width:54,height:59},mobile4580W:{width:54,height:59},office_furniture1:{width:360,height:66},cassettieraW:{width:51,height:65},office_box:{width:255,height:65},chair2:{width:70,height:74},office_chair:{width:77,height:77},chair_office_y:{width:58,height:60},pcstul:{width:164,height:112},lbDesk:{width:192,height:96},office_desk:{width:192,height:96},bureauInfoOuvert:{width:94,height:104},wooden_office_pear_table:{width:192,height:144},bureau3:{width:144,height:71},inkjet_and_scanner_printer:{width:54,height:40},laptop:{width:41,height:31},monitorLCD:{width:80,height:37},phone:{width:24,height:27},imprimanteFaxPhotocopieur:{width:127,height:84},penbox:{width:9,height:10},pencil1:{width:2,height:17},water_cooler:{width:33,height:39},whiteBoard:{width:150,height:67},lamp_office:{width:20,height:60},dustbin:{width:28,height:28},staircase_90_bottom:{width:120,height:396},staircase_180_long:{width:120,height:396},escalator:{width:155,height:1059},staircase_180_landing:{width:240,height:312},staircase_90_landing:{width:270,height:274},stairs_90_closed_legal_high:{width:200,height:360},stairs_rail:{width:396,height:8},stairs_180_circular_notopstep_rail:{width:720,height:362},staircase_360_circle:{width:276,height:276},stairs_180_square:{width:240,height:120},stair_ladder_loft:{width:70,height:137},staircase_samba_265x150x85:{width:102,height:180},stair_straight_open_stringer:{width:96,height:402},staircase_ladder_steep:{width:114,height:201},staircase_90_top:{width:120,height:396},staircase_270_box:{width:270,height:270},staircase_u2h:{width:406,height:212},man:{width:72,height:30},mannequinMale:{width:72,height:30},boyStanding:{width:72,height:42},male03:{width:66,height:48},male01:{width:66,height:54},male02:{width:96,height:60},holdingMale01:{width:72,height:72},mannequinBrunette:{width:72,height:30},female01:{width:66,height:66},female02:{width:72,height:60},female03:{width:72,height:72},girlStanding:{width:48,height:48},holdingFemale01:{width:60,height:72},holdingFemale02:{width:84,height:84},holdingFemale03:{width:60,height:60},nourrison:{width:36,height:60},boySitting:{width:60,height:72},sitMale01:{width:72,height:84},sitMale02:{width:72,height:84},sitMale03:{width:72,height:108},sitFemale03:{width:60,height:72},girlSittingTable:{width:42,height:72},sitFemale02:{width:90,height:120},girlSittingGround:{width:72,height:66},boyLying:{width:72,height:216},lyingDownMale02:{width:72,height:204},lyingDownMale01:{width:72,height:216},lyingDownFemale01:{width:84,height:180},dog:{width:36,height:108},cat:{width:22,height:42},siameseCat:{width:16,height:72},rabbit:{width:18,height:30},horse2:{width:72,height:300},bed:{width:174,height:232},boucheVMC:{width:26,height:3},radiator1:{width:260,height:18},radiateur:{width:61,height:8},radiateurVertical:{width:74,height:6},cornice:{width:120,height:12},corniceConcaveCorner:{width:12,height:12},pileMagazines:{width:33,height:41},antenaTV:{width:240,height:97},guitar:{width:47,height:118},winchesterArmchair:{width:135,height:113},etageres:{width:180,height:47},etagereEnfant:{width:84,height:37},bookcase:{width:200,height:40},beige_sofa:{width:233,height:92},container:{width:16,height:11},bouteille:{width:10,height:10},tableCuisine:{width:144,height:48},meubleMicroOnde:{width:76,height:53},cabinet:{width:96,height:75},cabinetWithBasin:{width:96,height:75},drawers:{width:48,height:75},upperCabinet2:{width:72,height:50},portillon:{width:147,height:8},bump:{width:120,height:120},petiteCommode:{width:99,height:56},armoire:{width:131,height:64},portemanteaux2:{width:56,height:56},litMezzanine:{width:241,height:261},bacADouchePlat:{width:108,height:108},frontDoor:{width:122,height:28},frenchWindow85x200:{width:110,height:41},window85x123:{width:110,height:41},window85x163:{width:110,height:41},doubleOutwardOpeningWindow:{width:139,height:32},doubleWindow126x123:{width:159,height:41},doubleWindow126x163:{width:159,height:41},doubleFrenchWindow126x200:{width:159,height:41},sliderWindow126x200:{width:159,height:38},fixedWindow85x123:{width:110,height:33},serviceHatch:{width:60,height:10},slidingDoors:{width:185,height:10},pendantLamp:{width:72,height:72},spotlight:{width:9,height:12},wallUplight:{width:29,height:15},floorUplight:{width:40,height:40},lampeHalogene:{width:38,height:83},led_striplight:{width:120,height:5},washbasin:{width:68,height:57},washbasinWithCabinet:{width:75,height:69},fittedBath:{width:214,height:93},bath:{width:196,height:88},toiletUnit:{width:48,height:96},clothesWasher:{width:71,height:73},bed140x190:{width:190,height:250},bed90x190:{width:130,height:250},bunkBed90x190:{width:138,height:250},loftBed140x190:{width:198,height:250},cornerBunkBed90x190:{width:250,height:250},wardrobe:{width:120,height:65},railing:{width:114,height:6},kitchenCabinet:{width:72,height:77},sink:{width:144,height:77},fridge:{width:72,height:80},fridgeFreezer:{width:72,height:80},cornerSofa:{width:280,height:202},sofa:{width:177,height:105},sofa2:{width:240,height:104},glassDoorCabinet:{width:84,height:47},armchair:{width:105,height:111},armchair2:{width:96,height:94},stool:{width:48,height:48},tabouretPiano:{width:43,height:46},coffeeTable:{width:150,height:56},roundTable:{width:152,height:152},squareTable:{width:138,height:138},tvUnit:{width:120,height:63},dresser:{width:204,height:60},aquarium:{width:72,height:36},filledBookcase:{width:102,height:42},flatTV:{width:146,height:36},fireplace:{width:174,height:102},cheminee:{width:174,height:102},piano:{width:168,height:52},pianoDroit:{width:154,height:67},box:{width:60,height:60},cylinder:{width:60,height:60},estintore:{width:43,height:25},antenaParabolica:{width:78,height:85},hotWaterRadiator:{width:78,height:30},electricRadiator:{width:45,height:12},electricOutlet:{width:9,height:1},electricOutlet2:{width:9,height:1},desk:{width:168,height:82},souris:{width:8,height:13},tourPC:{width:15,height:29},workLamp:{width:20,height:60},curveStaircase:{width:87,height:286},spiralStaircase:{width:168,height:168},staircase:{width:87,height:267},blind:{width:120,height:9},fivePanesWindowWithWallPart:{width:256,height:14},rectangularFivePanesWindow:{width:256,height:14},pictureWindow:{width:256,height:65},simpleShutter:{width:73,height:6},traditionalShutter:{width:73,height:6},twoPartsShutter:{width:73,height:6},fancyWindow:{width:73,height:7},newWindowDk:{width:73,height:4},windowFrostedGlass:{width:73,height:3},window_shutter:{width:53,height:3},window_double_3x3:{width:162,height:19},door_window_thick_double_2x4:{width:192,height:28},door_window_thick_double:{width:192,height:28},door_window_thick:{width:96,height:28},window_double_frame_sill:{width:148,height:30},window_urban_neoclassic:{width:240,height:72},window2:{width:120,height:30},"window-01":{width:66,height:20},"window-08-02":{width:75,height:20},"window-shutter":{width:37,height:2},window_2x3_arched:{width:130,height:38},window_2x3_regular:{width:130,height:38},window_2x3:{width:130,height:38},window_2x4_arched:{width:130,height:38},window_4x3_arched:{width:192,height:39},window_4x3:{width:192,height:39},frontDoorDark:{width:135,height:48},garageDoor:{width:504,height:30},patioGlassDoorUnit:{width:193,height:22},sixDoorFrenchStyle:{width:714,height:122},frenchDoors:{width:287,height:34},DianaWindow:{width:468,height:31},accordionFoldDoors:{width:341,height:152},garageDoor2:{width:252,height:18},doorGlassPanels:{width:93,height:13},door1:{width:110,height:22},glassDoorsOpened:{width:403,height:104},patioDoorOpened:{width:202,height:99},patioDoor:{width:119,height:22},patioSideDoor:{width:73,height:7},fancyFrontDoor:{width:120,height:29},door_glass:{width:115,height:20},"exterior-door-01":{width:126,height:22},"exterior-door-02":{width:118,height:21},"exterior-door-03":{width:125,height:20},wallLight:{width:27,height:30},bougeoir:{width:15,height:14},neon:{width:50,height:8},candleOrnament:{width:10,height:15},deskLamp1:{width:49,height:49},deskLight:{width:28,height:89},ceiling_lamp_globo_feria:{width:55,height:55},lamp_paraffin_feuerhand:{width:15,height:13},lamp_wall_outside:{width:54,height:60},"classic-lamppost":{width:36,height:36},flashlight:{width:5,height:18},"hanging-restaurant-light":{width:47,height:47},"park-light":{width:74,height:68},"pedestal-vase-lamp":{width:34,height:34},"wall-lamp-artwork":{width:36,height:45},desk_lamp1:{width:16,height:41},desk_lamp2:{width:27,height:50},little_lamp1:{width:40,height:40},little_lamp3:{width:49,height:49},saloon_lamp:{width:16,height:100},table_lamp:{width:24,height:24},living_room_lamp1:{width:33,height:33},living_lamp:{width:48,height:70},"chandelier-lamp":{width:157,height:157},candelabre:{width:52,height:174},candle:{width:13,height:12},deer:{width:6,height:12},led_tv:{width:93,height:17},oakChair:{width:59,height:73},pianoAQueue:{width:158,height:204},plasticChair:{width:53,height:70},shelves:{width:95,height:47},televisionCabinet:{width:162,height:83},verticalShelves:{width:53,height:47},electricGuitar:{width:41,height:39},littlePlant:{width:32,height:32},sillaBlanca:{width:61,height:70},couch:{width:249,height:105},modernArmchair:{width:93,height:102},antiqueChair:{width:60,height:76},chairWithCushion:{width:53,height:53},winchesterSofa:{width:278,height:113},designChair:{width:93,height:75},arbolito:{width:30,height:31},cafe_set_mota_chair:{width:73,height:67},cafe_set_mota_table:{width:75,height:75},cafe_set_tonon_chair:{width:58,height:64},cafe_set_tonon_table:{width:79,height:63},ella_chair_f:{width:55,height:68},leaf_chair:{width:81,height:98},spatifilum:{width:96,height:90},tvStand:{width:162,height:56},armchair1:{width:121,height:106},spider_plant:{width:80,height:76},tulip:{width:46,height:53},white_lily:{width:45,height:37},plaidChair:{width:49,height:51},sofa3:{width:245,height:92},tulips:{width:38,height:30},couch3:{width:241,height:109},barStool:{width:40,height:40},bookcase2:{width:98,height:53},computerWorkstation:{width:149,height:166},cornerWorkstation:{width:131,height:130},bocalPoisson:{width:40,height:40},tableGnome:{width:124,height:79},rectangularTable:{width:210,height:121},squareCoffeeTable:{width:81,height:81},ecran16_9:{width:104,height:34},tableBasseBois:{width:114,height:60},woodTable:{width:205,height:127},priseTV:{width:10,height:1},petiteTableSalon:{width:38,height:38},bibliothequeDroite:{width:60,height:48},allenOrgan:{width:223,height:187},highBoyDresser:{width:116,height:68},smallbookshelves:{width:105,height:40},salontafel:{width:120,height:120},couchTwoSeats:{width:238,height:109},kleed_grieks:{width:204,height:144},pinewoodRackFullHeightHalfWidth:{width:59,height:36},pinewoodRackFullHeight:{width:108,height:36},latticeChair:{width:52,height:51},meubleMural:{width:314,height:66},CDrack:{width:79,height:24},displayCabinet:{width:101,height:101},hallTable:{width:141,height:75},potplant2:{width:116,height:115},roundTable2:{width:65,height:65},shelving:{width:143,height:37},sofa3Single:{width:166,height:123},sofa4:{width:222,height:89},couchPoofyPillows:{width:187,height:85},largeCouch:{width:284,height:92},singleChair:{width:121,height:93},throwPillow:{width:42,height:20},counter:{width:229,height:346},tableBasse:{width:135,height:72},pancaFratinoSing:{width:102,height:60},tavoloFratino:{width:132,height:84},TVCenter:{width:93,height:65},chair_high:{width:78,height:84},shelves_storage_wood2:{width:92,height:44},table_granmother_marble:{width:144,height:144},armchair_wing:{width:102,height:108},bar_stool:{width:53,height:50},dropLeafTable:{width:312,height:94},"mid-century-chair":{width:88,height:101},"chair-ottoman":{width:92,height:186},"bar-stool":{width:64,height:71},"dining-chair":{width:51,height:69},"utility-shelving":{width:72,height:36},"mid-century-bench-sofa":{width:335,height:129},"mid-century-sofa":{width:239,height:101},credenza:{width:199,height:60},sedia:{width:54,height:55},tavolino:{width:72,height:36},tavolo:{width:192,height:84},box_room:{width:189,height:57},saloon_table:{width:173,height:77},table3:{width:120,height:120},table4:{width:168,height:108},tv:{width:67,height:38},wooden_table_office:{width:181,height:96},tubular_chair:{width:64,height:60},metal_glass_table:{width:193,height:108},glass_table_office:{width:223,height:96},desk_table:{width:230,height:106},bar_table:{width:96,height:96},beige_sofa_2seats:{width:191,height:88},burlap_sofa:{width:204,height:108},contemp_living_room:{width:397,height:48},leather_sofa:{width:231,height:108},living_room_table:{width:128,height:87},modern_armchair:{width:76,height:63},plastic_chair:{width:58,height:67},calla_lily_with_roses:{width:52,height:46},sofa_white_beige:{width:209,height:98},ficus:{width:51,height:50},"coffee-table2":{width:149,height:61},lavender:{width:16,height:14},kitchenaid:{width:26,height:44},knifeStandSwap:{width:47,height:5},plasticCup:{width:10,height:10},silla2:{width:40,height:38},yogurtBottle:{width:9,height:9},beerGlass:{width:19,height:13},upperCornerCabinet:{width:98,height:98},upperShelves:{width:42,height:42},beer_bottle:{width:7,height:7},coffee_cup:{width:11,height:11},fork:{width:3,height:22},kitchenblender:{width:19,height:27},kitchenTools:{width:53,height:12},knife:{width:3,height:25},largePan:{width:40,height:33},microwave:{width:49,height:43},spoon:{width:4,height:22},washing_machine:{width:72,height:75},breadBox:{width:68,height:33},kitchenScale:{width:28,height:28},espressokettle:{width:22,height:12},boiteMetal:{width:9,height:9},chaiseCuisine:{width:44,height:66},verreFlute:{width:6,height:6},glassDoorKitchenCabinet:{width:160,height:44},verreLongDrink:{width:7,height:7},microOnde:{width:59,height:43},mug:{width:10,height:13},assietteVerresCouverts:{width:45,height:44},smallGlass:{width:12,height:12},carafeEau:{width:38,height:38},verreEau:{width:9,height:9},carafeVin:{width:38,height:38},verreVin:{width:9,height:9},glassdoorCabinet:{width:48,height:53},mobile_cucina_60x60:{width:72,height:79},lavello_doppio_90x60:{width:144,height:79},cassetti_cucina_45x60:{width:54,height:79},isola_cucina_150x90:{width:180,height:126},pensile_cucina_45x90:{width:108,height:82},pensile_cucina_60x70:{width:84,height:60},capa:{width:80,height:60},piano_cottura:{width:72,height:74},frigorifero:{width:72,height:87},ceramicHob:{width:72,height:63},cornerCabinet:{width:95,height:94},"3DrawerCabinet":{width:64,height:77},"2GlassDoorCabinet":{width:116,height:48},"2DoorUpperCabinet":{width:116,height:48},"2DoorLowerCabinet":{width:116,height:77},"1GlassDoorCabinet":{width:55,height:48},"1DoorUpperCabinet":{width:55,height:48},"1DoorLowerCabinet":{width:63,height:77},refridgerator:{width:92,height:78},pantry:{width:118,height:77},kitchenSinkWithMarble:{width:110,height:77},cornerChina:{width:93,height:93},couteauADecouper:{width:4,height:39},couteauAPain:{width:3,height:35},plancheADecouper:{width:42,height:29},barCusisine:{width:146,height:54},frigo:{width:69,height:72},desserte:{width:57,height:45},casierBouteilles:{width:72,height:30},cookingPlate:{width:48,height:25},gaz:{width:38,height:38},washer_dryer:{width:72,height:66},ashtray:{width:10,height:10},"bullet-trash-can":{width:40,height:40},"12-oz-glass":{width:9,height:9},"highball-glass":{width:8,height:8},"oil-servers":{width:18,height:9},"dinner-plate":{width:30,height:22},"bread-plate":{width:24,height:24},"propane-stove":{width:73,height:72},"red-wine-bottle-01":{width:11,height:11},angolo:{width:78,height:78},cucina:{width:96,height:80},curva:{width:72,height:72},curvaEsterna30:{width:36,height:72},curvaInterna30:{width:36,height:72},doppio:{width:96,height:77},pensileAngolo:{width:78,height:78},pensileCurva:{width:33,height:33},pensileDoppio:{width:96,height:41},pensileVetro:{width:48,height:36},pianoIsola:{width:48,height:144},singolo:{width:48,height:77},lavello:{width:96,height:77},cassettiera:{width:48,height:77},mobilettoGrande:{width:96,height:77},mobilettoPiccolo:{width:48,height:77},gasHob:{width:72,height:48},old_jar:{width:30,height:25},pottery:{width:14,height:14},sushi_tray:{width:39,height:30},kitchen_tool1:{width:9,height:56},kitchen_tool2:{width:12,height:54},kitchen_tool3:{width:10,height:56},kitchen_tool4:{width:8,height:53},wine_bottle:{width:10,height:10},bar_chair:{width:54,height:59},kitchen_stool:{width:55,height:55},coffee_machine:{width:70,height:49},creamer:{width:15,height:11},cup:{width:15,height:15},sugar:{width:13,height:13},teapot:{width:27,height:18},shovel:{width:33,height:65},"shopping-basket":{width:72,height:61},squeezer:{width:20,height:15},deepFryerWithFrenchFries:{width:34,height:69},stoneGrillDevice:{width:38,height:31},"food-spaghetti-box":{width:34,height:6},"kitchen-glass-jar-low":{width:12,height:12},"waitress-table-on-wheels":{width:101,height:50},bed2:{width:174,height:257},caballito:{width:82,height:35},cartoon_biplane:{width:17,height:15},wardrobeWithSlidingDoors:{width:240,height:80},cupboard:{width:121,height:47},babyRockingBed:{width:72,height:99},cardGame:{width:26,height:14},briefcase:{width:48,height:13},handbag:{width:32,height:15},woodToy:{width:10,height:8},"carrito-de-madera":{width:16,height:33},clock:{width:9,height:6},suit:{width:53,height:15},chessboard:{width:36,height:36},lettoCloud:{width:227,height:260},toyTrain:{width:37,height:15},xylophone:{width:58,height:35},petitReveil:{width:11,height:6},p40:{width:22,height:19},daybed:{width:318,height:252},captainsBed:{width:159,height:250},trundleBed:{width:259,height:114},litParents:{width:227,height:271},clicClacOuvert:{width:219,height:159},lit:{width:201,height:265},meubleChevet:{width:48,height:35},suits_racked:{width:96,height:72},childBed:{width:126,height:252},"hanging-clothes2":{width:75,height:66},comodinoSinistroCiliegio:{width:180,height:54},lettoCiliegio:{width:221,height:237},mensolaCiliegio:{width:123,height:24},comodinoAzzurro:{width:60,height:51},lettoAzzurro:{width:96,height:216},lettoSoppalcoAzzurro:{width:100,height:216},mensolaAcero:{width:72,height:24},scaletta:{width:53,height:56},iron_bed:{width:159,height:258},wardrobe1:{width:261,height:64},children_bed:{width:111,height:247},kids_shelves:{width:122,height:51},robe:{width:92,height:100},casquette:{width:29,height:40},chapeau:{width:44,height:51},"short-shadows":{width:46,height:63},"pantalon-shadows":{width:49,height:119},blouson:{width:62,height:88},jupe:{width:49,height:49},"jupe-doeskin":{width:49,height:39},chaussette:{width:27,height:37},"montre-with-pose":{width:6,height:11},montre:{width:6,height:30},bague:{width:3,height:3},"gant-textured":{width:18,height:32},"dressing-table":{width:103,height:56},day_bed_frame:{width:250,height:117},tasDeVetements:{width:147,height:125},oreiller:{width:49,height:49},flipFlops:{width:24,height:24},cissors_swap:{width:17,height:9},ruler:{width:38,height:5},technicalTable1:{width:258,height:143},technicalTable2:{width:164,height:206},textMarker:{width:4,height:13},kalender:{width:15,height:10},biurko3:{width:145,height:73},"sef-kasa":{width:60,height:66},simpleDesk:{width:169,height:98},officeTable:{width:228,height:101},classSeat:{width:75,height:82},armChair2:{width:118,height:99},bureauInformatique:{width:141,height:72},clavier:{width:51,height:17},portable:{width:36,height:31},bigCornerDesk:{width:240,height:201},plantersDesk:{width:92,height:80},stylo:{width:1,height:18},secretarysDesk:{width:129,height:96},desk2:{width:216,height:196},officeChair:{width:76,height:72},officeChair2:{width:76,height:83},officeChair3:{width:68,height:68},escritorio:{width:168,height:71},bureauEcolier:{width:107,height:68},invoice:{width:26,height:36},bureauInfoClair:{width:94,height:66},chair_office_x:{width:63,height:62},scissors:{width:6,height:15},"apple-ibook-2001":{width:35,height:33},"office-chair":{width:78,height:78},"custom-desk":{width:283,height:101},"filing-cabinet":{width:47,height:64},"apple-imac-1998":{width:51,height:60},stapler:{width:4,height:14},raccordo80W:{width:96,height:96},scrivania160W:{width:192,height:96},mobile90160W:{width:108,height:59},mobile90198W:{width:108,height:59},mobile9080W:{width:108,height:59},apple_pc:{width:53,height:44},kids_desk_chair:{width:65,height:63},kids_desk_table:{width:135,height:73},kids_wooden_desk:{width:121,height:75},wooden_office_alder_table:{width:194,height:114},wooden_office_pear_table_rect:{width:192,height:96},wooden_office_teak_table:{width:192,height:144},bandeja:{width:33,height:46},pencil2:{width:1,height:17},comb:{width:15,height:5},cosmeticsPot:{width:10,height:10},showerDoor:{width:109,height:27},toiletPaperDispenser:{width:19,height:13},toiletsUnit:{width:43,height:84},flacon:{width:5,height:3},showerStall:{width:112,height:135},urinal:{width:44,height:36},bath_jay_hardy:{width:217,height:85},bathroomRadiator:{width:59,height:23},lipStick:{width:3,height:3},toilets_unit_jay_hardy:{width:50,height:66},radiatorAndTowels:{width:72,height:12},modernToilet:{width:54,height:102},meubleSalleDeBain:{width:72,height:72},bidon:{width:8,height:8},robinet:{width:7,height:18},parfumAmbiance:{width:11,height:6},rasoir:{width:15,height:6},shampoo:{width:9,height:5},gelDouche:{width:10,height:6},boiteDeMouchoirs:{width:27,height:14},derouleurWC:{width:20,height:17},tube:{width:3,height:3},pareDouche:{width:108,height:10},bathroomFurniture:{width:143,height:62},towelMedicineCabinet:{width:75,height:74},bath_L:{width:204,height:102},bathroom_cupboard_mirror:{width:72,height:18},towel_rack:{width:54,height:25},tendaDoccia:{width:89,height:113},barreAppuiL:{width:72,height:14},"towel-rack":{width:60,height:12},showerHeadAndFaucet:{width:30,height:28},mobilettoSpecchioBlu:{width:84,height:15},mobilettoSpecchioWenge:{width:96,height:27},mobilettowenge:{width:96,height:51},water:{width:44,height:67},bathroom4:{width:74,height:74},bathroom1:{width:88,height:94},double_vanity:{width:223,height:82},com_bath:{width:7,height:7},com_bath2_cepillo:{width:24,height:7},com_bath2_esponja:{width:12,height:12},com_bath2_peineta:{width:8,height:8},com_bath2_soap:{width:14,height:7},com_bath3_toalla:{width:22,height:14},medicoscopia_bottle:{width:6,height:6},medicoscopia_bottle2:{width:7,height:7},medicoscopia_box:{width:14,height:6},small_lavatory:{width:60,height:51},"folding-wall-seat":{width:48,height:54},"mixer-tap-for-bath-and-shower":{width:35,height:42},"mixer-tap-for-bath":{width:35,height:20},"shower-armchair":{width:53,height:52},"shower-chair":{width:56,height:54},"turkish-toilet":{width:54,height:85},grandStaircaseDark:{width:610,height:346},escalierColimacon2:{width:242,height:260},outdoor_staircase:{width:154,height:339},stairs_topcurve_90:{width:240,height:482},staircase_90_high_open:{width:215,height:305},staircase_straight:{width:108,height:410},stairs_legal:{width:108,height:370},stairs_spiral:{width:240,height:240},quarterSlope:{width:960,height:960},"home-lift":{width:122,height:89},"stair-lift-rail":{width:648,height:14},"stair-lift":{width:72,height:66},flowerBox:{width:66,height:21},mofx_mailbox:{width:20,height:56},relaxChair:{width:80,height:228},bench:{width:205,height:56},childHut:{width:394,height:625},childSwing:{width:257,height:150},seesaw:{width:288,height:51},wheelbarrow:{width:200,height:72},lantern:{width:46,height:40},chair_deck:{width:81,height:251},poolLounge:{width:106,height:240},rowboat:{width:151,height:371},transat:{width:72,height:126},table_footrest:{width:180,height:41},fencepost1:{width:15,height:15},fencepost2:{width:15,height:15},"borderfence-main":{width:116,height:15},"borderfence-small":{width:69,height:15},dogHouse:{width:125,height:161},blackDeckTable:{width:186,height:188},gardenUmbrella:{width:309,height:267},blackDeckChair:{width:62,height:80},privacyFence:{width:88,height:10},canapeJardin:{width:266,height:90},swimmingPool:{width:999,height:407},balancelle:{width:180,height:177},cloture:{width:141,height:12},fence_grid_gate:{width:102,height:6},bordure:{width:54,height:4},gate_iron:{width:118,height:2},portail:{width:229,height:16},etendoirLinge:{width:501,height:109},flag_hinged_pole:{width:276,height:168},parasol_str:{width:240,height:240},traffic_light_ped:{width:64,height:64},"concrete-bench":{width:171,height:72},"park-trashcan":{width:95,height:95},"porch-column-01":{width:40,height:40},"porch-column-02":{width:52,height:52},"residential-trashcan":{width:71,height:71},"spray-bottle":{width:12,height:15},"concrete-sidewalk":{width:659,height:116},"fire-hydrant":{width:50,height:40},"hose-reel":{width:42,height:33},ext_chair:{width:120,height:92},littlebank:{width:312,height:81},wood_bank:{width:240,height:121},beach_chair:{width:84,height:233},letters_box:{width:38,height:15},"rectangle-swimming-pool":{width:600,height:331},"garden-faucet":{width:6,height:24},"passage-a-niveau":{width:716,height:112},rails:{width:1200,height:196},"fleche-tout-droit":{width:84,height:480},"fleche-tourner-a-droite-et-direct":{width:153,height:480},"fleche-tourner-a-droite":{width:120,height:480},"stationnement-creneau":{width:612,height:246},"stationnement-en-bataille":{width:285,height:606},"stationnement-epi-45":{width:963,height:583},"stationnement-epi-60":{width:689,height:624},"stationnement-epi-75":{width:463,height:618},"high-hedge":{width:181,height:125},hedge:{width:182,height:126},acacia:{width:925,height:775},bamboo:{width:360,height:334},ficusTree:{width:330,height:341},bluePineSnow:{width:423,height:444},coconutTree:{width:933,height:960},coconutTreeBended:{width:876,height:901},copperBeech:{width:902,height:876},cypress:{width:159,height:161},japaneseMaple:{width:949,height:837},poplar:{width:486,height:451},peachBlossom:{width:605,height:896},pineSnow:{width:450,height:455},sabalPalmeto:{width:417,height:373},sycamoreMaple:{width:1091,height:1272},tasDeTerre:{width:111,height:112},tasDeSable:{width:115,height:117},tasDeGravillons:{width:118,height:108},tasDeGravats:{width:116,height:110},voiesFerreesCourbe10m:{width:1255,height:676},voiesFerreesCourbe40m:{width:4720,height:1132},voiesFerreesDroit1m:{width:120,height:528},routeCourbe2VoiesAvecTrottoirs26m:{width:3247,height:1639},routeCourbe1VoieAvecTrottoirs26m:{width:3193,height:1226},"routeCourbe2VoiesAvecTrottoirs6.5m":{width:934,height:1335},"routeCourbe1VoieAvecTrottoirs6.5m":{width:880,height:924},routeCourbe1VoieAvecTrottoirs13m:{width:1652,height:1024},routeCourbe2VoiesAvecTrottoirs13m:{width:1706,height:1436},route1VoieAvecTrottoirs:{width:1560,height:834},croisement1et1:{width:834,height:834},croisement1et2:{width:834,height:1254},pont2Voies:{width:1560,height:1254},pont1Voie:{width:1560,height:834},separateurDeVoie:{width:288,height:72},pilierPont1Voie:{width:84,height:540},autoroute2Voies:{width:6240,height:1274},routeCourbe1VoieAvecTrottoirs90Deg:{width:834,height:834},filElectrique:{width:2745,height:5},"poteau-en-beton":{width:408,height:289},"poteau-en-bois":{width:408,height:128},"feu-de-signalisation-avec-signalisation-au-dessus":{width:385,height:68},hydrangea:{width:96,height:94},blackTupelo:{width:800,height:780},quakingAspen:{width:426,height:443},fanPalm:{width:296,height:309},sassafras:{width:729,height:711},weepingWillow:{width:840,height:820},radiator2:{width:160,height:50},radiator:{width:169,height:30},speaker3:{width:27,height:31},tableFan:{width:33,height:27},ammoBox:{width:120,height:63},barrel:{width:98,height:98},basketball:{width:29,height:29},fireExtinguisher:{width:38,height:22},numberLock:{width:12,height:1},cuckooClock:{width:32,height:22},riggedFan:{width:40,height:25},tennisRacket:{width:32,height:83},radio:{width:37,height:11},thermometer:{width:10,height:8},wallDoubleSocket:{width:19,height:2},wallSocket:{width:10,height:1},"wire-coathanger":{width:50,height:2},sunglasses:{width:19,height:19},tableTennisBat:{width:18,height:31},modernRadiator:{width:61,height:14},mp3Station:{width:48,height:12},workbench:{width:148,height:75},fitnessTower:{width:268,height:209},fut:{width:54,height:54},pompeBiere:{width:71,height:31},curtainRod:{width:180,height:20},priseTelephonique:{width:10,height:2},rampe:{width:240,height:15},tableauMulet:{width:39,height:1},tableauVisage:{width:26,height:1},tableauVisage2:{width:40,height:1},tableauVisage3:{width:32,height:1},tableauYing:{width:45,height:1},prise:{width:10,height:2},railing1:{width:196,height:14},roundedEdgesRailing:{width:96,height:12},roundedEdgesRailing1:{width:101,height:12},scie:{width:15,height:54},rampeArcCercle:{width:212,height:122},interrupteur:{width:10,height:2},tableauElectrique:{width:30,height:13},horlogeUbuntu:{width:46,height:10},venetianBlind:{width:108,height:11},etau:{width:16,height:24},portemanteaux:{width:96,height:96},arch:{width:120,height:20},AntelopeCanyonFrame:{width:61,height:2},EiffelTowerFrame:{width:81,height:2},InariFrame:{width:58,height:2},MontBlancFrame:{width:114,height:2},lightSwitch:{width:9,height:3},smallWroughtIronRails:{width:142,height:13},wroughtIronRails:{width:225,height:13},pavesDeVerre:{width:26,height:6},appleIpod:{width:8,height:13},pile:{width:2,height:6},polygonalRoof:{width:602,height:180},toitureArdoiseRouge:{width:240,height:172},TorontoOntarioPlaceFrame:{width:74,height:2},TigerFrame:{width:76,height:2},NiagaraFallsFrame:{width:98,height:2},VeniceFrame:{width:89,height:2},picture:{width:161,height:12},guacal:{width:71,height:48},LakeMoraineFrame:{width:89,height:2},SquirrelFrame:{width:59,height:2},StatueOfLibertyFrame:{width:61,height:2},VaticanMuseumFrame:{width:74,height:2},EtretatFrame:{width:81,height:2},ColoredFountainFrame:{width:89,height:2},HorseShoeBendFrame:{width:74,height:2},TucanFrame:{width:59,height:2},YosemiteFrame:{width:89,height:2},WaterLilyFrame:{width:81,height:2},ruffledVase:{width:33,height:35},radiator_7section:{width:82,height:23},bd:{width:26,height:36},livreJava:{width:26,height:29},sh3dMag:{width:26,height:36},SweetHome3DKompakt:{width:18,height:25},enceinteColonne:{width:27,height:36},AtorArriere:{width:73,height:68},bathroom_fan:{width:24,height:40},frame_horizontal:{width:186,height:12},frame_vertical:{width:153,height:9},frame3HorizontalMomijiPhotos:{width:31,height:4},frame3VerticalTowerPhotos:{width:63,height:4},ladder_simple:{width:68,height:104},ladder_water:{width:53,height:102},plastic_storage_box:{width:70,height:50},sauna_120x120:{width:144,height:158},vent_round:{width:27,height:36},staircase_handrail_hor:{width:113,height:4},metalBeam:{width:240,height:24},pwdRamp:{width:91,height:143},"iron-railing-02":{width:135,height:17},"recycling-bin":{width:44,height:33},"tape-measure":{width:18,height:3},"trunk-large":{width:120,height:61},newspaper:{width:33,height:29},vase1:{width:28,height:28},vase2:{width:33,height:33},vase5:{width:40,height:38},frame2:{width:18,height:18},basic_camera:{width:12,height:3},electric_water_heater_big:{width:55,height:56},mp3_base_for_ipad:{width:32,height:20},stereo_amplifier:{width:55,height:47},"open-cardboard-box":{width:98,height:75},"step-ladder-wood":{width:55,height:90},"wall-hanger":{width:54,height:8},"iron-railing-separated-hooks-1":{width:198,height:14},"iron-railing-separated-hooks-3":{width:136,height:17},"scie-egoine":{width:74,height:21},"rouleau-de-ruban-adhesif":{width:19,height:5},pelle:{width:27,height:119},cone:{width:46,height:46},"perceuse-electrique":{width:9,height:33},"meuleuse-electrique":{width:38,height:62},"billet-10-euros":{width:16,height:9},"billet-20-euros":{width:16,height:9},"billet-50-euros":{width:17,height:10},"rounded-antenna":{width:11,height:1},"rounded-dimmer":{width:11,height:3},"rounded-double-switch":{width:11,height:2},"rounded-plug-TypeA":{width:11,height:1},"rounded-plug-TypeB":{width:11,height:1},"rounded-plug-TypeCFlat":{width:11,height:1},"rounded-plug-TypeE":{width:11,height:1},"rounded-plug-TypeG":{width:11,height:1},"rounded-RJ-45":{width:11,height:1},"rounded-switch":{width:11,height:2},"square-antenna":{width:11,height:1},"square-dimmer":{width:11,height:2},"square-plug-TypeA":{width:11,height:1},"square-plug-TypeCFlat":{width:11,height:1},"square-plug-TypeG":{width:11,height:1},"square-RJ-45":{width:11,height:1},"antenna-whites":{width:11,height:1},"dimmer-whites":{width:11,height:3},"plug-TypeA-whites":{width:11,height:1},"plug-TypeCFlat-whites":{width:11,height:1},"plug-TypeG-whites":{width:11,height:1},"RJ-45-whites":{width:11,height:1},chimney:{width:81,height:81},"round-chimney":{width:44,height:44},"pince-coupante":{width:72,height:21},parpaing:{width:60,height:24},cageALapin:{width:123,height:70},roueAvecJante:{width:22,height:71},newspapersPile:{width:37,height:29},openedNewspaper:{width:70,height:49},safeOnFeet:{width:56,height:56},"fil-electrique-1m":{width:121,height:1},pileRevues:{width:26,height:35},walker:{width:80,height:53},forkLift:{width:422,height:157},peterbilt:{width:345,height:2526},bike:{width:49,height:140},fordFocus:{width:246,height:523},peugeot103:{width:69,height:204},"concept-sedan-01v2":{width:222,height:548},"concept-sedan-02":{width:253,height:528},"concept-sedan-02-sport":{width:253,height:510},"VW-new-beetle":{width:233,height:491},"concept-sedan-01v1":{width:230,height:566},"peugeot-308":{width:252,height:533},"yamaha-yzr-r6":{width:96,height:244},tricycle:{width:45,height:72},suv:{width:251,height:556},chevrolet:{width:253,height:535},skateboard:{width:24,height:97},suv2:{width:252,height:513},carSegmentA:{width:205,height:329},carSegmentB:{width:222,height:473},chicken:{width:30,height:40},bulldog:{width:47,height:78},horse:{width:71,height:275},"female-01-casual-clothing":{width:57,height:45},"male-01-suit":{width:68,height:50},sitFemale01:{width:68,height:99},fille:{width:59,height:28},boy:{width:65,height:33},frenchWindow2:{width:120,height:30},"turn-window":{width:71,height:17},smallWindow2:{width:120,height:30},window_2x3_frame_sill:{width:68,height:42},window_deep:{width:126,height:72},fixed_window_2x2:{width:72,height:20},doubleWindow2:{width:180,height:30},window_double_2x3_frame_sill:{width:148,height:30},doubleFrenchWindow2:{width:180,height:30},window_2x4:{width:131,height:38},window_2x6:{width:131,height:38},window_4x5:{width:193,height:39},window_3x1:{width:226,height:39},window_4x1:{width:301,height:39},window_2x1_medium_with_large_pane:{width:132,height:38},window_2x1_with_sliders:{width:226,height:30},"window-08":{width:76,height:20},window_shop:{width:216,height:18},window_stain_glass:{width:96,height:20},glassblock:{width:26,height:11},door:{width:110,height:18},glass_door_framless:{width:110,height:24},"screen-door":{width:106,height:12},puerta:{width:105,height:17},craftsmanDoorClosed:{width:122,height:23},sliderPocketDoor:{width:114,height:15},double_door_2:{width:212,height:21},double_door:{width:212,height:21},double_plain_door_with_little_part:{width:160,height:21},"exterior-door-05":{width:119,height:23},"exterior-door-07":{width:123,height:22},frontDoor2:{width:135,height:24},glass_door:{width:126,height:21},double_door_with_little_part:{width:160,height:21},glassDoor2:{width:102,height:17},japanesedoor:{width:358,height:12},"garage-door":{width:470,height:32},"garage-door2":{width:530,height:39},emergencyGlassDoubleDoor:{width:263,height:35},revdoor:{width:461,height:360},elevator:{width:223,height:228},"elevator-door":{width:223,height:26},hangingLight:{width:53,height:53},lamp2:{width:65,height:62},lustreBoule:{width:36,height:36},"ceiling-lamp":{width:36,height:36},minispot:{width:30,height:30},painting_light:{width:48,height:18},"track-lights":{width:120,height:21},"wall-spotlight":{width:8,height:29},wall_lamp:{width:27,height:14},fluorescent:{width:126,height:30},"fluorescent-strip":{width:66,height:11},lightSource2:{width:48,height:48},"porch-light":{width:22,height:21},street_light_modern:{width:41,height:294},farola1:{width:53,height:53},tableBasse2:{width:135,height:72},table2:{width:174,height:113},"oriental-rug":{width:223,height:310},angolo160W:{width:54,height:54},angolo198W:{width:54,height:54},angolo80W:{width:54,height:54},sphere:{width:60,height:60}},go=[...Ei,...Ni,...Wi,...Hi,...Ai,...Gi,...Vi,...zi,...Ui],fo={...no,...so,...io,...co,...to,...po,...oo,...ho,...mo},bo=["none","3_blue_and_white_lines_wallpaper","3_brown_lines_wallpaper","3_green_and_white_lines_wallpaper","3_red_and_white_lines_wallpaper","african-wallpaper-2","african-wallpaper","alu_siding_greyscale2","animal-skin","asphalte-clair-4x4m","asphalte-fonce-4x4m","balanced-blue-sponge-wallpaint","balanced-green-sponge-wallpaint","basic-white-tile","bathroom-tile-beige","bathroom_tiles-multicolour","bathroom_tiles","bathroom_tiles_2","beech","beige-bricks-wall-bricks","beige-carpet-square","beige-granite-cook-tops","beige-leather","beigeTile","beige_brown_tiles","beige_fabric","beige_fabric2","beige_grey_squares_wallpaper","beige_pattern","beige_tiles","beige_waves_wallpaper","big-stones-floor-tiles","big-sun-sky","birch","black-and-white-stones","blackAndWhiteTiles","bleachedWood","blue-and-geometric-kitchen-tiles","blue-and-green-plaid-furniture-fabric","blue-fabric","blue-fibres_fabric-for-furniture","blue-painted-wood","blue-rectangles-bathroom-tiles","blue-sponge-wallpaint","blue-wall-pattern","blueSky","blueSlates","blueSlates2","blueTiles","blue_and_white_wallpaper","blue_cells_wallpaper","blue_diamants_wallpaper","blue_lines_wallpaper","blue_with_stars_wallpaper","boxTree","brass","brick-wall-with-old-stones","brown-cercles","brown-circles-floor-carpeting","brown-esparto-fibers","brown-sponge-wallpaint","brown-terrazzo-floor-tiles","brown_lines_with_white_bands_wallpaper","brown_waves_combinated_2_wallpaper","brown_waves_combinated_wallpaper","browns-and-blue-geometrics-kitchen-tiles","browns-bathroom-tiles","browns_wallpaper","butterflies_wallpaper","carpet-with-coloured-tiles","carpet-with-geometric-shapes","cercles_and_stars_wallpaper","cheetah-skin","cherry","chess-parquet","claret-cotton-velvet","classic-red-squares-fabric-for-furniture","classic-red-wallpaper","classic-roof","clay-floor","cloudy","cobblest","coloured-glass-stones","coloured-stones-stonewalls","compact-and-grey-marble-for-cook-tops","concentrated-stones-roughcast","concrete-wall-1","concrete-wall-2","concrete-wall-3","corrugated-roof","dark-blue-seamless-floor-carpeting","dark-blue-sponge-wallpaint","dark-brown-sponge-wallpaint","dark-brown_leather","dark-ceramic-tiles","dark-granite-cook-tops","dark-green-sponge-wallpaint","dark-leather","dark-wall-paper","darkBlueTile","darkBlueTiles","darkBrown","darkWood","detailed-mosaic-arab-wall","drawing_lines_wallpaper","dry_mud","dryflowers_wallpaper","encircled_grey_wallpaper","encircled_wallpaper","english-parquet-1","english-parquet-2","english-parquet-3","english-parquet-dark","esparto-floor-carpeting","false-ceiling-2","false-ceiling-3","false-ceiling","fantasy-wall-mosaic","field-of-daisies","field-of-poppies","field-with-floral-stripes","field-with-white-and-yellow-flowers","fireplace-stones","fish_in_the_sea_wallpaper","floor-carpet-grey-and-white","floor-carpeting-grey","floor-slates","floor-stones-1","floor-stones-2","floor-tiles-hexagonal","flowers_and_yellow_fabric-for-furniture","fruits-kitchen-tiles","geometric-brown-carpet","geometric-kitchen-tiles","geometric_dark_flowers_wallpaper","geometric_green_wallpaper","geometry_colors_wallpaper","giraffe-skin","glass-tiles-wall","gold_circles_wallpaper","granite","grass","grass2","grass3","grass_darker","gray-and-cyan-floor-carpeting","gray-and-green-floor-carpeting","gray-carpet","gray-medium-thick-floor-carpeting","gray-medium-thick-with-squares-floor-carpeting","gray-metal-floor","green-and-black-bathroom-tiles","green-and-bone-kitchen-tiles","green-and-yello-geometry-kitchen-tiles","green-apples-and-white-kitchen-tiles","green-apples-kitchen-tiles","green-fabric-for-furniture","green_leather","green_waves_wallpaper","green_with_leaves_wallpaper","grey-ceramic-tiles","grey-dark-parquet","grey-rough-stonewall","greyTile","grey_marble_for_cook-tops","ground-gravel","ground-pebbles-2","ground-pebbles","hairy-gray-floor-carpeting","hexagon-red-slate","hungarian_parquet","hut-wall-texture","irregular-cercles","irregular-orange-kitchen-tiles","japanese-wallpaper-pink-and-lila-flowers","japanese-wallpaper-with-cranes-and-trees","japanese-wallpaper-with-cranes","laft_05","laft_05_light","leopard-skin","letter_O_wallpaper","light-beige-parquet","light-brown-sponge-wallpaint","light-brown-tiles","light-moss-yellow","lightBlueTile","light_wood","lilac_70s_wallpaper","little-browns-kitchen-wall-tiles","little-stones-bathroom","logWall","logs-wall-2","logs-wall-3","logs-wall","marble-floor-tiles","marble-tiles","marbleWall","mexican-carpet","moon-and-stars","mosaic-patchwork","multi-grey-stones-floor-tiles","multifruit-multicolor-kitchen-tiles","multifruit-orange-kitchen-tiles","natural_colors_wallpaper","navy-blue-stripes","night-sky","oak-brown-parquet","oak","oak2","oak3","old-and-light-gray-parquet","old-and-red-bricks-wall","old-bricks-floor","old-brown-parquet","old-carpet","old-floor-tile","old-grey-parquet","old-mosaic-arab-wall","old-mosaic-wall-arab-2","old-roof-tiles","old-stones-wall","old-wooden-wall","oldWood","oldWoodenFloor","old_grey_bricks","orange-and-browns-kitchen-tiles","orange-fabric-for-furniture","orange-leather","orange-line-and-flowers-kitchen-tiles","orange-napkin-texture","orange_pattern","oranges_70s_wallpaper","oriental-carpet","overlapping-white-wood","overlapping-white-wood_brighter","paneling-for-interior","pansy-purple-velvet","pastel-blue-sponge-wallpaint","pastel-brown-sponge-wallpaint","pastel-cyan-sponge-wallpaint","pastel-gray-sponge-wallpaint","pastel-lilac-sponge-wallpaint","pastel-orange-sponge-wallpaint","pastel-yellow-sponge-wallpaint","pavement","pavement_2","paves-autobloquants-60x60cm","pavingStone","paving_stone_2","peacock-velvet","peacock_blue_velvet","pebbles","persianCarpet","pine","pink-carpet","pink_clouds_wallpaper","pink_squares_fabric-for-furniture","pink_squares_wallpaper","poplar","portuguese-wall-2","portuguese-wall","rattan-for-outdoor-furniture","rattan-furniture","rattan-red","rattan-texture-2","rattan-texture-3","rattan-texture-4","rawPine","rectangularStones","red-american-carpet","red-and-black-plaid-furniture-fabric","red-and-yellow-floor-carpeting","red-bricks-wall","red-brown-parquet","red-building-bricks","red-carpet-large-hair","red-sponge-wallpaint","red-stones-brown-background-stonewalls","red-stripes","red-tomatoes-and-white-kitchen-tiles","red-tomatoes-kitchen-tiles","redOak","redTiles","red_bricks","red_slates","red_tiles","red_with_stars_wallpaper","rough-brown-kitchen-tiles","roughcast","roundBlueSlates","rustic-brown-beige-bathroom-tiles","rusty-metal-texture","salmon-sponge-wallpaint","sandy-soil-2","sandy-soil","sauna_panel","sea-rush-woven","sea-texture","sky-dawn","smallBricks","smallRedBricks","smallWhiteBricks","soil","square-roof-slates","square_shapes","stain_glass","stain_glass_2","stained-brown-ceramic-floor-tiles","stone-bricks-stonewall","stone2Wall","stone3Wall","stoneTiles","stoneWall","stones_wall_coloured","stoneway-floor-tiles","straw-roof","striped-fabric-texture","sunset-sky","swimming-pool-ceramic","swimming-pool-top-cyan","swimming-pool-top","swimmingPool","teira-blue-velvet","terrazo-floor","terrazzo-floor-tiles","texture_knit","thatched-roof","thin-grey-ceramics-floor-tiles","tiger-skin","tile-ext-border","tiled-stones-for-bathroom","travertine-tiles","trendy-wall-paper","trunk","vertical-wood","vertical_blue_lines","vertical_lines","veryCloudy","wall-coloured-glass","wall-effect-beige-tadelakt","wall-effect-gray-tadelakt","wall-effect-green-tadelakt","wall-fabric-blue-duck","wall-fabric-blue-ink","wall-fabric-gold","wall-frosted-glass","wall-glass-geometric-tiles","wall-metal-texture","wall-portuguese-mosaic-3-green","wall-portuguese-mosaic-3","wall-striped-canvas","wall-tile-bathroom","wall-tiles-brown","wallBeigeTile","wall_texture_white","wall_with_little_stones","wallpaper-chiyogami","wallpaper-japanese-blue-flowers","wallpaper-japanese-painted","wallpaper-japanese-pansy-painted","wallpaper-japanese-pink-flowers","wallpaper-japanese-pink-geometry","wallpaper-japanese-pink-pansy-painted","wallpaper-japanese-white-and-pink-flowers","wallpaper-japanese-white-and-yellow-flowers","wallpaper-nepalese-beige-dots-over-red","wallpaper-nepalese-red-dots","wallpaper-with-flamingos","wet-mud","white-little-roughcast","white-marble","white-with-border-kitchen-tiles","white_with_stars_wallpaper","wood-paneling","wood-pine","wood","wooden-bathroom-floor","woodenFloor","words_of_world_wallpaper","yellow-and-black-plaid-furniture-fabric","yellow-lemon-and-white-kitchen-tiles","yellow-lemon-kitchen-tiles","yellow-medium-floor-carpeting","yellow-pears-and-white-kitchen-tiles","yellow-pears-kitchen-tiles","yellow_classic_wallpaper","zebra-skin","wall_texture_red","wall_texture_green","wall_texture_blue","roughcast2","wallp_fleur_de_lis_blue_multi","wallp_fleur_de_lis_green_multi","wallp_fleur_de_lis_red_multi","tommerstokker_1","tile_wall_pattern","beige_tiles_frieze","tile_deco_wall","tile_wall3","shower_tiles","wallp_tomatoes","tile_burg_shad","curtains","vertical_brown_lines","dark-carpet","yellow-carpet","yellow_and_grey_squares-fabric-for-furniture","beige-wall-with-white-stones-roughcast","old-castle-stonewall","green-sponge-wallpaint","pink_with_stars_wallpaper","feline-skin","beige-carpet-rounded","rattan-rouge","wallpaper-nepalese-beige-dots-over-blue","red-metal-floor","wall-glass-with-bubbles","chinese-paper-wall","corrugated-roof-2","painted-wallpaper-fuchsia","zebra-asphalte-clair-4x4m","zebra-asphalte-fonce-4x4m"],wo={window_2x1_with_sliders:["sweethome3d_opening_on_hinge_1_Window_Pane_wall_1_1_1_28_174","sweethome3d_opening_on_rail_1_handle","sweethome3d_opening_on_rail_1_frame","sweethome3d_opening_on_rail_1_frame","sweethome3d_opening_on_rail_2_handle","sweethome3d_opening_on_rail_2_handle"],doubleFrenchWindow2:["sweethome3d_opening_on_hinge_1_Window_Handle_Button_Cylinder_32",""],frenchWindow2:["sweethome3d_opening_on_hinge_1_Inside_Inner_Frame_top_74_104","sweethome3d_opening_on_rail_1_Roller_Shutter_Foot_back_119_194"],smallWindow2:["sweethome3d_opening_on_hinge_1_Outside_Inner_Frame_top_59_143","sweethome3d_opening_on_rail_1_Roller_Shutter_Foot_back_119_200","sweethome3d_opening_on_hinge_1_Window_Handle_back_86_116","sweethome3d_opening_on_hinge_1_Window_Handle_Button_Cylinder_96","sweethome3d_opening_on_hinge_1_Inside_Inner_Frame_top_77_125"],"turn-window":["sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_frameOut","sweethome3d_opening_on_hinge_1_frameIn"],"window-08":["sweethome3d_opening_on_rail_1_window_gloss_white"],window_2x1_medium_with_large_pane:["sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_handle"],window_2x3_frame_sill:[],window_2x4:["sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_frame"],window_2x6:["sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_1_handle"],window_3x1:["sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_handle"],window_4x1:["sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_2_frame","sweethome3d_opening_on_hinge_1_glass"],window_4x5:["sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_2_panes","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_frame"],window_deep:["16_16.001","15_15","19_19","7_7","21_21","15_15.001","20_20","16_16","17_17","18_18"],window_double_2x3_frame_sill:["21_21_21_21.000","27_27.004","8_8.006"],window_shop:[],window_stain_glass:[],glassblock:[],craftsmanDoorClosed:[],door:["sweethome3d_opening_on_hinge_1_door","sweethome3d_opening_on_hinge_1_handle"],"exterior-door-05":["sweethome3d_opening_on_hinge_1_Exterior_door_5_PAINT_gloss_black","sweethome3d_opening_on_hinge_1_Exterior_door_5_METAL_brass_polish","sweethome3d_opening_on_hinge_1_Exterior_door_5_METAL_aluminum","sweethome3d_window_pane_on_hinge_1_Exterior_door_5_GLASS"],"exterior-door-07":["sweethome3d_window_pane_on_hinge_1_front_door_GLASS","sweethome3d_opening_on_hinge_1_front_door_gloss_white","sweethome3d_opening_on_hinge_1_front_door_METAL_aluminum"],frontDoor2:["sweethome3d_opening_on_hinge_1_Leaf_Side_B_front_6","sweethome3d_opening_on_hinge_1_Handles_Tuergriff_wall_1_18_wall"],glassDoor2:["sweethome3d_opening_on_hinge_1_door","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_tieForWindow","sweethome3d_opening_on_hinge_1_handle","frame_Cube.001"],glass_door:["sweethome3d_hinge_1","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_door"],glass_door_framless:["sweethome3d_opening_on_hinge_1_door_1","sweethome3d_opening_on_hinge_1_clamps_1","sweethome3d_opening_on_hinge_1_handle_1"],puerta:["sweethome3d_opening_on_hinge_1_maneta_puerta","sweethome3d_opening_on_hinge_1_door"],"screen-door":["screen_door_01_screen_door_01_PAINT_gloss_white","sweethome3d_window_pane_screen_door_01_SYNTH_screen","screen_door_01_screen_door_01_PAINT_gloss_black"]},Co={frontDoor2:1,"exterior-door-05":-1,craftsmanDoorClosed:1,door:-1,"exterior-door-07":-1,glassDoor2:-1,glass_door_framless:-1,glass_door:-1,puerta:-1,"screen-door":1},xo=[{label:"Edit",infoText:"Allows you to select objects and customize Home Assistant entity bindings and parameters.",title:"Enter edit mode",value:"edit"},{label:"Control",infoText:"Enables you to select specific Home Assistant bound objects to change their state. For other objects, it's view-only.",title:"Enter edit mode",value:"control"}],yo=[{field:"open_state",label:"Open:",keepTextWidth:!0,longText:"Closed:",validate:e=>z.isEmpty(e)},{field:"closed_state",label:"Closed:",validate:e=>z.isEmpty(e)}],So=[{field:"switched_on_state",label:"Switched on:",keepTextWidth:!0,longText:"Switched off:",validate:e=>z.isEmpty(e)},{field:"switched_off_state",label:"Switched off:",validate:e=>z.isEmpty(e)},{field:"power_sync",label:"Sync power",type:"checkbox",defaultValue:!1},{field:"power",label:"Luminous Power(lm)",min:0,max:500,step:1,placeholder:"Luminous power of lightin lumens",validate:e=>z.isEmpty(e)||z.isNumber(e)},{field:"color_sync",label:"Sync color",type:"checkbox",defaultValue:!1},{field:"color",label:"Color",type:"color",validate:e=>z.isEmpty(e)||z.isHexColor(e)},{field:"variant",label:"Light variant",validate:e=>z.isEmpty(e),options:[{name:"Omnidirectional",value:"point"},{name:"Spot",value:"spot"}],selectInput:!0},{field:"spot_angle",label:"Spot light angle",placeholder:"Spot light angle",min:1,max:90,step:1,validate:e=>z.isEmpty(e)||z.isNumber(e)},{field:"spot_distance",label:"Spot light distance",placeholder:"Spot light distance",min:1,step:1,validate:e=>z.isEmpty(e)||z.isNumber(e),max:20}],vo=[{field:"percentage_sync",label:"Percentage sync",type:"checkbox",defaultValue:!1},{field:"percentage",label:"Fan percentage",min:1,max:100,step:1,validate:e=>z.isEmpty(e)||z.isNumber(e)},{field:"direction_sync",label:"Direction sync",type:"checkbox",defaultValue:!1},{field:"direction",label:"Fan direction",validate:e=>z.isEmpty(e),selectInput:!0,options:[{name:"Forward",value:"forward"},{name:"Reverse",value:"reverse"}]},{field:"switched_on_state",label:"Switched on:",keepTextWidth:!0,longText:"Switched off:",validate:e=>z.isEmpty(e)},{field:"switched_off_state",label:"Switched off:",validate:e=>z.isEmpty(e)}],Do=[{field:"closing_direction",label:"Direction",validate:e=>z.isEmpty(e),selectInput:!0,options:[{name:"Top",value:"top"},{name:"Left",value:"left"},{name:"Right",value:"right"}]},{field:"open_offset",label:"Open",validate:e=>z.isEmpty(e)||z.isNumber(e),keepTextWidth:!0,longText:"Bottom (cm):"},{field:"closed_offset",label:"Closed",keepTextWidth:!0,longText:"Bottom (cm):",validate:e=>z.isEmpty(e)||z.isNumber(e)}],To=[{field:"detected_state",label:"Detected:",keepTextWidth:!0,longText:"Not detected:",validate:e=>z.isEmpty(e)},{field:"undetected_state",label:"Not detected:",validate:e=>z.isEmpty(e)},{field:"detected_opacity",label:"Detected opacity",min:0,max:100,step:1,validate:e=>z.isEmpty(e)||z.isNumber(e)},{field:"undetected_opacity",label:"Undetected opacity",min:0,max:100,step:1,validate:e=>z.isEmpty(e)||z.isNumber(e)}],jo=e=>[{field:"".concat(e,"_coloring_type"),label:"Coloring",type:"radio",formChoices:!0,choices:[{name:"Fixed",value:"fixed",form:[{label:"Color:",field:"".concat(e,"_fixed_color"),type:"color",validate:e=>z.isEmpty(e)||z.isHexColor(e)}]},{name:"Range",value:"range",form:[{label:"Min value:",field:"".concat(e,"_range_min_value"),validate:e=>z.isEmpty(e)||z.isNumber(e)},{label:"Min color:",field:"".concat(e,"_range_min_color"),validate:e=>z.isEmpty(e)||z.isHexColor(e)},{label:"Max value:",field:"".concat(e,"_range_max_value"),validate:e=>z.isEmpty(e)||z.isNumber(e)},{label:"Max color:",field:"".concat(e,"_range_max_color"),validate:e=>z.isEmpty(e)||z.isHexColor(e)},{label:"Intermediate color",field:"".concat(e,"_range_intermediate_colors"),value:[]}]}]},{field:"".concat(e,"_opacity"),label:"Opacity:",validate:e=>z.isNumber(e),placeholder:"Color opacity",min:0,max:1,step:.01,isNumberInput:!0,keepTextWidth:!0,longText:"Font size:"}],_o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{counter:e,form:[{label:"Value:",field:"range_intermediate_color_value_".concat(e),keepTextWidth:!0,longText:"Max value:",validate:e=>z.isEmpty(e)||z.isNumber(e),value:t},{label:"Color:",field:"range_intermediate_color_color_".concat(e),keepTextWidth:!0,longText:"Max color:",validate:e=>z.isEmpty(e)||z.isHexColor(e),value:i}]}},Io=[{field:"sensor_type",label:"Sensor type",type:"radio",choices:[{name:"Number",value:"number"},{name:"Text",value:"text"}]},{field:"background",label:"Background",type:"checkbox",infoText:(0,l.jsxs)("span",{children:["Select this option to visually represent sensor values by the background color of the room where the sensor is located ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"if one exists"})]}),explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},form:[...jo("background")]},{field:"text",label:"Text",type:"checkbox",infoText:(0,l.jsx)("span",{children:"Select this option to visually represent sensor values by text colors"}),explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},form:[...jo("text"),{field:"text_font_size",label:"Font size:",validate:e=>z.isNumber(e),min:1,max:100,step:1,isNumberInput:!0}]}],ko=[{field:"color",label:"Color:",isColorInput:!0,validate:e=>z.isEmpty(e)||z.isHexColor(e)},{field:"opacity",label:"Opacity:",isNumberInput:!0,validate:e=>z.isNumber(e),placeholder:"Color opacity",min:0,max:1,step:.01,keepTextWidth:!0,longText:"Font size:"},{field:"font_size",label:"Font size:",validate:e=>z.isNumber(e),min:1,max:100,step:1,isNumberInput:!0}];var Po=i(1317);const Fo=class{constructor(e){this.rectangleDimensionsFromPoints=e=>{let t=[];for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++){let s=j(Ce(e[i],e[o]),8);t.includes(s)||t.push(s)}return t.sort(((e,t)=>t-e)),{a:t[t.length-2],b:t[t.length-1]}},this.mainComponentThis=e}create(e,t,i){let o=document.createElementNS("http://www.w3.org/2000/svg",t);for(let s in i)o.setAttribute(s,i[s]);return"none"!==e&&e.current.appendChild(o),o}angleDeg(e,t,i,o){let s=o-t,n=i-e,a=Math.atan2(s,n);return a*=180/Math.PI,a<0&&(a=360+a),a}angleBetweenLines(e,t,i,o){const s=e*i+t*o,n=e*o-t*i;return-Math.atan2(n,s)}angle(e,t,i,o,s,n){let a,r,l=parseInt(e),h=parseInt(t),c=parseInt(i),d=parseInt(o);if(s){let e=parseInt(s),t=parseInt(n),i=Math.sqrt(Math.pow(Math.abs(c-l),2)+Math.pow(Math.abs(d-h),2)),o=Math.sqrt(Math.pow(Math.abs(c-e),2)+Math.pow(Math.abs(d-t),2)),p=Math.sqrt(Math.pow(Math.abs(e-l),2)+Math.pow(Math.abs(t-h),2));a=0===i||0===o?Math.PI/2:Math.acos((Math.pow(i,2)+Math.pow(o,2)-Math.pow(p,2))/(2*i*o)),r=360*a/(2*Math.PI)}else a=l-c===0?Math.PI/2:Math.atan((h-d)/(l-c)),r=180*a/Math.PI;return{rad:a,deg:r}}getAngle(e,t){return{rad:Math.atan2(t.y-e.y,t.x-e.x),deg:180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}}middle(e,t,i,o){let s=parseInt(e),n=parseInt(t);return{x:(s+parseInt(i))/2,y:(n+parseInt(o))/2}}triangleArea(e,t,i){let o=0,s=0,n=0,a=0;return o=Ce(e,t),s=Ce(t,i),n=Ce(i,e),a=(o+s+n)/2,Math.sqrt(a*(a-o)*(a-s)*(a-n))}gap(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)}pDistance(e,t,i){let o,s,n=e.x,a=e.y,r=t.x,l=t.y,h=i.x,c=i.y,d=h-r,p=c-l,m=d*d+p*p,u=-1;0!==m&&(u=((n-r)*d+(a-l)*p)/m),u<0?(o=r,s=l):u>1?(o=h,s=c):(o=r+u*d,s=l+u*p);let g=n-o,f=a-s;return{x:o,y:s,distance:Math.sqrt(g*g+f*f)}}nearPointOnEquation(e,t){let i={},o={};return"h"===e.A?{x:t.x,y:e.B,distance:Math.abs(e.B-t.y)}:"v"===e.A?{x:e.B,y:t.y,distance:Math.abs(e.B-t.x)}:(i.x=t.x,i.y=e.A*t.x+e.B,o.x=(t.y-e.B)/e.A,o.y=t.y,this.pDistance(t,i,o))}circlePath(e,t,i){return"M "+e+" "+t+" m -"+i+", 0 a "+i+","+i+" 0 1,0 "+2*i+",0 a "+i+","+i+" 0 1,0 -"+2*i+",0"}perpendicularEquation(e,t,i){return"string"!=typeof e.A?{A:-1/e.A,B:i- -1/e.A*t}:"h"===e.A?{A:"v",B:t}:"v"===e.A?{A:"h",B:i}:void 0}angleBetweenEquations(e,t){return"h"===e&&(e=0),"h"===t&&(t=0),"v"===e&&(e=1e4),"v"===t&&(t=1e4),360*Math.atan(Math.abs((t-e)/(1+e*t)))/(2*Math.PI)}vectorXY(e,t){return{x:t.x-e.x,y:t.y-e.y}}vectorDeter(e,t){return e.x*t.y-e.y*t.x}btwn(e,t,i){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]&&(e=Math.round(e),t=Math.round(t),i=Math.round(i)),e>=t&&e<=i||e>=i&&e<=t}getNodeFromPath(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],o=e.getPathData(),s=[],n=0;for(let a=0;a<o.length;a++)o[a].values[0]===t.x&&o[a].values[1]===t.y&&"Z"!==o[a].type&&-1===i.indexOf(a)&&(n++,s.push(a));return 0!==n&&s}polygonIntoWalls(e,t){let i=t,o=[],s=[];for(let r=0;r<i.length;r++)s.push({x:e[i[r]].x,y:e[i[r]].y});for(let r=0;r<i.length-1;r++)for(let t=0;t<e[i[r+1]].segment.length;t++)for(let s=0;s<e[i[r]].segment.length;s++)e[i[r+1]].segment[t]===e[i[r]].segment[s]&&o.push({x1:e[i[r]].x,y1:e[i[r]].y,x2:e[i[r+1]].x,y2:e[i[r+1]].y,segment:e[i[r+1]].segment[t]});o=o.filter(((e,t,i)=>i.findIndex((t=>e.segment===t.segment))===t));let n=[],a=[];for(let r=0;r<o.length;r++){let e,t=[],i=o[r];e=r<o.length-1?o[r+1]:o[0];let l=Math.atan2(i.y2-i.y1,i.x2-i.x1),h=Math.atan2(e.y2-e.y1,e.x2-e.x1),c=this.mainComponentThis.WALLS[i.segment].thick/2*Math.sin(l),d=this.mainComponentThis.WALLS[i.segment].thick/2*Math.cos(l),p=this.mainComponentThis.WALLS[e.segment].thick/2*Math.sin(h),m=this.mainComponentThis.WALLS[e.segment].thick/2*Math.cos(h),u=we(i.x1+c,i.y1-d,i.x2+c,i.y2-d),g=we(i.x1-c,i.y1+d,i.x2-c,i.y2+d),f=we(e.x1+p,e.y1-m,e.x2+p,e.y2-m),b=we(e.x1-p,e.y1+m,e.x2-p,e.y2+m);l*=180/Math.PI,h*=180/Math.PI,u.A!==f.A?(t.push(ge(u,f,"object")),t.push(ge(g,b,"object"))):(t.push({x:i.x2+c,y:i.y2-d}),t.push({x:i.x2-c,y:i.y2+d}));for(let o=0;o<t.length;o++)me(t[o],s)?n.push(t[o]):a.push(t[o])}return n.push(n[0]),a.push(a[0]),{inside:n,outside:a}}area(e){if(e.length<2)return!1;let t=0,i=e.length-1;for(let o=0;o<e.length;o++)t+=(e[i].x+e[o].x)*(e[i].y-e[o].y),i=o;return t/=2,Math.abs(t.toFixed(2))}areaRoom(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,o=t,s=0,n=o.length-2;for(let a=0;a<o.length-1;a++)s+=(e[o[n]].x+e[o[a]].x)*(e[o[n]].y-e[o[a]].y),n=a;return s/=2,Math.abs(s.toFixed(i))}junctionList(e){let t=[],i=[];for(let s=0;s<e.length;s++){let o=we(e[s].start.x,e[s].start.y,e[s].end.x,e[s].end.y);for(let n=0;n<e.length;n++)if(n!==s){let a,r=we(e[n].start.x,e[n].start.y,e[n].end.x,e[n].end.y);(a=ge(o,r,"object"))&&(re(e[s].end,e[n].start)||re(e[s].start,e[n].end)?(re(e[s].end,e[n].start)&&t.push({segment:s,child:n,values:[e[n].start.x,e[n].start.y],type:"natural"}),re(e[s].start,e[n].end)&&t.push({segment:s,child:n,values:[e[s].start.x,e[s].start.y],type:"natural"})):this.btwn(a.x,e[s].start.x,e[s].end.x,"round")&&this.btwn(a.y,e[s].start.y,e[s].end.y,"round")&&this.btwn(a.x,e[n].start.x,e[n].end.x,"round")&&this.btwn(a.y,e[n].start.y,e[n].end.y,"round")&&t.push({segment:s,child:n,values:[a.x,a.y],type:"intersection"})),Math.abs(o.A)!==Math.abs(r.A)&&o.A!==r.A||o.B!==r.B||(re(e[s].end,e[n].start)&&t.push({segment:s,child:n,values:[e[n].start.x,e[n].start.y],type:"natural"}),re(e[s].start,e[n].end)&&t.push({segment:s,child:n,values:[e[s].start.x,e[s].start.y],type:"natural"}),re(e[s].start,e[n].start)&&re(e[s].end,e[n].end)||(re(e[s].start,e[n].start)?i.push({segment:s,child:n,values:[e[s].start.x,e[s].start.y],type:"natural"}):re(e[s].end,e[n].end)&&i.push({segment:s,child:n,values:[e[s].end.x,e[s].end.y],type:"natural"})))}}let o=i.filter((e=>!t.find((t=>re({x:e.values[0],y:e.values[1]},{x:t.values[0],y:t.values[1]})))));for(let s=0;s<o.length;s++)t.push(o[s]);return t}vertexList(e){let t,i=[];for(let o=0;o<e.length;o++){t=!0;for(let s=0;s<i.length;s++){if(Math.round(e[o].values[0])===Math.round(i[s].x)&&Math.round(e[o].values[1])===Math.round(i[s].y)){t=!1,i[s].segment.push(e[o].segment);break}t=!0}t&&i.push({x:Math.round(e[o].values[0]),y:Math.round(e[o].values[1]),realX:e[o].values[0],realY:e[o].values[1],segment:[e[o].segment],bypass:0,type:e[o].type})}for(let o=0;o<i.length;o++){i[o].child=[],i[o].removed=[];for(let e=0;e<i[o].segment.length;e++)for(let t=0;t<i.length;t++)if(t!==o)for(let s=0;s<i[t].segment.length;s++)i[t].segment[s]===i[o].segment[e]&&i[o].child.push({id:t,angle:Math.floor(this.getAngle(i[o],i[t]).deg)})}return i}arrayCompare(e,t,i){let o=0,s=0;"pop"===i&&(o=1),"shift"===i&&(s=1);let n=e.length-o-s;for(let a=s;a<e.length-o;a++)for(let i=s;i<t.length-o;i++)e[a]===t[i]&&n--;return 0===n}vectorVertex(e,t,i){let o=this.vectorXY(e,t),s=this.vectorXY(t,i),n=Math.sqrt(o.x*o.x+o.y*o.y),a=Math.sqrt(s.x*s.x+s.y*s.y),r=(o.x*s.x+o.y*s.y)/(n*a),l=o.x*s.y-o.y*s.x;return Math.sign(l)*Math.acos(r)*(180/Math.PI)}segmentTree(e,t){let i=[e],o=[],s=t.length,n=e;return this.tree(i,n,s,t,o),o}tree(e,t,i,o,s){if(0===e.length)return;let n=[];i--;for(let a=0;a<e.length;a++){let r=!0,l=e[a],h=l.toString().split("-"),c=parseInt(h[h.length-1]);for(let e=0;e<o[c].child.length;e++)if(o[c].child[e].id===t&&i<o.length-1&&h.length>2){s.push(l+"-"+t),r=!1;break}if(r){let e=-1,s=1/0,a=0,r=0;if(1===o[c].child.length)c===t&&i===o.length-1&&n.push(l+"-"+o[c].child[0].id),c!==t&&i<o.length-1&&n.push(l+"-"+o[c].child[0].id);else{for(let n=0;n<o[c].child.length&&o[c].child.length>0;n++){if(c===t&&i===o.length-1){let t=this.vectorVertex({x:0,y:-1},o[c],o[o[c].child[n].id]);t>=a&&(r=1,a=t,e=o[c].child[n].id),-1===Math.sign(t)&&0===r&&(t<s&&Math.sign(s)>-1&&(s=t,e=o[c].child[n].id),t>s&&-1===Math.sign(s)&&(s=t,e=o[c].child[n].id))}if(c!==t&&h[h.length-2]!==o[c].child[n].id.toString()&&i<o.length-1){let t=this.vectorVertex(o[h[h.length-2]],o[c],o[o[c].child[n].id]);t<s&&0===r&&(s=t,e=o[c].child[n].id),-1===Math.sign(t)&&(r=1,t<=s&&(s=t,e=o[c].child[n].id))}}-1!==e&&n.push(l+"-"+e)}}}i>0&&this.tree(n,t,i,o,s)}polygonize(e){let t=this.junctionList(e),i=this.vertexList(t,e),o=[];for(let g=0;g<i.length;g++)for(let e=0;e<i[g].child.length;e++)o.push([g,i[g].child[e].id]);let s,n,a=[];for(let g=0;g<o.length;g++){let e=0,t=1/0;for(let o=0;o<i.length;o++)i[o].x<t&&i[o].child.length>1&&0===i[o].bypass&&(t=i[o].x,e=o),i[o].x===t&&i[o].child.length>1&&0===i[o].bypass&&i[o].y>i[e].y&&(t=i[o].x,e=o);if(s=this.segmentTree(e,i),0===s.length&&(i[e].bypass=1),s.length>0){let t=s[0].split("-"),o=this.areaRoom(i,t),l=parseInt(o);n=!0;for(let s=0;s<a.length;s++)if(this.arrayCompare(a[s].way,t,"pop")){n=!1,i[e].bypass=1;break}if(l<360&&(i[e].bypass=1),0===i[e].bypass){let o=this.polygonIntoWalls(i,t),s=this.area(o.inside),n=this.area(o.outside),h=[];for(let e=0;e<t.length;e++)h.push({x:i[t[e]].x,y:i[t[e]].y,realX:i[t[e]].realX,realY:i[t[e]].realY});o.inside.length!==o.outside.length?a.push({way:t,coords:h,coordsOutside:o.outside,coordsInside:o.inside,coordsInsideWithOrphans:o.inside,area:s,outsideArea:n,realArea:l}):a.push({way:t,coords:o.inside,coordsOutside:o.outside,coordsInside:o.inside,coordsInsideWithOrphans:o.inside,area:s,outsideArea:n,realArea:l});for(let a=0;a<i[e].child.length;a++)i[e].child[a].id===t[1]&&i[e].child.splice(a,1);for(let a=0;a<i[t[1]].child.length;a++)i[t[1]].child[a].id===e&&i[t[1]].child.splice(a,1);do{Po.log("Do while loop");var r=0;for(let e=0;e<i.length;e++)if(1===i[e].child.length){r=1,i[e].child=[];for(let t=0;t<i.length;t++)for(let o=0;o<i[t].child.length;o++)i[t].child[o].id===e&&i[t].child.splice(o,1)}}while(1===r)}}}Po.log(a);let l=[];for(let g=0;g<a.length;g++){let e=[],t=[];for(let i=0;i<a.length;i++)if(g!==i){let o=a[i].coordsInsideWithOrphans,s=o.length;n=!0;for(let e=0;e<s&&(n=ue(o[e],a[g].coordsInsideWithOrphans),n);e++);n&&(e.push(i),t.push(a[i]),a[g].area=a[g].area-a[i].outsideArea)}a[g].inside=e,a[g].insidePolygonsObjects=t,e.length>0&&l.push({polygon:a[g],polygonIndex:g})}let h={};Po.log("insidePolygons "+l.length),Po.log(l);for(let g=0;g<l.length;g++)if(void 0===h[l[g].polygonIndex]){let e=!1,t=[];for(let i=0;i<l.length;i++)g!==i&&0===this.diffObjIntoArray(l[g].polygon.coordsInsideWithOrphans,l[i].polygon.coordsInsideWithOrphans)&&(e=!0,h[l[i].polygonIndex]=i,t.push(l[i].polygonIndex));if(e){let e;for(let i=0;i<t.length;i++)(e=l[g].polygon.inside.findIndex((e=>e===t[i])))&&(l[g].polygon.inside.splice(e,1),l[g].polygon.insidePolygonsObjects.splice(e,1))}}const c=Object.keys(h);let d=[],p=[];for(let g=0;g<c.length;g++)d.push(c[g]),p.push(h[c[g]]);p.sort(((e,t)=>t-e));for(let g=0;g<p.length;g++)Po.log("Delete duplicate inside polygon index "+p[g]),l.splice(p[g],1);let m=[],u={};for(let g=0;g<l.length;g++)if(l[g].polygon.inside.length>0){let e=!1,t={};l[g].polygon.coordsInsideWithOrphans.forEach((e=>t["".concat(e.x,"|").concat(e.y)]=!0));for(let i=0;i<l[g].polygon.inside.length;i++){if(0!==a[l[g].polygon.inside[i]].coordsInsideWithOrphans.filter((e=>t["".concat(e.x,"|").concat(e.y)])).length){Po.log("Pronadene zajednicke koordinate s inside poligonom"+g),e=!0;break}{let t=!1;for(let e=0;e<a[l[g].polygon.inside[i]].coordsInsideWithOrphans.length;e++)if(!me(a[l[g].polygon.inside[i]].coordsInsideWithOrphans[e],l[g].polygon.coordsInsideWithOrphans)){t=!0;break}if(t){Po.log("Pronadene tocke inside poligona koje nisu unutar glavnoga"+g),e=!0;break}}}e||(Po.log("Nemoj brisati poligon "+g),m.push(l[g].polygon))}d.sort(((e,t)=>t-e));for(let g=0;g<d.length;g++)a.splice(d[g],1);if(d.length>0)for(let g=0;g<m.length;g++){for(let e=0;e<m[g].inside.length;e++)m[g].inside[e]=a.findIndex((t=>t===m[g].insidePolygonsObjects[e]));delete m[g].insidePolygonsObjects}for(let g=0;g<m.length;g++)u[a.findIndex((e=>e===m[g]))]=!0;return{polygons:a,vertex:i,roomsWithInsideRoomsNoDeleteIndexes:u}}diffArray(e,t){return e.concat(t).filter((i=>e.includes(i)&&t.includes(i)?void 0:i))}diffObjIntoArray(e,t){let i=0;for(let s=0;s<e.length-1;s++)for(let o=0;o<t.length-1;o++)se(e[s],t[o])&&i++;let o=e.length-1;return o<t.length-1&&(o=t.length),o-i}polygonVisualCenter(e){let t,i,o,s,n=e.coordsInsideWithOrphans,a=e.inside,r=[];for(let u=0;u<n.length;u++){let e=n[u];(!u||e.x<t)&&(t=e.x),(!u||e.y<i)&&(i=e.y),(!u||e.x>o)&&(o=e.x),(!u||e.y>s)&&(s=e.y)}let l=o-t,h=s-i,c=Math.floor(l/10),d=Math.floor(h/10);for(let u=0;u<10;u++)for(let e=0;e<10;e++){let o=t+e*c,s=i+u*d;if(me({x:o,y:s},n)){let e=!0;for(let t=0;t<a.length;t++)if(me({x:o,y:s},this.mainComponentThis.ROOM[a[t]].coordsOutside)){e=!1;break}e&&r.push({x:o,y:s})}}let p,m=0;for(let u=0;u<r.length;u++){let e=1/0;for(let t=0;t<n.length-1;t++){let i=this.pDistance(r[u],n[t],n[t+1]);i.distance<e&&(e=i.distance)}e>m&&(p=u,m=e)}return r[p]}textOnDiv(e,t,i,o){if("undefined"!=typeof t){let s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttributeNS(null,"x",t.x),s.setAttributeNS(null,"y",t.y),s.setAttribute("style","fill:"+i.color+";font-weight:"+i.fontWeight+";font-size:"+i.fontSize),s.setAttributeNS(null,"text-anchor","middle"),s.textContent=e,Po.log("Text ond div"),o.appendChild(s)}}mirrorPointAroundLine(e,t,i){let o,s;if("v"===i.A)o=2*i.B-e,s=t;else if("h"===i.A)o=e,s=2*i.B-t;else{const n=i.A,a=i.B,r=n*n+1;o=(e+n*(t-a))/r,s=(n*e+n*n*t/r+a)/r}return{x:o,y:s}}polygonPolygonIntersect(e,t){for(var i=0;i<e.length;i++){var o,s=e[i];if(o=i==e.length-1?e[0]:e[i+1],!re(s,o)&&this.linePolygonIntersect(s.x,s.y,o.x,o.y,t))return!0}return!1}linePolygonIntersect(e,t,i,o,s){for(var n=0;n<s.length;n++){var a,r=s[n];if(a=n==s.length-1?s[0]:s[n+1],this.lineLineIntersect(e,t,i,o,r.x,r.y,a.x,a.y))return!0}return!1}lineLineIntersect(e,t,i,o,s,n,a,r){const l=(e,t,i)=>{var o=e.x,s=e.y,n=t.x,a=t.y,r=i.x;return(i.y-s)*(n-o)>(a-s)*(r-o)};var h={x:e,y:t},c={x:i,y:o},d={x:s,y:n},p={x:a,y:r};return l(h,d,p)!=l(c,d,p)&&l(h,c,d)!=l(h,c,p)}};class Oo extends o.Component{constructor(e){let{patternId:t,roomId:i,textureName:o,positionX:s,positionY:n,width:a,height:r,floorTextureRepeatCount:l=1,floorTextureRepeatDirection:h}=e;super(),this.patternId=t,this.roomId=i,this.textureName=o,this.positionX=s,this.positionY=n,this.width=a,this.height=r,this.floorTextureRepeatCount=l,this.floorTextureRepeatDirection=h}render(){const e=("horizontal"===this.floorTextureRepeatDirection?this.height:"vertical"===this.floorTextureRepeatDirection?this.width:this.width>this.height?this.height:this.width)/this.floorTextureRepeatCount;return(0,l.jsx)("pattern",{id:this.patternId,patternUnits:"userSpaceOnUse",width:e,height:e,x:this.positionX,y:this.positionY,children:(0,l.jsx)("image",{href:"https://app.klet3d.com/textures/".concat(this.textureName,".png"),x:"0",y:"0",width:e,height:e,preserveAspectRatio:"none"})})}}const Mo=Oo;const Lo=class{constructor(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Unknown",n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6?arguments[6]:void 0;this.wallId=(0,di.v4)(),this.thick=o,this.start=e,this.end=t,this.type=i,this.parent=null,this.child=null,this.angle=0,this.equations={},this.coords=[],this.backUp=!1,this.material=n?n.material:s,this.interiorPlaneMaterial=n?n.interiorPlaneMaterial:"Color"===s?_i[0].defaultColorValue:s,this.exteriorPlaneMaterial=n?n.exteriorPlaneMaterial:"Color"===s?_i[1].defaultColorValue:s,this.wallHeight=n?n.wallHeight:a,this.startHeight=this.wallHeight,this.endHeight=this.wallHeight}};var Ro=i(1317);const Bo=class{constructor(e,t,i,o,s,n,a,r,l){var h=this;this.createAndShowBoxMeasures=function(e,t,i,o,s){let n,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},r=t-e,l=o-i,c=(t-e)/h.mainComponentThis.meter,d=(o-i)/h.mainComponentThis.meter,p="m"+(t+40)+","+i;p+=" l60,0 m-40,10 l10,-10 l10,10 m-10,-10",p=p+" l0,"+l,p+=" m-30,0 l60,0 m-40,-10 l10,10 l10,-10",p=p+"M"+e+","+(i-40),p+=" l0,-60 m10,40 l-10,-10 l10,-10 m-10,10",p=p+" l"+r+",0",p+=" m0,30 l0,-60 m-10,40 l10,-10 l-10,-10",ie(s.current),h.mainComponentThis.qSVG.create(s,"path",{d:p,stroke:a.color||"#555",fill:"none","stroke-width":a.strokeWidth||.5,"stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":4,"fill-rule":"nonzero"}),n=document.createElementNS("http://www.w3.org/2000/svg","text"),n.setAttributeNS(null,"x",t+70),n.setAttributeNS(null,"y",(o+i)/2+35),n.setAttributeNS(null,"fill",a.color||"#555"),n.setAttributeNS(null,"text-anchor","middle"),n.textContent=De(d,h.mainComponentThis.measureSystemContext.userUnit,"meter","feet",2,!0,!0),n.setAttribute("transform","rotate(270 "+(t+70)+","+(o+i)/2+")"),s.current.appendChild(n),n=document.createElementNS("http://www.w3.org/2000/svg","text"),n.setAttributeNS(null,"x",(t+e)/2),n.setAttributeNS(null,"y",i-95),n.setAttributeNS(null,"fill",a.color||"#555"),n.setAttributeNS(null,"text-anchor","middle"),n.textContent=De(c,h.mainComponentThis.measureSystemContext.userUnit,"meter","feet",2,!0,!0),s.current.appendChild(n)},this.isStartStopWallPoint=(e,t)=>{const i=j(e.x,0),o=j(e.y,0),s=j(t.start.x,0),n=j(t.start.y,0),a=j(t.end.x,0),r=j(t.end.y,0);return i===s&&o===n||i===a&&o===r},this.sliceWall=(e,t)=>{let i=new Lo(t.start,e,"normal",t.thick,t.material,t);i.equations.base=t.equations.base;let o=new Lo(e,t.end,"normal",t.thick,t.material,t);return o.equations.base=t.equations.base,[i,o]},this.onWallAddedSlicing=e=>{let t=[e],i=[],o={};if(e.equations.base){for(let e=0;e<t.length;e++){let s=!1;for(let n=0;n<this.mainComponentThis.WALLS.length-1;n++)if(o[n])Ro.log("Zid vec presijecen");else if(this.mainComponentThis.WALLS[n].equations.base){const a=ge(t[e].equations.base,this.mainComponentThis.WALLS[n].equations.base,"object");if(a&&this.mainComponentThis.qSVG.btwn(a.x,t[e].start.x,t[e].end.x,"round")&&this.mainComponentThis.qSVG.btwn(a.y,t[e].start.y,t[e].end.y,"round")&&this.mainComponentThis.qSVG.btwn(a.x,this.mainComponentThis.WALLS[n].start.x,this.mainComponentThis.WALLS[n].end.x,"round")&&this.mainComponentThis.qSVG.btwn(a.y,this.mainComponentThis.WALLS[n].start.y,this.mainComponentThis.WALLS[n].end.y,"round")){if(o[n]=!0,!this.isStartStopWallPoint(a,t[e])){Ro.log("Sijeci zid koji se obraduje");const o=this.sliceWall(a,t[e],null);if(t.push(o[0],o[1]),this.isStartStopWallPoint(a,this.mainComponentThis.WALLS[n]))i.push(this.mainComponentThis.WALLS[n]);else{Ro.log("SIjeci postojeci 2"),i=i.filter((e=>e!==this.mainComponentThis.WALLS[n]));const e=this.sliceWall(a,this.mainComponentThis.WALLS[n]);i.push(e[0],e[1])}s=!0;break}if(this.isStartStopWallPoint(a,this.mainComponentThis.WALLS[n]))Ro.log("Ne sijeci postojeci"),i.push(this.mainComponentThis.WALLS[n]);else{Ro.log("Sijeci postojeci"),i=i.filter((e=>e!==this.mainComponentThis.WALLS[n]));const e=this.sliceWall(a,this.mainComponentThis.WALLS[n]);i.push(e[0],e[1])}Ro.log(i)}else Ro.log("Ne sijeku se"),i.push(this.mainComponentThis.WALLS[n])}else Ro.log("Nema equation"),i.push(this.mainComponentThis.WALLS[n]);!s&&i.push(t[e])}i=i.filter(((e,t,i)=>i.findIndex((t=>e===t))===t))}else i=this.mainComponentThis.WALLS;Ro.log("Final wals after slicing"),Ro.log(i),this.mainComponentThis.WALLS=i},this.removeZeroLengthWallsAndSliceExistingWalls=()=>{Ro.log("Walls count before filtering zero length "+this.mainComponentThis.WALLS.length);let e=this.mainComponentThis.WALLS.filter((e=>!re(e.start,e.end)));this.mainComponentThis.WALLS=[],Ro.log("Walls count before slicing "+e.length);for(let t=0;t<e.length;t++)this.mainComponentThis.WALLS.push(e[t]),this.onWallAddedSlicing(e[t]);Ro.log("Walls count befotre filtering duplicates"+this.mainComponentThis.WALLS.length),this.mainComponentThis.WALLS=this.mainComponentThis.WALLS.filter(((e,t,i)=>i.findIndex((t=>re(e.start,t.start)&&re(e.end,t.end)))===t)),Ro.log("Walls count after filtering duplicates"+this.mainComponentThis.WALLS.length)},this.boxWall=e,this.boxArea=t,this.panel=i,this.boxRoom=o,this.boxSurface=s,this.boxRib=n,this.areaValue=a,this.boxScale=r,this.mainComponentThis=l}getWallNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];for(let o in this.mainComponentThis.WALLS)se(this.mainComponentThis.WALLS[o],t)||(se(this.mainComponentThis.WALLS[o].start,e)&&i.push({wall:this.mainComponentThis.WALLS[o],type:"start"}),se(this.mainComponentThis.WALLS[o].end,e)&&i.push({wall:this.mainComponentThis.WALLS[o],type:"end"}));return 0!==i.length&&i}wallsComputing(e){let t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2?arguments[2]:void 0;(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&ie(o);for(let s=0;s<e.length;s++)t=e[s],null!=t.parent&&(se(t.parent.start,t.start)||se(t.parent.end,t.start)||(t.parent=null)),null!=t.child&&(se(t.child.start,t.end)||se(t.child.end,t.end)||(t.child=null));for(let s=0;s<e.length;s++){let n,a,r,l,h,c;if(t=e[s],null!=t.parent)se(t.parent.start,t.start)&&(n=t.parent,a=n.end,r=n.start),se(t.parent.end,t.start)&&(n=t.parent,a=n.start,r=n.end);else{let e=this.getWallNode(t.start,t);for(let o in e){let s=this.createEquationFromWall(e[o].wall),l=90;"move"===i&&(l=this.mainComponentThis.qSVG.angleBetweenEquations(s.A,this.mainComponentThis.equation2.A)),"start"===e[o].type&&null==e[o].wall.parent&&l>20&&l<160&&(t.parent=e[o].wall,e[o].wall.parent=t,n=t.parent,a=n.end,r=n.start),"end"===e[o].type&&null==e[o].wall.child&&l>20&&l<160&&(t.parent=e[o].wall,e[o].wall.child=t,n=t.parent,a=n.start,r=n.end)}}if(null!=t.child)se(t.child.end,t.end)?(l=t.child,h=l.end,c=l.start):(l=t.child,h=l.start,c=l.end);else{let e=this.getWallNode(t.end,t);for(let o in e){let s=this.createEquationFromWall(e[o].wall),n=90;"move"===i&&(n=this.mainComponentThis.qSVG.angleBetweenEquations(s.A,this.mainComponentThis.equation2.A)),"end"===e[o].type&&null==e[o].wall.child&&n>20&&n<160&&(t.child=e[o].wall,e[o].wall.child=t,l=t.child,h=l.end,c=l.start),"start"===e[o].type&&null==e[o].wall.parent&&n>20&&n<160&&(t.child=e[o].wall,e[o].wall.parent=t,l=t.child,h=l.start,c=l.end)}}let d=Math.atan2(t.end.y-t.start.y,t.end.x-t.start.x);t.angle=d;let p,m,u,g,f=t.thick/2*Math.sin(d),b=t.thick/2*Math.cos(d),w=we(t.start.x+f,t.start.y-b,t.end.x+f,t.end.y-b),C=we(t.start.x-f,t.start.y+b,t.end.x-f,t.end.y+b),x=we(t.start.x,t.start.y,t.end.x,t.end.y);if(t.equations={up:w,down:C,base:x},null==t.parent)m=this.mainComponentThis.qSVG.perpendicularEquation(w,t.start.x,t.start.y),u=ge(w,m,"object"),g=ge(C,m,"object"),t.coords=[u,g],p="M"+u.x+","+u.y+" L"+g.x+","+g.y+" ";else{let e=this.mainComponentThis.qSVG.perpendicularEquation(w,t.start.x,t.start.y),i=Math.atan2(r.y-a.y,r.x-a.x),o=n.thick/2*Math.sin(i),s=n.thick/2*Math.cos(i),l=we(a.x+o,a.y-s,r.x+o,r.y-s),h=we(a.x-o,a.y+s,r.x-o,r.y+s);if(Math.abs(i-d)>.09){u=ge(w,l,"object"),g=ge(C,h,"object"),w.A===l.A&&(u={x:t.start.x+f,y:t.start.y-b},g={x:t.start.x-f,y:t.start.y+b}),this.mainComponentThis.qSVG.gap(u,{x:r.x,y:r.y})>1e3&&(u=ge(e,w,"object"),g=ge(e,C,"object"))}Math.abs(i-d)<=.09&&(u=ge(e,w,"object"),g=ge(e,C,"object")),t.coords=[u,g],p="M"+u.x+","+u.y+" L"+g.x+","+g.y+" "}if(null==t.child)m=this.mainComponentThis.qSVG.perpendicularEquation(w,t.end.x,t.end.y),u=ge(w,m,"object"),g=ge(C,m,"object"),t.coords.push(g,u),p=p+"L"+g.x+","+g.y+" L"+u.x+","+u.y+" Z";else{let e=this.mainComponentThis.qSVG.perpendicularEquation(w,t.end.x,t.end.y),i=Math.atan2(c.y-h.y,c.x-h.x),o=l.thick/2*Math.sin(i),s=l.thick/2*Math.cos(i),n=we(h.x+o,h.y-s,c.x+o,c.y-s),a=we(h.x-o,h.y+s,c.x-o,c.y+s);if(Math.abs(i-d)>.09){u=ge(w,n,"object"),g=ge(C,a,"object"),w.A===n.A&&(u={x:t.end.x+f,y:t.end.y-b},g={x:t.end.x-f,y:t.end.y+b}),this.mainComponentThis.qSVG.gap(u,{x:h.x,y:h.y})>1e3&&(u=ge(w,e,"object"),g=ge(C,e,"object"))}Math.abs(i-d)<=.09&&(u=ge(w,e,"object"),g=ge(C,e,"object")),t.coords.push(g,u),p=p+"L"+g.x+","+g.y+" L"+u.x+","+u.y+" Z"}t.graph=this.makeWall(p,t.material),o.appendChild(t.graph)}}makeWall(e){return this.mainComponentThis.qSVG.create("none","path",{d:e,stroke:"none",fill:"#666666","stroke-width":1,"stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":4,"fill-rule":"nonzero"})}architect(e){return this.wallsComputing(e,!1,this.mainComponentThis.boxWall.current),this.mainComponentThis.Rooms=this.mainComponentThis.qSVG.polygonize(e),ie(this.boxRoom.current),ie(this.boxSurface.current),this.roomMaker(this.mainComponentThis.Rooms),!0}nearWallNode(e){let t,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],n=1/0;for(let a=0;a<this.mainComponentThis.WALLS.length;a++)if(-1===s.indexOf(this.mainComponentThis.WALLS[a])){let o=this.mainComponentThis.WALLS[a].start,s=this.mainComponentThis.WALLS[a].end,r=Ce(o,e);r<n&&(t=o,n=r,i=a),r=Ce(s,e),r<n&&(t=s,n=r,i=a)}return n<=o&&{x:t.x,y:t.y,bestWall:i}}rayCastingWall(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];for(let o=0;o<this.mainComponentThis.WALLS.length;o++)if(4===this.mainComponentThis.WALLS[o].coords.length){let t=[];for(let e=0;e<4;e++)t.push({x:this.mainComponentThis.WALLS[o].coords[e].x,y:this.mainComponentThis.WALLS[o].coords[e].y});me(e,t)&&i.push(this.mainComponentThis.WALLS[o])}return 0!==i.length&&(t||1===i.length?i[0]:i)}stickOnWall(e){if(0===this.mainComponentThis.WALLS.length)return!1;let t=1/0,i={};if(0===this.mainComponentThis.WALLS.length)return!1;for(let s=0;s<this.mainComponentThis.WALLS.length;s++){let o=we(this.mainComponentThis.WALLS[s].coords[0].x,this.mainComponentThis.WALLS[s].coords[0].y,this.mainComponentThis.WALLS[s].coords[3].x,this.mainComponentThis.WALLS[s].coords[3].y),n=this.mainComponentThis.qSVG.nearPointOnEquation(o,e),a=we(this.mainComponentThis.WALLS[s].coords[1].x,this.mainComponentThis.WALLS[s].coords[1].y,this.mainComponentThis.WALLS[s].coords[2].x,this.mainComponentThis.WALLS[s].coords[2].y),r=this.mainComponentThis.qSVG.nearPointOnEquation(a,e);n.distance<t&&this.mainComponentThis.qSVG.btwn(n.x,this.mainComponentThis.WALLS[s].coords[0].x,this.mainComponentThis.WALLS[s].coords[3].x)&&this.mainComponentThis.qSVG.btwn(n.y,this.mainComponentThis.WALLS[s].coords[0].y,this.mainComponentThis.WALLS[s].coords[3].y)&&(t=n.distance,i={wall:this.mainComponentThis.WALLS[s],x:n.x,y:n.y,distance:n.distance}),r.distance<t&&this.mainComponentThis.qSVG.btwn(r.x,this.mainComponentThis.WALLS[s].coords[1].x,this.mainComponentThis.WALLS[s].coords[2].x)&&this.mainComponentThis.qSVG.btwn(r.y,this.mainComponentThis.WALLS[s].coords[1].y,this.mainComponentThis.WALLS[s].coords[2].y)&&(t=r.distance,i={wall:this.mainComponentThis.WALLS[s],x:r.x,y:r.y,distance:r.distance})}let o=this.nearVertice(e);if(o.distance<t){let e=we(o.number.coords[0].x,o.number.coords[0].y,o.number.coords[3].x,o.number.coords[3].y),s=this.mainComponentThis.qSVG.nearPointOnEquation(e,o),n=we(o.number.coords[1].x,o.number.coords[1].y,o.number.coords[2].x,o.number.coords[2].y),a=this.mainComponentThis.qSVG.nearPointOnEquation(n,o);s.distance<t&&this.mainComponentThis.qSVG.btwn(s.x,o.number.coords[0].x,o.number.coords[3].x)&&this.mainComponentThis.qSVG.btwn(s.y,o.number.coords[0].y,o.number.coords[3].y)&&(t=s.distance,i={wall:o.number,x:s.x,y:s.y,distance:s.distance}),a.distance<t&&this.mainComponentThis.qSVG.btwn(a.x,o.number.coords[1].x,o.number.coords[2].x)&&this.mainComponentThis.qSVG.btwn(a.y,o.number.coords[1].y,o.number.coords[2].y)&&(t=a.distance,i={wall:o.number,x:a.x,y:a.y,distance:a.distance})}return i}objFromWall(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainComponentThis.OBJDATA,i=[];for(let o=0;o<t.length;o++){let s;if("inWall"===t[o].family||"onWall"===t[o].family){let n=we(e.start.x,e.start.y,e.end.x,e.end.y);s=this.mainComponentThis.qSVG.nearPointOnEquation(n,t[o]),s.distance<.01&&this.mainComponentThis.qSVG.btwn(t[o].x,e.start.x,e.end.x)&&this.mainComponentThis.qSVG.btwn(t[o].y,e.start.y,e.end.y)&&i.push(t[o])}}return i}createEquationFromWall(e){return we(e.start.x,e.start.y,e.end.x,e.end.y)}rayCastingWalls(e,t){let i=[];for(let o=0;o<t.length;o++)if(4===t[o].coords.length){let s=[];for(let e=0;e<4;e++)s.push({x:t[o].coords[e].x,y:t[o].coords[e].y});me(e,s)&&i.push(t[o])}return 0!==i.length&&(1===i.length?i[0]:i)}inWallRib2(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ro.log("In wall rib2 pozvan"),t||ie(this.boxRib.current);let i,o=[],s=[];o.push(s),o.push(s);let n=e.angle*(180/Math.PI),a=this.objFromWall(e);o[0].push({wall:e,crossObj:!1,side:"up",coords:e.coords[0],distance:0}),o[1].push({wall:e,crossObj:!1,side:"down",coords:e.coords[1],distance:0});for(let r in a){let t=a[r];t.up=[this.mainComponentThis.qSVG.nearPointOnEquation(e.equations.up,t.limit[0]),this.mainComponentThis.qSVG.nearPointOnEquation(e.equations.up,t.limit[1])],t.down=[this.mainComponentThis.qSVG.nearPointOnEquation(e.equations.down,t.limit[0]),this.mainComponentThis.qSVG.nearPointOnEquation(e.equations.down,t.limit[1])],i=Ce(e.coords[0],t.up[0])/this.mainComponentThis.meter,o[0].push({wall:e,crossObj:r,side:"up",coords:t.up[0],distance:i.toFixed(2)}),i=Ce(e.coords[0],t.up[1])/this.mainComponentThis.meter,o[0].push({wall:e,crossObj:r,side:"up",coords:t.up[1],distance:i.toFixed(2)}),i=Ce(e.coords[1],t.down[0])/this.mainComponentThis.meter,o[1].push({wall:e,crossObj:r,side:"down",coords:t.down[0],distance:i.toFixed(2)}),i=Ce(e.coords[1],t.down[1])/this.mainComponentThis.meter,o[1].push({wall:e,crossObj:r,side:"down",coords:t.down[1],distance:i.toFixed(2)})}i=Ce(e.coords[0],e.coords[3])/this.mainComponentThis.meter,o[0].push({wall:e,crossObj:!1,side:"up",coords:e.coords[3],distance:i}),i=Ce(e.coords[1],e.coords[2])/this.mainComponentThis.meter,o[1].push({wall:e,crossObj:!1,side:"down",coords:e.coords[2],distance:i}),o[0].sort((function(e,t){return(e.distance-t.distance).toFixed(2)})),o[1].sort((function(e,t){return(e.distance-t.distance).toFixed(2)}));for(let r in o)for(let e=1;e<o[r].length;e++){let t=!0,i=-5,s=Math.abs(o[r][e-1].distance-o[r][e].distance),a=n;if(t){"down"===o[r][e-1].side&&(i=10-i),(a>89||a<-89)&&(a-=180,i="down"===o[r][e-1].side?-5:10-i),this.mainComponentThis.sizeText[e]=document.createElementNS("http://www.w3.org/2000/svg","text");let t=this.mainComponentThis.qSVG.middle(o[r][e-1].coords.x,o[r][e-1].coords.y,o[r][e].coords.x,o[r][e].coords.y);this.mainComponentThis.sizeText[e].setAttributeNS(null,"x",t.x),this.mainComponentThis.sizeText[e].setAttributeNS(null,"y",t.y+i),this.mainComponentThis.sizeText[e].setAttributeNS(null,"text-anchor","middle"),this.mainComponentThis.sizeText[e].setAttributeNS(null,"font-family","roboto"),this.mainComponentThis.sizeText[e].setAttributeNS(null,"stroke","#ffffff"),this.mainComponentThis.sizeText[e].textContent=De(s,this.mainComponentThis.measureSystemContext.userUnit),this.mainComponentThis.sizeText[e].textContent<1?(this.mainComponentThis.sizeText[e].setAttributeNS(null,"font-size","0.8em"),this.mainComponentThis.sizeText[e].textContent=this.mainComponentThis.sizeText[e].textContent.substring(1,this.mainComponentThis.sizeText[e].textContent.length)):this.mainComponentThis.sizeText[e].setAttributeNS(null,"font-size","15px"),this.mainComponentThis.sizeText[e].setAttributeNS(null,"stroke-width","0.4px"),this.mainComponentThis.sizeText[e].setAttributeNS(null,"fill","#666666"),this.mainComponentThis.sizeText[e].setAttribute("transform","rotate("+a+" "+t.x+","+t.y+")"),this.boxRib.current.appendChild(this.mainComponentThis.sizeText[e])}}}areSamePolygons(e,t){let i=this.mainComponentThis.qSVG.diffObjIntoArray(e.coordsInsideWithOrphans||e.coordsInside,t.coordsInsideWithOrphans||t.coordsInside);if(e.way.length===t.way.length||0===i){if(0===this.mainComponentThis.qSVG.diffArray(e.way,t.way).length||0===i)return!0}else if(e.way.length===t.way.length+1){if(1===this.mainComponentThis.qSVG.diffArray(e.way,t.way).length||2===i)return!0}else if(e.way.length===t.way.length-1&&1===this.mainComponentThis.qSVG.diffArray(e.way,t.way).length)return!0;return!1}roomMaker(e){this.mainComponentThis.globalArea=0,0===e.polygons.length&&(this.mainComponentThis.ROOM=[]);for(let s=0;s<e.polygons.length;s++){let t=!1;for(let i=0;i<this.mainComponentThis.ROOM.length;i++)if(this.areSamePolygons(e.polygons[s],this.mainComponentThis.ROOM[i])){t=!0,this.mainComponentThis.ROOM[i].area=e.polygons[s].area,this.mainComponentThis.ROOM[i].realRoomArea=ve(e.polygons[s]),this.mainComponentThis.ROOM[i].inside=e.polygons[s].inside,this.mainComponentThis.ROOM[i].insideNoDelete=e.roomsWithInsideRoomsNoDeleteIndexes[s],this.mainComponentThis.ROOM[i].coords=e.polygons[s].coords,this.mainComponentThis.ROOM[i].coordsOutside=e.polygons[s].coordsOutside,this.mainComponentThis.ROOM[i].way=e.polygons[s].way,this.mainComponentThis.ROOM[i].coordsInside=e.polygons[s].coordsInside,this.mainComponentThis.ROOM[i].coordsInsideWithOrphans=e.polygons[s].coordsInsideWithOrphans;break}t||(this.mainComponentThis.ROOM.push({id:this.mainComponentThis.roomIdCounter,coords:e.polygons[s].coords,coordsOutside:e.polygons[s].coordsOutside,coordsInside:e.polygons[s].coordsInside,coordsInsideWithOrphans:e.polygons[s].coordsInside,inside:e.polygons[s].inside,insideNoDelete:e.roomsWithInsideRoomsNoDeleteIndexes[s],way:e.polygons[s].way,area:e.polygons[s].area,realRoomArea:ve(e.polygons[s]),surface:"",name:"",floorTexture:"none",showSurface:!1,action:"add"}),this.mainComponentThis.roomIdCounter++)}let t=[];for(let s=0;s<this.mainComponentThis.ROOM.length;s++)if(this.mainComponentThis.ROOM[s].inside.length>0&&!this.mainComponentThis.ROOM[s].insideNoDelete)t.push(s);else{let i=!1;for(let t=0;t<e.polygons.length;t++)if(this.areSamePolygons(e.polygons[t],this.mainComponentThis.ROOM[s])){i=!0;break}i||t.push(s)}t.sort((function(e,t){return t-e}));for(let s=0;s<t.length;s++)this.mainComponentThis.ROOM.splice(t[s],1);let i={};for(let s=0;s<this.mainComponentThis.ROOM.length;s++)if(!i[s])for(let e=0;e<this.mainComponentThis.ROOM.length;e++)s!==e&&this.areSamePolygons(this.mainComponentThis.ROOM[s],this.mainComponentThis.ROOM[e])&&(i[e]=!0);Ro.log("Duplicates to splice "+JSON.stringify(i));const o=Object.keys(i).sort(((e,t)=>t-e));for(let s=0;s<o.length;s++)this.mainComponentThis.ROOM.splice(o[s],1);Ro.log("EMpty elememts"),ie(this.boxRoom.current),ie(this.boxSurface.current),ie(this.boxArea.current);for(let s=0;s<this.mainComponentThis.ROOM.length;s++){"add"===this.mainComponentThis.ROOM[s].action&&(this.mainComponentThis.globalArea=this.mainComponentThis.globalArea+this.mainComponentThis.ROOM[s].realRoomArea);let e=this.mainComponentThis.ROOM[s].coords,t="M"+e[0].x+","+e[0].y;for(let s=1;s<e.length;s++)t=t+" L"+e[s].x+","+e[s].y;this.mainComponentThis.qSVG.create(this.boxRoom,"path",{d:t,fill:"none"!==this.mainComponentThis.ROOM[s].floorTexture?"url(#room-texture_".concat(this.mainComponentThis.ROOM[s].id,")"):"none","fill-opacity":1,stroke:"none","fill-rule":"evenodd",class:"room"}),this.mainComponentThis.qSVG.create(this.boxSurface,"path",{d:t,fill:"none","fill-opacity":1,stroke:"none","fill-rule":"evenodd",class:"room"});let i,o=this.mainComponentThis.qSVG.polygonVisualCenter(this.mainComponentThis.ROOM[s]);""!==this.mainComponentThis.ROOM[s].name&&o&&(i={color:"#343938"},this.mainComponentThis.qSVG.textOnDiv(this.mainComponentThis.ROOM[s].name,o,i,this.mainComponentThis.boxArea.current)),""!==this.mainComponentThis.ROOM[s].name&&o&&(o.y=o.y+20),Ro.log("Area of room"),Ro.log(this.mainComponentThis.ROOM[s].realRoomArea),this.mainComponentThis.ROOM[s].realRoomArea<0&&Ro.log("Negative room surface"),i={color:"#343938",fontSize:"12.5px",fontWeight:"normal"},this.mainComponentThis.ROOM[s].surface&&(i.fontWeight="bold")}if(this.mainComponentThis.globalArea<=0)this.mainComponentThis.globalArea=0,this.areaValue.current.innerHTML="";else{const e=this.mainComponentThis.globalArea/(this.mainComponentThis.meter*this.mainComponentThis.meter);this.areaValue.current.innerHTML=je(e,this.mainComponentThis.measureSystemContext.userUnit,"square meter","square foot",2,!0,!1)}this.roomWallsClockwiseOrder(),Ro.log("Roomss"+this.mainComponentThis.ROOM.length),Ro.log(this.mainComponentThis.ROOM),this.renderRoomTextures()}renderRoomTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mainComponentThis.ROOM;const t=this.mainComponentThis.roomTextureContainerRef.current;s.render((0,l.jsx)(l.Fragment,{children:e.map((e=>{const t=Math.min(...e.coordsInsideWithOrphans.map((e=>e.x))),i=Math.min(...e.coordsInsideWithOrphans.map((e=>e.y))),o=Math.max(...e.coordsInsideWithOrphans.map((e=>e.x))),s=Math.max(...e.coordsInsideWithOrphans.map((e=>e.y))),n=o-t,a=s-i,r=a*this.mainComponentThis.floorplan3DScaleFactor/512;return e.floorTexture&&"none"!==e.floorTexture?(0,l.jsx)(Mo,{patternId:"room-texture_".concat(e.id),roomId:e.id,textureName:e.floorTexture,positionX:t,positionY:i+a,width:n,height:a,floorTextureRepeatCount:e.floorTextureRepeatCount||r,floorTextureRepeatDirection:e.floorTextureRepeatCount?"automatic":"horizontal"},[e.id,e.floorTexture,t,i,o,s,e.floorTextureRepeatCount].join("-")):null}))}),t)}renderRoomPreviewTexture(e){const t=this.mainComponentThis.roomTexturePreviewContainerRef.current,i=Math.min(...e.coordsInside.map((e=>e.x))),o=Math.min(...e.coordsInside.map((e=>e.y))),n=Math.max(...e.coordsInside.map((e=>e.x)))-i,a=Math.max(...e.coordsInside.map((e=>e.y)))-o,r=a*this.mainComponentThis.floorplan3DScaleFactor/512;if(!e.floorTexture||"none"===e.floorTexture)return null;s.render((0,l.jsx)(Mo,{patternId:"room-texture-preview",roomId:e.id,textureName:e.floorTexture,positionX:i,positionY:o+a,width:n,height:a,floorTextureRepeatCount:e.floorTextureRepeatCount||r,floorTextureRepeatDirection:e.floorTextureRepeatCount?"automatic":"horizontal"}),t)}roomWallsClockwiseOrder(){let e=[];for(let i=0;i<this.mainComponentThis.ROOM.length;i++){Ro.log("Room"),Ro.log(this.mainComponentThis.ROOM[i]),Ro.log(this.mainComponentThis.WALLS);let t={x:this.mainComponentThis.ROOM[i].coords[0].realX,y:this.mainComponentThis.ROOM[i].coords[0].realY};const o=le(this.mainComponentThis.ROOM[i].coords);if(Ro.log("Is clockwise "+o),o){let o,s;Ro.log("Nastavi obilazak sobe u dosadasnjem smjeru");for(let n=0;n<this.mainComponentThis.ROOM[i].coords.length-1;n++)o=n,s=o===this.mainComponentThis.ROOM[i].coords.length-2?0:o+1,Ro.log("Wall "+o+" -> "+s),Ro.log("Cwstop before "+JSON.stringify(t)),t=this.roomWallsClockwiseOrderProcessWall(this.mainComponentThis.ROOM[i],o,s,e,t),Ro.log("Cwstop after "+JSON.stringify(t))}else{let o,s;Ro.log("Obrni smjer obilaska sobe");for(let n=0;n>=0&&(o=n,0===n?(s=this.mainComponentThis.ROOM[i].coords.length-2,n=this.mainComponentThis.ROOM[i].coords.length-1):s=o-1,Ro.log("Wall "+o+" -> "+s),Ro.log("Cwstop before "+JSON.stringify(t)),t=this.roomWallsClockwiseOrderProcessWall(this.mainComponentThis.ROOM[i],o,s,e,t),Ro.log("Cwstop after "+JSON.stringify(t)),1!==n);n--);}}this.mainComponentThis.ORPHANWALLS=[];let t=[];for(let i=0;i<this.mainComponentThis.WALLS.length;i++)if(!e.find((e=>e===this.mainComponentThis.WALLS[i]))){const e=fe(this.mainComponentThis.WALLS[i].start,this.mainComponentThis.ROOM,!1),o=fe(this.mainComponentThis.WALLS[i].end,this.mainComponentThis.ROOM,!1);let s;if(this.mainComponentThis.ORPHANWALLS.push({wall:this.mainComponentThis.WALLS[i],startRoom:e,endRoom:o}),e&&!o?s=e:!e&&o&&(s=o),s){let e=t.find((e=>e.room===s));e?e.orphanWalls.push(this.mainComponentThis.ORPHANWALLS[this.mainComponentThis.ORPHANWALLS.length-1]):t.push({room:s,orphanWalls:[this.mainComponentThis.ORPHANWALLS[this.mainComponentThis.ORPHANWALLS.length-1]]})}}Ro.log("Orphan walls count "+this.mainComponentThis.ORPHANWALLS.length),Ro.log("roomsWithSingleOrphanWalls count"+t.length),Ro.log(t),this.interpolateRoomCoordsInsideWithOrphanWalls(t)}interpolateRoomCoordsInsideWithOrphanWalls(e){for(let s=0;s<e.length;s++){let n=[];for(let r=0;r<e[s].room.coordsInside.length-1;r++)t=r,i=e[s].room.coordsInside,o=n,t===i.length-2?re(i[t],i[0])||o.push(be(i,t,0,!0)):re(i[t],i[t+1])||o.push(be(i,t,t+1,!0));let a=[...e[s].room.coordsInside];for(let t=0;t<e[s].orphanWalls.length;t++){Ro.log("Current orphan wall");let i=[],o=[];for(let n=0;n<e[s].orphanWalls[t].wall.coords.length;n++)$(e[s].orphanWalls[t].wall.coords[n],e[s].orphanWalls[t].wall.equations.up,this.mainComponentThis.isPointOnWallDecimalPrecision)?i.push(e[s].orphanWalls[t].wall.coords[n]):o.push(e[s].orphanWalls[t].wall.coords[n]);Ro.log("Room coords before "+JSON.stringify(a)),Ro.log("Room coords up point"+JSON.stringify(i)),Ro.log("Room coords down point"+JSON.stringify(o));let r=[],l={intersectedRoomCoordsInsideWalls:[],upEquationWallNode1SpliceIndex:null,upEquationWallNode2SpliceIndex:null};if(this.orphanWallLineProcessing(e[s].orphanWalls[t].wall.equations.up,i,n,e[s].room.coordsInside,a,r,l,!0),this.orphanWallLineProcessing(e[s].orphanWalls[t].wall.equations.down,o,n,e[s].room.coordsInside,a,r,l,!1),null!==l.upEquationWallNode1SpliceIndex&&null!==l.upEquationWallNode2SpliceIndex&&4===r.length){let e=null;l.intersectedRoomCoordsInsideWalls.length>1?(Ro.log("Orphan izmedu 2 zida"),-1!==l.upEquationWallNode2SpliceIndex?(Ro.log("Interpoliraj wallNode2"),e=l.upEquationWallNode2SpliceIndex):Ro.log("Exception, nema wallNode2 indexa")):(Ro.log("Orphan na rubu"),re(r[0],l.intersectedRoomCoordsInsideWalls[0].wallNode1,0)?-1!==l.upEquationWallNode1SpliceIndex?(Ro.log("Interpoliraj wallNode1"),e=l.upEquationWallNode1SpliceIndex):Ro.log("Exception, nema wallNode1 indexa"):re(r[3],l.intersectedRoomCoordsInsideWalls[0].wallNode2,0)?-1!==l.upEquationWallNode2SpliceIndex?(Ro.log("Interpoliraj wallNode2"),e=l.upEquationWallNode2SpliceIndex):Ro.log("Exception, nema wallNode2 indexa"):Ro.log("Orphan na rubu interpolation exception")),null!==e&&a.splice(e,1,r[0],r[1],r[2],r[3]),Ro.log("Room coords after "+JSON.stringify(a))}else Ro.log("Orphan walls interpolation exception "+JSON.stringify(e[s].orphanWalls[t].wall.coords));Ro.log(l)}e[s].room.coordsInsideWithOrphans=a}var t,i,o}orphanWallLineProcessing(e,t,i,o,s,n,a,r){let l=t[0];me(t[1],o)||(l=t[1]);let h=t.find((e=>e!==l));const c=te(t[0],t[1]);for(let d=0;d<i.length;d++){const t=ge(i[d].wallEquation,e,"object");if(t){Ro.log("Equation intersection "+JSON.stringify(t));const e=te(i[d].wallNode1,i[d].wallNode2);if(ee(0,t.x,t.y,c,e)){a.intersectedRoomCoordsInsideWalls.find((e=>e===i[d]))||a.intersectedRoomCoordsInsideWalls.push(i[d]),Ro.log("Intersection coords inside wall"),Ro.log(i[d]),Ro.log("Pomjeri tocku orphan zida "+JSON.stringify(l)),l.x=t.x,l.y=t.y,Ro.log("Tocka orphan zida nakom pomjeranja "+JSON.stringify(l)),r?(n.push(l,h),a.upEquationWallNode1SpliceIndex=s.findIndex((e=>re(e,i[d].wallNode1,0))),a.upEquationWallNode2SpliceIndex=s.findIndex((e=>re(e,i[d].wallNode2,0)))):n.push(h,l);break}}}}roomWallsClockwiseOrderProcessWall(e,t,i,o,s){const n=be(e.coords,t,i);Ro.log(n);let a=this.mainComponentThis.WALLS.find((e=>j(e.start.x,0)===j(n.wallNode1.realX,0)&&j(e.start.y,0)===j(n.wallNode1.realY,0)&&j(e.end.x,0)===j(n.wallNode2.realX,0)&&j(e.end.y,0)===j(n.wallNode2.realY,0)||j(e.start.x,0)===j(n.wallNode2.realX,0)&&j(e.start.y,0)===j(n.wallNode2.realY,0)&&j(e.end.x,0)===j(n.wallNode1.realX,0)&&j(e.end.y,0)===j(n.wallNode1.realY,0)));Ro.log(a);let r=s;return a?(Ro.log("Wall start "+JSON.stringify(a.start)+"wall end: "+JSON.stringify(a.end)),Ro.log(JSON.stringify(r)),Ro.log("Wall needs switch "+!re(a.start,r,0)),Ro.log(o),Ro.log(!o.find((e=>e===a))),re(a.start,r,0)?(!o.find((e=>e===a))&&o.push(a),r=a.end):o.find((e=>e===a))?r=a.start:(Ro.log(JSON.stringify(r)),Ro.log(JSON.stringify(a.start)),Ro.log("Obrnioo"),this.switchWallStartEnd(a),o.push(a),r=a.end)):(r={x:n.wallNode2.realX,y:n.wallNode2.realY},Ro.log("Nema target walla u roomWallsClockwiseOrderProcessWall"+JSON.stringify(n))),r}switchWallStartEnd(e){const t={...e.start};e.start={...e.end},e.end=t}findCorrespondingWall(e){return this.mainComponentThis.WALLS.find((t=>t.start.x===e.wallNode1.realX&&t.start.y===e.wallNode1.realY&&t.end.x===e.wallNode2.realX&&t.end.y===e.wallNode2.realY||t.start.x===e.wallNode2.realX&&t.start.y===e.wallNode2.realY&&t.end.x===e.wallNode1.realX&&t.end.y===e.wallNode1.realY))}nearVertice(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainComponentThis.WALLS,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,s=1/0;for(let n=0;n<i.length;n++){let o=this.mainComponentThis.qSVG.gap(e,{x:i[n].start.x,y:i[n].start.y}),a=this.mainComponentThis.qSVG.gap(e,{x:i[n].end.x,y:i[n].end.y});o<a&&o<s&&(s=o,t={number:i[n],x:i[n].start.x,y:i[n].start.y,distance:Math.sqrt(s)}),a<o&&a<s&&(s=a,t={number:i[n],x:i[n].end.x,y:i[n].end.y,distance:Math.sqrt(s)})}return s<o*o&&t}nearWall(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainComponentThis.WALLS,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,s=1/0,n={};if(0===i.length)return!1;for(let r=0;r<i.length;r++){let o=we(i[r].start.x,i[r].start.y,i[r].end.x,i[r].end.y);t=this.mainComponentThis.qSVG.nearPointOnEquation(o,e),t.distance<s&&this.mainComponentThis.qSVG.btwn(t.x,i[r].start.x,i[r].end.x)&&this.mainComponentThis.qSVG.btwn(t.y,i[r].start.y,i[r].end.y)&&(s=t.distance,n={wall:i[r],x:t.x,y:t.y,distance:t.distance})}let a=this.nearVertice(e,i);return a.distance<s&&(s=a.distance,n={wall:a.number,x:a.x,y:a.y,distance:a.distance}),s<=o&&n}showScaleBox(){const e=J(this.mainComponentThis.WALLS);if(!e)return ie(this.boxScale.current),void(this.mainComponentThis.boxWallCoordinates={minX:0,maxX:0,minY:0,maxY:0,width:0,height:0});this.createAndShowBoxMeasures(e.minX,e.maxX,e.minY,e.maxY,this.boxScale),this.mainComponentThis.boxWallCoordinates={},this.mainComponentThis.boxWallCoordinates.maxX=j(e.maxX,0),this.mainComponentThis.boxWallCoordinates.minX=j(e.minX,0),this.mainComponentThis.boxWallCoordinates.minY=j(e.minY,0),this.mainComponentThis.boxWallCoordinates.maxY=j(e.maxY,0),this.mainComponentThis.boxWallCoordinates.width=this.mainComponentThis.boxWallCoordinates.maxX-this.mainComponentThis.boxWallCoordinates.minX,this.mainComponentThis.boxWallCoordinates.height=this.mainComponentThis.boxWallCoordinates.maxY-this.mainComponentThis.boxWallCoordinates.minY}};const Ao=class{constructor(e,t,i,o,s,n,a){let r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"normal",l=arguments.length>8?arguments[8]:void 0,h=arguments.length>9?arguments[9]:void 0,c=arguments.length>10?arguments[10]:void 0,d=arguments.length>11?arguments[11]:void 0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:{};if(this.family=e,this.class=t,this.type=i,this.x=o.x,this.y=o.y,this.angle=s,this.angleSign=n,this.limit=[],this.hinge=r,this.graph=d.qSVG.create("none","g",{"data-object-class":this.class,"data-object-type":this.type}),this.additionalParams=c||{},this.constructorParams=p,this.wallHeightConstruc=this.constructorParams.wallHeightConstruc||d.floorHeight,this.actionGraph=this.graph,"onWall"===this.family||this.additionalParams.onWallObjectBBox){const e=d.qSVG.create("none","g");this.graph.appendChild(e),this.actionGraph=e}this.scale={x:1,y:1},this.value=h,this.size=a,this.thick=l,this.width=(this.size/d.meter).toFixed(2),this.height=(this.thick/d.meter).toFixed(2);let m,u=d.carpentryCalc(e,t,i,a,l,h);for(let f=0;f<u.length;f++)u[f].path&&(m=d.qSVG.create("none","path",{d:u[f].path,"stroke-width":1,fill:u[f].fill,stroke:u[f].stroke,"stroke-dasharray":u[f].strokeDashArray})),u[f].text&&(m=d.qSVG.create("none","text",{x:u[f].x,y:u[f].y,"font-size":"1em",stroke:u[f].stroke,"stroke-width":u[f].strokeWidth,"font-family":"roboto","text-anchor":"middle",fill:u[f].fill}),m.textContent=u[f].text),this.actionGraph.appendChild(m);let g=this.actionGraph.getBoundingClientRect();g.x=g.x*d.zoomFactor-d.offset.left*d.zoomFactor+d.originX_viewbox,g.y=g.y*d.zoomFactor-d.offset.top*d.zoomFactor+d.originY_viewbox,g.origin={x:this.x,y:this.y},this.bbox=g,this.realBbox=[{x:-this.size/2,y:-this.thick/2},{x:this.size/2,y:-this.thick/2},{x:this.size/2,y:this.thick/2},{x:-this.size/2,y:this.thick/2}],this.params=u.params,"doorWindow"===this.class&&d.isWindowObject(this.type)&&c&&(Object.hasOwn(this.additionalParams,"rotationDirection")&&Object.hasOwn(this.additionalParams,"rotationAxis")&&Object.hasOwn(this.additionalParams,"curvePoints")&&Object.hasOwn(this.additionalParams,"controlPointOnWall")&&Object.hasOwn(this.additionalParams,"arrowControlPoint")&&Object.hasOwn(this.additionalParams,"arrowControlPointAngleSign")||d.setWindowObjectRotationProperties(this)),"inWall"!==this.family&&"onWall"!==this.family||Object.hasOwn(this.additionalParams,"hideWithWall")||(this.additionalParams.hideWithWall=!0),u.params.width?this.size=u.params.width:this.size=a,u.params.height?this.thick=u.params.height:this.thick=l,this.setObject3DDimensions(d)}update(e){this.width=(this.size/e.meter).toFixed(2),this.height=(this.thick/e.meter).toFixed(2),this.setObject3DDimensions(e);let t,i=e.carpentryCalc(this.family,this.class,this.type,this.size,this.thick,this.value);for(let l=0;l<i.length;l++)if(i[l].path)this.actionGraph.querySelectorAll("path")[l].setAttribute("d",i[l].path);else if(i[l].text){let e=this.actionGraph.querySelectorAll("text");for(let t of e)t.setAttribute("font-size",i[l].fontSize),t.setAttribute("fill",i[l].fill);e[0].textContent=i[l].text}if("text"===this.class){let t=e.qSVG.create("none","text",{x:0,y:0,"font-size":i[0].fontSize,stroke:i[0].stroke,"stroke-width":i[0].strokeWidth,"font-family":"roboto","text-anchor":"middle",fill:i[0].fill});t.textContent=i[0].text,t.style.visibility="hidden",this.actionGraph.appendChild(t);const o=t.getBBox();this.size=o.width,this.thick=o.height,t.remove()}t="normal"===this.hinge?1:-1;let o=this.y;this.actionGraph.setAttribute("transform","translate("+this.x+","+o+") rotate("+this.angle+",0,0) scale("+t+", 1)");let s=this.actionGraph.getBoundingClientRect();s.x=s.x*e.zoomFactor-e.offset.left*e.zoomFactor+e.originX_viewbox,s.y=s.y*e.zoomFactor-e.offset.top*e.zoomFactor+e.originY_viewbox,s.origin={x:this.x,y:this.y},this.bbox=s;let n=this.angle*(Math.PI/180),a=[{x:-this.size/2,y:-this.thick/2},{x:this.size/2,y:-this.thick/2},{x:this.size/2,y:this.thick/2},{x:-this.size/2,y:this.thick/2}],r={x:0,y:0};if("text"===this.class&&(a=[{x:this.bbox.x,y:this.bbox.y},{x:this.bbox.x+this.bbox.width*e.zoomFactor,y:this.bbox.y},{x:this.bbox.x+this.bbox.width*e.zoomFactor,y:this.bbox.y+this.bbox.height*e.zoomFactor},{x:this.bbox.x,y:this.bbox.y+this.bbox.height*e.zoomFactor}],r.x=this.bbox.x+this.bbox.width*e.zoomFactor/2,r.y=this.bbox.y+this.bbox.height*e.zoomFactor/2),ke(a,r,n),"text"!==this.class)for(let l=0;l<a.length;l++)a[l].x+=this.x,a[l].y+=this.y;if(this.realBbox=a,("onWall"===this.family||this.additionalParams.onWallObjectBBox)&&Object.hasOwn(this.additionalParams,"onWallAngle")&&Object.hasOwn(this.additionalParams,"onWallThick")){const e=1===this.angleSign?-1:1,t=90===(this.additionalParams.onWallObjectBBox?this.obj.params.onWallOffsetAngle:this.params.onWallOffsetAngle)?this.size:this.thick,i=e*(this.additionalParams.onWallThick/2+t/2)*Math.sin(this.additionalParams.onWallAngle),o=-e*(this.additionalParams.onWallThick/2+t/2)*Math.cos(this.additionalParams.onWallAngle);this.graph.setAttribute("transform","translate(".concat(i,", ").concat(o,")")),new Array(...this.realBbox,this.bbox.origin).forEach((e=>{e.x+=i,e.y+=o}))}return e.isWindowObject(this.type)&&e.setWindowObjectRotationProperties(this),!0}setObject3DDimensions(e){if("lights"===this.class)this.additionalParams.height3D=this.additionalParams.height3D||e.lightsDetails[this.type].dimensions.height3D*(e.meter/100),"onWall"===this.family?(this.additionalParams.width3D=parseFloat(this.thick),this.additionalParams.depth3D=parseFloat(this.size)):(this.additionalParams.width3D=parseFloat(this.size),this.additionalParams.depth3D=parseFloat(this.thick));else if("doorWindow"===this.class)this.additionalParams.width3D=parseFloat(this.size),this.additionalParams.height3D=this.additionalParams.height3D||(e.isWindowObject(this.type)?e.windowsDetails[this.type].dimensions.height3D*(e.meter/100):e.doorsDetails[this.type].dimensions.height3D*(e.meter/100)),this.additionalParams.depth3D=parseFloat(this.thick);else if("furniture"===this.class){this.additionalParams.width3D=parseFloat(this.size);let t=this.additionalParams.height3D;this.additionalParams.height3D||(t=e.isStaircaseObject(this.type)?this.wallHeightConstruc:e.isFanObject(this.type)?e.fanDetails[this.type].dimensions.height3D*(e.meter/100):e.isCoverObject(this.type)?e.coverDetails[this.type].dimensions.height3D*(e.meter/100):e.isPresenceObject(this.type)?e.presenceDetails[this.type].dimensions.height3D*(e.meter/100):e.furnitureDetails[this.type].dimensions.height3D*(e.meter/100)),this.additionalParams.height3D=t,this.additionalParams.depth3D=parseFloat(this.thick)}if(!Pi.includes(e.getObjectItemType(this.type))){const t=Mi.includes(this.type);this.additionalParams.positionY=O(this.additionalParams.positionY)?t?this.wallHeightConstruc-this.additionalParams.height3D:e.isLightObject(this.type)?3*this.wallHeightConstruc/4:e.isPresenceObject(this.type)||"free"===this.family?0:this.wallHeightConstruc/2-this.additionalParams.height3D/2:this.additionalParams.positionY}}};var Wo=i(1317);function Vo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("floorplan_image_scaling"===this.mode||"floorplan_image_translation"===this.mode){if(this.snap=this.calcul_snap(e,this.grid_snap),this.cursor("pointer"),this.binder?t&&(this.binder.setAttribute("cx",this.snap.x),this.binder.setAttribute("cy",this.snap.y)):(this.binder=this.qSVG.create("none","circle",{cx:this.snap.x,cy:this.snap.y,r:this.meter/6,fill:"url('#uploadFloorplanCursorCircleGradient')"}),this.boxBind.current.appendChild(this.binder)),t&&"floorplan_image_scaling"===this.mode){let e;if((e=this.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group"))&&!this.boxFloorplanImage.current.querySelector("#endCircle")){let t=e.querySelector("line");t.setAttribute("x2",this.snap.x),t.setAttribute("y2",this.snap.y)}}}else"upload_floorplan_image_mode"===this.mode&&this.removeBinder()}function No(e){if("room_mode"===this.mode){let t;this.snap=this.calcul_snap(e,this.grid_snap),(t=fe(this.snap,this.ROOM))?(this.cursor("pointer"),(!this.selectedBinder||this.selectedBinder&&parseInt(this.selectedBinder.id)!==this.ROOM.indexOf(t))&&(this.removeBinder(),this.binder=this.createRoomBinderPath(t))):this.removeBinder()}}function Eo(e){if("select_mode"===this.mode&&"off"===this.drag){this.snap=this.calcul_snap(e,"off");let t,i,o=!1,s=[];for(let e=0;e<this.OBJDATA.length;e++){let t=this.OBJDATA[e].realBbox;me(this.snap,t)&&s.push(this.OBJDATA[e])}if(s.length>0&&(o=s[0],s.length>1)){let e,t=Ce(this.snap,{x:s[0].x,y:s[0].y});for(let i=1;i<s.length;i++)e=Ce(this.snap,{x:s[i].x,y:s[i].y}),e<t&&(t=e,o=s[i])}if(!1!==o){if(this.binder&&"segment"===this.binder.type&&(this.removeBinder(),this.cursor("default")),!this.selectedBinder||this.selectedBinder&&this.selectedBinder.obj!==o)if(o.params.bindBox)(!this.binder||this.binder&&this.binder.obj!==o)&&(this.binder&&this.binder.obj!==o&&this.removeBinder(),this.binder=new Ao("free","boundingBox","",o.bbox.origin,o.angle,0,o.size,"normal",o.thick,o.realBbox,{onWallObjectBBox:"onWall"===o.family},this),this.binder.update(this),this.binder.obj=o,this.binder.type="boundingBox",this.binder.oldX=this.binder.x,this.binder.oldY=this.binder.y,this.boxBind.current.appendChild(this.binder.graph),o.params.move?this.cursor("move"):this.cursor("pointer"));else if(!this.binder||this.binder.obj&&this.binder.obj!==o){let e;if(this.binder&&this.binder.obj!==o&&this.removeBinder(),e=this.editor.rayCastingWall(o)){e.length>1&&(e=e[0]),this.inWallRib(e);let t=e.thick,i=o.size;this.binder=new Ao("inWall","socle","",o,o.angle,0,i,"normal",t,null,void 0,this),this.binder.update(this),this.binder.type="obj",this.binder.obj=o,this.binder.oldXY={x:o.x,y:o.y},this.boxBind.current.appendChild(this.binder.graph)}}else this.binder.graph&&(Wo.log("Wall item binder",e.target),Wo.log(this.binder),e.target===this.binder.graph.firstChild?(this.cursor("move"),this.binder.graph.firstChild.setAttribute("class","circle_css_2"),this.binder.type="obj",this.binder.obj=o):(this.cursor("default"),this.binder.graph.firstChild.setAttribute("class","circle_css_1"),this.binder.type=!1))}else this.binder&&(this.removeBinder(),this.cursor("default"),this.rib());if(t=this.editor.nearWallNode(this.snap,this.selectModeNearWallNodeRange)){if(!this.binder||"segment"===this.binder.type)if(this.selectedBinder)if(this.selectedBinder.obj){let e=[];for(let o=this.WALLS.length-1;o>-1;o--)(se(this.WALLS[o].start,t)||se(this.WALLS[o].end,t))&&e.push(this.WALLS[o]);let i=!1;Wo.log(e);for(let t=0;t<e.length;t++)if(-1!==this.editor.objFromWall(e[t]).indexOf(this.selectedBinder.obj)){i=!0;break}i||(Wo.log("Create node binder"),this.binder=this.qSVG.create(this.boxBind,"circle",{id:"circlebinder",class:"circle_css_2",cx:t.x,cy:t.y,r:this.Rcircle}),this.binder.data=t,this.binder.type="node")}else this.selectedBinder.wall&&(!this.selectedBinder.wall||se(this.selectedBinder.wall.start,t)||se(this.selectedBinder.wall.end,t))||(this.binder=this.qSVG.create(this.boxBind,"circle",{id:"circlebinder",class:"circle_css_2",cx:t.x,cy:t.y,r:this.Rcircle}),this.binder.data=t,this.binder.type="node");else this.binder=this.qSVG.create(this.boxBind,"circle",{id:"circlebinder",class:"circle_css_2",cx:t.x,cy:t.y,r:this.Rcircle}),this.binder.data=t,this.binder.type="node";this.cursor("move")}else this.binder&&"node"===this.binder.type&&(this.removeBinder(),this.cursor("default"),this.rib());if(i=this.editor.rayCastingWalls(this.snap,this.WALLS)){if((!this.selectedBinder||!this.selectedBinder.obj||this.selectedBinder.obj&&!Array.isArray(i)&&-1===this.editor.objFromWall(i).indexOf(this.selectedBinder.obj)||0===(this.selectedBinder.obj&&Array.isArray(i)&&i.filter((e=>-1!==this.editor.objFromWall(e).indexOf(this.selectedBinder.obj)))).length)&&(!this.selectedBinder||!this.selectedBinder.wall||this.selectedBinder.wall&&this.selectedBinder.wall!==i)&&(i.length>1&&(i=i[i.length-1]),i&&!this.binder)){this.editor.objFromWall(i).length>0&&this.editor.inWallRib2(i),this.binder={},this.binder.wall=i,this.inWallRib(this.binder.wall);let e=this.qSVG.create("none","line",{x1:this.binder.wall.start.x,y1:this.binder.wall.start.y,x2:this.binder.wall.end.x,y2:this.binder.wall.end.y,"stroke-width":this.wallSize,stroke:"#19ab7f"}),t=this.qSVG.create("none","circle",{class:"circle_css",cx:this.binder.wall.start.x,cy:this.binder.wall.start.y,r:this.wallBinderBallsRadius}),o=this.qSVG.create("none","circle",{class:"circle_css",cx:this.binder.wall.end.x,cy:this.binder.wall.end.y,r:this.wallBinderBallsRadius});this.binder.graph=this.qSVG.create("none","g"),this.binder.graph.append(e),this.binder.graph.append(t),this.binder.graph.append(o),this.boxBind.current.appendChild(this.binder.graph),this.binder.type="segment",this.cursor("pointer")}}else if(i=this.editor.nearWall(this.snap,this.WALLS,this.nearWallBinderRadius)){if((!this.selectedBinder||!this.selectedBinder.obj||this.selectedBinder.obj&&-1===this.editor.objFromWall(i.wall).indexOf(this.selectedBinder.obj))&&(!this.selectedBinder||!this.selectedBinder.wall||this.selectedBinder.wall&&this.selectedBinder.wall!==i.wall)&&i&&!this.binder){Wo.log("Wall objects"),Wo.log(this.editor.objFromWall(i.wall)),this.selectedBinder&&this.editor.objFromWall(i.wall).length>0&&Wo.log(this.editor.objFromWall(i.wall).indexOf(this.selectedBinder.obj)),i=i.wall,this.editor.objFromWall(i).length>0&&this.editor.inWallRib2(i),this.binder={},this.binder.wall=i,this.inWallRib(this.binder.wall);let e=this.qSVG.create("none","line",{x1:this.binder.wall.start.x,y1:this.binder.wall.start.y,x2:this.binder.wall.end.x,y2:this.binder.wall.end.y,"stroke-width":this.wallSize,stroke:"#19ab7f"}),t=this.qSVG.create("none","circle",{class:"circle_css",cx:this.binder.wall.start.x,cy:this.binder.wall.start.y,r:this.wallBinderBallsRadius}),o=this.qSVG.create("none","circle",{class:"circle_css",cx:this.binder.wall.end.x,cy:this.binder.wall.end.y,r:this.wallBinderBallsRadius});this.binder.graph=this.qSVG.create("none","g"),this.binder.graph.append(e),this.binder.graph.append(t),this.binder.graph.append(o),this.boxBind.current.appendChild(this.binder.graph),this.binder.type="segment",this.cursor("pointer")}}else this.binder&&"segment"===this.binder.type&&(this.removeBinder(),this.cursor("default"),this.rib())}}function zo(e){Wo.log("Angle",e.angle),Wo.log("Angle sign",e.angleSign),this.windowRotationAxisDirectionGraph&&this.windowRotationAxisDirectionGraph.remove();const t=this.createWindowRotationSvg(e,e.additionalParams.curvePoints,e.additionalParams.rotationDirection);this.windowRotationAxisDirectionGraph=t.svgGroupElement,this.boxBind.current.appendChild(this.windowRotationAxisDirectionGraph),this.windowRotationAxisDirectionGraph.appendChild(t.curveArrowPath)}var Ho=i(1317);let Go=!1;function Uo(e){"layer_mode"!==this.mode&&!Go&&e.shiftKey&&(this.snap=this.calcul_snap(e,this.grid_snap),this.pox=this.snap.xMouse,this.poy=this.snap.yMouse),Ho.log("Mouse move mode"+this.mode),Go=e.shiftKey,this.textAndUploadFloorplanImageBinderCreation(e,!0),this.roomModeBinderCreation(e),this.selectModeObj2DWallNodeWallSegmentBinderCreation(e);"bind_mode"!==this.mode&&!e.touches&&("select_mode"===this.mode&&"on"===this.drag||"layer_mode"!==this.mode&&e.shiftKey)&&(this.snap=this.calcul_snap(e,this.grid_snap),this.cursor("move"),this.distX=(this.snap.xMouse-this.pox)*this.zoomFactor,this.distY=(this.snap.yMouse-this.poy)*this.zoomFactor,this.pox=this.snap.xMouse-this.distX,this.poy=this.snap.yMouse-this.distY,this.zoom_maker("zoomdrag",this.distX,this.distY))}var qo=i(1317);function Yo(){if(qo.log("Mouse up mode"+this.mode),this.showRib&&K(this.boxScale.current,0,null,"inline",!1),this.drag="off",this.cursor("default"),"select_mode"===this.mode&&this.binder&&this.removeBinder(),"room_mode"===this.mode){if(!this.binder)return!1;this.removeSelectedBinder(),this.selectedBinder=this.binder,this.selectedBinder.binderType="room",this.binder=null,this.setRoomToolsValues(),qo.log("Room mode"),this.translateRightBox(this.roomTools.current,-this.rightBoxWidth,!0),this.cursor("default")}if("bind_mode"===this.mode&&(this.action=0,this.construc=0,this.binder)){if(this.foncButton("select_mode","dont_save"),"node"===this.binder.type&&(qo.log("Mouse up bind mode NODE"),this.editor.removeZeroLengthWallsAndSliceExistingWalls(),this.editor.architect(this.WALLS)),"segment"===this.binder.type){let e=!1;if(this.binder.wall.start===this.binder.before&&(e=!0),e){this.boxInfo.current.innerHTML="Modify the wall",qo.log("mainComponentThis.binder wall:"),qo.log(this.binder),this.hideActiveRightBox(),this.translateRightBox(this.wallTools.current,-this.rightBoxWidth,!0),this.setWallToolsValues(this.binder.wall),this.removeSelectedBinder(),this.selectedBinder=this.binder,this.selectedBinder.binderType="wall",this.binder=null;for(let e=0;e<this.selectedBinder.graph.children.length;e++)this.selectedBinder.graph.children[e].setAttribute("stroke","#0cacf2"),this.selectedBinder.graph.children[e].setAttribute("fill","#0cacf2"),this.selectedBinder.graph.children[e].style.stroke="#0cacf2",this.selectedBinder.graph.children[e].style.fill="#0cacf2"}else qo.log("Mouse up bind mode pomican cijeli zid"),this.editor.removeZeroLengthWallsAndSliceExistingWalls(),this.editor.architect(this.WALLS);this.equation1=null,this.equation2=null,this.equation3=null}else if("obj"===this.binder.type&&"inWall"===this.binder.family){if(Math.abs(this.binder.oldXY.x-this.binder.x)+Math.abs(this.binder.oldXY.y-this.binder.y)<1){this.isDoorObject(this.binder.obj.type)?this.boxInfo.current.innerHTML="Config door":this.boxInfo.current.innerHTML="Config window",this.openWallItemToolsRightBox(this.binder.obj),this.cursor("default"),this.removeSelectedBinder(),this.selectedBinder=this.binder,this.selectedBinder.graph.querySelector(".circle_css_2")&&this.selectedBinder.graph.querySelector(".circle_css_2").classList.remove("circle_css_2"),this.selectedBinder.binderType="wallItem",this.binder=null;for(let e=0;e<this.selectedBinder.graph.children.length;e++)this.selectedBinder.graph.children[e].setAttribute("stroke","#0cacf2"),this.selectedBinder.graph.children[e].setAttribute("fill","#0cacf2"),this.selectedBinder.graph.children[e].style.stroke="#0cacf2",this.selectedBinder.graph.children[e].style.fill="#0cacf2"}else this.mode="select_mode",this.action=0,this.removeBinder()}else if("boundingBox"===this.binder.type){let e=Math.abs(this.binder.oldX-this.binder.x)+Math.abs(this.binder.oldY-this.binder.y),t=this.binder.obj;if(qo.log("target object: "),qo.log(t),e<1)if(this.binder.additionalParams.onWallObjectBBox||t.params.move){let e="";if(this.binder.additionalParams.onWallObjectBBox)e="wallItem",this.boxInfo.current.innerHTML="lights"===t.class?"Modify light":"Modify furniture",this.openWallItemToolsRightBox(t);else if("homeAssistant"===t.class||"sensors"===t.class)this.boxInfo.current.innerHTML="sensor"===t.type?"Modify sensor":"Modify entity",this.openHomeAssistantBindingsToolsRightBox(t);else{e="freeItem";let i="";"text"===t.class?(K(this.freeItemTextToolsRef.current,0),i="Modify text"):(X(this.freeItemTextToolsRef.current,0),("lights"===t.class&&"free"===t.family||"furniture"===t.class)&&(i="lights"===t.class&&"free"===t.family?"Modify light":this.isFanObject(t.type)?"Modify fan":this.isCoverObject(t.type)?"Modify cover":this.isPresenceObject(t.type)?"Modify presence":"Modify furniture item")),this.boxInfo.current.innerHTML=i,this.openFreeItemToolsRightBox(t)}this.cursor("default"),this.removeSelectedBinder(),this.selectedBinder=this.binder,this.binder=null,this.selectedBinder.binderType=e}else this.mode="select_mode",this.action=0,this.removeBinder()}"bind_mode"===this.mode&&this.binder&&(qo.log("Makni mainComponentThis.binder"),this.removeBinder())}"edit_room_mode"!==this.mode&&(this.editor.showScaleBox(),this.rib())}var Ko=i(1317);function Xo(e){if("floorplan_image_scaling"!==this.mode&&"floorplan_image_translation"!==this.mode||(this.snap=this.calcul_snap(e,this.grid_snap),this.uploadFloorplanImageToolsRef.current.handleMouseDownAction(this.snap)),"select_mode"===this.mode)if(Ko.log("Inside select mode"),Ko.log(this.binder),!this.binder||"segment"!==this.binder.type&&"node"!==this.binder.type&&"obj"!==this.binder.type&&"boundingBox"!==this.binder.type)this.action=0,this.drag="on",this.snap=this.calcul_snap(e,this.grid_snap),this.pox=this.snap.xMouse,this.poy=this.snap.yMouse,this.selectModeRightClickDraggOn=2===e.button;else{if(Ko.log("Set bind mode"),this.mode="bind_mode","obj"===this.binder.type&&(this.action=1),"boundingBox"===this.binder.type&&(this.action=1),"node"===this.binder.type){X(this.boxScale.current,0,null,!1);let e=this.binder.data;this.pox=e.x,this.poy=e.y;let t,i={x:this.pox,y:this.poy};this.wallListObj=[],this.wallListRun=[];for(let o=this.WALLS.length-1;o>-1;o--)if(se(this.WALLS[o].start,i)||se(this.WALLS[o].end,i)){this.wallListRun.push(this.WALLS[o]);break}null!=this.wallListRun[0].child&&(se(this.wallListRun[0].child.start,i)||se(this.wallListRun[0].child.end,i))&&this.wallListRun.push(this.wallListRun[0].child),null!=this.wallListRun[0].parent&&(se(this.wallListRun[0].parent.start,i)||se(this.wallListRun[0].parent.end,i))&&this.wallListRun.push(this.wallListRun[0].parent);for(let o in this.wallListRun)if(se(this.wallListRun[o].start,i)||se(this.wallListRun[o].end,i)){let e=this.wallListRun[o].start;se(this.wallListRun[o].start,i)&&(e=this.wallListRun[o].end),t=this.editor.objFromWall(this.wallListRun[o]);let s=this.wallListRun[o];for(let i=0;i<t.length;i++){let o=t[i],n=Ce(o,e);this.wallListObj.push({wall:s,from:e,distance:n,obj:o,indexObj:i})}}this.magnetic=0,this.action=1}if("segment"===this.binder.type){X(this.boxScale.current,0,null,!1);let e=this.binder.wall;if(this.binder.before=this.binder.wall.start,this.equation2=this.editor.createEquationFromWall(e),null!=e.parent){this.equation1=this.editor.createEquationFromWall(e.parent);let t=this.qSVG.angleBetweenEquations(this.equation1.A,this.equation2.A);if(t<20||t>160){let t=!0;for(let i in this.WALLS)if(me(e.start,this.WALLS[i].coords)&&!se(this.WALLS[i],e.parent)&&!se(this.WALLS[i],e)){null!=e.parent.parent&&se(e,e.parent.parent)&&(e.parent.parent=null),null!=e.parent.child&&se(e,e.parent.child)&&(e.parent.child=null),e.parent=null,t=!1;break}if(t){let t;se(e.parent.end,e.start,"1")?(t=new Lo(e.parent.end,e.start,"normal",e.thick,e.material,e),Ko.log("Push new wall "+JSON.stringify(t)),this.WALLS.push(t),t.parent=e.parent,t.child=e,e.parent.child=t,e.parent=t,this.equation1=this.qSVG.perpendicularEquation(this.equation2,e.start.x,e.start.y)):se(e.parent.start,e.start,"2")&&(t=new Lo(e.parent.start,e.start,"normal",e.thick,e.material,e),Ko.log("Push new wall "+JSON.stringify(t)),this.WALLS.push(t),t.parent=e.parent,t.child=e,e.parent.parent=t,e.parent=t,this.equation1=this.qSVG.perpendicularEquation(this.equation2,e.start.x,e.start.y))}}}if(null==e.parent){let t=!1;for(let i in this.WALLS)if(me(e.start,this.WALLS[i].coords)&&!se(this.WALLS[i].coords,e.coords)){let e=this.qSVG.angleBetweenEquations(this.WALLS[i].equations.base.A,this.equation2.A);if(e<20||e>160)break;this.equation1=this.editor.createEquationFromWall(this.WALLS[i]),this.equation1.follow=this.WALLS[i],this.equation1.backUp={coords:this.WALLS[i].coords,start:this.WALLS[i].start,end:this.WALLS[i].end,child:this.WALLS[i].child,parent:this.WALLS[i].parent},t=!0;break}t||(this.equation1=this.qSVG.perpendicularEquation(this.equation2,e.start.x,e.start.y))}if(null!=e.child){this.equation3=this.editor.createEquationFromWall(e.child);let t=this.qSVG.angleBetweenEquations(this.equation3.A,this.equation2.A);if(t<20||t>160){let t=!0;for(let i in this.WALLS)if(me(e.end,this.WALLS[i].coords)&&!se(this.WALLS[i],e.child)&&!se(this.WALLS[i],e)){null!=e.child.parent&&se(e,e.child.parent)&&(e.child.parent=null),null!=e.child.child&&se(e,e.child.child)&&(e.child.child=null),e.child=null,t=!1;break}if(t)if(se(e.child.start,e.end)){let t=new Lo(e.end,e.child.start,"new",e.thick,e.material,e);Ko.log("Push new wall "+JSON.stringify(t)),this.WALLS.push(t),t.parent=e,t.child=e.child,e.child.parent=t,e.child=t,this.equation3=this.qSVG.perpendicularEquation(this.equation2,e.end.x,e.end.y)}else if(se(e.child.end,e.end)){let t=new Lo(e.end,e.child.end,"normal",e.thick,e.material,e);Ko.log("Push new wall "+JSON.stringify(t)),this.WALLS.push(t),t.parent=e,t.child=e.child,e.child.child=t,e.child=t,this.equation3=this.qSVG.perpendicularEquation(this.equation2,e.end.x,e.end.y)}}}if(null==e.child){let t=!1;for(let i in this.WALLS)if(me(e.end,this.WALLS[i].coords)&&!se(this.WALLS[i].coords,e.coords,"4")){let e=this.qSVG.angleBetweenEquations(this.WALLS[i].equations.base.A,this.equation2.A);if(e<20||e>160)break;this.equation3=this.editor.createEquationFromWall(this.WALLS[i]),this.equation3.follow=this.WALLS[i],this.equation3.backUp={coords:this.WALLS[i].coords,start:this.WALLS[i].start,end:this.WALLS[i].end,child:this.WALLS[i].child,parent:this.WALLS[i].parent},t=!0;break}t||(this.equation3=this.qSVG.perpendicularEquation(this.equation2,e.end.x,e.end.y))}this.equationFollowers=[];for(let i in this.WALLS)null==this.WALLS[i].child&&me(this.WALLS[i].end,e.coords)&&!se(e,this.WALLS[i])&&this.equationFollowers.push({wall:this.WALLS[i],eq:this.editor.createEquationFromWall(this.WALLS[i]),type:"end"}),null==this.WALLS[i].parent&&me(this.WALLS[i].start,e.coords)&&!se(e,this.WALLS[i])&&this.equationFollowers.push({wall:this.WALLS[i],eq:this.editor.createEquationFromWall(this.WALLS[i]),type:"start"});this.equationsObj=[];let t=this.editor.objFromWall(e);for(let i=0;i<t.length;i++){let o=t[i];this.equationsObj.push({obj:o,wall:e,eq:this.qSVG.perpendicularEquation(this.equation2,o.x,o.y)})}this.action=1}}}function Zo(e){_(e,(e=>{const{xMouse:t,yMouse:i}=this.calcul_snap(e);if(this.showMapLayer2DInputRef.current.getCheckedStatus())var o=this.calcul_snap({pageX:this.offset.left,pageY:this.offset.top+this.offset.scrollY});if(this.setZoomParameters(e.deltaY<0?"zoomin":"zoomout",this.zoomXMove,!0)){const{xMouse:s,yMouse:n}=this.calcul_snap(e);this.originX_viewbox=this.originX_viewbox-(s-t),this.originY_viewbox=this.originY_viewbox-(n-i),this.showMapLayer2DInputRef.current.getCheckedStatus()&&this.handleMapZoomChange(o),this.drawingAreaPopupActive&&this.drawingAreaPopupZoomTranslateControl(),this.setSvgViewBoxes()}}),100)()}function Jo(e){if(1===e.touches.length)this.touchStartPageCoordinates={pageX:e.changedTouches[0].pageX,pageY:e.changedTouches[0].pageY},this.textAndUploadFloorplanImageBinderCreation(e),this.roomModeBinderCreation(e),this.selectModeObj2DWallNodeWallSegmentBinderCreation(e),this.handleMouseDown(e);else if(2===e.touches.length){this.drag="off",this.touchZoomTouches=[],this.touchZoomTouches.push({identifier:e.touches[0].identifier,pageX:e.touches[0].pageX,pageY:e.touches[0].pageY}),this.touchZoomTouches.push({identifier:e.touches[1].identifier,pageX:e.touches[1].pageX,pageY:e.touches[1].pageY}),this.zoomTouchFocusPoint={pageX:(e.touches[0].pageX+e.touches[1].pageX)/2,pageY:(e.touches[0].pageY+e.touches[1].pageY)/2};const t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY;this.touchZoomDollyStartDistance=Math.sqrt(t*t+i*i)}}var Qo=i(1317);function $o(e){if(e.touches[0].pageX!==this.touchStartPageCoordinates.pageX||e.touches[0].pageY!==this.touchStartPageCoordinates.pageY)if(1===e.touches.length&&"on"===this.drag)Qo.log("Drag"),this.snap=this.calcul_snap(e,this.grid_snap),this.distX=(this.snap.xMouse-this.pox)*this.zoomFactor,this.distY=(this.snap.yMouse-this.poy)*this.zoomFactor,this.pox=this.snap.xMouse-this.distX,this.poy=this.snap.yMouse-this.distY,this.zoom_maker("zoomdrag",this.distX,this.distY);else if(2===e.touches.length){Qo.log("Zoom 2 fingers"),this.binder&&(this.removeBinder(),this.mode="select_mode");const i=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;this.touchZoomDollyEndDistance=Math.sqrt(i*i+o*o);const s=this.touchZoomDollyEndDistance-this.touchZoomDollyStartDistance;if(Qo.log("Distance "+s),0!==s){const{xMouse:e,yMouse:i}=this.calcul_snap(this.zoomTouchFocusPoint);if(this.showMapLayer2DInputRef.current.getCheckedStatus())var t=this.calcul_snap({pageX:this.offset.left,pageY:this.offset.top+this.offset.scrollY});const o=s>0?.95*this.zoomFactor:this.zoomFactor/.95,n=1/o,a=o*this.taille_w;if(s>0){if(this.isOverMaxZoomIn(a,0))return}else if(this.isOverMaxZoomOut(a,0))return;const r=a-this.width_viewbox;Qo.log("Zoom out Width viewbox delta "+r),this.width_viewbox+=r,this.height_viewbox=this.width_viewbox*this.ratio_viewbox,this.originX_viewbox=this.originX_viewbox-r/2,this.originY_viewbox=this.originY_viewbox-r/2*this.ratio_viewbox,this.zoomFactor=this.width_viewbox/this.taille_w;const{xMouse:l,yMouse:h}=this.calcul_snap(this.zoomTouchFocusPoint);this.originX_viewbox=this.originX_viewbox-(l-e),this.originY_viewbox=this.originY_viewbox-(h-i),this.setScaleValueWidth(n),this.showMapLayer2DInputRef.current.getCheckedStatus()&&this.handleMapZoomChange(t),this.drawingAreaPopupActive&&this.drawingAreaPopupZoomTranslateControl(),this.setSvgViewBoxes(),this.touchZoomDollyStartDistance=this.touchZoomDollyEndDistance}}else this.handleMouseMove(e)}function es(e){this.drag="off",this.handleMouseUp(e)}function ts(e){(this.lineModeDraggOn||this.selectModeRightClickDraggOn)&&e.preventDefault(),this.lineModeDraggOn=!1,this.selectModeRightClickDraggOn=!1}var is=i(3308),os=i(1051),ss=i(8393),ns=i(2317),as=i(6788),rs=i(2550),ls=i(1015);class hs extends o.Component{render(){return(0,l.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 95.098 95.098",style:{enableBackground:"new 0 0 95.098 95.098",marginRight:5},xmlSpace:"preserve",children:(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{d:"M47.549,0C21.288,0,0,21.288,0,47.549s21.288,47.549,47.549,47.549c26.262,0,47.549-21.288,47.549-47.549\r S73.811,0,47.549,0z M47.549,85.098C26.844,85.098,10,68.253,10,47.549S26.844,10,47.549,10s37.549,16.845,37.549,37.549\r S68.254,85.098,47.549,85.098z"}),(0,l.jsx)("path",{d:"M77.665,29.911c-0.25-0.428-0.755-0.633-1.231-0.503l-33.783,9.213c-0.186,0.052-0.355,0.151-0.492,0.288L17.596,63.865\r c-0.346,0.354-0.414,0.895-0.164,1.32c0.25,0.428,0.755,0.635,1.232,0.504l33.783-9.214c0.093-0.024,0.182-0.062,0.265-0.11\r c0.083-0.049,0.159-0.108,0.228-0.178l24.562-24.957C77.848,30.879,77.915,30.337,77.665,29.911z M26.705,59.756l16.46-16.725\r l6.179,10.551L26.705,59.756z"})]})})}}const cs=hs;class ds extends o.Component{render(){return(0,l.jsx)("svg",{width:"20px",height:"20px",style:{marginRight:5},viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"m22 6-3-4-3 4h2v4h-2l3 4 3-4h-2V6zM9.307 4l-6 16h2.137l1.875-5h6.363l1.875 5h2.137l-6-16H9.307zm-1.239 9L10.5 6.515 12.932 13H8.068z"})})}}const ps=ds;class ms extends o.Component{render(){return(0,l.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"25px",height:"25px",viewBox:"0 0 477.381 477.382",style:{marginRight:5,enableBackground:"new 0 0 477.381 477.382"},xmlSpace:"preserve",children:(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{d:"M477.381,103.373c0-54.988-44.577-99.564-99.565-99.564c-53.146,0-96.562,41.64-99.413,94.074\r c-13.35-2.513-27.168-3.838-41.322-3.838c-113.595,0-205.681,84.96-205.681,189.764c0,28.472,6.81,55.472,18.986,79.71\r L1.735,451.491c-2.703,4.889-2.215,10.917,1.239,15.308c2.673,3.397,6.721,5.3,10.911,5.3c1.223,0,2.457-0.163,3.674-0.498\r l106.506-29.233c32.435,19.721,71.269,31.206,113.016,31.206c113.594,0,205.681-84.96,205.681-189.764\r c0-32.378-8.8-62.854-24.3-89.521C453.186,178.737,477.381,143.881,477.381,103.373z M377.816,177.937\r c-41.115,0-74.565-33.449-74.565-74.564c0-41.115,33.45-74.564,74.565-74.564s74.565,33.449,74.565,74.564\r C452.381,144.487,418.931,177.937,377.816,177.937z"}),(0,l.jsx)("path",{d:"M419.955,92.871h-31.636V61.233c0-5.801-4.703-10.503-10.503-10.503c-5.799,0-10.502,4.702-10.502,10.503V92.87h-31.636\r c-5.802,0-10.503,4.702-10.503,10.503c0,5.8,4.701,10.502,10.503,10.502h31.636v31.636c0,5.801,4.703,10.503,10.502,10.503\r c5.801,0,10.503-4.702,10.503-10.503v-31.636h31.636c5.802,0,10.503-4.702,10.503-10.502\r C430.458,97.572,425.755,92.871,419.955,92.871z"})]})})}}const us=ms;class gs extends o.Component{render(){return(0,l.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 347.523 347.523",style:{marginRight:5,enableBackground:"new 0 0 347.523 347.523"},xmlSpace:"preserve",children:(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{d:"M108.674,196.125c-2.857-0.402-5.777-0.592-8.746-0.534c-14.267,0.278-36.342,6.092-60.493,32.207\r c-19.171,20.729-19.954,42.635-20.644,61.961c-0.66,18.474-1.181,33.065-16.507,43.727c-1.506,1.049-2.318,2.837-2.113,4.661\r c0.128,1.147,0.645,2.191,1.434,2.98c0.466,0.466,1.026,0.843,1.658,1.099c28.523,11.553,77.316,5.895,117.044-33.833\r c18.043-18.044,28.812-37.145,31.14-55.233c0.607-4.719,0.618-9.323,0.091-13.763L108.674,196.125z M100.915,229.382\r c-1.553,2.174-3.859,3.612-6.494,4.052c-19.209,3.202-25.884,15.953-26.159,16.494c-1.627,3.387-5.167,5.611-8.989,5.611\r c-0.337,0-0.676-0.017-1.015-0.052c-1.149-0.117-2.264-0.432-3.313-0.936c-4.97-2.391-7.069-8.376-4.681-13.347\r c0.442-0.918,11.153-22.546,40.869-27.5c0.546-0.09,1.1-0.136,1.647-0.136c4.908,0,9.055,3.516,9.861,8.357\r C103.08,224.559,102.467,227.207,100.915,229.382z"}),(0,l.jsx)("path",{d:"M340.587,6.796c-8.615-8.614-22.425-9.1-31.624-1.112c-5.782,5.021-141.818,123.166-160.166,141.513\r c-9.175,9.175-20.946,24.898-31.124,39.428l42.864,43.271c14.546-10.18,30.345-22.003,39.65-31.308\r C218.749,180.024,336.69,44.193,341.703,38.42C349.688,29.22,349.201,15.41,340.587,6.796z"})]})})}}const fs=gs;class bs extends o.Component{render(){return(0,l.jsx)("svg",{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"22px",height:"22px",viewBox:"0 0 360.39 360.389",style:{enableBackground:"new 0 0 360.39 360.389"},xmlSpace:"preserve",children:(0,l.jsx)("g",{children:(0,l.jsx)("path",{d:"M301.123,173.306L118.995,3.265c-3.242-3.038-7.891-4.049-12.105-2.639c-4.211,1.404-7.317,5.006-8.086,9.389\r L55.602,255.404c-0.854,4.847,1.306,9.717,5.464,12.341c4.152,2.625,9.49,2.465,13.491-0.378l59.968-42.699l47.219,127.448\r c2.127,6.336,8.984,9.765,15.332,7.648l62.087-20.771c6.342-2.116,9.771-8.984,7.648-15.327l-47.228-127.43l73.596-1.975\r c4.905-0.13,9.262-3.215,11.006-7.802C305.929,181.85,304.717,176.654,301.123,173.306z M202.591,172.455\r c-3.842,0.109-7.4,2.004-9.599,5.163c-2.205,3.147-2.778,7.146-1.561,10.781l48.557,131.467l-39.111,13.075l-48.56-131.455\r c-1.224-3.647-4.093-6.502-7.743-7.679c-3.656-1.188-7.643-0.585-10.772,1.649l-49.216,35.027l34.206-194.281l144.19,134.636\r L202.591,172.455z"})})})}}const ws=bs;class Cs extends o.Component{render(){return(0,l.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 60 60",style:{enableBackground:"new 0 0 60 60",width:22,height:22},xmlSpace:"preserve",children:(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{d:"M58,37.104V4c0-0.553-0.448-1-1-1H1C0.448,3,0,3.447,0,4v44c0,0.553,0.448,1,1,1h34.003c1.963,4.693,6.6,8,11.997,8\r c7.168,0,13-5.832,13-13C60,41.465,59.26,39.105,58,37.104z M34.359,47H2V5h54v29.622c-0.17-0.164-0.354-0.311-0.532-0.465\r c-0.088-0.075-0.171-0.155-0.261-0.228c-0.235-0.192-0.48-0.37-0.728-0.545c-0.092-0.065-0.181-0.135-0.275-0.198\r c-0.245-0.163-0.498-0.312-0.754-0.458c-0.109-0.063-0.214-0.13-0.325-0.189c-0.077-0.041-0.154-0.083-0.232-0.123\r c0.179-0.385,0.112-0.852-0.218-1.154l-12-11c-0.196-0.179-0.45-0.277-0.72-0.262c-0.265,0.012-0.515,0.129-0.694,0.325\r l-9.794,10.727l-4.743-4.743c-0.374-0.373-0.972-0.391-1.368-0.044L6.339,41.249c-0.415,0.365-0.455,0.997-0.09,1.412\r C6.447,42.886,6.723,43,7,43c0.234,0,0.47-0.082,0.66-0.249l16.313-14.362l10.302,10.301c0.203,0.203,0.47,0.295,0.736,0.287\r C34.361,40.523,34,42.22,34,44c0,0.493,0.033,0.977,0.087,1.456c0.009,0.075,0.024,0.149,0.034,0.224\r c0.056,0.428,0.131,0.849,0.227,1.262C34.353,46.961,34.354,46.981,34.359,47z M48.779,31.136\r c-0.162-0.022-0.321-0.055-0.485-0.071C47.867,31.023,47.435,31,47,31c-4.773,0-8.942,2.593-11.203,6.437\r c-0.036-0.054-0.06-0.114-0.107-0.162l-4.807-4.807l9.181-10.054l9.694,8.887c-0.067-0.015-0.133-0.032-0.2-0.045\r C49.301,31.204,49.039,31.172,48.779,31.136z M47,55c-4.787,0-8.859-3.08-10.367-7.358c-0.094-0.267-0.176-0.536-0.249-0.806\r c-0.015-0.058-0.03-0.115-0.045-0.173c-0.06-0.238-0.112-0.476-0.156-0.716c-0.024-0.133-0.042-0.267-0.061-0.401\r c-0.026-0.18-0.054-0.36-0.071-0.54C36.021,44.674,36,44.339,36,44c0-6.065,4.935-11,11-11c0.426,0,0.848,0.031,1.265,0.079\r c0.127,0.015,0.25,0.039,0.375,0.057c0.291,0.044,0.579,0.096,0.863,0.162c0.141,0.033,0.281,0.07,0.421,0.108\r c0.268,0.074,0.531,0.159,0.792,0.253c0.134,0.048,0.269,0.094,0.4,0.147c0.295,0.119,0.583,0.255,0.866,0.399\r c0.083,0.042,0.17,0.077,0.252,0.121c0.342,0.185,0.671,0.393,0.992,0.614c0.131,0.09,0.255,0.19,0.382,0.286\r c0.199,0.15,0.395,0.305,0.584,0.469c0.127,0.11,0.251,0.224,0.373,0.339c0.193,0.184,0.379,0.377,0.559,0.575\r c0.094,0.103,0.191,0.202,0.281,0.309c0.261,0.311,0.51,0.634,0.739,0.976C57.315,39.643,58,41.743,58,44\r C58,50.065,53.065,55,47,55z"}),(0,l.jsx)("path",{d:"M53,43h-5v-5c0-0.553-0.448-1-1-1s-1,0.447-1,1v5h-5c-0.552,0-1,0.447-1,1s0.448,1,1,1h5v5c0,0.553,0.448,1,1,1\r s1-0.447,1-1v-5h5c0.552,0,1-0.447,1-1S53.552,43,53,43z"}),(0,l.jsx)("path",{d:"M16,25.138c3.071,0,5.569-2.498,5.569-5.568C21.569,16.498,19.071,14,16,14s-5.569,2.498-5.569,5.569\r C10.431,22.64,12.929,25.138,16,25.138z M16,16c1.968,0,3.569,1.602,3.569,3.569S17.968,23.138,16,23.138s-3.569-1.601-3.569-3.568\r S14.032,16,16,16z"})]})})}}const xs=Cs;class ys extends o.Component{render(){return(0,l.jsx)("svg",{fill:"#000000",height:"800px",width:"800px",version:"1.1",id:"Capa_1",viewBox:"0 0 297 297",children:(0,l.jsx)("path",{d:"M148.5,0C66.653,0,0.067,66.616,0.067,148.499C0.067,230.383,66.653,297,148.5,297s148.433-66.617,148.433-148.501\r C296.933,66.616,230.347,0,148.5,0z M158.597,276.411v-61.274c0-5.575-4.521-10.097-10.097-10.097s-10.097,4.521-10.097,10.097\r v61.274c-62.68-4.908-112.845-55.102-117.747-117.814h61.207c5.575,0,10.097-4.521,10.097-10.097s-4.522-10.097-10.097-10.097\r H20.656C25.558,75.69,75.723,25.497,138.403,20.589v61.274c0,5.575,4.521,10.097,10.097,10.097s10.097-4.521,10.097-10.097V20.589\r c62.681,4.908,112.846,55.102,117.747,117.814h-61.207c-5.575,0-10.097,4.521-10.097,10.097s4.521,10.097,10.097,10.097h61.207\r C271.441,221.31,221.276,271.503,158.597,276.411z"})})}}const Ss=ys;class vs extends o.Component{render(){return(0,l.jsx)("svg",{fill:"#000000",width:"22px",height:"22px",viewBox:"0 0 75.000000 75.000000",preserveAspectRatio:"xMidYMid meet",children:(0,l.jsx)("g",{transform:"translate(0.000000,75.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:(0,l.jsx)("path",{d:"M337 583 c-4 -3 -7 -46 -7 -95 l0 -88 -100 0 -100 0 0 -140 0 -140\r 240 0 240 0 0 235 0 235 -133 0 c-74 0 -137 -3 -140 -7z m243 -103 l0 -80 -55\r 0 c-42 0 -55 -3 -55 -15 0 -12 13 -15 55 -15 l55 0 0 -110 0 -110 -105 0 -105\r 0 0 50 c0 38 -4 50 -15 50 -11 0 -15 -12 -15 -50 l0 -50 -90 0 -90 0 0 110 0\r 110 100 0 100 0 0 95 0 95 110 0 110 0 0 -80z"})})})}}const Ds=vs;class Ts extends o.Component{render(){return(0,l.jsx)("svg",{fill:"#000000",width:"22px",height:"22px",viewBox:"0 0 75.000000 75.000000",preserveAspectRatio:"xMidYMid meet",children:(0,l.jsxs)("g",{transform:"translate(0.000000,75.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:[(0,l.jsx)("path",{d:"M375 654 c-16 -17 -12 -53 9 -66 30 -20 66 0 66 37 0 42 -44 59 -75\r 29z"}),(0,l.jsx)("path",{d:"M311 516 c-44 -34 -70 -87 -71 -143 0 -41 28 -26 35 18 6 37 40 87\r 51 76 7 -7 -23 -150 -45 -208 -12 -30 -32 -70 -46 -89 -27 -36 -31 -55 -15\r -65 25 -15 50 11 96 100 l48 94 40 -36 c55 -49 56 -50 56 -111 0 -50 2 -53 23\r -50 18 2 23 10 25 47 5 65 -3 86 -58 146 -28 30 -50 61 -50 68 0 6 7 32 14 57\r 12 40 15 43 22 23 5 -12 26 -33 47 -47 66 -45 94 -28 32 20 -19 14 -47 49 -63\r 78 -24 45 -31 51 -62 54 -27 1 -45 -6 -79 -32z"})]})})}}const js=Ts;class _s extends o.Component{render(){return(0,l.jsx)("svg",{fill:"#000000",width:"22px",height:"22px",viewBox:"0 0 75.000000 75.000000",preserveAspectRatio:"xMidYMid meet",children:(0,l.jsx)("g",{transform:"translate(0.000000,75.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:(0,l.jsx)("path",{d:"M299 595 l-84 -52 -5 -49 c-5 -47 -6 -49 -67 -84 l-62 -35 -3 -88\r c-2 -49 0 -97 4 -107 3 -9 49 -39 100 -66 l94 -47 195 114 194 114 3 87 3 87\r -43 27 c-24 15 -88 55 -144 90 l-100 62 -85 -53z m214 -55 c58 -36 107 -67\r 107 -70 0 -3 -31 -23 -70 -44 l-70 -37 -45 32 -45 32 0 80 c0 43 4 77 8 75 4\r -1 56 -32 115 -68z m-143 -15 c0 -63 -3 -76 -19 -85 -28 -15 -31 -13 -31 18 0\r 18 -10 35 -32 53 l-32 27 49 31 c27 17 53 31 57 31 4 0 8 -34 8 -75z m-100\r -35 c0 -4 -7 -10 -15 -14 -10 -4 -15 1 -15 14 0 13 5 18 15 14 8 -4 15 -10 15\r -14z m28 -77 c-3 -45 -6 -49 -46 -71 l-43 -24 -41 27 -41 27 74 44 c41 24 80\r 44 87 44 9 0 12 -13 10 -47z m352 -31 c0 -44 -5 -63 -17 -74 -27 -22 -331\r -198 -343 -198 -7 0 -10 26 -8 73 l3 72 170 92 c94 51 176 92 183 93 8 0 12\r -18 12 -58z m-231 19 l34 -28 -88 -46 c-97 -52 -96 -52 -113 -35 -9 9 -2 17\r 28 35 27 17 40 31 40 46 0 13 11 29 28 39 35 21 32 22 71 -11z m-233 -97 l74\r -46 0 -74 c0 -41 -3 -74 -7 -74 -5 0 -41 17 -80 37 l-73 38 0 83 c0 45 3 82 6\r 82 4 0 40 -21 80 -46z"})})})}}const Is=_s;class ks extends o.Component{render(){return(0,l.jsx)("svg",{viewBox:"0 0 512 512",children:(0,l.jsx)("g",{children:(0,l.jsx)("g",{children:(0,l.jsx)("path",{d:"M497.972,113.851l-92.47-92.47c-9.06-9.061-21.107-14.051-33.921-14.051c-12.813,0-24.861,4.99-33.922,14.051\r l-276.1,276.099l21.069,21.069l-25.993,25.993c-6.052,6.051-9.385,14.099-9.385,22.658c0,8.558,3.333,16.605,9.385,22.657\r l1.198,1.198L0,448.885l85.151,55.786l43.149-43.15l1.197,1.198c6.052,6.052,14.098,9.385,22.657,9.385\r c8.559,0,16.605-3.333,22.657-9.385l25.993-25.992l21.068,21.068l276.101-276.099\r C516.676,162.989,516.676,132.554,497.972,113.851z M81.139,465.757l-33.283-21.804l31.439-31.439l27.545,27.545L81.139,465.757z\r M153.351,441.255c-0.658,0.658-1.734,0.658-2.392,0l-1.197-1.198l-70.468-70.467l-1.198-1.198\r c-0.329-0.329-0.495-0.731-0.495-1.196c0-0.465,0.167-0.867,0.495-1.197l25.992-25.992l75.253,75.254L153.351,441.255z\r M221.873,414.87L104.482,297.479l36.67-36.67l117.391,117.391L221.873,414.87z M476.511,160.233L280.005,356.738L162.614,239.347\r L359.12,42.843c3.329-3.329,7.754-5.162,12.46-5.162s9.131,1.833,12.459,5.161l92.47,92.47\r C483.381,142.183,483.381,153.362,476.511,160.233z"})})})})}}const Ps=ks;class Fs extends o.Component{constructor(e){super(e),this.smallGridSize="metric"===e.measureSystemContext.userUnit?e.svgMeterUnits:M(e.imperialSystemSquareFeetSize,"feet","meter")*e.svgMeterUnits,this.bigGridSizeSmallGridCount=6,this.bigGridSize=this.bigGridSizeSmallGridCount*this.smallGridSize}render(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("pattern",{id:"smallGrid",width:this.smallGridSize,height:this.smallGridSize,patternUnits:"userSpaceOnUse",children:(0,l.jsx)("path",{d:"M 30 0 L 0 0 0 30",fill:"none",stroke:"#777",strokeWidth:"0.25"})}),(0,l.jsxs)("pattern",{id:"grid",width:this.bigGridSize,height:this.bigGridSize,patternUnits:"userSpaceOnUse",children:[(0,l.jsx)("rect",{width:this.bigGridSize,height:this.bigGridSize,fill:"url(#smallGrid)"}),(0,l.jsx)("path",{d:"M 200 10 L 200 0 L 190 0 M 0 10 L 0 0 L 10 0 M 0 190 L 0 200 L 10 200 M 190 200 L 200 200 L 200 190",fill:"none",stroke:"#999",strokeWidth:"0.8"})]})]})}}const Os=Fs;class Ms extends o.Component{render(){return(0,l.jsx)("div",{className:"indoor-modal",ref:this.props.modalRef,style:this.props.indoorModalContainerStyle||{},children:(0,l.jsx)("div",{className:"indoor-modal-dialog ".concat(this.props.indoorModalDialogClasses||""),style:this.props.indoorModalDialogStyle||{},children:(0,l.jsxs)("div",{className:"indoor-modal-content",children:[(0,l.jsx)("div",{className:"indoor-modal-header",children:(0,l.jsx)("h3",{className:"indoor-modal-title",children:"GLAMOS Indoor Mapping"})}),this.props.modalBody?(0,l.jsx)("div",{className:"indoor-modal-body",children:this.props.modalBody}):null,this.props.modalFooter?(0,l.jsx)("div",{className:"indoor-modal-footer",children:this.props.modalFooter}):null]})})})}}const Ls=Ms;var Rs=i(1618);class Bs extends o.Component{render(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{ref:this.props.panelRef,className:"panel panel-transition",onMouseMove:()=>this.props.onPanelMouseMove&&this.props.onPanelMouseMove(),style:{width:this.props.panelWidth||200,left:this.props.panelWidth?-this.props.panelWidth:-200},children:(0,l.jsx)("ul",{className:"list-unstyled",children:this.props.children})}),this.props.panelControlRef&&(0,l.jsx)("div",{ref:this.props.panelControlRef,title:"Hide panel",className:"panel-control-container panel-transition svg-center-inside-container",style:this.props.panelControlStyles||{},onClick:()=>this.props.onPanelControlClick(),children:(0,l.jsx)(Rs.Z,{className:"panel-transition"})})]})}}const As=Bs;var Ws=i(1317);class Vs extends o.Component{constructor(e){super(),this.onFloorplanDrawedCallback=()=>{this.floorplanDrawedCallbackCalled||(this.imagePaths.filter((e=>!this.props.usedImagePaths.find((t=>t.name===e.name)))).forEach((e=>this.imageLoadAndDraw(e))),this.floorplanDrawedCallbackCalled=!0)},this.imageLoadAndDraw=e=>{const t=!!e.objId;this.loadingImageDataUrls.push(e.name);const i=new Image;i.onload=()=>{if(this.loadingImageDataUrls=this.loadingImageDataUrls.filter((t=>t!==e.name)),this.loadedImageDataUrls.find((t=>t.id===e.name)))return;const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const o=t.getContext("2d");e.mirrorImage&&(o.translate(e.width,e.height),o.rotate(Math.PI)),o.drawImage(i,0,0,e.width,e.height),this.loadedImageDataUrls.push({id:e.name,dataURL:t.toDataURL("image/".concat(this.props.imageFormat)),width:e.width,height:e.height}),this.forceUpdate((()=>{this.arePatternsLoaded()&&this.props.emitDataLoadedEvent&&document.dispatchEvent(new Event("patternImageDataLoaded"))}))},i.onerror=e=>Ws.log("AsyncSvgImagePattern error",e),i.crossOrigin="anonymous",i.src=this.props.furniturePattern?t?"https://app.klet3d.com/api/glamos/klet3d/objects-download2/".concat(e.objId,"/").concat(e.name,"-top.").concat(this.props.imageFormat):"https://app.klet3d.com/models3D/objMtl/".concat(this.props.publicFolderName,"/").concat(e.folder,"/").concat(e.name,"-top.").concat(this.props.imageFormat):"https://app.klet3d.com/".concat(this.props.publicFolderName,"/").concat(e.name,".").concat(this.props.imageFormat)},this.isPatternLoaded=e=>this.loadedImageDataUrls.find((t=>t.id===e))||this.loadingImageDataUrls.find((t=>t===e))||this.props.usedImagePaths.find((t=>t.name===e)),this.loadPattern=e=>{const t=this.imagePaths.find((t=>t.name===e));t&&this.imageLoadAndDraw(t)},this.clearPatterns=()=>{this.loadingImageDataUrls=[],this.loadedImageDataUrls=[],this.floorplanDrawedCallbackCalled=!1,this.forceUpdate()},this.arePatternsLoaded=()=>0===this.loadingImageDataUrls.length,this.addImagePathData=e=>this.imagePaths=[...this.imagePaths,...e],this.imagePaths=e.imagePaths,this.loadingImageDataUrls=[],this.loadedImageDataUrls=[],this.floorplanDrawedCallbackCalled=!1,this.imageLoadAndDraw=this.imageLoadAndDraw.bind(this),this.onFloorplanDrawedCallback=this.onFloorplanDrawedCallback.bind(this),this.isPatternLoaded=this.isPatternLoaded.bind(this),this.loadPattern=this.loadPattern.bind(this),this.clearPatterns=this.clearPatterns.bind(this),this.arePatternsLoaded=this.arePatternsLoaded.bind(this),this.addImagePathData=this.addImagePathData.bind(this)}componentDidMount(){this.props.usedImagePaths.forEach((e=>this.imageLoadAndDraw(e)))}render(){return this.props.furniturePattern?(0,l.jsx)(o.Fragment,{children:this.loadedImageDataUrls.map((e=>(0,l.jsx)("pattern",{id:e.id,patternUnits:"objectBoundingBox",width:"100%",height:"100%",viewBox:"0 0 ".concat(e.width," ").concat(e.height),preserveAspectRatio:"none",children:(0,l.jsx)("image",{href:e.dataURL,x:0,y:0,width:e.width,height:e.height})},e.id)))}):(0,l.jsx)(o.Fragment,{children:this.loadedImageDataUrls.map((e=>(0,l.jsx)("pattern",{id:e.id,patternUnits:"userSpaceOnUse",width:e.width,height:e.height,children:(0,l.jsx)("image",{href:e.dataURL,x:0,y:0,width:e.width,height:e.height})},e.id)))})}}const Ns=Vs;class Es extends o.Component{render(){return(0,l.jsxs)("defs",{children:[(0,l.jsxs)("linearGradient",{id:"gradientRed",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#e65d5e",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#e33b3c",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientYellow",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#FDEB71",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#F8D800",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientGreen",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#c0f7d9",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#6ce8a3",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientSky",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#c4e0f4",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#87c8f7",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientOrange",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#f9ad67",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#f97f00",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientWhite",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#ffffff",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#f0f0f0",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientGrey",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#666",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#aaa",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientBlue",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#4f72a6",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#365987",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientPurple",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#E2B0FF",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#9F44D3",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientPink",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#f6c4dd",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#f699c7",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientBlack",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#3c3b3b",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#000000",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientNeutral",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#dbc6a0",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#c69d56",stopOpacity:1})]}),(0,l.jsxs)("radialGradient",{id:"uploadFloorplanCursorCircleGradient",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#CD0404"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#FF5D5D"})]}),(0,l.jsx)(Os,{measureSystemContext:this.props.measureSystemContext,svgMeterUnits:this.props.svgMeterUnits,imperialSystemSquareFeetSize:this.props.imperialSystemSquareFeetSize}),(0,l.jsx)("pattern",{id:"floorplan_image_pattern",ref:this.props.floorplanImagePattern,width:0,height:0,patternUnits:"userSpaceOnUse",children:(0,l.jsx)("image",{ref:this.props.floorplanImage,href:"#",x:0,y:0,width:0,height:0,alt:"Floorplan image",preserveAspectRatio:"none"})}),(0,l.jsx)("defs",{children:(0,l.jsx)(Ns,{ref:this.props.wallMaterialsAsyncPatternRef,imagePaths:ji.slice(2).map((e=>({name:e.title,width:256/this.props.floorplan3DScaleFactor,height:256/this.props.floorplan3DScaleFactor}))),usedImagePaths:[],imageFormat:"png",publicFolderName:"wallMaterials",mainComponentThis:this.props.mainComponentThis})}),(0,l.jsx)("defs",{children:(0,l.jsx)(Ns,{ref:this.props.roomTexturesAsyncPatternRef,imagePaths:bo.slice(1).map((e=>({name:e,width:512/this.props.floorplan3DScaleFactor,height:512/this.props.floorplan3DScaleFactor}))),usedImagePaths:[],imageFormat:"png",publicFolderName:"textures",mainComponentThis:this.props.mainComponentThis})}),(0,l.jsx)("defs",{children:(0,l.jsx)(Ns,{ref:this.props.furnitureAsyncPatternRef,imagePaths:[],usedImagePaths:[],imageFormat:"png",publicFolderName:"thumbnails",furniturePattern:!0,mainComponentThis:this.props.mainComponentThis})}),(0,l.jsx)("defs",{children:(0,l.jsx)("marker",{id:"window-rotation-direction-arrow-triangle",viewBox:"0 0 10 10",refX:"5",refY:"5",markerUnits:"strokeWidth",markerWidth:"4",markerHeight:"4",orient:"auto",children:(0,l.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#f00"})})}),(0,l.jsx)("defs",{ref:this.props.roomTextureContainerRef}),(0,l.jsx)("defs",{ref:this.props.roomTexturePreviewContainerRef})]})}}const zs=Es;var Hs=i(7483),Gs=i(5542),Us=i(7579),qs=i(2966),Ys=i(273),Ks=i(7017),Xs=i(1332);class Zs extends o.Component{render(){return(0,l.jsxs)("div",{ref:this.props.mainComponentThis.rightControlsBox,className:"right-controls-box right-box-transition",children:[(0,l.jsx)("div",{className:"moveBox move-box-container",children:(0,l.jsxs)("div",{className:"pull-right move-box",children:[(0,l.jsx)("p",{style:{margin:0},children:(0,l.jsx)("button",{title:"Move up",className:"shadow btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomtop"),children:(0,l.jsx)("div",{className:"svg-center-inside-container",children:(0,l.jsx)(Us.Z,{})})})}),(0,l.jsxs)("p",{style:{margin:0},children:[(0,l.jsx)("button",{title:"Move left",className:"shadow btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomleft"),children:(0,l.jsx)("div",{className:"svg-center-inside-container",children:(0,l.jsx)(Gs.Z,{})})}),(0,l.jsx)("button",{title:"Center",className:"btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomreset"),children:(0,l.jsx)("div",{className:"svg-center-inside-container",children:(0,l.jsx)(Hs.Z,{style:{width:18,height:18}})})}),(0,l.jsx)("button",{title:"Move right",className:"shadow btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomright"),children:(0,l.jsx)("div",{className:"svg-center-inside-container",children:(0,l.jsx)(qs.Z,{})})})]}),(0,l.jsx)("p",{style:{margin:0},children:(0,l.jsx)("button",{title:"Move down",className:"shadow btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoombottom"),children:(0,l.jsx)("div",{className:"svg-center-inside-container",children:(0,l.jsx)(Ys.Z,{})})})})]})}),(0,l.jsx)("div",{ref:this.props.mainComponentThis.mapStylesChangeRef,className:"map-styles-change-container"}),(0,l.jsxs)("div",{className:"zoomBox zoom-box-container",children:[(0,l.jsxs)("div",{className:"pull-right zoom-box",children:[(0,l.jsx)("button",{title:"Zoom in",className:"shadow btn btn btn-default zoom svg-center-inside-container",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomin"),style:{display:"inline-flex"},children:(0,l.jsx)(Ks.Z,{})}),(0,l.jsx)("button",{title:"Zoom out",className:"shadow btn btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomout"),style:{display:"inline-flex"},children:(0,l.jsx)(Xs.Z,{})})]}),(0,l.jsx)("div",{style:{clear:"both"}}),(0,l.jsx)("div",{ref:this.props.mainComponentThis.scaleVal,className:"pull-right scale-box",children:"metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"1m":"".concat(this.props.mainComponentThis.imperialSystemSquareFeetSize,"ft")}),(0,l.jsx)("div",{style:{clear:"both"}})]})]})}}const Js=Zs;class Qs extends o.Component{render(){return(0,l.jsxs)("div",{ref:this.props.containerRef,style:this.props.containerStyle||{},className:"rightBox right-box-transition ".concat(this.props.containerClasses||""),children:[(0,l.jsx)("div",{title:this.props.closeButtonTitle||"Close",className:"close-rightBox",onClick:this.props.onCloseRightBox,children:(0,l.jsx)(ni.Z,{})}),this.props.children]})}}const $s=Qs;var en=i(2105);class tn extends o.Component{render(){return(0,l.jsx)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"22px",height:"20px",viewBox:"-10 0 512.000000 512.000000",preserveAspectRatio:"xMidYMid meet",style:this.props.style||{},children:(0,l.jsxs)("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",stroke:"none",children:[(0,l.jsx)("path",{d:"M2061 5100 c-195 -52 -330 -195 -387 -412 -14 -54 -15 -175 -16 -996\r\nl0 -934 25 -37 c64 -96 207 -92 268 6 l24 38 5 935 5 935 22 41 c28 53 83 100\r\n130 113 26 7 431 11 1235 11 1169 0 1199 0 1250 -20 68 -26 133 -90 158 -158\r\n20 -52 20 -79 20 -1230 0 -770 -4 -1190 -10 -1214 -17 -59 -71 -130 -124 -163\r\nl-49 -30 -926 -5 c-699 -4 -931 -8 -947 -17 -37 -22 -83 -82 -90 -119 -9 -51\r\n9 -104 51 -144 l36 -35 932 -3 c647 -2 948 1 985 9 95 19 209 85 287 163 81\r\n82 127 163 155 272 19 75 20 115 20 1278 0 1302 1 1272 -55 1390 -59 126 -156\r\n223 -283 286 -125 62 -79 60 -1422 59 -1179 0 -1228 -1 -1299 -19z"}),(0,l.jsx)("path",{d:"M3300 4448 c-107 -30 -152 -167 -83 -249 49 -58 55 -59 383 -59 165\r\n0 300 -3 300 -8 0 -4 -720 -727 -1601 -1607 -880 -880 -1607 -1612 -1615\r\n-1627 -20 -39 -18 -117 6 -155 36 -60 107 -90 174 -72 36 9 232 201 1651 1620\r\n886 885 1613 1609 1618 1609 4 0 7 -133 7 -296 0 -331 2 -344 69 -390 71 -48\r\n169 -27 225 49 21 28 21 39 24 520 2 271 0 511 -3 535 -9 60 -60 116 -120 131\r\n-56 14 -984 14 -1035 -1z"}),(0,l.jsx)("path",{d:"M373 2456 c-178 -44 -325 -195 -362 -374 -15 -74 -15 -1630 0 -1704\r\n27 -130 119 -254 235 -315 121 -65 96 -63 986 -63 550 0 824 4 860 11 167 35\r\n303 156 357 317 20 59 21 81 21 590 l0 529 -22 33 c-32 47 -68 71 -116 77 -55\r\n7 -123 -26 -154 -75 l-23 -37 -5 -515 c-5 -495 -6 -516 -25 -542 -11 -15 -38\r\n-37 -61 -48 -40 -20 -54 -20 -842 -18 -791 3 -801 3 -828 24 -15 11 -37 33\r\n-48 48 -21 27 -21 37 -24 825 l-2 797 23 44 c16 30 37 51 67 67 l43 23 495 0\r\n495 0 42 25 c100 58 101 196 2 269 -28 21 -38 21 -545 23 -388 1 -530 -2 -569\r\n-11z"})]})})}}const on=tn;class sn extends o.Component{render(){return(0,l.jsxs)("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",strokeWidth:"2px",stroke:"#19ab7f",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M10.57,5.8l2.71-2.72a5.4,5.4,0,0,1,7.64,7.64L18.2,13.43"}),(0,l.jsx)("path",{d:"M5.8,10.57,3.08,13.28a5.4,5.4,0,0,0,7.64,7.64l2.71-2.72"}),(0,l.jsx)("line",{x1:"16.77",y1:"7.23",x2:"7.23",y2:"16.77"})]})}}const nn=sn;class an extends o.Component{render(){return(0,l.jsxs)("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",strokeWidth:"2px",stroke:"#4b4b5a",children:[(0,l.jsx)("path",{d:"M10.56,5.77l2.72-2.72a5.43,5.43,0,0,1,3.84-1.59,5.43,5.43,0,0,1,5.42,5.42A5.43,5.43,0,0,1,21,10.72l-2.72,2.72"}),(0,l.jsx)("path",{d:"M5.77,10.56,3.05,13.28A5.42,5.42,0,1,0,10.72,21l2.72-2.72"}),(0,l.jsx)("line",{x1:"16.79",y1:"7.21",x2:"7.21",y2:"16.79"}),(0,l.jsx)("line",{x1:"20.63",y1:"15.83",x2:"23.5",y2:"15.83"}),(0,l.jsx)("line",{x1:"15.83",y1:"20.63",x2:"15.83",y2:"23.5"}),(0,l.jsx)("line",{x1:"19.19",y1:"19.19",x2:"21.1",y2:"21.1"}),(0,l.jsx)("line",{x1:"3.38",y1:"8.17",x2:"0.5",y2:"8.17"}),(0,l.jsx)("line",{x1:"8.17",y1:"3.38",x2:"8.17",y2:"0.5"}),(0,l.jsx)("line",{x1:"4.81",y1:"4.81",x2:"2.9",y2:"2.9"})]})}}const rn=an;var ln=i(1317);class hn extends o.Component{constructor(e){var t;super(e),t=this,this.onInsertFlorplanImageClose=function(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.props.mainComponentThis.translateRightBox(t.props.floorplanImageTools.current,250,!1),t.resetUploadFloorplanImageTools(),i||(t.props.mainComponentThis.foncButton("select_mode"),t.props.mainComponentThis.boxInfo.current.innerHTML="Select mode")},this.resetUploadFloorplanImageTools=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({scaleButtonClicked:!1,floorplanScalingFirstClick:!1,showWallLengthInput:!1,translateButtonClicked:!1,floorplanTranslationFirstClick:!1,floorplanImageUploaded:!e&&t.state.floorplanImageUploaded})},this.onInsertFloorplanImageDeleteButtonClick=()=>{this.props.mainComponentThis.foncButton("select_mode"),this.props.mainComponentThis.boxInfo.current.innerHTML="Select mode",this.props.mainComponentThis.translateRightBox(this.props.floorplanImageTools.current,250,!1),ie(this.props.boxFloorplanImage.current),this.resetLayoutState(),this.props.mainComponentThis.zoom_maker("zoomreset",this.props.mainComponentThis.zoomXMove,this.props.mainComponentThis.zoomXView)},this.resetLayoutState=()=>{this.state.floorplanImageUploaded&&(X(this.props.uploadImageFloorplanSettingsIconRef.current,this.props.mainComponentThis.othersTimeout,null,!1),ln.log("Hide hide icon"),X(this.props.uploadFloorplanImageStatusContainerRef.current,this.props.mainComponentThis.othersTimeout,null,!1),X(this.props.uploadImageFloorplanHideRef.current,0,null,!1),X(this.props.uploadImageFloorplanShowRef.current,0,null,!1),!this.props.boxFloorplanImage.current.classList.contains("fade-in")&&K(this.props.boxFloorplanImage.current,this.props.mainComponentThis.othersTimeout,null,"inline",!1),this.floorplanLength.current.setValue(""),this.floorplanLength.current.setInitialValue(""),this.floorplanWidth.current.setValue(""),this.floorplanWidth.current.setInitialValue(""),this.floorplanImageInput.current.value="",X(this.floorplanImageToolsDeleteButtonRef.current,this.props.mainComponentThis.othersTimeout,(()=>this.setState({floorplanImageUploaded:!1})),!1))},this.onUploadFloorplanImageInputChange=()=>e=>{this.uploadedFloorplanImage=e.target.files[0],this.resetUploadFloorplanImageTools(!0),K(this.explanationBox.current,this.props.mainComponentThis.othersTimeout,null,"flex",!1)},this.getFloorplanImageBoundingBox=()=>({minX:this.floorplanBoundingBoxCurrentParams.originX,maxX:this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width,minY:this.floorplanBoundingBoxCurrentParams.originY,maxY:this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length}),this.centerAndShowWholeFloorplanImage=()=>{const e={x:this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width/2,y:this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length/2};this.props.mainComponentThis.centerAndShowWholeBoxOperations(e,this.getFloorplanImageBoundingBox(),!1)},this.onExplanationConfirmedCallback=()=>{this.setState({floorplanImageUploaded:!0,preserveAspectRatio:!0},(()=>{let e=new Image,t=window.URL||window.webkitURL||window,i=t.createObjectURL(this.uploadedFloorplanImage);e.onload=()=>{this.floorplanAspectRatio=e.width/e.height,this.floorplanInitialWidth=this.floorplanImageInitialSvgWidth,this.floorplanInitialLength=this.floorplanInitialWidth/this.floorplanAspectRatio,t.revokeObjectURL(i),this.floorplanBoundingBoxCurrentParams.originX=200-this.props.mainComponentThis.offset.left,this.floorplanBoundingBoxCurrentParams.originY=24,this.floorplanBoundingBoxCurrentParams.width=this.floorplanInitialWidth,this.floorplanBoundingBoxCurrentParams.length=this.floorplanInitialLength,this.drawUploadedFloorplanImage(),this.props.mainComponentThis.zoom_maker("zoomreset",this.props.mainComponentThis.zoomXMove,this.props.mainComponentThis.zoomXView),K(this.props.uploadFloorplanImageStatusContainerRef.current,this.props.mainComponentThis.othersTimeout,null,"block",!1),"none"===this.props.uploadImageFloorplanHideRef.current.style.display&&"none"===this.props.uploadImageFloorplanShowRef.current.style.display&&(K(this.props.uploadImageFloorplanHideRef.current,0,null,"inline",!1),this.props.uploadFloorplanImageStatusContainerRef.current.title="Hide floorplan image"),K(this.props.uploadImageFloorplanSettingsIconRef.current,this.props.mainComponentThis.othersTimeout,null,"inline",!1),K(this.floorplanImageToolsDeleteButtonRef.current,this.props.mainComponentThis.othersTimeout,null,"block",!1),k()||(this.props.mainComponentThis.boxInfo.current.innerHTML="Hold <b>SHIFT</b> to drag around floorplan.")},e.src=i}))},this.drawUploadedFloorplanImage=()=>{ie(this.props.boxFloorplanImage.current);const e=this.floorplanImageInput.current.files[0];this.props.mainComponentThis.editor.createAndShowBoxMeasures(this.floorplanBoundingBoxCurrentParams.originX,this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width,this.floorplanBoundingBoxCurrentParams.originY,this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length,this.props.boxFloorplanImage,{color:"#ffcc00",strokeWidth:1}),this.props.floorplanImagePattern.current.setAttribute("x",this.floorplanBoundingBoxCurrentParams.originX),this.props.floorplanImagePattern.current.setAttribute("y",this.floorplanBoundingBoxCurrentParams.originY),this.props.floorplanImagePattern.current.setAttribute("height",this.floorplanBoundingBoxCurrentParams.length),this.props.floorplanImagePattern.current.setAttribute("width",this.floorplanBoundingBoxCurrentParams.width),this.props.floorplanImage.current.setAttribute("height",this.floorplanBoundingBoxCurrentParams.length),this.props.floorplanImage.current.setAttribute("width",this.floorplanBoundingBoxCurrentParams.width);let t=new FileReader;t.onload=e=>{this.props.floorplanImage.current.setAttribute("href",e.target.result),ln.log("Atrribute setted")},t.onerror=()=>{this.props.mainComponentThis.boxInfo.current.innerHTML="Ooops. An error happened. Cannot load image."},t.readAsDataURL(e);let i="M".concat(this.floorplanBoundingBoxCurrentParams.originX,",").concat(this.floorplanBoundingBoxCurrentParams.originY,"\n            L").concat(this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width,",").concat(this.floorplanBoundingBoxCurrentParams.originY,"\n            L").concat(this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width,",").concat(this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length,"\n            L").concat(this.floorplanBoundingBoxCurrentParams.originX,",").concat(this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length,"\n            L").concat(this.floorplanBoundingBoxCurrentParams.originX,",").concat(this.floorplanBoundingBoxCurrentParams.originY);this.props.mainComponentThis.qSVG.create(this.props.boxFloorplanImage,"path",{id:"floorplan-image-path",d:i,fill:"url(#floorplan_image_pattern)","fill-opacity":1,stroke:"none"});const o=De(this.floorplanBoundingBoxCurrentParams.width/this.props.mainComponentThis.meter,this.props.mainComponentThis.measureSystemContext.userUnit,"meter","feet",this.floorplanDimensionsDecimalPrecision),s=De(this.floorplanBoundingBoxCurrentParams.length/this.props.mainComponentThis.meter,this.props.mainComponentThis.measureSystemContext.userUnit,"meter","feet",this.floorplanDimensionsDecimalPrecision);this.floorplanWidth.current.setValue(o),this.floorplanWidth.current.setInitialValue(o),this.floorplanLength.current.setValue(s),this.floorplanLength.current.setInitialValue(s),this.setState({originX:j(this.floorplanBoundingBoxCurrentParams.originX,this.originTranslateDecimalPrecision),originY:j(this.floorplanBoundingBoxCurrentParams.originY,this.originTranslateDecimalPrecision),width:o,length:s})},this.translateFloorplan=(e,t)=>{const i=this.wallTranslateGroup.querySelector("#originCircle").getAttribute("cx"),o=this.wallTranslateGroup.querySelector("#originCircle").getAttribute("cy"),s=(e.x-i)*t,n=(e.y-o)*t;this.floorplanBoundingBoxCurrentParams.originX=this.floorplanBoundingBoxCurrentParams.originX+s,this.floorplanBoundingBoxCurrentParams.originY=this.floorplanBoundingBoxCurrentParams.originY+n,this.drawUploadedFloorplanImage(),ie(this.wallTranslateGroup)},this.handleMouseDownAction=e=>{const t=[{x:this.floorplanBoundingBoxCurrentParams.originX,y:this.floorplanBoundingBoxCurrentParams.originY},{x:this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width,y:this.floorplanBoundingBoxCurrentParams.originY},{x:this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width,y:this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length},{x:this.floorplanBoundingBoxCurrentParams.originX,y:this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length}];if("floorplan_image_translation"===this.props.mainComponentThis.mode)if(this.state.floorplanTranslationFirstClick)if(this.state.floorplanTranslationIsOutsideClick)if(me(e,t))this.translateFloorplan(e,-1),this.setState({floorplanTranslationFirstClick:!1,floorplanTranslationIsOutsideClick:!1});else{const t=this.wallTranslateGroup.querySelector("#originCircle");t.setAttribute("cx",e.x),t.setAttribute("cy",e.y)}else this.translateFloorplan(e,1),this.setState({floorplanTranslationFirstClick:!1});else{this.wallTranslateGroup?ie(this.wallTranslateGroup):this.wallTranslateGroup=this.props.mainComponentThis.qSVG.create("none","g",{class:"floorplan-image-translate-group"});const i=this.props.mainComponentThis.qSVG.create("none","circle",{id:"originCircle",cx:e.x,cy:e.y,r:this.circleRadius,fill:"#ff0000"});this.wallTranslateGroup.appendChild(i),this.props.boxFloorplanImage.current.appendChild(this.wallTranslateGroup),this.setState({floorplanTranslationFirstClick:!0,floorplanTranslationIsOutsideClick:!me(e,t)})}else if(me(e,t))if(this.state.floorplanScalingFirstClick){const t=this.props.mainComponentThis.qSVG.create("none","circle",{id:"endCircle",cx:e.x,cy:e.y,r:this.circleRadius,fill:"#ff0000"});this.wallLineGroup.appendChild(t),this.props.mainComponentThis.boxInfo.current.innerHTML="Insert selected line length in ".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"meters(m)":"feet(ft)"),this.setState({floorplanScalingFirstClick:!1,showWallLengthInput:!0},(()=>{this.selectedWallLengthInput.current.setValue(""),this.selectedWallLengthInput.current.setInitialValue("")}))}else{this.wallLineGroup?ie(this.wallLineGroup):this.wallLineGroup=this.props.mainComponentThis.qSVG.create("none","g",{class:"floorplan-image-scaling-group"});const t=this.props.mainComponentThis.qSVG.create("none","line",{x1:e.x,y1:e.y,x2:e.x,y2:e.y,"stroke-width":this.lineThick,stroke:"#4b4b5a"});this.wallLineGroup.appendChild(t);const i=this.props.mainComponentThis.qSVG.create("none","circle",{id:"startCircle",cx:e.x,cy:e.y,r:this.circleRadius,fill:"#ff0000"});this.wallLineGroup.appendChild(i),this.props.boxFloorplanImage.current.appendChild(this.wallLineGroup),this.setState({floorplanScalingFirstClick:!0,showWallLengthInput:!1})}},this.onWallLengthConfirmClick=()=>{const e=Te(parseFloat(this.selectedWallLengthInput.current.getValue()),this.props.mainComponentThis.measureSystemContext.userUnit)*this.props.mainComponentThis.meter;let t=this.wallLineGroup.querySelector("#startCircle"),i=this.wallLineGroup.querySelector("#endCircle");const o=Ce({x:t.getAttribute("cx"),y:t.getAttribute("cy")},{x:i.getAttribute("cx"),y:i.getAttribute("cy")}),s=j(e/o*this.state.scalingFactor,this.scaleFactorDecimalPrecision);this.floorplanBoundingBoxCurrentParams.width=this.floorplanInitialWidth*s,this.floorplanBoundingBoxCurrentParams.length=this.floorplanInitialLength*s,this.drawUploadedFloorplanImage(),this.setState({showWallLengthInput:!1,scalingFactor:s})},this.onScaleButtonClick=()=>{this.state.scaleButtonClicked?(this.props.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group")&&this.props.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group").remove(),this.props.mainComponentThis.mode="upload_floorplan_image_mode"):(this.props.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group")&&this.props.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group").remove(),this.props.mainComponentThis.mode="floorplan_image_scaling"),this.setState({scaleButtonClicked:!this.state.scaleButtonClicked,floorplanScalingFirstClick:!1,translateButtonClicked:!1,floorplanTranslationFirstClick:!1,showWallLengthInput:!this.state.scaleButtonClicked&&this.state.showWallLengthInput})},this.onTranslateButtonClick=()=>{this.state.translateButtonClicked?(this.props.mainComponentThis.mode="upload_floorplan_image_mode",this.props.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group")&&this.props.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group").remove()):(this.props.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group")&&this.props.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group").remove(),this.props.mainComponentThis.mode="floorplan_image_translation"),this.setState({translateButtonClicked:!this.state.translateButtonClicked,floorplanTranslationFirstClick:!1,scaleButtonClicked:!1,floorplanScalingFirstClick:!1,showWallLengthInput:!1})},this.handleAspectRatioButtonClick=()=>{this.setState({preserveAspectRatio:!this.state.preserveAspectRatio})},this.onFloorplanInputWidthChanged=()=>{const e=this.floorplanWidth.current.getValue();e!==this.state.width&&(this.floorplanBoundingBoxCurrentParams.width=Te(parseFloat(e),this.props.mainComponentThis.measureSystemContext.userUnit)*this.props.mainComponentThis.meter,this.state.preserveAspectRatio&&(this.floorplanBoundingBoxCurrentParams.length=this.floorplanBoundingBoxCurrentParams.width/this.floorplanAspectRatio),this.drawUploadedFloorplanImage())},this.onFloorplanInputLengthChanged=()=>{const e=this.floorplanLength.current.getValue();e!==this.state.length&&(this.floorplanBoundingBoxCurrentParams.length=Te(parseFloat(e),this.props.mainComponentThis.measureSystemContext.userUnit)*this.props.mainComponentThis.meter,this.state.preserveAspectRatio&&(this.floorplanBoundingBoxCurrentParams.width=this.floorplanAspectRatio*this.floorplanBoundingBoxCurrentParams.length),this.drawUploadedFloorplanImage())},this.onScaleFactorInputChange=e=>{this.state.scalingFactor!==e&&(this.floorplanBoundingBoxCurrentParams.width=this.floorplanInitialWidth*e,this.floorplanBoundingBoxCurrentParams.length=this.floorplanInitialLength*e,this.drawUploadedFloorplanImage(),this.setState({scalingFactor:e,floorplanScalingFirstClick:!1,showWallLengthInput:!1}))},this.onFloorplanOriginXInputChange=e=>{e!==this.state.originX&&(this.floorplanBoundingBoxCurrentParams.originX=e,this.drawUploadedFloorplanImage(),this.setState({originX:e}))},this.onFloorplanOriginYInputChange=e=>{this.state.originY!==e&&(this.floorplanBoundingBoxCurrentParams.originY=e,this.drawUploadedFloorplanImage(),this.setState({originY:e}))},this.state={floorplanImageUploaded:!1,floorplanScalingFirstClick:!1,showWallLengthInput:!1,floorplanTranslationFirstClick:!1,floorplanTranslationIsOutsideClick:!1,scaleButtonClicked:!1,translateButtonClicked:!1,preserveAspectRatio:!0,scalingFactor:1,originX:0,originY:0,width:0,length:0},this.floorplanDimensionsInputStep=(e.mainComponentThis.measureSystemContext.userUnit,.1),this.floorplanDimensionsDecimalPrecision=-Math.log10(this.floorplanDimensionsInputStep),this.lineLengthInputStep="metric"===e.mainComponentThis.measureSystemContext.userUnit?.01:.1,this.lineLengthDecimalPrecision=-Math.log10(this.lineLengthInputStep),this.scaleFactorInputStep=.01,this.scaleFactorDecimalPrecision=-Math.log10(this.scaleFactorInputStep),this.originTranslateInputStep=1,this.originTranslateDecimalPrecision=-Math.log10(this.originTranslateInputStep),this.wallTranslateGroup=null,this.wallLineGroup=null,this.circleRadius=e.mainComponentThis.meter/6,this.lineThick=e.mainComponentThis.meter/8,this.floorplanAspectRatio=0,this.uploadedImagePixelToSvgUnitRatio=1,this.floorplanImageInitialSvgWidth=20*e.mainComponentThis.meter,this.floorplanBoundingBoxCurrentParams={originX:0,originY:0,width:0,length:0},this.floorplanInitialWidth=null,this.floorplanInitialLength=null,this.uploadedFloorplanImage=null,this.floorplanLength=o.createRef(),this.floorplanWidth=o.createRef(),this.floorplanImageInput=o.createRef(),this.floorplanImageToolsDeleteButtonRef=o.createRef(),this.selectedWallLengthInput=o.createRef(),this.scaleFactorInput=o.createRef(),this.explanationBox=o.createRef(),this.onInsertFloorplanImageDeleteButtonClick=this.onInsertFloorplanImageDeleteButtonClick.bind(this),this.onInsertFlorplanImageClose=this.onInsertFlorplanImageClose.bind(this),this.resetUploadFloorplanImageTools=this.resetUploadFloorplanImageTools.bind(this),this.handleMouseDownAction=this.handleMouseDownAction.bind(this),this.translateFloorplan=this.translateFloorplan.bind(this),this.onWallLengthConfirmClick=this.onWallLengthConfirmClick.bind(this),this.drawUploadedFloorplanImage=this.drawUploadedFloorplanImage.bind(this),this.onScaleButtonClick=this.onScaleButtonClick.bind(this),this.onTranslateButtonClick=this.onTranslateButtonClick.bind(this),this.onUploadFloorplanImageInputChange=this.onUploadFloorplanImageInputChange.bind(this),this.onExplanationConfirmedCallback=this.onExplanationConfirmedCallback.bind(this),this.handleAspectRatioButtonClick=this.handleAspectRatioButtonClick.bind(this),this.onFloorplanInputWidthChanged=this.onFloorplanInputWidthChanged.bind(this),this.onFloorplanInputLengthChanged=this.onFloorplanInputLengthChanged.bind(this),this.onScaleFactorInputChange=this.onScaleFactorInputChange.bind(this),this.onFloorplanOriginXInputChange=this.onFloorplanOriginXInputChange.bind(this),this.onFloorplanOriginYInputChange=this.onFloorplanOriginYInputChange.bind(this),this.getFloorplanImageBoundingBox=this.getFloorplanImageBoundingBox.bind(this),this.centerAndShowWholeFloorplanImage=this.centerAndShowWholeFloorplanImage.bind(this),this.resetLayoutState=this.resetLayoutState.bind(this)}render(){return ln.log(this.state),(0,l.jsxs)($s,{containerStyle:{width:250,right:-250},containerRef:this.props.floorplanImageTools,onCloseRightBox:this.onInsertFlorplanImageClose,children:[(0,l.jsxs)("div",{ref:this.explanationBox,className:"upload-floorplan-image-explanation-box hidden",children:[(0,l.jsxs)("h3",{children:["Floorplan dimensions are set to ",(0,l.jsx)("b",{children:"fixed values"}),"."," "]}),(0,l.jsxs)("h3",{children:["You can change them to the actual values either by ",(0,l.jsx)("b",{children:"direct input"})," or using our ",(0,l.jsx)("b",{children:"Click&Scale"})," ","feature."]})," ",(0,l.jsxs)("h3",{children:["For floorplan translation on drawing area use ",(0,l.jsx)("b",{children:"Click&Translate"}),"."]}),(0,l.jsx)("h3",{children:(0,l.jsx)("b",{children:"NOTE: 1 grid square equals ".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"1 meter":"".concat(this.props.mainComponentThis.imperialSystemSquareFeetSize," feet"))})}),(0,l.jsx)(Ge,{type:"primary",onClick:()=>X(this.explanationBox.current,this.props.mainComponentThis.othersTimeout,this.onExplanationConfirmedCallback,!1),children:"Got it"})]}),(0,l.jsx)(ut,{label:"Upload floorplan image from your local device",labelStyle:{display:"block",fontSize:"1.17em",margin:"1em 0",fontWeight:"bold"},inputRef:this.floorplanImageInput,type:"file",accept:"image/png, image/jpeg",onChange:this.onUploadFloorplanImageInputChange}),this.state.floorplanImageUploaded?(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{ref:this.floorplanImageToolsDeleteButtonRef,className:"button-centered-container hidden form-group",children:(0,l.jsx)(Ge,{type:"delete",onClick:this.onInsertFloorplanImageDeleteButtonClick,children:"Delete uploaded image"})}),(0,l.jsx)(xt,{label:"Floorplan width(".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"m":"ft",")"),children:(0,l.jsx)(at,{ref:this.floorplanWidth,placeholder:"Floorplan width",inputStep:this.floorplanDimensionsInputStep,inputMin:this.floorplanDimensionsInputStep,inputMax:1/0,inputStyle:{textAlign:"left"},callOnlyOnBlur:!0,hideNumberArrows:!0,onInputValueChanged:this.onFloorplanInputWidthChanged,defaultValue:"",checkInputValueChangeBeforeCall:!0})}),(0,l.jsxs)("div",{className:"preserve-aspect-ratio-container",children:[(0,l.jsx)("div",{className:"svg-action-icon-container button-with-icon svg-center-inside-container",onClick:this.handleAspectRatioButtonClick,title:this.state.preserveAspectRatio?"Preserve aspect ratio":"No aspect ratio",children:this.state.preserveAspectRatio?(0,l.jsx)(nn,{}):(0,l.jsx)(rn,{})}),(0,l.jsx)("label",{className:"label form-control",children:"Floorplan aspect ratio"})]}),(0,l.jsx)(xt,{label:"Floorplan length(".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"m":"ft",")"),children:(0,l.jsx)(at,{ref:this.floorplanLength,placeholder:"Floorplan length",inputStep:this.floorplanDimensionsInputStep,inputMin:this.floorplanDimensionsInputStep,inputMax:1/0,inputStyle:{textAlign:"left"},callOnlyOnBlur:!0,hideNumberArrows:!0,onInputValueChanged:this.onFloorplanInputLengthChanged,defaultValue:"",checkInputValueChangeBeforeCall:!0})}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsxs)(Ge,{type:this.state.scaleButtonClicked?"primary":"dull",className:"button-with-icon",onClick:this.onScaleButtonClick,children:[(0,l.jsx)(on,{style:{fill:this.state.scaleButtonClicked?"#ffffff":"#4b4b5a"}}),"Click&Scale"]})}),this.state.scaleButtonClicked&&(0,l.jsxs)(o.Fragment,{children:[(0,l.jsxs)("div",{className:"upload-floorplan-info-container",children:[(0,l.jsx)("div",{className:"popup-icon-container",children:(0,l.jsx)(tt.Z,{})}),(0,l.jsx)("p",{children:this.state.showWallLengthInput?(0,l.jsx)("span",{children:(0,l.jsx)("b",{children:"Insert selected line length in ".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"meters(m)":"feet(ft)")})}):(0,l.jsxs)("span",{children:[(0,l.jsx)("b",{children:"Select 2 points"})," on floorplan image for which you know the exact length"]})}),(0,l.jsx)("p",{children:"Click button to exit scaling mode"}),this.state.showWallLengthInput&&(0,l.jsxs)(xt,{containerStyle:{marginTop:"0.5rem"},children:[(0,l.jsx)(at,{ref:this.selectedWallLengthInput,placeholder:"Insert line length(".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"m":"ft",")"),inputStyle:{marginBottom:"0.5rem",border:"1px solid #19ab7f"},inputStep:this.lineLengthInputStep,inputMin:this.lineLengthInputStep,inputMax:1/0,defaultValue:"",checkInputValueChangeBeforeCall:!0}),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ge,{type:"primary",onClick:this.onWallLengthConfirmClick,children:"Confirm"})})]}),(0,l.jsxs)("div",{className:"line-divider-container",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("b",{children:"OR"}),(0,l.jsx)("hr",{})]}),(0,l.jsx)("p",{children:"Insert scale factor value directly"})]}),(0,l.jsx)(xt,{containerStyle:{marginBottom:0},label:"Scale factor",children:(0,l.jsx)(ht,{ref:this.scaleFactorInput,placeholder:"Scale factor",inputStep:this.scaleFactorInputStep,inputMin:this.scaleFactorInputStep,inputMax:1/0,usePropsValue:!0,value:this.state.scalingFactor,onInputValueChanged:this.onScaleFactorInputChange})})]})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsxs)(Ge,{type:this.state.translateButtonClicked?"primary":"dull",className:"button-with-icon",onClick:this.onTranslateButtonClick,children:[(0,l.jsx)(en.Z,{style:{width:20,height:20,fill:this.state.translateButtonClicked?"#ffffff":"#4b4b5a"}}),"Click&Translate"]})}),this.state.translateButtonClicked&&(0,l.jsxs)(o.Fragment,{children:[(0,l.jsxs)("div",{className:"upload-floorplan-info-container",children:[(0,l.jsx)("div",{className:"popup-icon-container",children:(0,l.jsx)(tt.Z,{})}),(0,l.jsx)("p",{children:this.state.floorplanTranslationFirstClick?(0,l.jsx)("span",{children:this.state.floorplanTranslationIsOutsideClick?(0,l.jsxs)("span",{children:[(0,l.jsx)("b",{children:"Select floorplan point"})," which you want to translate to the origin point"]}):(0,l.jsxs)("span",{children:[(0,l.jsx)("b",{children:"Select location"})," to which you want to translate the selected floorplan point"]})}):(0,l.jsxs)("span",{children:[(0,l.jsx)("b",{children:"Select origin point"})," of translation"]})}),(0,l.jsx)("p",{children:"Click button to exit translation mode"}),(0,l.jsxs)("div",{className:"line-divider-container",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("b",{children:"OR"}),(0,l.jsx)("hr",{})]}),(0,l.jsx)("p",{children:"Insert offset values directly"})]}),(0,l.jsx)(xt,{label:"Horizontal offset",children:(0,l.jsx)(ht,{placeholder:"Horizontal offset",inputStep:this.originTranslateInputStep,inputMin:-1/0,inputMax:1/0,usePropsValue:!0,value:this.state.originX,onInputValueChanged:this.onFloorplanOriginXInputChange})}),(0,l.jsx)(xt,{label:"Vertical offset",containerStyle:{marginBottom:0},children:(0,l.jsx)(ht,{placeholder:"Vertical offset",inputStep:this.originTranslateInputStep,inputMin:-1/0,inputMax:1/0,usePropsValue:!0,value:this.state.originY,onInputValueChanged:this.onFloorplanOriginYInputChange})})]})]})]}):null]})}}const cn=hn;class dn extends o.Component{render(){return(0,l.jsx)(xt,{containerStyle:{marginBottom:this.props.sizePoliceComponent?0:"0.5rem"},label:!this.props.sizePoliceComponent&&this.props.valueLabelText,children:(0,l.jsx)("input",{ref:this.props.sliderInputRef,type:"range",disabled:this.props.disabled,step:this.props.sliderStep,min:this.props.minValue,max:this.props.maxValue,className:"range ".concat(this.props.disabled?"disabled":""),onChange:this.props.disabled?void 0:this.props.onSliderChange,onMouseUp:()=>!this.props.disabled&&this.props.onSliderChangeFinished&&this.props.onSliderChangeFinished()})})}}const pn=dn;class mn extends o.Component{render(){return(0,l.jsx)("div",{children:(0,l.jsx)(at,{ref:this.props.inputNumberComponentRef,inputStep:this.props.sliderStep,disabled:this.props.disabled,inputMin:this.props.minValue,inputMax:this.props.maxValue,onInputValueChanged:this.props.onInputChange,checkInputValueChangeBeforeCall:!1})})}}const un=mn;class gn extends o.Component{constructor(){super(),this.onSliderChange=e=>{this.props.onSliderValueChanged(e.target.value),this.inputNumberComponentRef.current.setValue(this.props.sliderInputRef.current.value)},this.onInputChange=()=>{this.props.sliderInputRef.current.value=this.inputNumberComponentRef.current.getValue(),this.props.onSliderValueChanged(this.props.sliderInputRef.current.value),this.props.onSliderChangeFinished&&this.props.onSliderChangeFinished()},this.setNumberInputInitialValues=e=>{this.inputNumberComponentRef.current.setInitialValue(e),this.inputNumberComponentRef.current.setValue(e)},this.setMaxMinRangeValues=(e,t)=>{this.props.sliderInputRef.current.setAttribute("min",e),this.props.sliderInputRef.current.setAttribute("max",t),this.inputNumberComponentRef.current.setRangeValues(e,t)},this.containerRef=o.createRef(),this.inputNumberComponentRef=o.createRef(),this.setMaxMinRangeValues=this.setMaxMinRangeValues.bind(this),this.setNumberInputInitialValues=this.setNumberInputInitialValues.bind(this),this.onSliderChange=this.onSliderChange.bind(this),this.onInputChange=this.onInputChange.bind(this)}componentDidMount(){this.props.defaultValue&&(this.props.sliderInputRef.current.value=this.props.defaultValue,this.inputNumberComponentRef.current.setValue(this.props.defaultValue),this.inputNumberComponentRef.current.setInitialValue(this.props.defaultValue))}render(){return(0,l.jsxs)("div",{ref:this.containerRef,className:"form-group",children:[this.props.sizePoliceComponent&&this.props.sizePoliceComponent,this.props.sizePoliceComponent?(0,l.jsxs)("div",{className:"modify-size-police-container",children:[(0,l.jsx)(pn,{disabled:this.props.disabled,valueLabelText:this.props.valueLabelText,sizePoliceComponent:this.props.sizePoliceComponent,sliderInputRef:this.props.sliderInputRef,sliderStep:this.props.sliderStep,minValue:this.props.minValue,maxValue:this.props.maxValue,onSliderChange:this.onSliderChange,onSliderChangeFinished:this.props.onSliderChangeFinished}),(0,l.jsx)(un,{disabled:this.props.disabled,inputNumberComponentRef:this.inputNumberComponentRef,sliderStep:this.props.sliderStep,minValue:this.props.minValue,maxValue:this.props.maxValue,onInputChange:this.onInputChange})]}):(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(pn,{disabled:this.props.disabled,valueLabelText:this.props.valueLabelText,sliderInputRef:this.props.sliderInputRef,sliderStep:this.props.sliderStep,minValue:this.props.minValue,maxValue:this.props.maxValue,onSliderChange:this.onSliderChange,onSliderChangeFinished:this.props.onSliderChangeFinished}),(0,l.jsx)(un,{disabled:this.props.disabled,inputNumberComponentRef:this.inputNumberComponentRef,sliderStep:this.props.sliderStep,minValue:this.props.minValue,maxValue:this.props.maxValue,onInputChange:this.onInputChange})]})]})}}const fn=gn;class bn extends o.Component{constructor(){var e;super(),e=this,this.setCheckedStatus=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.setState({checked:t},(()=>!!i&&i()))},this.getCheckedStatus=()=>this.state.checked,this.state={checked:!1},this.setCheckedStatus=this.setCheckedStatus.bind(this),this.getCheckedStatus=this.getCheckedStatus.bind(this)}render(){return(0,l.jsxs)("div",{className:"show-map-switch-container ".concat(this.props.containerClasses||""),children:[(0,l.jsx)("label",{children:"SHOW MAP"}),(0,l.jsx)(Et.Z,{theme:Yt,children:(0,l.jsx)(qt.Z,{checked:this.state.checked,title:"Show on map",onChange:this.props.onChangeCallback})})]})}}const wn=bn;class Cn extends o.Component{render(){return(0,l.jsx)("div",{className:"popup-disable-background",children:(0,l.jsx)(Mt,{spinnerHolderStyle:this.props.whiteSpinnerBackground?{borderRadius:"50%",backgroundColor:"#ffffff"}:{},screenCenter:!0})})}}const xn=Cn;var yn=i(2178),Sn=i.n(yn),vn=i(9192),Dn=i.n(vn),Tn=i(7701),jn=i.n(Tn),_n=i(1221),In=i(825),kn=i(4329),Pn=i(6325),Fn=i(2894),On=i(8986),Mn=i(1317);const Ln=function(e,t,i){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new Ne.Pa4,this.movementRestrictionPivotPoint=i,this.objectTest=e.clone(),this.targetTest=this.target.clone(),this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.touchZoomSpeed=.8,this.minDistance=0,this.maxDistance=3e4,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=40,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI/2,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.zoomToCursor=!0,this.mouse3D=new Ne.Pa4,this.enableDamping=!1,this.dampingFactor=.05,this.needsUpdate=!0;var o=this,s=1e-6,n=new Ne.FM8,a=new Ne.FM8,r=new Ne.FM8,l=new Ne.FM8,h=new Ne.FM8,c=new Ne.FM8,d=new Ne.FM8,p=new Ne.FM8,m=new Ne.FM8,u=0,g=0,f=1,b=new Ne.Pa4,w={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},C=w.NONE;function x(e,t){var i=new Ne.Pa4,s=new Ne.Pa4,n=o.domElement===document?o.domElement.body:o.domElement;if(t){const t={x:(e.touches[0].clientX+e.touches[1].clientX)/2,y:(e.touches[0].clientY+e.touches[1].clientY)/2};i.set(t.x/window.innerWidth*2-1,-t.y/window.innerHeight*2+1,.5)}else i.set(e.clientX/n.clientWidth*2-1,-e.clientY/n.clientHeight*2+1,.5);i.unproject(o.object),i.sub(o.object.position).normalize();var a=s.copy(o.target).sub(o.object.position).dot(o.object.up)/i.dot(o.object.up);o.mouse3D.copy(o.object.position).add(i.multiplyScalar(a))}function y(){return 2*Math.PI/60/60*o.autoRotateSpeed}function S(e){return Math.pow(.95,e?o.touchZoomSpeed:o.zoomSpeed)}function v(e){if(!1!==o.enabled){if(e.preventDefault(),0===e.button){if(!0===o.noRotate)return;C=w.ROTATE,n.set(e.clientX,e.clientY)}else if(1===e.button){if(!0===o.noZoom)return;C=w.DOLLY,d.set(e.clientX,e.clientY)}else if(2===e.button){if(!0===o.noPan)return;C=w.PAN,l.set(e.clientX,e.clientY)}o.domElement.addEventListener("mousemove",D,!1),o.domElement.addEventListener("mouseup",T,!1)}}function D(e){if(!1!==o.enabled){e.preventDefault();var t=o.domElement===document?o.domElement.body:o.domElement;if(C===w.ROTATE){if(!0===o.noRotate)return;a.set(e.clientX,e.clientY),r.subVectors(a,n),o.rotateLeft(2*Math.PI*r.x/t.clientWidth*o.rotateSpeed),o.rotateUp(2*Math.PI*r.y/t.clientHeight*o.rotateSpeed),n.copy(a)}else if(C===w.DOLLY){if(!0===o.noZoom)return;p.set(e.clientX,e.clientY),m.subVectors(p,d),m.y>0?o.dollyIn():o.dollyOut(),d.copy(p)}else if(C===w.PAN){if(!0===o.noPan)return;h.set(e.clientX,e.clientY),c.subVectors(h,l),o.pan(c),l.copy(h)}o.update()}}function T(){!1!==o.enabled&&(o.domElement.removeEventListener("mousemove",D,!1),o.domElement.removeEventListener("mouseup",T,!1),C=w.NONE)}function j(e){if(!1!==o.enabled&&!0!==o.noZoom){var t=0;e.wheelDelta?t=e.wheelDelta:e.detail&&(t=-e.detail),x(e),t>0?o.dollyOut():o.dollyIn(),o.update()}}function _(e){if(!1!==o.enabled&&!0!==o.noKeys&&!0!==o.noPan)switch(e.keyCode){case o.keys.UP:o.pan(new Ne.FM8(0,o.keyPanSpeed));break;case o.keys.BOTTOM:o.pan(new Ne.FM8(0,-o.keyPanSpeed));break;case o.keys.LEFT:o.pan(new Ne.FM8(o.keyPanSpeed,0));break;case o.keys.RIGHT:o.pan(new Ne.FM8(-o.keyPanSpeed,0))}}function I(e){if(!1!==o.enabled)switch(e.touches.length){case 1:if(!0===o.noRotate)return;C=w.TOUCH_ROTATE,n.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(!0===o.noZoom)return;C=w.TOUCH_DOLLY;var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,s=Math.sqrt(t*t+i*i);d.set(0,s);break;case 3:if(!0===o.noPan)return;C=w.TOUCH_PAN,l.set(e.touches[0].pageX,e.touches[0].pageY);break;default:C=w.NONE}}function k(e){if(!1!==o.enabled){e.preventDefault(),e.stopPropagation();var t=o.domElement===document?o.domElement.body:o.domElement;switch(e.touches.length){case 1:if(!0===o.noRotate)return;if(C!==w.TOUCH_ROTATE)return;a.set(e.touches[0].pageX,e.touches[0].pageY),r.subVectors(a,n),o.rotateLeft(2*Math.PI*r.x/t.clientWidth*o.rotateSpeed),o.rotateUp(2*Math.PI*r.y/t.clientHeight*o.rotateSpeed),n.copy(a);break;case 2:if(!0===o.noZoom)return;if(C!==w.TOUCH_DOLLY)return;var i=e.touches[0].pageX-e.touches[1].pageX,s=e.touches[0].pageY-e.touches[1].pageY,u=Math.sqrt(i*i+s*s);p.set(0,u),m.subVectors(p,d),x(e,!0),0!==m.y&&(m.y>0?o.dollyOut(void 0,!0):o.dollyIn(void 0,!0)),d.copy(p);break;case 3:if(!0===o.noPan)return;if(C!==w.TOUCH_PAN)return;h.set(e.touches[0].pageX,e.touches[0].pageY),c.subVectors(h,l),o.pan(c),l.copy(h);break;default:C=w.NONE}o.update()}}function P(){!1!==o.enabled&&(C=w.NONE)}function F(e){e.preventDefault()}this.controlsActive=function(){return C===w.NONE},this.setPan=function(e){b=e},this.panTo=function(e){var t=new Ne.Pa4(e.x,o.target.y,e.z),i=o.target.clone().sub(t);b.sub(i),o.update()},this.rotateLeft=function(e){void 0===e&&(e=y()),g-=e},this.rotateUp=function(e){void 0===e&&(e=y()),u-=e},this.panLeft=function(e){var t=new Ne.Pa4,i=this.object.matrix.elements;t.set(i[0],0,i[2]),t.normalize(),t.multiplyScalar(-e),b.add(t)},this.panUp=function(e){var t=new Ne.Pa4;t.setFromMatrixColumn(this.object.matrix,1),t.multiplyScalar(e);var i=b.clone(),o=this.target.clone();i.add(t),o.add(i),o.y>0&&b.add(t)},this.pan=function(e){var t=o.domElement===document?o.domElement.body:o.domElement;if(void 0!==o.object.fov){var i=o.object.position.clone().sub(o.target).length();i*=Math.tan(o.object.fov/2*Math.PI/180),o.panLeft(2*e.x*i/t.clientHeight),o.panUp(2*e.y*i/t.clientHeight)}else void 0!==o.object.top?(o.panLeft(e.x*(o.object.right-o.object.left)/t.clientWidth),o.panUp(e.y*(o.object.top-o.object.bottom)/t.clientHeight)):Mn.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.");o.update()},this.panXY=function(e,t){o.pan(new Ne.FM8(e,t))},this.dollyIn=function(e,t){void 0===e&&(e=S(t)),f/=e},this.dollyOut=function(e,t){void 0===e&&(e=S(t)),f*=e},this.update=function(){this.objectTest=this.object.clone(),this.targetTest=this.target.clone();const e=this.movementRestrictionPivotPoint?this.objectTest:this.object,t=this.movementRestrictionPivotPoint?this.targetTest:this.target;var i=e.position,n=i.clone().sub(this.target),a=Math.atan2(n.x,n.z),r=Math.atan2(Math.sqrt(n.x*n.x+n.z*n.z),n.y);this.autoRotate&&this.rotateLeft(y()),this.enableDamping?(a+=g*this.dampingFactor,r+=u*this.dampingFactor):(a+=g,r+=u),r=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,r)),r=Math.max(s,Math.min(Math.PI-s,r));var l=n.length(),h=l*f;h=Math.max(this.minDistance,Math.min(this.maxDistance,h)),this.enableDamping?t.addScaledVector(b,this.dampingFactor):t.add(b),this.zoomToCursor&&t.lerp(this.mouse3D,1-h/l),n.x=h*Math.sin(r)*Math.sin(a),n.y=h*Math.cos(r),n.z=h*Math.sin(r)*Math.cos(a),i.copy(t).add(n),e.lookAt(t),this.movementRestrictionPivotPoint&&ye(e.position,this.movementRestrictionPivotPoint)<this.maxDistance&&(this.object.position.copy(e.position),this.object.rotation.copy(e.rotation),this.object.scale.copy(e.scale),this.object.projectionMatrix.copy(e.projectionMatrix),this.object.isPerspectiveCamera&&e.isPerspectiveCamera&&this.object.matrixWorldInverse.copy(e.matrixWorldInverse),this.object.isOrthographicCamera&&e.isOrthographicCamera&&(this.object.matrixWorld.copy(e.matrixWorld),this.object.matrixWorldInverse.copy(e.matrixWorldInverse)),this.object.isPerspectiveCamera&&e.isPerspectiveCamera?(this.object.fov=e.fov,this.object.near=e.near,this.object.far=e.far):this.object.isOrthographicCamera&&e.isOrthographicCamera&&(this.object.left=e.left,this.object.right=e.right,this.object.top=e.top,this.object.bottom=e.bottom,this.object.near=e.near,this.object.far=e.far),this.object.updateProjectionMatrix(),this.object.updateMatrixWorld(),this.target=t.clone(),o.domElement.dispatchEvent(new Event("cameraMoved")),this.needsUpdate=!0),this.enableDamping?(g*=1-this.dampingFactor,u*=1-this.dampingFactor,b.multiplyScalar(1-this.dampingFactor)):(g=0,u=0,b.set(0,0,0)),f=1,this.movementRestrictionPivotPoint||(o.domElement.dispatchEvent(new Event("cameraMoved")),this.needsUpdate=!0)},this.onMouseUp=T,this.touchend=P,this.domElement.addEventListener("contextmenu",F,!1),this.domElement.addEventListener("mousedown",v,!1),this.domElement.addEventListener("mousewheel",j,!1),this.domElement.addEventListener("DOMMouseScroll",j,!1),this.domElement.addEventListener("touchstart",I,!1),this.domElement.addEventListener("touchend",P,!1),this.domElement.addEventListener("touchmove",k,!1),window.document.addEventListener("keydown",_,!1),this.dispose=function(){this.domElement.removeEventListener("contextmenu",F),this.domElement.removeEventListener("mousedown",v),this.domElement.removeEventListener("mousewheel",j),this.domElement.removeEventListener("DOMMouseScroll",j),this.domElement.removeEventListener("touchstart",I),this.domElement.removeEventListener("touchend",P),this.domElement.removeEventListener("touchmove",k),window.document.removeEventListener("keydown",_)}};var Rn=i(1317);const Bn=-1,An=0,Wn=3,Vn=1e-6;function Nn(e){this.enabled&&(this.mouseMoved=!0,this.state===An&&(this.rotateEnd.set(e.clientX,e.clientY),this.makeRotation()))}function En(e){this.enabled&&0===e.button&&(this.mouseMoved=!1,this.state=An,this.rotateStart.set(e.clientX,e.clientY))}function zn(){this.enabled&&(this.state=Bn,this.mouseMoved||this.moveToCircleNavigatorPosition())}function Hn(e){if(this.enabled)if(e.preventDefault(),e.stopPropagation(),this.touchMoved=!0,1===e.touches.length){if(this.state!==Wn)return;this.rotateEnd.set(e.touches[0].pageX,e.touches[0].pageY),this.makeRotation()}else this.state=Bn}function Gn(e){if(this.enabled)if(this.touchMoved=!1,1===e.touches.length)this.state=Wn,this.rotateStart.set(e.touches[0].pageX,e.touches[0].pageY);else this.state=Bn}function Un(){this.enabled&&(this.touchMoved||this.moveToCircleNavigatorPosition(),this.state=Bn)}function qn(e){if(this.enabled)switch(e.code){case"ArrowUp":case"KeyW":this.shouldMoveForward=!0;break;case"ArrowLeft":case"KeyA":this.shouldMoveLeft=!0;break;case"ArrowDown":case"KeyS":this.shouldMoveBackward=!0;break;case"ArrowRight":case"KeyD":this.shouldMoveRight=!0}}function Yn(e){if(this.enabled)switch(e.code){case"ArrowUp":case"KeyW":this.shouldMoveForward=!1;break;case"ArrowLeft":case"KeyA":this.shouldMoveLeft=!1;break;case"ArrowDown":case"KeyS":this.shouldMoveBackward=!1;break;case"ArrowRight":case"KeyD":this.shouldMoveRight=!1}}const Kn=class{constructor(e,t,i,o,s){this.camera=e,this.object=e,this.domElement=t,this.scene=i,this.movementRestrictionPivotPoint=o,this.floorplan3DThis=s,this.enabled=!0,this.maxDistance=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this._vector=new Ne.Pa4,this.pointerSpeed=1,this._onMouseMove=Nn.bind(this),this._onMouseDown=En.bind(this),this._onMouseUp=zn.bind(this),this._onTouchStart=Gn.bind(this),this._onTouchEnd=Un.bind(this),this._onTouchMove=Hn.bind(this),this._onKeyDown=qn.bind(this),this._onKeyUp=Yn.bind(this),this.shouldMoveForward=!1,this.shouldMoveBackward=!1,this.shouldMoveLeft=!1,this.shouldMoveRight=!1,this.clock=new Ne.SUY,this.movementSpeed=100,this.previousMouseMoveEventCoords=null,this.state=Bn,this.rotateStart=new Ne.FM8,this.rotateEnd=new Ne.FM8,this.rotateDelta=new Ne.FM8,this.rotateSpeed=1,this.thetaDelta=0,this.phiDelta=0,this.rotationScale=1,this.mouseMoved=!1,this.touchMoved=!1,this.circleNavigator=null,this.cameraPositionAnimationDurationMs=500,this.domElement.addEventListener("mousemove",this._onMouseMove),this.domElement.addEventListener("mousedown",this._onMouseDown),this.domElement.addEventListener("mouseup",this._onMouseUp),this.domElement.addEventListener("touchstart",this._onTouchStart),this.domElement.addEventListener("touchend",this._onTouchEnd),this.domElement.addEventListener("touchmove",this._onTouchMove),document.addEventListener("keydown",this._onKeyDown),document.addEventListener("keyup",this._onKeyUp)}resetState(){this.state=Bn}dispose(){this.domElement.removeEventListener("mousemove",this._onMouseMove),this.domElement.removeEventListener("mousedown",this._onMouseDown),this.domElement.removeEventListener("mouseup",this._onMouseUp),this.domElement.removeEventListener("touchstart",this._onTouchStart),this.domElement.removeEventListener("touchend",this._onTouchEnd),this.domElement.removeEventListener("touchmove",this._onTouchMove),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("keyup",this._onKeyUp)}getObject(){return this.camera}getDirection(e){return e.set(0,0,-1).applyQuaternion(this.camera.quaternion)}createCircleNavigator(e){if(!this.circleNavigator){this.circleNavigator=new Ne.ZAu;const t=this.floorplan3DThis.props.mainComponentThis.meter/2,i=.9*t,o=32;this.circleNavigator.add(new Ne.Kj0(new Ne.zf8(i,o),new Ne.vBJ({color:16777215,transparent:!0,opacity:.2}))),this.circleNavigator.add(new Ne.blk(new Ne.o8S(i,t,o),new Ne.nls({color:16777215}))),this.circleNavigator.children.forEach((e=>{e.isMesh=!0,e.rotation.x=-Math.PI/2})),this.moveCircleNavigatorToPosition(e),this.scene.add(this.circleNavigator)}}disposeCircleNavigator(){this.circleNavigator&&(this.circleNavigator.children.forEach((e=>{this.scene.remove(this.circleNavigator),this.floorplan3DThis.disposeObject(e)})),this.circleNavigator=null)}moveCircleNavigatorToPosition(e){this.circleNavigator.children.forEach((t=>t.position.set(e.x,this.floorplan3DThis.props.mainComponentThis.getFloorStartElevation(this.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D().floorNumber,!0)+1,e.z)))}updateCircleNavigator(e,t){this.state===Bn&&(!e&&t&&t[0]?(t=t[0],this.circleNavigator?this.moveCircleNavigatorToPosition(t.point):this.createCircleNavigator(t.point)):this.disposeCircleNavigator())}isCameraPositionValid(e){return!this.movementRestrictionPivotPoint||ye(e,this.movementRestrictionPivotPoint)<this.maxDistance}moveToCircleNavigatorPosition(){if(!this.circleNavigator)return;const e=this.circleNavigator.children[0].position,t=this.camera.position.clone(),i=new Ne.Pa4(e.x,this.camera.position.y,e.z);if(!this.isCameraPositionValid(i))return;let o=null;const s=e=>{Rn.log("updateCameraPosition"),o||(o=e);const n=e-o;if(n>=this.cameraPositionAnimationDurationMs)this.camera.position.copy(i),this.domElement.dispatchEvent(new Event("cameraMoved"));else{const e=n/this.cameraPositionAnimationDurationMs;this.camera.position.lerpVectors(t,i,e),requestAnimationFrame(s)}};requestAnimationFrame(s)}isCameraPositionDistanceShiftValid(e,t){e.applyQuaternion(this.camera.quaternion);const i=this.camera.position.clone().add(e.multiplyScalar(t));return this.isCameraPositionValid(i)}moveForwardBackward(e){this.isCameraPositionDistanceShiftValid(new Ne.Pa4(0,0,1),e)&&(this.camera.translateZ(e),this.domElement.dispatchEvent(new Event("cameraMoved")))}moveLeftRight(e){this.isCameraPositionDistanceShiftValid(new Ne.Pa4(1,0,0),e)&&(this.camera.translateX(e),this.domElement.dispatchEvent(new Event("cameraMoved")))}makeRotation(){this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.thetaDelta+=2*Math.PI*this.rotateDelta.x/this.domElement.clientWidth*this.rotateSpeed,this.phiDelta+=2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight*this.rotateSpeed,this.rotateStart.copy(this.rotateEnd);const e=new Ne.Pa4;this.camera.getWorldDirection(e);const t=new Ne.Pa4;t.copy(this.camera.position).add(e);let i=this.camera.position.clone().sub(t);var o=Math.atan2(i.x,i.z),s=Math.atan2(Math.sqrt(i.x*i.x+i.z*i.z),i.y);o+=this.thetaDelta,s+=this.phiDelta,s=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,s)),s=Math.max(Vn,Math.min(Math.PI-Vn,s));const n=i.length()*this.rotationScale;i.x=n*Math.sin(s)*Math.sin(o),i.y=n*Math.cos(s),i.z=n*Math.sin(s)*Math.cos(o),this.camera.position.copy(t).add(i),this.camera.lookAt(t),this.thetaDelta=0,this.phiDelta=0,this.domElement.dispatchEvent(new Event("cameraMoved"))}animate(){if(!0===this.enabled){const e=this.clock.getDelta();this.shouldMoveForward&&this.moveForwardBackward(-e*this.movementSpeed),this.shouldMoveBackward&&this.moveForwardBackward(e*this.movementSpeed),this.shouldMoveLeft&&this.moveLeftRight(-e*this.movementSpeed),this.shouldMoveRight&&this.moveLeftRight(e*this.movementSpeed)}}};var Xn=i(1317);const Zn=class{constructor(e,t,i,o,s){var n=this;this.setWallPlaneShadow=e=>{e.castShadow=!0,e.receiveShadow=!0},this.drawWall=()=>{let e=new Ne.ZAu;this.drawWallExteriorAndInteriorPlanes(e),this.variableVisiblityPlanes.push(this.drawTopBottomWallPlanes([this.exteriorLineCoords[0],this.exteriorLineCoords[1],this.interiorLineCoords[1],this.interiorLineCoords[0]],this.wallStartHeight+this.wallHeight,this.floorplan3DThis.wallTopPlaneMaterial,e)),this.fixedVisibilityPlanes.push(this.drawTopBottomWallPlanes([this.exteriorLineCoords[0],this.exteriorLineCoords[1],this.interiorLineCoords[1],this.interiorLineCoords[0]],this.wallStartHeight+1,this.floorplan3DThis.wallBottomPlaneMaterial,e)),this.variableVisiblityPlanes.push(this.drawStartEndWallPlanes(this.interiorLineCoords[0],this.exteriorLineCoords[0],e)),this.variableVisiblityPlanes.push(this.drawStartEndWallPlanes(this.interiorLineCoords[1],this.exteriorLineCoords[1],e)),this.floorThicknessWallPart=this.drawTopBottomWallPlanes([this.exteriorLineCoords[0],this.exteriorLineCoords[1],this.interiorLineCoords[1],this.interiorLineCoords[0]],this.wallStartHeight,this.floorplan3DThis.roomFloorDefaultMaterial,e,{depth:this.floorplan3DThis.props.mainComponentThis.floorThickness*this.floorplan3DThis.scaleFactor,bevelEnabled:!1}),this.wall3D=e,this.floorplan3DThis.isFloorHidden(this.floorNumber)&&(this.floorThicknessWallPart.visible=!1,this.setWallPlanesObjectsVisibility(!1,!1)),this.sceneObject.add(e),this.wall2D.alwaysHide?this.setWallPlanesObjectsVisibility(!1,!1):this.updateFrontWallVisibility()},this.drawExteriorInteriorPlane=(e,t,i,o,s,n,a)=>{let r=new Ne.Pa4(e.x,this.wallStartHeight,e.y),l=new Ne.Pa4(t.x,this.wallStartHeight,t.y),h=l.clone();h.y=this.wallStartHeight+this.wallHeight;let c=r.clone();c.y=this.wallStartHeight+this.wallHeight;let d=[r,l,h,c],p=Ce({x:r.x,y:r.z},{x:l.x,y:l.z});const{transform3Dto2DMatrix:m,transform2Dto3DMatrix:u}=this.calculateWallPlaneTransformMatrices(e,t);d.forEach((e=>e.applyMatrix4(m)));let g=new Ne.bnF(d.map((e=>new Ne.FM8(e.x,e.y))));d.forEach((e=>e.applyMatrix4(u)));for(let S=0;S<s.length;S++)if("doorWindow"===s[S].class){let e,t,o=[];if(s[S].realBbox.forEach((e=>o.push(xe(e,i)))),o.sort(((e,t)=>t.distance-e.distance)),o=o.slice(0,2).map((e=>e.projectedPoint)),this.floorplan3DThis.props.mainComponentThis.isDoorObject(s[S].type)){const i=s[S].additionalParams.height3D*this.floorplan3DThis.scaleFactor;let n=new Ne.Pa4(o[0].x,this.wallStartHeight,o[0].y),a=new Ne.Pa4(o[1].x,this.wallStartHeight,o[1].y),r=a.clone();r.y=this.wallStartHeight+i;let l=n.clone();l.y=this.wallStartHeight+i,e=[n,a,r,l],e.forEach((e=>e.applyMatrix4(m))),t=e.map((e=>new Ne.FM8(e.x,e.y)))}else{const i=s[S].additionalParams.height3D*this.floorplan3DThis.scaleFactor,n=(s[S].additionalParams.positionY+s[S].additionalParams.height3D/2)*this.floorplan3DThis.scaleFactor;let a=new Ne.Pa4(o[0].x,this.wallStartHeight+n-i/2,o[0].y),r=new Ne.Pa4(o[1].x,this.wallStartHeight+n-i/2,o[1].y),l=r.clone();l.y=this.wallStartHeight+n+i/2;let h=a.clone();h.y=this.wallStartHeight+n+i/2,e=[a,r,l,h],e.forEach((e=>e.applyMatrix4(m))),t=e.map((e=>new Ne.FM8(e.x,e.y)))}g.holes.push(new Ne.y$t(t))}let f,b=new Ne.oa8(g),w=b.getAttribute("position"),C=new Ne.Pa4;for(let S=0;S<w.count;S++)C.fromBufferAttribute(w,S),C.applyMatrix4(u),w.setXYZ(S,C.x,C.y,C.z);w.needsUpdate=!0,b.computeVertexNormals(),b.scale(this.floorplan3DThis.scaleFactor,1,this.floorplan3DThis.scaleFactor);const x=this.wall2D[i===this.interiorLineEquation?"interiorPlaneMaterial":"exteriorPlaneMaterial"];if("Glass"!==x&&"Unknown"!==x&&z.isHexColor(x)){let e=r.clone();e.multiplyScalar(this.floorplan3DThis.scaleFactor);const t=t=>{const i=Ce({x:e.x,y:e.z},{x:t.x,y:t.z})/(p*this.floorplan3DThis.scaleFactor),o=t.y/this.wallHeight;return new Ne.FM8(i,o)};this.floorplan3DThis.calculateShapeGeometryUVMappings(b,t);const i=ji.find((e=>e.title===x));f=this.floorplan3DThis.createTextureMaterial(this.floorplan3DThis.floorplanWallMaterials.find((e=>e.name===x)).textureData,o,i.scale?{scaleValue:i.scale,width:p*this.floorplan3DThis.scaleFactor,height:this.wallHeight}:null)}else if("Glass"===x)f=new Ne.EJi,f.side=o,f.color=new Ne.Ilk(1,1,1),f.transmission=1,f.roughness=0,f.ior=1.7,f.thickness=.5,f.specularIntensity=1,f.clearcoat=1;else{let e;e="Unknown"===x?"#f9f3e4":x,f=new Ne.xoR({color:e,flatShading:!0,side:o})}let y=new Ne.Kj0(b,f);return n.planeObject=y,n.planeObject.wall3D=this,this.setWallPlaneShadow(y),a.add(y),y},this.drawTopBottomWallPlanes=(e,t,i,o,s)=>{let n,a=[new Ne.FM8(e[0].x*this.floorplan3DThis.scaleFactor,e[0].y*this.floorplan3DThis.scaleFactor),new Ne.FM8(e[1].x*this.floorplan3DThis.scaleFactor,e[1].y*this.floorplan3DThis.scaleFactor),new Ne.FM8(e[2].x*this.floorplan3DThis.scaleFactor,e[2].y*this.floorplan3DThis.scaleFactor),new Ne.FM8(e[3].x*this.floorplan3DThis.scaleFactor,e[3].y*this.floorplan3DThis.scaleFactor)],r=new Ne.bnF(a);n=s?new Ne.O7d(r,s):new Ne.oa8(r);let l=new Ne.Kj0(n,i);return l.rotation.set(Math.PI/2,0,0),l.position.y=t,this.setWallPlaneShadow(l),o.add(l),l},this.drawStartEndWallPlanes=(e,t,i)=>{let o=new Float32Array([e.x,this.wallStartHeight,e.y,t.x,this.wallStartHeight,t.y,t.x,this.wallStartHeight+this.wallHeight,t.y,e.x,this.wallStartHeight+this.wallHeight,e.y]),s=new Ne.u9r;s.setAttribute("position",new Ne.TlE(o,3));s.setIndex([0,1,2,0,2,3]);let n=new Ne.Kj0(s,this.floorplan3DThis.wallStartEndPlanesMaterial);return this.setWallPlaneShadow(n),n.scale.set(this.floorplan3DThis.scaleFactor,1,this.floorplan3DThis.scaleFactor),i.add(n),n},this.drawWallObjects=()=>{let e=this.wall2DObjects.filter((e=>"doorWindow"===e.class&&this.floorplan3DThis.props.mainComponentThis.isDoorObject(e.type))),t=this.wall2DObjects.filter((e=>"doorWindow"===e.class&&this.floorplan3DThis.props.mainComponentThis.isWindowObject(e.type))),i=this.wall2DObjects.filter((e=>"lights"===e.class&&"onWall"===e.family)),o=this.wall2DObjects.filter((e=>"furniture"===e.class&&!this.floorplan3DThis.props.mainComponentThis.isFanObject(e.type)&&!this.floorplan3DThis.props.mainComponentThis.isCoverObject(e.type)&&!this.floorplan3DThis.props.mainComponentThis.isPresenceObject(e.type)&&("onWall"===e.family||"inWall"===e.family))),s=this.wall2DObjects.filter((e=>this.floorplan3DThis.props.mainComponentThis.isCoverObject(e.type)));for(let n=0;n<e.length;n++)this.drawDoorWindowObjects(e[n]);for(let n=0;n<t.length;n++)this.drawDoorWindowObjects(t[n]);for(let n=0;n<i.length;n++)this.drawWallLightsObjects(i[n]);for(let n=0;n<o.length;n++)this.drawWallFurnitureObjects(o[n]);for(let n=0;n<s.length;n++)this.drawWallCoverObjects(s[n])},this.drawDoorWindowObjects=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=n.floorplan3DThis.createFloorplanItem(n.sceneObject,n.floorplan3DThis.props.mainComponentThis.isDoorObject(e.type)?n.floorplan3DThis.doorObjects3D:n.floorplan3DThis.windowObjects3D,e.type,e,n.floorNumber,t);n.onWallObjectDrawed(i)},this.drawWallCoverObjects=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=n.floorplan3DThis.createFloorplanItem(n.sceneObject,n.floorplan3DThis.coverObjects3D,e.type,e,n.floorNumber,t);n.onWallObjectDrawed(i)},this.drawWallLightsObjects=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=n.floorplan3DThis.createFloorplanItem(n.sceneObject,n.floorplan3DThis.lightObjects3D,e.type,e,n.floorNumber,t);n.onWallObjectDrawed(i)},this.drawWallFurnitureObjects=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=n.floorplan3DThis.createFloorplanItem(n.sceneObject,n.floorplan3DThis.furnitureObjects3D,e.type,e,n.floorNumber,t);n.onWallObjectDrawed(i)},this.updateFrontWallVisibility=()=>{if(!this.callUpdateFrontWallVisibility||this.hideWall||this.wall2D.alwaysHide||this.floorplan3DThis.isFloorHidden(this.floorNumber))this.hideWall?this.setWallPlanesObjectsVisibility(!1):(this.wall2D.alwaysHide||this.floorplan3DThis.isFloorHidden(this.floorNumber))&&this.setWallPlanesObjectsVisibility(!1,!1);else{const e=new Ne.FM8(this.wallStart.x,this.wallStart.y).multiplyScalar(this.floorplan3DThis.scaleFactor),t=new Ne.FM8(this.wallEnd.x,this.wallEnd.y).multiplyScalar(this.floorplan3DThis.scaleFactor),i=t.x-e.x,o=t.y-e.y;let s=new Ne.Pa4(-o,0,i);s.normalize();const n=new Ne.Pa4;this.sceneObject===this.floorplan3DThis.floorplan3DOnMapScene?(n.copy(this.floorplan3DThis.floorplan3DOnMapCameraPosition),this.floorplan3DThis.processSceneVec3(n)):n.copy(this.floorplan3DThis.currentControls.object.position);let a=new Ne.Pa4((e.x+t.x)/2,this.wallStartHeight,(e.y+t.y)/2).clone().sub(n).clone(),r=s.dot(a)<=0;this.setWallPlanesObjectsVisibility(r)}},this.drawWallExteriorAndInteriorPlanes=e=>{new Array({planeLineCoords:this.interiorLineCoords,planeLineEquation:this.interiorLineEquation,planeAttributeObject:this.interiorWallPlane},{planeLineCoords:this.exteriorLineCoords,planeLineEquation:this.exteriorLineEquation,planeAttributeObject:this.exteriorWallPlane}).forEach((t=>this.variableVisiblityPlanes.push(this.drawExteriorInteriorPlane(t.planeLineCoords[0],t.planeLineCoords[1],t.planeLineEquation,Ne.ehD,this.wall2DObjects.filter((e=>"inWall"===e.family)),t.planeAttributeObject,e))))},this.calculateWallPlaneTransformMatrices=(e,t)=>{const i=this.floorplan3DThis.calculateAngleBetween2DVectors(1,0,t.x-e.x,t.y-e.y);let o=new Ne.yGw,s=new Ne.yGw,n=new Ne.yGw,a=new Ne.yGw;return a.makeRotationY(-i),n.makeTranslation(-e.x,0,-e.y),o.multiplyMatrices(a,n),s=o.clone().invert(),{transform3Dto2DMatrix:o,transform2Dto3DMatrix:s}},this.setWallPlanesObjectsVisibility=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(n.wall2D.alwaysHide||n.floorplan3DThis.isFloorHidden(n.floorNumber))&&(e=!1,t=!1);let i=[...n.variableVisiblityPlanes];t||i.push(...n.fixedVisibilityPlanes);for(let s=0;s<i.length;s++)i[s].visible=e;const o=[...n.inWallItemObjects,...n.onWallItemObjects];for(let s=0;s<o.length;s++)o[s].object2D.additionalParams.hideWithWall?o[s].mesh.visible=e:o[s].mesh.visible=!0},this.setExteriorInteriorPlanesOpacity=e=>{new Array(this.interiorWallPlane.planeObject,this.exteriorWallPlane.planeObject).forEach((t=>{t.material.opacity=e,t.material.transparent=100!==e,t.material.needsUpdate=!0}))},this.interiorLineCoords=[],this.exteriorLineCoords=[],this.interiorLineEquation=i.equations.up,this.exteriorLineEquation=i.equations.down,this.wallStart=i.start,this.wallEnd=i.end,this.wall2D=i,this.wall2DObjects=o,this.wall3D=null,this.inWallItemObjects=[],this.onWallItemObjects=[],this.variableVisiblityPlanes=[],this.fixedVisibilityPlanes=[],this.floorThicknessWallPart=null,this.interiorWallPlane={},this.exteriorWallPlane={},this.sceneObject=t,this.callUpdateFrontWallVisibility=!0,this.hideWall=!1,this.floorNumber=s,this.wallHeight=i.wallHeight*e.scaleFactor,this.wallStartHeight=e.props.mainComponentThis.getFloorStartElevation(s,!0),this.floorplan3DThis=e;const a=Me(i,this.floorplan3DThis.isPointOnWallDecimalPrecision);this.interiorLineCoords=a.interiorLineCoords,this.exteriorLineCoords=a.exteriorLineCoords,2===this.interiorLineCoords.length&&2===this.exteriorLineCoords.length&&this.drawWall()}onWallObjectDrawed(e){("inWall"===e.object2D.family?this.inWallItemObjects:this.onWallItemObjects).push(e),this.hideWall||this.wall2D.alwaysHide?e.mesh.visible=!1:this.updateFrontWallVisibility()}addWallObject(e,t){if(!this.wall2DObjects.find((t=>t.id===e.object2D.id))){Xn.log("addWallObject",e),this.wall2DObjects.push(e.object2D);("inWall"===t?this.inWallItemObjects:this.onWallItemObjects).push(e)}}removeWallObject(e,t){Xn.log("removeWallObject"),this.wall2DObjects=this.wall2DObjects.filter((t=>t.id!==e.object2D.id));const i="inWall"===t?this.inWallItemObjects:this.onWallItemObjects,o=i.findIndex((t=>t.object2D.id===e.object2D.id));-1!==o&&i.splice(o,1)}redrawWallExteriorInteriorPlanes(){Xn.log("redrawWallExteriorInteriorPlanes"),this.variableVisiblityPlanes=this.variableVisiblityPlanes.filter((e=>e.uuid!==this.interiorWallPlane.planeObject.uuid||e.uuid!==this.exteriorWallPlane.planeObject.uuid)),new Array(this.interiorWallPlane.planeObject,this.exteriorWallPlane.planeObject).forEach((e=>{this.wall3D.remove(e),this.floorplan3DThis.disposeObject(e)})),this.drawWallExteriorAndInteriorPlanes(this.wall3D),100!==this.floorplan3DThis.wallsOpacityRef.current.getWallsOpacityValue()&&this.setExteriorInteriorPlanesOpacity(this.floorplan3DThis.wallsOpacityRef.current.getWallsOpacityValue()/100),this.updateFrontWallVisibility()}removeWall(){this.sceneObject.remove(this.wall3D),this.floorplan3DThis.disposeObject(this.wall3D);[...this.inWallItemObjects,...this.onWallItemObjects].forEach((e=>this.floorplan3DThis.removeFloorplanItem(e)))}};class Jn extends o.Component{constructor(){super(),this.getShowWallSwitchState=()=>this.state.wallsVisible,this.getFrontWallsSwitchState=()=>this.state.frontWallsVisible,this.showFloorplanWalls=e=>{for(let t=0;t<e.length;t++)e[t].hideWall=!1,this.state.frontWallsVisible?e[t].setWallPlanesObjectsVisibility(!0):e[t].updateFrontWallVisibility()},this.hideFloorplanWalls=e=>{for(let t=0;t<e.length;t++)e[t].hideWall=!0,e[t].setWallPlanesObjectsVisibility(!1)},this.onWallVisibilityChange=()=>{const e=this.props.mainComponentThis.showMapLayer3DInputRef.current.getCheckedStatus();this.state.wallsVisible?(this.hideFloorplanWalls(this.props.mainComponentThis.currentWalls3D),e&&this.hideFloorplanWalls(this.props.mainComponentThis.floorplanViewWalls3D)):(this.showFloorplanWalls(this.props.mainComponentThis.currentWalls3D),e&&this.showFloorplanWalls(this.props.mainComponentThis.floorplanViewWalls3D)),this.setState({wallsVisible:!this.state.wallsVisible})},this.showFrontFloorplanWalls=e=>{for(let t=0;t<e.length;t++)e[t].callUpdateFrontWallVisibility=!1,this.state.wallsVisible&&e[t].setWallPlanesObjectsVisibility(!0)},this.hideFrontFloorplanWalls=e=>{for(let t=0;t<e.length;t++)e[t].callUpdateFrontWallVisibility=!0,e[t].updateFrontWallVisibility()},this.onFrontWallVisibilityChange=()=>{const e=this.props.mainComponentThis.showMapLayer3DInputRef.current.getCheckedStatus();this.state.frontWallsVisible?(this.hideFrontFloorplanWalls(this.props.mainComponentThis.currentWalls3D),e&&this.hideFrontFloorplanWalls(this.props.mainComponentThis.floorplanViewWalls3D)):(this.showFrontFloorplanWalls(this.props.mainComponentThis.currentWalls3D),e&&this.showFrontFloorplanWalls(this.props.mainComponentThis.floorplanViewWalls3D)),this.setState({frontWallsVisible:!this.state.frontWallsVisible})},this.state={frontWallsVisible:!0,wallsVisible:!0},this.onWallVisibilityChange=this.onWallVisibilityChange.bind(this),this.onFrontWallVisibilityChange=this.onFrontWallVisibilityChange.bind(this),this.getShowWallSwitchState=this.getShowWallSwitchState.bind(this),this.getFrontWallsSwitchState=this.getFrontWallsSwitchState.bind(this),this.showFloorplanWalls=this.showFloorplanWalls.bind(this),this.hideFloorplanWalls=this.hideFloorplanWalls.bind(this),this.showFrontFloorplanWalls=this.showFrontFloorplanWalls.bind(this),this.hideFrontFloorplanWalls=this.hideFrontFloorplanWalls.bind(this)}render(){return(0,l.jsxs)("li",{children:[(0,l.jsxs)("div",{className:"panel-option-container",children:[(0,l.jsxs)("div",{className:"option-name-note-container",children:[(0,l.jsx)("div",{children:"SHOW WALLS"}),(0,l.jsx)("div",{children:(0,l.jsx)(st,{indoorPanelExplanationBox:this.props.panelInfoExplanationBox,infoText:"Show floorplan walls"})})]}),(0,l.jsx)("div",{children:(0,l.jsx)(qt.Z,{checked:this.state.wallsVisible,onChange:this.onWallVisibilityChange})})]}),(0,l.jsxs)("div",{className:"panel-option-container",children:[(0,l.jsxs)("div",{className:"option-name-note-container",children:[(0,l.jsx)("div",{children:"FRONT WALLS"}),(0,l.jsx)("div",{children:(0,l.jsx)(st,{indoorPanelExplanationBox:this.props.panelInfoExplanationBox,infoText:"Show or hide front walls on camera movement"})})]}),(0,l.jsx)("div",{children:(0,l.jsx)(qt.Z,{checked:this.state.frontWallsVisible,onChange:this.onFrontWallVisibilityChange})})]})]})}}const Qn=Jn;var $n=i(3649);class ea extends o.Component{constructor(){super(),this.getWallsOpacityValue=()=>this.state.wallsOpacity,this.onWallsOpacitySliderChange=(e,t)=>{this.setState({wallsOpacity:t})},this.onWallsOpacitySliderMouseUp=()=>{this.props.mainComponentThis.changeWallMaterialOpacity(this.props.mainComponentThis.currentWalls3D,this.state.wallsOpacity),this.props.mainComponentThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.props.mainComponentThis.changeWallMaterialOpacity(this.props.mainComponentThis.floorplanViewWalls3D,this.state.wallsOpacity)},this.state={wallsOpacity:100,isVisible:!1},this.getWallsOpacityValue=this.getWallsOpacityValue.bind(this),this.onWallsOpacitySliderChange=this.onWallsOpacitySliderChange.bind(this),this.onWallsOpacitySliderMouseUp=this.onWallsOpacitySliderMouseUp.bind(this)}render(){return(0,l.jsx)(xt,{containerClasses:"slider-form-group",containerStyle:{textAlign:"center",marginBottom:0},label:"Walls opacity",labelStyle:{margin:0},children:(0,l.jsx)($n.Z,{getAriaLabel:()=>"Walls opacity",getAriaValueText:e=>"".concat(e,"%"),valueLabelFormat:e=>"".concat(e,"%"),value:this.state.wallsOpacity,onChange:this.onWallsOpacitySliderChange,onChangeCommitted:this.onWallsOpacitySliderMouseUp,valueLabelDisplay:"auto",min:0,max:100,step:1})})}}const ta=ea;var ia=i(1317);const oa=class{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.floorplan3DThis=e,this.bindedObjects=t||[],this.connectorIDPropertyName=e.props.mainComponentThis.connectorIDbinderIDPropertyName,this.class=e.getObjectConnectorClassValue(i),this.bindWithFixed2DObjects=e.getIsFixed2DObjectsValue(i),this.additionalParameters=e.getObjectConnectorAdditionalParameters(i),e.setObjectsConnectorInstanceCustomProperties(this,i)}create(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.bindWithFixed2DObjects){const e=[...this.bindedObjects];this.bindedObjects=[];for(let i=0;i<e.length;i++)this.addBindedObject(e[i],t)}}update(e){for(const[t,i]of Object.entries(e))this[t]=i;if(this.bindedObjects)if(this.bindWithFixed2DObjects)this.floorplan3DThis.controlPanelRef.current.updateFixedBindedObjects(this.bindedObjects,e);else{const t=this.bindedObjects.map((e=>this.floorplan3DThis.getObjectsConnectorUnfixedBindedObjectParameters(e)));for(let e=0;e<this.bindedObjects.length;e++)this.removeBindedObject(this.bindedObjects[e],!1);this.bindedObjects=[];for(let e=0;e<t.length;e++)this.addBindedObject(t[e]);this.floorplan3DThis.controlPanelRef.current.updateUnfixedBindedObjects(e)}else this.create(e)}removeBindedObject(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.bindedObjects.findIndex((t=>t.object2D.id===e.object2D.id));if(-1!==i){t&&this.bindedObjects.splice(i,1);let o=[this.floorplan3DThis.floorplan3DViewScene];this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DThis.floorplan3DOnMapScene&&o.push(this.floorplan3DThis.floorplan3DOnMapScene),this.bindWithFixed2DObjects?o.forEach((t=>{const i=t.getObjectsByProperty(this.connectorIDPropertyName,this[this.connectorIDPropertyName]);ia.log("Remove binded object Target object",i);for(let o=0;o<i.length;o++)if(i[o].object2D.id===e.object2D.id){ia.log("Remove target object"),i[o][this.connectorIDPropertyName]=null;const e=this.floorplan3DThis.removeBindedFixedObjectCallback(i[o]);i[o].changeStateMethod(i[o],e);break}})):(this.floorplan3DThis[this.additionalParameters.floorplanViewArrayName]=this.floorplan3DThis[this.additionalParameters.floorplanViewArrayName].filter((t=>!(t.mesh[this.connectorIDPropertyName]===this[this.connectorIDPropertyName]&&t.mesh.object2D.id===e.object2D.id))),this.floorplan3DThis[this.additionalParameters.currentViewArrayName]=this.floorplan3DThis[this.additionalParameters.currentViewArrayName].filter((t=>!(t.mesh[this.connectorIDPropertyName]===this[this.connectorIDPropertyName]&&t.mesh.object2D.id===e.object2D.id))),o.forEach((t=>{const i=t.getObjectsByProperty(this.connectorIDPropertyName,this[this.connectorIDPropertyName]);for(let o=0;o<i.length;o++)if(i[o].object2D.id===e.object2D.id){this.floorplan3DThis.removeUnfixedItem(i[o],!1);break}})))}const o=e.itemObject;o&&o.removeAllAnimations&&o.removeAllAnimations()}addBindedObject(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.bindedObjects.push(e),this.bindWithFixed2DObjects){let t=[this.floorplan3DThis.floorplan3DViewScene];this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DThis.floorplan3DOnMapScene&&t.push(this.floorplan3DThis.floorplan3DOnMapScene),t.forEach((t=>{const i=t.getObjectsByProperty("type",e.type);for(let o=0;o<i.length;o++)if(i[o].object2D.id===e.object2D.id){i[o][this.connectorIDPropertyName]=this[this.connectorIDPropertyName];const e=this.floorplan3DThis.addBindedFixedObjectCallback(i[o],this);i[o].changeStateMethod(i[o],e);break}})),this.floorplan3DThis.userInteractionCurrentController.selectedObject&&this.floorplan3DThis.userInteractionCurrentController.selectedObject.mesh[this.connectorIDPropertyName]===this[this.connectorIDPropertyName]&&this.floorplan3DThis.updateRightBoxBindingComponent(this.floorplan3DThis.props.mainComponentThis.klet3DLastSavedData.find((t=>t.objID.find((t=>t.id===e.object2D.id)))))}else{if("sensor"===this.domain&&"sensor"===this.class){const t=this.floorplan3DThis.createSensorMesh(e,this);if(!t)return void this.bindedObjects.splice(this.bindedObjects.length-1,1);this.bindedObjects[this.bindedObjects.length-1]=t}if("other"===this.class){const t=this.floorplan3DThis.createOtherMesh(e,this);if(!t)return void this.bindedObjects.splice(this.bindedObjects.length-1,1);this.bindedObjects[this.bindedObjects.length-1]=t}if(t){const e=this.floorplan3DThis.createUnfixedItem(this.floorplan3DThis.floorplan3DViewScene,this.bindedObjects[this.bindedObjects.length-1]);if(this.floorplan3DThis[this.additionalParameters.floorplanViewArrayName].push(e),this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DThis.floorplan3DOnMapScene){const e=this.floorplan3DThis.cloneUnfixedBindedObject3D(this.bindedObjects[this.bindedObjects.length-1]),t=this.floorplan3DThis.createUnfixedItem(this.floorplan3DThis.floorplan3DOnMapScene,e);this.floorplan3DThis[this.additionalParameters.currentViewArrayName].push(t)}else this.floorplan3DThis[this.additionalParameters.currentViewArrayName].push(e)}}}remove(){ia.log("ObjectsConnector remove");const e=this.floorplan3DThis.userInteractionCurrentController.selectedObject&&this.floorplan3DThis.userInteractionCurrentController.selectedObject.mesh[this.connectorIDPropertyName]===this[this.connectorIDPropertyName];for(let t=0;t<this.bindedObjects.length;t++)this.removeBindedObject(this.bindedObjects[t],!1);this.bindedObjects=[],e&&(this.bindWithFixed2DObjects?this.floorplan3DThis.updateRightBoxBindingComponent(null):this.floorplan3DThis.userInteractionCurrentController.setSelectedObject(null))}};class sa extends o.Component{constructor(){super(),this.setBindedFixedObjectsPanelItems=(e,t,i)=>{this.panelItems=this.panelItems.filter((e=>!i.includes(e.type)));const o=this.props.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()?t:e;for(let s=0;s<o.length;s++)if(this.props.floorplan3DThis.isFloorplanItemMeshBinded(o[s].mesh)){this.panelItems.push({type:o[s].mesh.type,object3D:o[s].mesh,object2D:o[s].mesh.object2D,...this.props.floorplan3DThis.getPanelItemProperties(o[s].mesh,!0)});let e=this.props.floorplan3DThis.objectConnectorsArray.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===o[s].mesh[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));e?!e.bindedObjects.find((e=>e.object2D.id===o[s].mesh.object2D.id))&&e.addBindedObject(o[s].mesh):this.props.floorplan3DThis.objectConnectorsArray.push(new oa(this.props.floorplan3DThis,[o[s].mesh],this.props.floorplan3DThis.getObjectConnectorParamsData(o[s].mesh[this.props.mainComponentThis.connectorIDbinderIDPropertyName])))}this.forceUpdate()},this.setBindedUnfixedObjectsPanelItems=(e,t,i)=>{const o=this.props.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()?t:e;this.panelItems=this.panelItems.filter((e=>!i.includes(e.type)));for(let s=0;s<o.length;s++)this.props.floorplan3DThis.isFloorplanItemMeshBinded(o[s].mesh)&&this.panelItems.push({type:o[s].mesh.type,object3D:o[s].mesh,object2D:o[s].mesh.object2D,...this.props.floorplan3DThis.getPanelItemProperties(o[s].mesh,!1)});this.forceUpdate()},this.setDoorsWindowsSwitches=()=>this.setBindedFixedObjectsPanelItems(this.props.floorplan3DThis.floorplanViewWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isDoorObject(e.object2D.type)||this.props.mainComponentThis.isWindowObject(e.object2D.type))),this.props.floorplan3DThis.currentWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isDoorObject(e.object2D.type)||this.props.mainComponentThis.isWindowObject(e.object2D.type))),["door","window"]),this.setLightsSwitches=()=>{this.setBindedFixedObjectsPanelItems([...this.props.floorplan3DThis.floorplanViewLights,...this.props.floorplan3DThis.floorplanViewWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isLightObject(e.object2D.type)))],[...this.props.floorplan3DThis.currentViewLights,...this.props.floorplan3DThis.currentWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isLightObject(e.object2D.type)))],["light"])},this.setFansSwitches=()=>{this.setBindedFixedObjectsPanelItems(this.props.floorplan3DThis.floorplanViewFans,this.props.floorplan3DThis.currentViewFans,["fan"])},this.setCoverSwitches=()=>{this.setBindedFixedObjectsPanelItems(this.props.floorplan3DThis.floorplanViewWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isCoverObject(e.object2D.type))),this.props.floorplan3DThis.currentWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isCoverObject(e.object2D.type))),["cover"])},this.setPresenceSwitches=()=>{this.setBindedFixedObjectsPanelItems(this.props.floorplan3DThis.floorplanViewPresences,this.props.floorplan3DThis.currentViewPresences,["presence"])},this.setSensorValues=()=>this.setBindedUnfixedObjectsPanelItems(this.props.floorplan3DThis.floorplanViewSensors,this.props.floorplan3DThis.currentViewSensors,["sensor"]),this.setOthersValues=()=>this.setBindedUnfixedObjectsPanelItems(this.props.floorplan3DThis.floorplanViewOthers,this.props.floorplan3DThis.currentViewOthers,["other"]),this.updateFixedBindedObjects=(e,t)=>{const i=this.props.floorplan3DThis.getObjectConnectorParamsDataIDValue(t);this.panelItems.filter((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===i)).forEach((e=>e.value=this.props.floorplan3DThis.getObjectPanelItemValue(e.object3D,!0,t)));let o=[{targetObjects:this.props.floorplan3DThis.floorplan3DViewScene.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,i)}];this.props.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.props.floorplan3DThis.floorplan3DOnMapScene&&o.push({targetObjects:this.props.floorplan3DThis.floorplan3DOnMapScene.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,i)});for(let s=0;s<e.length;s++)o.forEach((i=>{const o=i.targetObjects.find((t=>t.object2D.id===e[s].object2D.id));o&&o.changeStateMethod(o,t)}));this.forceUpdate()},this.updateUnfixedBindedObjects=e=>{const t=this.props.floorplan3DThis.getObjectConnectorParamsDataIDValue(e);this.panelItems.filter((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===t)).forEach((t=>{t.value=this.props.floorplan3DThis.getObjectPanelItemValue(t.object3D,!1,e,t.isNumberValue),this.forceUpdate()}))},this.panelItems=[],this.setDoorsWindowsSwitches=this.setDoorsWindowsSwitches.bind(this),this.setLightsSwitches=this.setLightsSwitches.bind(this),this.setFansSwitches=this.setFansSwitches.bind(this),this.setCoverSwitches=this.setCoverSwitches.bind(this),this.setPresenceSwitches=this.setPresenceSwitches.bind(this),this.setSensorValues=this.setSensorValues.bind(this),this.setOthersValues=this.setOthersValues.bind(this),this.setBindedFixedObjectsPanelItems=this.setBindedFixedObjectsPanelItems.bind(this),this.setBindedUnfixedObjectsPanelItems=this.setBindedUnfixedObjectsPanelItems.bind(this),this.updateFixedBindedObjects=this.updateFixedBindedObjects.bind(this),this.updateUnfixedBindedObjects=this.updateUnfixedBindedObjects.bind(this)}render(){this.panelItems.filter((e=>"door"===e.type)),this.panelItems.filter((e=>"window"===e.type)),this.panelItems.filter((e=>"light"===e.type)),this.panelItems.filter((e=>"fan"===e.type)),this.panelItems.filter((e=>"cover"===e.type)),this.panelItems.filter((e=>"presence"===e.type)),this.panelItems.filter((e=>"sensor"===e.type)),this.panelItems.filter((e=>"other"===e.type));return null}}const na=sa;var aa=i(3835),ra=i(1411),la=i(2656),ha=i(7119),ca=i(6627),da=i(1317);function pa(e,t,i){const o=i.xMouse-t.xMouse,s=i.yMouse-t.yMouse,n=function(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=180*Math.atan2(t,e)/Math.PI+90;return e<0&&t<0&&(o+=360),i&&(o=he(o)),o}(o,s),a=Math.sqrt(Math.pow(o/this.meter,2)+Math.pow(s/this.meter,2));let r=e;return 0===o&&0===s||(r=(0,G.Z)(q()(e),a/1e3,n).geometry.coordinates),r}function ma(e){if("setCenter"===e.name){this._map.off("moveend",this.alignFloorplanTopLeftCornerOnMap);const e=this.calcul_snap_inverse(this.floorplanLastSavedTopLeftSvgCoords?this.floorplanLastSavedTopLeftSvgCoords.x:this.boxWallCoordinates.minX,this.floorplanLastSavedTopLeftSvgCoords?this.floorplanLastSavedTopLeftSvgCoords.y:this.boxWallCoordinates.minY),t=this._map.unproject([e.screenX-this.offset.left,e.screenY-(this.offset.top+this.offset.scrollY)]),i=q()([t.lng,t.lat]),o=q()([this.getFloorplanGpsLongitude(this.floorplanGeneral),this.getFloorplanGpsLatitude(this.floorplanGeneral)]),s=(0,ha.Z)(i,o),n=(0,ca.Z)(i,o),a=this._map.getCenter(),r=(0,G.Z)(q()([a.lng,a.lat]),n,s).geometry.coordinates;this._map.setCenter(r);const l=(0,ra.Z)({type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]},properties:{}},n,s);this.mapCornersGpsCoords=l.geometry.coordinates[0].slice(0,-1),this.mapCornerCoordsDebug&&this._map.getSource("mapCornersAfterSource").setData({type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]}})}}function ua(e){const t=de(e[1],e[0],this.width_viewbox/this.meter,this.height_viewbox/this.meter,this.floorplanGeneral.floorplan_bearing||0);return{topRightCorner:t[1],bottomRightCorner:t[2],bottomLeftCorner:t[3]}}function ga(e){const t=this.calcul_snap({pageX:this.offset.left,pageY:this.offset.top+this.offset.scrollY});if(this.mapCornerCoordsDebug){const e={type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]}};this._map.getSource("mapCornersBeforeSource").setData(e)}const i=this.calculateGpsCoordinatesForNewSvgPoint(this.mapCornersGpsCoords[0],e,t),{topRightCorner:o,bottomRightCorner:s,bottomLeftCorner:n}=this.calculateMapCornersCoordinatesFromTopLeftPoint(i);this.mapCornersGpsCoords=[i,o,s,n];const a={type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,i]]},properties:{}},r=(0,aa.Z)(a).geometry.coordinates;this._map.on("moveend",this.alignFloorplanTopLeftCornerOnMap),this._map.setCenter(r,{name:"setCenter"})}function fa(e){const t=this.calcul_snap({pageX:this.offset.left,pageY:this.offset.top+this.offset.scrollY});if(this.mapCornerCoordsDebug){const e={type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]}};this._map.getSource("mapCornersBeforeSource").setData(e)}const i=this.calculateGpsCoordinatesForNewSvgPoint(this.mapCornersGpsCoords[0],e,t),{topRightCorner:o,bottomRightCorner:s,bottomLeftCorner:n}=this.calculateMapCornersCoordinatesFromTopLeftPoint(i),a={type:"Feature",geometry:{type:"Polygon",coordinates:[[i,o,s,n,i]]},properties:{}};if(this.mapCornersGpsCoords=a.geometry.coordinates[0].slice(0,-1),this.mapCornerCoordsDebug){const e={type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]}};this._map.getSource("mapCornersAfterSource").setData(e)}da.log("Zoom before "+this._map.getZoom());const r=(0,aa.Z)(a).geometry.coordinates,l=ce(r[1],this.zoomFactor/this.meter);da.log("New zoom "+l),this._map.setZoom(l),this._map.on("moveend",this.alignFloorplanTopLeftCornerOnMap),this._map.setCenter(r,{name:"setCenter"})}function ba(e){this._map=e,this._map.setMinZoom(0),this._map.setMaxZoom(22),this._map.on("resize",this.handleMapLayerWindowResize);const t=this.getFloorplanBBoxCoords(),i={type:"Feature",geometry:{type:"Polygon",coordinates:[[...de(this.getFloorplanGpsLatitude(this.floorplanGeneral),this.getFloorplanGpsLongitude(this.floorplanGeneral),t.width/this.meter,t.height/this.meter),[this.getFloorplanGpsLongitude(this.floorplanGeneral),this.getFloorplanGpsLatitude(this.floorplanGeneral)]]]},properties:{}},o={pivot:[this.getFloorplanGpsLongitude(this.floorplanGeneral),this.getFloorplanGpsLatitude(this.floorplanGeneral)]},s=(0,la.Z)(i,this.floorplanGeneral.floorplan_bearing||0,o),n=(0,aa.Z)(s).geometry.coordinates;this.coordinateFloorplanSvgZoomWithMap(n[1]);const a=ce(n[1],this.zoomFactor/this.meter),r=e=>{"setZoom"===e.name?(this._map.setCenter([this.getFloorplanGpsLongitude(this.floorplanGeneral),this.getFloorplanGpsLatitude(this.floorplanGeneral)],{name:"setCenter1"}),this._map.setBearing(this.floorplanGeneral.floorplan_bearing||0,{name:"setBearing"}),this._map.setCenter(n,{name:"setCenter2"})):this.onMapCameraOptionsSetFinishCallback(e,r)};this._map.on("moveend",r),this._map.setZoom(a,{name:"setZoom"})}function wa(e,t){da.log("Moveend event"),da.log(e.name),"setCenter2"===e.name&&(da.log("Map set bearing and center finished"),this._map.off("moveend",t),this.getCurrentMapCornersGpsCoords(),da.log(this.mapCornersGpsCoords),this.mapCornerCoordsDebug&&(this._map.addSource("mapCornersBeforeSource",{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:[]}}}),this._map.addLayer({id:"mapCornersBeforeLayer",type:"line",source:"mapCornersBeforeSource",layout:{},paint:{"line-color":"#000","line-width":3}}),this._map.addSource("mapCornersAfterSource",{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:[]}}}),this._map.addLayer({id:"outlineafter",type:"line",source:"mapCornersAfterSource",layout:{},paint:{"line-color":"#ff0000","line-width":3}})),this.alignFloorplanTopLeftCornerOnMap({name:"setCenter"}))}function Ca(){let e=this._map.unproject([0,0]);e=[e.lng,e.lat];const{topRightCorner:t,bottomRightCorner:i,bottomLeftCorner:o}=this.calculateMapCornersCoordinatesFromTopLeftPoint(e);this.mapCornersGpsCoords=[e,t,i,o]}function xa(){this.getCurrentMapCornersGpsCoords();const e={type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]},properties:{}},t=(0,aa.Z)(e),i=ce(t.geometry.coordinates[1],this.zoomFactor/this.meter);this._map.setZoom(i),this._map.on("moveend",this.alignFloorplanTopLeftCornerOnMap),this._map.setCenter(t.geometry.coordinates,{name:"setCenter"})}function ya(e){let t=ce(e,this.zoomFactor/this.meter);if(t>22||t<0){let i,o=0,s=this.zoomFactor*this.taille_w;if(t>22){for(i="zoomout";t>22;)o++,s+=this.zoomXMove,t=ce(e,s/this.taille_w/this.meter);da.log("Zoom out levels needed "+o)}else if(t<0){for(i="zoomin";t<0;)o++,s-=this.zoomXMove,t=ce(e,s/this.taille_w/this.meter);da.log("Zoom in levels needed "+o)}this.zoomToSpecificLevel(i,o),this.setSvgViewBoxes()}}function Sa(e){return()=>{if(this.state.mapStyleLoaded){const t=this._map&&this._map.getStyle();this._map&&t&&t.layers&&(!this.props.isStyleChangeAllowed||this.props.isStyleChangeAllowed())&&this.state.selectedMapStyle!==e&&this.mounted&&this.setState({selectedMapStyle:e,mapStyleLoaded:!1},(()=>{t.layers.forEach((e=>this._map.removeLayer(e.id))),this._map.setStyle("mapbox://styles/mapbox/"+e,{diff:!1}),this._map.once("idle",(()=>{this.props.onSwitchLayerFinishedCallback&&this.props.onSwitchLayerFinishedCallback(this._map),this.mounted&&this.setState({mapStyleLoaded:!0})}))}))}}}class va extends o.Component{constructor(e){super(e),this.setMapContext=e=>this._map=e,this.getMapStyleLoadedStatus=()=>this.state.mapStyleLoaded,this.state={selectedMapStyle:"light-v8",mapStyleLoaded:!0},this.mounted=!1,this._map=null,this.switchLayer=Sa.bind(this),this.setMapContext=this.setMapContext.bind(this),this.getMapStyleLoadedStatus=this.getMapStyleLoadedStatus.bind(this)}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{className:"layer-change map-feature-icon svg-center-inside-container"}),(0,l.jsx)("div",{className:"layer-dropdown",children:(0,l.jsx)(Xt,{mapStyles:Ii,switchLayer:this.switchLayer,selectedMapStyle:this.state.selectedMapStyle})})]})}}const Da=va;var Ta=i(1317);class ja extends o.Component{constructor(){super(),this.onSwitchLayerFinishedCallback=()=>{this.props.is3D&&this.props.onMapContextLoadedCallback(this._map,!1)},this.onMapZoom=()=>{this._map&&(this._zoom=this._map.getZoom())},this.isStyleChangeAllowed=()=>{if(this.showMapLayerStyleChange3DRef.current?this.showMapLayerStyleChange3DRef.current.getMapStyleLoadedStatus():this.showMapLayerStyleChange2DRef.current.getMapStyleLoadedStatus()){const e=this._map.getStyle();return e&&e.layers?this.props.is3D&&!this._map.getLayer("floorplan-3d-model")?(Ta.log("False. Nema floorplan3D layera"),!1):(Ta.log("Omogucena promjena stila"),!0):(Ta.log("Nema layera"),!1)}return Ta.log("Vanjski if. Nije loadan stil"),!1},this.state={error:null,tooltip:null},this.showMapLayerStyleChange2DRef=o.createRef(),this.showMapLayerStyleChange3DRef=o.createRef(),this._map=null,this.zoomRange=4,this._zoom=9,this.onMapMountCallbackCalled=!1,this.mounted=!1,this.onMapZoom=this.onMapZoom.bind(this),this.onSwitchLayerFinishedCallback=this.onSwitchLayerFinishedCallback.bind(this),this.isStyleChangeAllowed=this.isStyleChangeAllowed.bind(this)}componentDidMount(){this.mounted=!0,!this.props.is3D&&s.render((0,l.jsx)(Da,{ref:this.showMapLayerStyleChange2DRef,is3D:this.props.is3D,onMapContextLoadedCallback:this.props.onMapContextLoadedCallback,onSwitchLayerFinishedCallback:this.onSwitchLayerFinishedCallback,isStyleChangeAllowed:this.isStyleChangeAllowed}),this.props.mapStylesChangeRef.current)}componentWillUnmount(){this.mounted=!1,!this.props.is3D&&s.unmountComponentAtNode(this.props.mapStylesChangeRef.current)}render(){return(0,l.jsxs)(o.Fragment,{children:[this.props.is3D&&(0,l.jsx)(Da,{ref:this.showMapLayerStyleChange3DRef,is3D:this.props.is3D,onMapContextLoadedCallback:this.props.onMapContextLoadedCallback,onSwitchLayerFinishedCallback:this.onSwitchLayerFinishedCallback,isStyleChangeAllowed:this.isStyleChangeAllowed}),(0,l.jsxs)(Qt,{mapStyle:"mapbox://styles/mapbox/light-v8",center:this.props.center,zoom:[this._zoom],onZoom:this.onMapZoom,preserveDrawingBuffer:this.props.preserveDrawingBuffer,children:[this.props.is3D&&(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(Zt.Ly,{className:"zoom-control",style:{right:20}}),(0,l.jsx)(Zt.AI,{className:"rotation-control",style:{right:20}})]}),(0,l.jsx)(Zt.jf,{className:"scale-control",measurement:"metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"km":"mi"}),(0,l.jsx)(Zt.X$.Consumer,{children:e=>{this._map=e,this.onMapMountCallbackCalled||(this.onMapMountCallbackCalled=!0,this.showMapLayerStyleChange3DRef.current?this.showMapLayerStyleChange3DRef.current.setMapContext(e):this.showMapLayerStyleChange2DRef.current.setMapContext(e),this.props.onMapContextLoadedCallback(e))}})]})]})}}const _a=ja;var Ia=i(1317);const ka=class{constructor(e,t,i){this.mouseMoveEvent=e=>{if(this.enabled){e.preventDefault(),this.mouseDownItemSelected=!1,this.mouseMoved=!0,this.mouse.x=e.clientX,this.mouse.y=e.clientY;const t=this.floorplan3DThis.getSelectedDrawingOption();if(this.floorplan3DThis.selectedFloorplanItemType&&t&&"select"!==t.value&&!this.itemBinder){let e,i;const o=this.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D();if(Fi.includes(this.floorplan3DThis.props.mainComponentThis.getObjectItemType(this.floorplan3DThis.selectedFloorplanItemType))&&(e=[],this.floorplan3DThis.currentWalls3D.filter((e=>e.floorNumber===o.floorNumber)).forEach((t=>{e.push(t.interiorWallPlane.planeObject),e.push(t.exteriorWallPlane.planeObject)})),this.previousItemBinder&&e.push(this.previousItemBinder.mesh),i=this.getIntersections(new Ne.FM8(this.mouse.x,this.mouse.y),e,!0,!0)[0]),i||(i=this.getIntersections(new Ne.FM8(this.mouse.x,this.mouse.y),this.intersectionGround,!1,!1),i&&(i=i[0])),!i)return;this.floorplan3DThis.processSceneVec3(i.point);const s=this.floorplan3DThis.props.mainComponentThis.calcul_snap_inverse(i.point.x/this.floorplan3DThis.scaleFactor,i.point.z/this.floorplan3DThis.scaleFactor);t.createBinderMethod({pageX:s.screenX,pageY:s.screenY}),this.floorplan3DThis.props.mainComponentThis.binder&&(this.itemBinder=this.floorplan3DThis.createFloorplanItem(this.scene,t.objects3DArray,this.floorplan3DThis.selectedFloorplanItemType,this.floorplan3DThis.props.mainComponentThis.binder,0,!0),this.itemBinder.setItemPosition(new Ne.Pa4(this.floorplan3DThis.props.mainComponentThis.binder.x,0,this.floorplan3DThis.props.mainComponentThis.binder.y).multiplyScalar(this.floorplan3DThis.scaleFactor)),this.itemLoaded(this.itemBinder))}switch(this.mouseDown||(this.updateIntersections(),!this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DThis.currentControls===this.floorplan3DThis.firstPersonControls&&this.floorplan3DThis.firstPersonControls.updateCircleNavigator(this.rotateMouseOver||this.intersectedObject,this.getIntersections(this.mouse,this.intersectionGround,!1,!1))),this.state){case this.states.UNSELECTED:case this.states.SELECTED:this.updateMouseover();break;case this.states.DRAGGING:case this.states.ROTATING:case this.states.ROTATING_FREE:this.clickDragged(),this.floorplan3DThis.floorplanItemCurrentHUDObject.update(),this.needsUpdate=!0}}},this.isRotating=()=>this.state==this.states.ROTATING||this.state==this.states.ROTATING_FREE,this.mouseDownEvent=e=>{if(this.enabled&&0===e.button)switch(e.preventDefault(),this.mouseMoved=!1,this.mouseDown=!0,this.state){case this.states.SELECTED:this.rotateMouseOver?this.switchState(this.states.ROTATING):null!=this.intersectedObject&&(this.intersectedObject!==this.selectedObject&&this.floorplan3DThis.onFloorplanItemUnselect(),this.setSelectedObject(this.intersectedObject),this.mouseDownItemSelected=!0,this.intersectedObject.fixed||this.switchState(this.states.DRAGGING));break;case this.states.UNSELECTED:null!=this.intersectedObject&&(this.setSelectedObject(this.intersectedObject),this.mouseDownItemSelected=!0,this.intersectedObject.fixed||this.switchState(this.states.DRAGGING));break;case this.states.DRAGGING:case this.states.ROTATING:break;case this.states.ROTATING_FREE:this.switchState(this.states.SELECTED)}},this.mouseUpEvent=async e=>{if(this.enabled&&0===e.button){this.mouseDown=!1;const t=this.floorplan3DThis.getSelectedDrawingOption();if(this.itemBinder&&t&&"select"!==t.value)this.floorplan3DThis.props.mainComponentThis.handleMouseUp(e),this.itemBinder.isWallItem?this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DThis.createFloorplanItem(this.floorplan3DThis.floorplan3DViewScene,t.objects3DArray,this.itemBinder.objectType,this.itemBinder.object2D,this.itemBinder.floorNumber):(t.currentViewArray.push(this.itemBinder),this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&t.floorplanViewArray.push(this.floorplan3DThis.createFloorplanItem(this.floorplan3DThis.floorplan3DViewScene,t.objects3DArray,this.itemBinder.objectType,this.itemBinder.object2D,this.itemBinder.floorNumber))),this.switchState(this.states.UNSELECTED),this.previousItemBinder=this.itemBinder,this.itemBinder=null;else switch(this.mouseDownItemSelected&&(this.floorplan3DThis.selectedUserMode!==this.floorplan3DThis.editModeValue?this.selectedObject&&(await this.selectedObject.mesh.changeStateOnClick(this.selectedObject.mesh),this.setSelectedObject(null),this.intersectedObject=null,this.updateMouseover()):this.floorplan3DThis.onFloorplanItemSelect(this.selectedObject)),this.state){case this.states.DRAGGING:if(this.selectedObject.clickReleased(),this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&!this.selectedObject.isWallItem){const e=this.floorplan3DThis.getFloorplanViewSceneItem(this.selectedObject.object2D);e&&e.moveToPosition(this.selectedObject.getItemCenter())}this.switchState(this.states.SELECTED);break;case this.states.ROTATING:if(this.mouseMoved){if(this.selectedObject.clickReleased(),this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()){const e=this.floorplan3DThis.getFloorplanViewSceneItem(this.selectedObject.object2D);e&&e.rotateItem(R(this.selectedObject.object2D.angle),-1)}this.switchState(this.states.SELECTED)}else this.switchState(this.states.ROTATING_FREE);break;case this.states.UNSELECTED:this.mouseMoved||this.checkWallsAndFloors();break;case this.states.SELECTED:null!=this.intersectedObject||this.mouseMoved||(this.switchState(this.states.UNSELECTED),this.checkWallsAndFloors());case this.states.ROTATING_FREE:}}},this.enabled=!0,this.scene=e,this.container=t,this.raycaster=new Ne.iMs,this.floorplan3DThis=i,this.itemBinder=null,this.previousItemBinder=null,this.mouse=new Ne.FM8,this.intersectedObject=null,this.mouseoverObject=null,this.selectedObject=null,this.mouseDown=!1,this.mouseDownItemSelected=!1,this.mouseMoved=!1,this.rotateMouseOver=!1,this.states={UNSELECTED:0,SELECTED:1,DRAGGING:2,ROTATING:3,ROTATING_FREE:4,PANNING:5},this.state=this.states.UNSELECTED,this.needsUpdate=!0,this.container.addEventListener("mousemove",this.mouseMoveEvent,!1),this.container.addEventListener("mousedown",this.mouseDownEvent,!1),this.container.addEventListener("mouseup",this.mouseUpEvent,!1),this.intersectionGround=new Ne.Kj0(new Ne._12(2*this.floorplan3DThis.floorplanEnvironmentRadius,2*this.floorplan3DThis.floorplanEnvironmentRadius),new Ne.vBJ({color:16711680})),this.intersectionGround.rotation.x=-Math.PI/2,this.intersectionGround.translateX(this.floorplan3DThis.floorplanCenterVector.x),this.intersectionGround.translateY(-this.floorplan3DThis.floorplanCenterVector.z),this.intersectionGround.visible=!1,this.scene.add(this.intersectionGround)}removeItemBinder(){this.itemBinder&&(this.itemBinder.remove(),this.itemBinder.clickReleased(),this.itemRemoved(this.itemBinder),this.itemBinder=null,this.previousItemBinder=null,this.floorplan3DThis.props.mainComponentThis.removeBinder())}setCursorStyle(e){this.container.style.cursor=e}itemLoaded(e){this.setSelectedObject(e),this.switchState(this.states.DRAGGING),this.clickPressed()}itemRemoved(e){e===this.selectedObject&&(this.selectedObject.setUnselected(),this.selectedObject.mouseOff(),this.switchState(this.states.UNSELECTED))}clickPressed(e){e=e||this.mouse;var t=this.itemIntersection(e,this.selectedObject);t&&this.selectedObject.clickPressed(t)}clickDragged(e){e=e||this.mouse;var t=this.itemIntersection(e,this.selectedObject);t&&(this.isRotating()?this.selectedObject.rotate(t):this.selectedObject.clickDragged(t,this.mouseDown))}getWallsIntersections(e){const t=this.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D();var i=[];return(this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()?this.floorplan3DThis.currentWalls3D:this.floorplan3DThis.floorplanViewWalls3D).filter((e=>e.floorNumber===t.floorNumber)).forEach((e=>{i.push(e.interiorWallPlane.planeObject),i.push(e.exteriorWallPlane.planeObject)})),this.getIntersections(e,i,!0,!1)}checkWallsAndFloors(){if(this.state==this.states.UNSELECTED&&null==this.mouseoverObject){const n=this.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D();var e=this.getWallsIntersections(this.mouse);if(e.length>0){var t=e[0].object.wall3D;return void Ia.log("Wall clickedd",t)}var i=this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()?this.floorplan3DThis.currentRoomFloors:this.floorplan3DThis.floorplanViewRoomFloors,o=this.getIntersections(this.mouse,i.filter((e=>e.floorNumber===n.floorNumber)),!0,!1);if(o.length>0){var s=o[0].object;return void Ia.log("Room clicked",s)}this.floorplan3DThis.userInteractionControlerNothingClickedReset()}}switchState(e){e!=this.state&&(this.onExit(this.state),this.onEntry(e)),this.state=e,this.floorplan3DThis.floorplanItemCurrentHUDObject.setRotating(this.isRotating())}onEntry(e){switch(e){case this.states.UNSELECTED:this.setSelectedObject(null);break;case this.states.SELECTED:this.setSceneControlsState(!0);break;case this.states.ROTATING:case this.states.ROTATING_FREE:this.setSceneControlsState(!1);break;case this.states.DRAGGING:this.setCursorStyle("move"),this.clickPressed(),this.setSceneControlsState(!this.mouseDown)}}onExit(e){switch(e){case this.states.UNSELECTED:case this.states.SELECTED:break;case this.states.DRAGGING:this.mouseoverObject?this.setCursorStyle("pointer"):this.setCursorStyle("auto");case this.states.ROTATING:case this.states.ROTATING_FREE:}}updateIntersections(){var e=this.floorplan3DThis.floorplanItemCurrentHUDObject.getObject();if(null!=e&&this.floorplan3DThis.selectedUserMode===this.floorplan3DThis.editModeValue&&this.getIntersections(this.mouse,e,!0,!0).length>0)return this.rotateMouseOver=!0,this.floorplan3DThis.floorplanItemCurrentHUDObject.setMouseover(!0),void(this.intersectedObject=null);this.rotateMouseOver=!1,this.floorplan3DThis.floorplanItemCurrentHUDObject.setMouseover(!1);const t=this.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D();var i=this.scene.getObjectsByProperty("isFloorplanItem",!0).filter((e=>e.itemObject.floorNumber===t.floorNumber)),o=this.getIntersections(this.mouse,i,!0,!0);if(o.length>0)this.intersectedObject=this.resolveIntersectedItemObject(this.getIntersectionFloorplanItemObject(o[0].object),o[0]);else if(i=[],this.scene.getObjectsByProperty("isUnfixedItem",!0).forEach((e=>i.push(...e.itemObject.getUnfixedItemIntersections()))),(o=this.getIntersections(this.mouse,i,!0,!0)).length>0){const e=(e=>{let t,i;for(let o=0;o<e.length;o++)"background_mesh"===e[o].object.type?t=e[o]:"room_mesh"===e[o].object.type&&(i=e[o]);return t&&i&&("background_mesh"===e[0].object.type||"room_mesh"===e[0].object.type)?i:e[0]})(o);this.intersectedObject=this.resolveIntersectedItemObject(this.getIntersectionUnfixedItemObject(e.object),e),this.intersectedObject&&(this.intersectedObject.raycastedObject=e.object)}else this.intersectedObject=null}getIntersectionFloorplanItemObject(e){if(e.isFloorplanItem)return e.itemObject;let t=e.parent;for(;!t.isFloorplanItem;)t=t.parent;return t.itemObject}getIntersectionUnfixedItemObject(e){if(e.itemObject)return e.itemObject}resolveIntersectedItemObject(e,t){const i=this.getWallsIntersections(this.mouse);if(i.length>0&&i[0].distance<t.distance)return null;let o=e;return this.floorplan3DThis.selectedUserMode!==this.floorplan3DThis.editModeValue&&(this.floorplan3DThis.isFloorplanItemMeshBinded(e.mesh)&&e.mesh.changeStateOnClick||(o=null)),o}itemIntersection(e,t){var i=t.customIntersectionPlanes(),o=[];return(o=i&&i.length>0?this.getIntersections(e,i,!0,!1):this.getIntersections(e,this.intersectionGround,!1,!1)).length>0?(this.floorplan3DThis.processSceneVec3(o[0].point),o[0]):null}normalizeVector2(e){const t=this.container.getBoundingClientRect();let i=new Ne.FM8;return i.x=(e.x-t.left)/t.width*2-1,i.y=-(e.y-t.top)/t.height*2+1,i}getIntersections(e,t,i,o){if(i=i||!1,o=o||!1,this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()){const t=this.normalizeVector2(e),i=this.floorplan3DThis.floorplan3DOnMapCamera.projectionMatrix.clone().invert(),o=(new Ne.Pa4).applyMatrix4(i),s=new Ne.Pa4(t.x,t.y,1).applyMatrix4(i).clone().sub(o).normalize();this.raycaster.set(o,s)}else this.raycaster.setFromCamera(this.normalizeVector2(e),this.floorplan3DThis.floorplan3DViewCamera);var s=[];if(t instanceof Array)i&&(t=t.filter((e=>e.visible&&this.scene.getObjectByProperty("uuid",e.uuid)))),s=this.raycaster.intersectObjects(t,o);else{if(i&&!t.visible)return[];s=this.raycaster.intersectObject(t,o)}return s}setSelectedObject(e){this.state===this.states.UNSELECTED&&this.switchState(this.states.SELECTED),null!=this.selectedObject&&this.selectedObject.setUnselected(),null==e||e.disabled?(this.selectedObject=null,this.floorplan3DThis.onFloorplanItemUnselect()):(this.selectedObject=e,this.selectedObject.setSelected()),this.needsUpdate=!0}updateMouseover(){null==this.intersectedObject||this.intersectedObject.disabled?null==this.mouseoverObject||this.mouseoverObject.disabled||(this.mouseoverObject.mouseOff(),this.setCursorStyle("auto"),this.mouseoverObject=null,this.needsUpdate=!0):null!=this.mouseoverObject?this.mouseoverObject!==this.intersectedObject&&(this.mouseoverObject.mouseOff(),this.mouseoverObject=this.intersectedObject,this.mouseoverObject.mouseOver(),this.needsUpdate=!0):(this.mouseoverObject=this.intersectedObject,this.mouseoverObject.mouseOver(),this.setCursorStyle("pointer"),this.needsUpdate=!0)}setSceneControlsState(e){this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()?e?this.floorplan3DThis._map.dragPan.enable():this.floorplan3DThis._map.dragPan.disable():this.floorplan3DThis.currentControls.enabled=e}};const Pa=class{constructor(e){this.scene=e,this.selectedItem=null,this.rotating=!1,this.mouseover=!1,this.height=5,this.distance=20,this.color="#000000",this.hoverColor="#f1c40f",this.activeObject=null}getScene(){return this.scene}getObject(){return this.activeObject}resetSelectedItem(){this.selectedItem=null,this.activeObject&&(this.scene.remove(this.activeObject),this.activeObject=null)}itemSelected(e){this.selectedItem!=e&&(this.resetSelectedItem(),e.allowRotate&&!e.fixed&&(this.selectedItem=e,this.activeObject=this.makeObject(this.selectedItem),this.scene.add(this.activeObject)))}itemUnselected(){this.resetSelectedItem()}setRotating(e){this.rotating=e,this.setColor()}setMouseover(e){this.mouseover=e,this.setColor()}setColor(){this.activeObject&&this.activeObject.children.forEach((e=>{e.material.color.set(this.getColor())}))}getColor(){return this.mouseover||this.rotating?this.hoverColor:this.color}update(){if(this.activeObject){this.activeObject.rotation.y=this.selectedItem.rotation;const e=this.selectedItem.getItemCenter();this.activeObject.position.x=e.x,this.activeObject.position.z=e.z}}makeLineGeometry(e){const t=new Ne.u9r,i=this.rotateVector(e),o=new Float32Array([0,0,0,i.x,i.y,i.z]),s=new Ne.TlE(o,3);return t.setAttribute("position",s),t}rotateVector(e){return new Ne.Pa4(0,0,Math.max(e.halfSize.x,e.halfSize.z)+1.4+this.distance)}makeLineMaterial(){return new Ne.nls({color:this.getColor(),linewidth:3})}makeCone(e){var t=new Ne.fHI(5,0,10),i=new Ne.vBJ({color:this.getColor()}),o=new Ne.Kj0(t,i);return o.position.copy(this.rotateVector(e)),o.rotation.x=-Math.PI/2,o}makeSphere(){var e=new Ne.xo$(4,16,16),t=new Ne.vBJ({color:this.getColor()});return new Ne.Kj0(e,t)}makeObject(e){var t=new Ne.Tme,i=new Ne.ejS(this.makeLineGeometry(e),this.makeLineMaterial(this.rotating)),o=this.makeCone(e),s=this.makeSphere(e);t.add(i),t.add(o),t.add(s),t.rotation.y=e.rotation;const n=e.getItemCenter();return t.position.x=n.x,t.position.z=n.z,t.position.y=n.y-e.halfSize.y+this.height,t}},Fa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbcAAABgCAYAAACe2zzIAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAZgElEQVR42u2dW2wc13nH/2dm9jYURS11oWinlkWqSF0XLly6BQr3kQLcPCSOG6qxrSCBm1BoKj+4TkA9BEgC+EFC7OZFNSomNRLEsVzRVY2+NID4WL3UZgMLUaogIhU51oWUyBFNieJtZ/owe8Tds2d2Z2bncmb5/QBCEkXunpmdc/7f7XyHOY6DuDmz8KtXZp3l725n+fPdLPf158qP34j9TQmCIIgtC4tT3P7duvjMbfv+yU+d9UH+PYOx1T5mvvVC7xPfTPviCYIgiM4kFnE7a13sX3LWfzxn3/+c188Umb7Yz7qOfqn38bfTvgkEQRBEZxG5uL2zcOHNWWf5pQ3HKfj5+e0sN92nmSPPlv/4l2nfDIIgCKIziEzc3lu4ePiGc+/kilPpCfP7ezXzdBczXqV8HEEQBNEubYvb+9avn5y1lydq82phMRhb3cvM15/vfeI7ad8YgiAIIruEFrez1sX+e87GGzft5eejHpTJjJt9zPw25eMIgiCIMIQSt9MLF1676Sx/y29eLSw7teL5XlZ4mfJxBEEQRBACidt7CxcPzzrLP1h2NvYmNUCDsdVdrHSW8nEEQRCEX3yJ2/vWr5+8Za/85I6z+kRaAy0yfXEXK56kfBxBEATRiqbixvNqt537z8UdgvTLdpab3qWVjv5N+fFfpD0WgiAIQk08xe30woXXbjsrR8OW9sfNTq14fgfLj1CokiAIghBpEDdZyyxV4fm4r/T+6Qtpj4UgCIJQhwfidta62H/HWZuYt1eeTntQQSkyfbGPmd8/1PsnP0x7LARBEET6MMdx8LOFj95RKa8WFmrlRRAEQQAAG7899VGaVZBRs7icw771vg92a4UvPLt/D+XjCIIgtiCaDbsr7UFEwfKajt/Pm5hdLGJ2xf7zqysbV96dnn0z7XERBEEQyaOlPYB2qdgMN+8U8cm8iftr+ub3HRSur1b+/p8v3bhz9src4bTHSRAEQSQH+5fbH1zOQmWkjPmlAqx7OdgOq/v+Pq0bJsvVfW+HoV3Ylde+9vlH92yFfNxYzd+Pt/jZKQAT1b9bAMZjGtMAgGnhe4MAZhK/O2pxCsBozb8tuPfFSnFM4mc1CeBgiuOJijKAD6vXp8J18XlaRv2clXECm8/EiRTHHIRhAEPVv4/U/F1G7To0Wf13W2RS3O6uGJj7tIiNCpP+v0zcOH15/XSXzl7tsHzcCNwJ20rI/DIDV+QmEJ34kLg1IrsnAHAM6S5gsnEdhLvoZJkx1M+RpMVtCO6CPwZX0NrBgvuMRCIEETJavcaRCF5rvHptoQzuTIUl1ysafj9v4rpV8hS2VsyuVZ6/urJx5d+mZ19L+3rahFt7CwDOIDphAzaFchqupTva3ssRHowG/H6anEp7AG0SpfEXlFG48+jD6hjaFTZUX+N49TWn0drzixu+Fp1CNMIGuPftFACneq0DQX45E55bxWaYv5vHnXt5Xz/fzHOrpVvXpnfmte89t39Plo7W4aIW9GGuDWsA7oMSZBGdqb5G2LAleW71lOHeD6+F7gjiCxG3QlWPsh3OoHHRjdtzG0GwRZl7Y7UE8fIsuJ9Rks/NMFwB8nuNk6iPAARdh8ar96jluqG8uFn38phfyjfk1ZrhV9w4O3Pa+XJOezkD+ThuyTSDPzxTCBZG4iGTITS3vCbhTqCgoRASt3rEEJnIFICnUhqbl7ipkA8MwzCAc5LvxyVuA3Dn6XCTn5lE/Vz1g985OgXXOIo7XNnsGeZCHTSPP1bzZzNRb2n8KStuy2s6bt4JF34MKm4AoDOs7srpZxXNx7WaLDwZG6VVPQp3Anm9Z1DPgsStngXUT94jaAxZpZXn8hI3wP3Mj6Qwpnb4EPJihjjErZkBynPZUc3Tser7eXlNcXraxyGPHk1iM1/fLgPY9H5lNP38lMu5rVc0XLNK+GTeDJ1XC0PFQWF2rfL8tdXK/703M/dK2vehhmG4k1MmMvzDfQrRP8Tj1df2WmBPIb0cRtYZRb2I1Rbw1JJ2HsVr7ENtv0pnjvcM5MI2A+AQXGMuynl6ovqahyA3Eo9D7rG2i1da5Ajc9SIKYQM2UyEMrlBbkv/3RBlxq9gM80sFXJnrwr0VI7VxrNpOz8crG//0o9/cvPwfV+aeSfm2jMF9OEX3nE+WJCx7LqAya30M2S80SANxYTgh/MmpLaVWiawYNbzoIgnOQR4qPAZXgKJa8GVMVN/jmOT/uHEcRREL4D6P4j2dgWtgx5nrOwGgF/VzpKmhoIS4LS7ncGWuC/N3/RWMJMFSxR68cn/jv37625v//f6Vuf4UhuAVzx5H/JNFBn/f2jg+t6wI//BtG5zanMQMGhcIFSsnoyr1jhsxbxNHrpDvnRMjKzxnmuT8OFF9T9GjGYLcSA6DuCZZcA3tpLYjHKte4zGo7Lktr+m4eqsLs4vFQAUjSTK/bj99dWXjys8vz76T4Nt6CdshpJvv4BbaJNyH+iC2bs4sLKJYiYufTNwClUDHhDgu1b23AXh7yFFyBo3e9STceZLG/jMuqmJEhwtcOwyjUcTDFJdFcY0tP8tUxG29oj1ombW6oYTz2BSej0uolZcsgcqFJGlvzQue5yNhC4a4OMgqyWRVrirk3mRbSVQYlxdiuJxvCI6S42hc7HmuOk34eiETuDNtvK54rbx4REkSVRaeV7t6y8Sn94NVM6rAqu30/O7+xs9+9Jubl//zd3NPxvAWvCpSRMXuECRswRG9tnHIQ2WiVTqC6HImYZGFoMeghlcpIlb5yvaPRfEeorhPQK1KUtm6IRu3X8TnVxVjW0pi4vbJuokr89swfzfYnjUVWarYg5eXN/43hlDlGTQuYknGs4n44GXNtXhZveLepzLUyL2Jm2f99ERMAzHy4WvTbwBkRugU3LmqGrL1I4xRMoDGtWlri9syDFxyenDF7sbV4jYsFtQpGmn72irOX0T4cmNojN0fg+IPEOEbUQTG0XzBHZf8ftreG9DomfBegqogLtxxFD3JClVUFDavsZURvMpZFEMLim/mj03cKmCYcbpx0d6BJccNQdqM4U6+gGvburCi622+Q0chs4B9JU2JTCDzvFoZLaL4laFGheKkZOyqFJfI5lHUYcJhNH6WLSv3UmYGjdsEZMUhzRANK6WFDYhJ3K45Jj6yezHvFKT/v8E0zJomZs0SNjT1C0oSQNzUC6hrCRLBERdDsb+eFzLvTQXEhXIIaoRNxQ4vE4g+Vy1+BkoXVdRwAvLwpF+UFzORSJVlCTl8ZPfiumOigtZ5tRXdwLWuLliFAmyW7TxcG8iszVYhKyI7yD5fvx65WHAStMlsXMg8gbTDpjKBPRbmhZog83ayFF1p13urRYUQeVMiEbdV6Ljk9OCS3YO1EC/5aT6Pa11dWMp3Tj4uADKvLepJSaSHrNWWX29CVuWnQmgSaDTA0hZeMTQaR6hQdqqAalXMzZCN1+9nJt7LMtTsnvOAtsStAoaPnS5csMsP8mphsRnDQqGAG13mVsvH+S0PJ7JJq03brRBDXu1Y21EiE97AZ25FhFjUIuv00i6ynGeWvDaOeF/8bjOZQeO6pMJz6ElocZt1SvjI7sWsU4p0QGuajlnTxK3SlsjHDaFxMchC/J7wh9hdJMyiK9vorUrubRyNnkAaxSWysG/UBuIwwnvgKjGBxnvj13uTNfZWNjwZWD2WkMOvnDI+drp85dXCsmy4+bjFQr6T83GyfnS0p61zkOVSwyBrqKzK5mkxhN7smKQ4EEv/4yrwEL22LG/REe+P3/CieM1hthQkhm9xW4WO3zrbccnuwX0nubDhnbwbqryby15HEx/IetIRnYEoQEEPbaxF5vGp4r1NScaW1IInawEWV75a1noqq4gGtF9jRJazG0F7Lb1io6W4VcBwzTFxwS7jjpNOwccG0zBfLGLWLHVaPk7muRGdQdShMtFqVqWhMtB41lZSxSViWCyO/pGovocYfsvyXBUFqgz/z9IRND7HI3BPRlDleQTQQtxuO8UHpf0qsKIbmDVNzBeLnZCPk7WzybI1SGwiK/poN4zlZTWrgIVGj0nccxY14mZq2RiifK9appDtoi8LjeLsNzQ5A3lj6CG4p7ersqFfLm5LyLkts5xtsebVwnI3l8MN08x6Ky/xYVK+nQ3hG1kPySjK0mWNi1VJ6IteU9x9J2X9I+OaP6JHkmWvjSM+j0G8Ln6sjux+jwFw4IamUzW+6sRtFTpmnG5csnvaLu2Pm9pWXstGeid3t4HsdG0i+8hCclGVjE+isSWXCpu6ObKN3XGEqkZRbxwmfWhuJ8xV2b61IHidG8cZhZuLc+AaIonniB+I2zXHxEV7h2fLLFXZYBpulUqYNUtY0zMVqiRx60xk7Zmi/GzFRVwlcZNVKkZdXJJE/0gRpXJJESF6XWEiADxEeQTNn3F++LIDN3Q5hgS8Om0BxR1BWmapyopu4IbZhfliEZVsXgaFJLNPEht9VesMIiKGB4cR7UImFtLE0T+yFZ0wV6O8hnEAg3BFrlVueQCu0HGv7kPEJHbaOnrhsEyG9aSs5Quo6GqHVDPOENyHkX+pUtSgAmKrrbjaM6m6LQCQhwijKjLgC2Mt1KouGqLI3Y7DbfjO4P+4riHUi90ZRPQ8a9tY8c4BbQd2aSVoGd4sbTAN21keXcgle7z41oM/jPxL6RY8CSILl8W10VfWUFklI0M8HFS2Hy0MSfSP3KpE7Y2ewKbQHYL/z2oEmyFM7tWF4oEO7GYlDGg96GHZyrlpALYxA93IQc9wWBXqVL0R4RB79MXR35Aj6+uoUmgSiP7UADG8Gef9bUUnzNUkr2EC7vM6CFfsjsB9PlpVnXJDmldfBsp91jk5OWh4SOvCPm07TKZ2aI8BKDIdPayAHDK5sVu0lDoxab2VCHusTVhUbajMmUC951pGe+FJsTAlztJ/kU70DtM8fHQc7uf3FOrFrtkYRrFZjOILaQTPZAb2ad14SOtSMlSZr4YgS8h0rpDErXMQixwsxN97UNbOS3XvTSzh94t4f9M+ILQT5qp4DWkWyXCx64Xr3TULYR6Hz24oTdNTPawAno9TAYNp6Ga5al5NPdENiOiSy1r8ENlAViGZxGIhO+tNpYVXdqhpUO9N5vElXUQiLrRKn2PmE/E5UcU75QVJg3C3GcgKsoYAnEOLZ71l7YUOht2shAP6Dmxj6XQE0QB0VfNqRueUi2TufCRCihgObKdBclBmID+GRCXErQti26xWxNk/0q8hIC6wWRc32UGjKnZdmYQrcAch76hyDk0cAt9KkYOGP9C2YZ+2HYUEtw4UmY7tLI98NvNqrei0SbMVkVVIJp2/qEV2snuayIpf/BaXiFWWcfaPbHUNnWSIimO3oI7nJmMS8m4oA2jSJCCwG2QyAwPadvRpZqz5uBzT0FPNq7HshyC9EK0llcq5idYMoHGhSPp0ZtleOtVyb+Khpn43nqdZRCIi3uMsi1sWj9qy4HpwsjVT+lmEdsF6WRE9rIDb9n0sOCuRXYHOGEwYnRR+bIbMEhlGNh42otFrm0E6Boq44I+hcS9c2hyDWwjAOQ7Xy/XyGMRFawrJGw61TKD+sx1BdjeQi4aFiiFJLw7CrZqs9fxHIVkz24ov6mDo00z0oojr9j0sO+uhX4sBKDEDhc4MP3oxBXdy18b+R0DilgVk3oesg0Ya8IbKaYqBCD/UtPaejcG7L2TaRSQik3CNBb6oZtUQFfdjAulWngaFh7lrnw+p5xaJe5SDhn1aN/Zp25FjwV/S3a+W32rCxpHlTFSqeCPkqBb6y8L4xL1Mo5AvTOJpAmJYMw1k2ztUK97xg/hcJJ0jjgLxc5AVyEQb+zOZgSCtvIytkVdrhSx8lMVJs5VQ7agZGao1VAbkxSWihya2MZP9TlqIi6pqG+dbIRtvlrw2jqzSvMEhiCWxtZuVcEDb4dnKSwPQzXLo7oz9au3i1UopS5NmqyFWJM7Ajayn/aX6pm7AfdZrczxDwjjFE7zFPpVpIiveyZIhKhoScTX2TgLZPuE6Yqva0MHwkNaF/XrPg1ZetS2ztkjBiF9k3lvU52AR0SEuaKpYv6KRNAQ1jSTZxm4eWqoVuqQPIfWDOJ6g+/bSYgyNoTvV7m2kxK4wRehuKy+jiJ16Iests+owdfY/Eb2UzHtTpTiBqEf02pLctN2KGWTDsxDbZ/FQpGpFJH7Gjuq4Vc6Ty05lyLLXBvjojZmY+9RnFDBQymFXXoOW8Uhkt65NHzCNP3vxQN8LEb6sGK4BNs9MI9RB1iBZpYS8zLNQsTmAeN/GUO9lTiL+/pxRjb0M9xwyFeFjEw2yuE8vj5uW7cMSjQ3qDNiV17G/ZKAnl72wZEFji4+WjK9847N7D3z+0T2/jOEtDqFxoTwO2tytCrLejaotwFnY1A20DjmqvPjOSMY3BDUF7gzk4UhV8phhGEajWDfs1UtFYXIaQ39BxyMlA4UMuHE6w2pfXj/9D3/Uv+O5/XvejvGtZJMGcB9QErj0EUVC7JuoCqLgqrq9xGuRzcLiy88oq2UEauXKz6Ex5yobtx8GoE4EQFwLpeHVVN0nU2fYbxroL+rKhip35rTz+4rG/ohDkM2YgDzXENnx60QoslRGLRNdVZ8d8VlXqfTfz9hlXvK5lMdVhlzYpuBGh8LAj5pJu0BJLDoCPKInSsQGewwNg6abj1OFbl2b3l8y/vqrf7j3r57dv+dGwm9/AnKBO47G+HmSlLF1PUhxQk1C7bZFMq9CpYbKnAnUC0SrQytV4xAan4NhuEKQhqfDj4ORCdvBkK85gs15fw7pFbrJcpuykzEAKCJuwGY+btA0sM1Iz40raGzxkaLxj9/47N4DX9y/5xcp3hIvgRuB21st6TwKf9+0Lbc0GID8zDaVETtPqLzxnJ/EfAzqesNe8Ia+shM+PkSyHvMY5KLKhS2s0SA++2NIfi3gR9yI4XXP3Kwy4sbJaQyfKRp4pGQgyZoTnld7uKA/9qWBPT9M+z5UOQF5GKEMN7afRJiAW4Iyj3EKapZrR424QE1B/TLqdo6aSRpeXKK6weAFFziZB3EcrhDEGfHghqfMo5qAe1xMO97wIcm1cbE5F/O18euTibYsLPwA5cSNY+oMg2YOfYX483E7c9r5/SXjL1880PdCCiHIVkzAPZVWFgLjwhOHhchzB14COo72J00WkHk8WfEuxOYAWzmsnASHIPckBuAah9OIdp5yD+oM5AVDxxA+xya7NpkhOyxcW5TG0zC8DetxtDCG2Bvz85cXHWcwwgFFTsUBbq9VYK3bvn7+sRUb2yutf65b16Z35rXvxVwBGSWjaF2NxUvBg3oXvJvFEJovgDNwH/KgJfADcCdALYNQvypO3Fw8Ux13VjiFxq4frcYv+6wULfkKBF8sg9yLMPBDNJtFVSZRP1f94HeOTsEV2ThywkNw50Oza5vBpgEY1Bsfq/nTSyiP+XndTIgbZ912cGO1guWK0/TnWombzrC6N6+//reDfd9J+5pCwLs5BLUAxY2nYRrr+nqoPJAtmCpsgG52PWU0nh3Vzj1IA9l9P4Lm3ieJWzSMIFj3knZDyfyk8iQiCyOQt/RqxhQajeKRAK/Bt0r5MtozJW6cpQ0bc2sVeDlyzcStL6+f7tLZqwqGH4PCw2VxVy7xB7LdBV22YKZNq8VN9Nqs6s+nLchBEb23STSvnCNxi5bR6ldc1ZPcU0rD6BpBfTWlMteXyUaP3YaGbkPD7bUKFtZt2E7r39lhaBd25bWvxdRZJA24lXcCm50zohI6LmjNTkreCshybVkTNsD9HGuvhe/ZU70oplMYr37xsGIUuSk+/9MubuLrBLDpyUUldPwcv1BdgDIpbpxdeR3lnI65tQoWPdy4gsYW+wv60Qzl1cLAP3xu2fCQpXg2lozaUIHnnpEtiHhgJpCdQhIRntupzZMch1sQRCTHVPUrzDytDeGrGhavHVftiRR+BG8CmznCSPaQZjIsKWO54uD2mpuPe2zFRtnGal9ef+vLg33fTHtsBEEQRLIYOnAv7UFEgakzPFIysLhhY6/NPtgL9oUOyKsRBEEQIWCO42B8YeGdWcd5bgMotP+S6dHD2PRDjI18uVzulLwaQRAEEQLmOG41xjuW1b/gOBO3HOfptAcVlBKw2K9p3/9quaxKZxGCIAgiRR6IG+fnlvXMrOOczEIezgBW+xg7O9rbm1THfoIgCCIDNIgb5y3Lem3Oto/eB3rSHqSM3Yyd72Vs5IVymfJqBEEQRB2e4ga4ocq7jvOGSvm4Hsam+xg7+mK5nGbHfoIgCEJhmoob513LenLWcX6y4DhPpDXQErC4R9NOvlQuZ7FlFkEQBJEgvsSN87ZlHb7hOD+46zh7kxogz6ttY+xVCkESBEEQfggkbpy3LOu1a7b9rbhDlbsZO7+LsZeptJ8gCIIIQihxAzbzcdcc5/moB7WNsZv9jH37cLncyS2zCIIgiJgILW6cdy3ryeuOMxHF1gEDWH1Y016nvBpBEATRDm2LG+dtyzr8iW2fDLt14GHGTlNejSAIgoiCyMSN86+W9eZ1237Jbz6OWmYRBEEQURO5uAFuPm7RcX5803E+5/UzJWDxM5p2lPJqBEEQRNTEIm4cWSsvA1h9SNPe+rtymY6iIQiCIGIhVnHj/NSyXrlh29/tYex8D2Nfp7waQRAEESeJiBtBEARBJImW9gAIgiAIImpI3AiCIIiOg8SNIAiC6Dj+H70JmpUCX4E6AAAAEnRFWHRFWElGOk9yaWVudGF0aW9uADGEWOzvAAAAAElFTkSuQmCC";class Oa extends o.Component{constructor(e){super(),this.onModeChangeClick=(e,t)=>()=>{e.value!==this.state.selectedMode&&(this.state.selectedMode===this.props.floorplan3DThis.editModeValue&&this.props.floorplan3DThis.userInteractionCurrentController.setSelectedObject(null),this.props.floorplan3DThis.selectedUserMode=e.value,this.setState({selectedMode:e.value},(()=>{this.modeSelectorRef.current.style.left=1===t?"50%":"".concat(this.modeControlContainerPaddingLeftRight,"px"),this.props.floorplan3DThis.alertRef.current.showAlert("Switched to ".concat(e.label," Mode."),"success")})))},this.state={selectedMode:e.floorplan3DThis.defaultUserMode},this.modeControlContainerPaddingLeftRight=2,this.modeOptionInfoExplanationBox=o.createRef(),this.modeSelectorRef=o.createRef(),this.onModeChangeClick=this.onModeChangeClick.bind(this)}render(){return(0,l.jsxs)("div",{className:"mode-control-container",children:[xo.map(((e,t)=>(0,l.jsxs)("div",{title:e.title,className:"mode-option ".concat(this.state.selectedMode===e.value?"active":""),onClick:this.onModeChangeClick(e,t),children:[(0,l.jsx)("div",{className:"label",children:(0,l.jsx)("span",{children:e.label})}),(0,l.jsx)(st,{infoText:e.infoText,infoContainerStyles:{marginLeft:2},indoorPanelExplanationBox:this.modeOptionInfoExplanationBox})]},e.label))),(0,l.jsx)("div",{ref:this.modeSelectorRef,className:"mode-selector"}),(0,l.jsx)("div",{ref:this.modeOptionInfoExplanationBox,className:"mode-option-info-explanation-box"})]})}}const Ma=Oa;var La=i(1317);const Ra=new Ne.Pa4,Ba=new Ne.V1s;class Aa extends Ne.ejS{constructor(e,t){const i=new Ne.u9r,o=new Ne.nls({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],n=[],a={};function r(e,t){l(e),l(t)}function l(e){s.push(0,0,0),n.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(s.length/3-1)}r("n1","n2"),r("n2","n4"),r("n4","n3"),r("n3","n1"),r("f1","f2"),r("f2","f4"),r("f4","f3"),r("f3","f1"),r("n1","f1"),r("n2","f2"),r("n3","f3"),r("n4","f4"),r("p","n1"),r("p","n2"),r("p","n3"),r("p","n4"),r("u1","u2"),r("u2","u3"),r("u3","u1"),r("c","t"),r("p","c"),r("cn1","cn2"),r("cn3","cn4"),r("cf1","cf2"),r("cf3","cf4"),i.setAttribute("position",new Ne.a$l(s,3)),i.setAttribute("color",new Ne.a$l(n,3)),super(i,o),this.isDisposed=!1,this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.onGeometryCoordinatesSetCallback=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const h=new Ne.Ilk(16755200),c=new Ne.Ilk(16711680),d=new Ne.Ilk(43775),p=new Ne.Ilk(16777215),m=new Ne.Ilk(3355443);this.setColors(h,c,d,p,m)}setColors(e,t,i,o,s){const n=this.geometry.getAttribute("color");n.setXYZ(0,e.r,e.g,e.b),n.setXYZ(1,e.r,e.g,e.b),n.setXYZ(2,e.r,e.g,e.b),n.setXYZ(3,e.r,e.g,e.b),n.setXYZ(4,e.r,e.g,e.b),n.setXYZ(5,e.r,e.g,e.b),n.setXYZ(6,e.r,e.g,e.b),n.setXYZ(7,e.r,e.g,e.b),n.setXYZ(8,e.r,e.g,e.b),n.setXYZ(9,e.r,e.g,e.b),n.setXYZ(10,e.r,e.g,e.b),n.setXYZ(11,e.r,e.g,e.b),n.setXYZ(12,e.r,e.g,e.b),n.setXYZ(13,e.r,e.g,e.b),n.setXYZ(14,e.r,e.g,e.b),n.setXYZ(15,e.r,e.g,e.b),n.setXYZ(16,e.r,e.g,e.b),n.setXYZ(17,e.r,e.g,e.b),n.setXYZ(18,e.r,e.g,e.b),n.setXYZ(19,e.r,e.g,e.b),n.setXYZ(20,e.r,e.g,e.b),n.setXYZ(21,e.r,e.g,e.b),n.setXYZ(22,e.r,e.g,e.b),n.setXYZ(23,e.r,e.g,e.b),n.setXYZ(24,t.r,t.g,t.b),n.setXYZ(25,t.r,t.g,t.b),n.setXYZ(26,t.r,t.g,t.b),n.setXYZ(27,t.r,t.g,t.b),n.setXYZ(28,t.r,t.g,t.b),n.setXYZ(29,t.r,t.g,t.b),n.setXYZ(30,t.r,t.g,t.b),n.setXYZ(31,t.r,t.g,t.b),n.setXYZ(32,i.r,i.g,i.b),n.setXYZ(33,i.r,i.g,i.b),n.setXYZ(34,i.r,i.g,i.b),n.setXYZ(35,i.r,i.g,i.b),n.setXYZ(36,i.r,i.g,i.b),n.setXYZ(37,i.r,i.g,i.b),n.setXYZ(38,o.r,o.g,o.b),n.setXYZ(39,o.r,o.g,o.b),n.setXYZ(40,s.r,s.g,s.b),n.setXYZ(41,s.r,s.g,s.b),n.setXYZ(42,s.r,s.g,s.b,!0),n.setXYZ(43,s.r,s.g,s.b,!0),n.setXYZ(44,s.r,s.g,s.b,!0),n.setXYZ(45,s.r,s.g,s.b,!0),n.setXYZ(46,s.r,s.g,s.b),n.setXYZ(47,s.r,s.g,s.b),n.setXYZ(48,s.r,s.g,s.b),n.setXYZ(49,s.r,s.g,s.b),n.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;Ba.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Wa("c",t,e,Ba,0,0,-1),Wa("t",t,e,Ba,0,0,1),Wa("n1",t,e,Ba,-1,-1,-1),Wa("n2",t,e,Ba,1,-1,-1),Wa("n3",t,e,Ba,-1,1,-1),Wa("n4",t,e,Ba,1,1,-1),Wa("f1",t,e,Ba,-1,-1,1),Wa("f2",t,e,Ba,1,-1,1),Wa("f3",t,e,Ba,-1,1,1),Wa("f4",t,e,Ba,1,1,1),Wa("u1",t,e,Ba,.7,1.1,-1),Wa("u2",t,e,Ba,-.7,1.1,-1),Wa("u3",t,e,Ba,0,2,-1),Wa("cf1",t,e,Ba,-1,0,1),Wa("cf2",t,e,Ba,1,0,1),Wa("cf3",t,e,Ba,0,-1,1),Wa("cf4",t,e,Ba,0,1,1);let i=[{propertyName:"cn2",index:43},{propertyName:"cn3",index:44}];if(Wa("cn1",t,e,Ba,-1,0,-1),Wa("cn2",t,e,Ba,1,0,-1),i[0].beforeCoords=new Ne.Pa4(e.getAttribute("position").getX(i[0].index),e.getAttribute("position").getY(i[0].index),e.getAttribute("position").getZ(i[0].index)),Wa("cn3",t,e,Ba,0,-1,-1),i[1].beforeCoords=new Ne.Pa4(e.getAttribute("position").getX(i[1].index),e.getAttribute("position").getY(i[1].index),e.getAttribute("position").getZ(i[1].index)),Wa("cn4",t,e,Ba,0,1,-1),e.getAttribute("position").needsUpdate=!0,this.onGeometryCoordinatesSetCallback){const t=setInterval((()=>{if(La.log("Set interval call"),this.isDisposed)clearInterval(t);else{const o=e.getAttribute("position");if(i.forEach((e=>{const t=new Ne.Pa4(o.getX(e.index),o.getY(e.index),o.getZ(e.index));t.applyMatrix4(this.matrix),e.newCoords=t})),La.log("targetIndexes",i),0===i.filter((e=>e.beforeCoords.x===e.newCoords.x&&e.beforeCoords.y===e.newCoords.y&&e.beforeCoords.z===e.newCoords.z)).length){clearInterval(t);let e={};for(let t=0;t<i.length;t++)e[i[t].propertyName]=i[t].newCoords;this.onGeometryCoordinatesSetCallback(e)}}}),1)}}dispose(){this.isDisposed=!0,this.geometry.dispose(),this.material.dispose()}}function Wa(e,t,i,o,s,n,a){Ra.set(s,n,a).unproject(o);const r=t[e];if(void 0!==r){const e=i.getAttribute("position");for(let t=0,i=r.length;t<i;t++)e.setXYZ(r[t],Ra.x,Ra.y,Ra.z)}}const Va=Aa;const Na=class extends ui{constructor(e,t,i,o){super(),this.scene=e,this.floorplan3DThis=i,this.fixed=o.fixed||!1,this.resizable=o.resizable||!1,this.mesh=t,this.mesh.isUnfixedItem=!0,this.mesh.itemObject=this,this.raycastedObject=null}initObject(){this.scene.add(this.mesh),"sensor"===this.mesh.type?(this.mesh.backgroundMesh&&(this.mesh.backgroundMesh.itemObject=this,this.scene.add(this.mesh.backgroundMesh)),this.mesh.roomMesh&&(this.mesh.roomMesh.itemObject=this,this.scene.add(this.mesh.roomMesh))):"other"===this.mesh.type&&this.mesh.backgroundMesh&&(this.mesh.backgroundMesh.itemObject=this,this.scene.add(this.mesh.backgroundMesh))}remove(){"sensor"===this.mesh.type?(this.mesh.backgroundMesh&&(this.scene.remove(this.mesh.backgroundMesh),this.floorplan3DThis.disposeObject(this.mesh.backgroundMesh)),this.mesh.roomMesh&&(this.scene.remove(this.mesh.roomMesh),this.floorplan3DThis.disposeObject(this.mesh.roomMesh))):"other"===this.mesh.type&&this.mesh.backgroundMesh&&(this.scene.remove(this.mesh.backgroundMesh),this.floorplan3DThis.disposeObject(this.mesh.backgroundMesh)),this.scene.remove(this.mesh),this.floorplan3DThis.disposeObject(this.mesh)}getUnfixedItemIntersections(){let e=[];return"other"===this.mesh.type?e.push(this.mesh.backgroundMesh):"sensor"===this.mesh.type?(this.mesh.backgroundMesh&&e.push(this.mesh.backgroundMesh),this.mesh.roomMesh&&e.push(this.mesh.roomMesh)):e.push(this.mesh),e}};class Ea extends o.Component{render(){return(0,l.jsx)("svg",{fill:"#000000",viewBox:"0 0 492.589 492.589",children:(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{d:"M468.467,222.168h-28.329c-9.712-89.679-80.46-161.18-169.71-172.258V24.135c0-13.338-10.791-24.134-24.134-24.134\r\nc-13.311,0-24.117,10.796-24.117,24.134V49.91C132.924,60.988,62.177,132.488,52.482,222.168H24.153\r\nC10.806,222.168,0,232.964,0,246.286c0,13.336,10.806,24.132,24.153,24.132h29.228c12.192,86.816,81.551,155.4,168.797,166.229\r\nv31.804c0,13.336,10.806,24.135,24.117,24.135c13.343,0,24.134-10.799,24.134-24.135v-31.804\r\nc87.228-10.829,156.607-79.413,168.775-166.229h29.264c13.33,0,24.122-10.796,24.122-24.132\r\nC492.589,232.964,481.797,222.168,468.467,222.168z M246.294,398.093c-85.345,0-154.804-69.453-154.804-154.813\r\nc0-85.363,69.459-154.813,154.804-154.813c85.376,0,154.823,69.45,154.823,154.813\r\nC401.117,328.639,331.671,398.093,246.294,398.093z"}),(0,l.jsx)("path",{d:"M246.294,176.93c-36.628,0-66.34,29.704-66.34,66.349c0,36.635,29.711,66.349,66.34,66.349\r\nc36.66,0,66.34-29.713,66.34-66.349C312.634,206.635,282.955,176.93,246.294,176.93z"})]})})}}const za=Ea;class Ha extends o.Component{constructor(){super(),this.setIsMapActiveState=e=>{this.setState({isMapActive:e})},this.setCurrentControlsType=e=>{this.setState({currentControlsType:e})},this.state={isMapActive:!1,currentControlsType:"orbit"},this.setIsMapActiveState=this.setIsMapActiveState.bind(this),this.setCurrentControlsType=this.setCurrentControlsType.bind(this)}render(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("button",{title:"orbit"===this.state.currentControlsType?"First person view":"Dollhouse view",className:"btn btn-default panel-icon-button-container ".concat(this.state.isMapActive?"disabled":""),onClick:()=>!this.state.isMapActive&&this.props.floorplan3DThis.onSwitchControlsClick(),children:"orbit"===this.state.currentControlsType?(0,l.jsx)(js,{}):(0,l.jsx)(Is,{})}),(0,l.jsx)("button",{title:"View floorplan",className:"btn btn-default panel-icon-button-container ".concat(this.state.isMapActive||"orbit"===this.state.currentControlsType?"":"disabled"),onClick:()=>!(!this.state.isMapActive&&"orbit"!==this.state.currentControlsType)&&this.props.floorplan3DThis.onBirdPerspectiveViewButtonClick(),children:(0,l.jsx)(Ds,{})}),(0,l.jsx)("button",{title:"Reset view",className:"btn btn-default panel-icon-button-container",onClick:()=>this.props.floorplan3DThis.onResetCameraViewButtonClick(),children:(0,l.jsx)(za,{})})]})}}const Ga=Ha;const Ua=class extends gi{get on(){return this.running}constructor(e){super(),this.name="FanRotationAnimation",this.maxRPM=150,this.direction="forward",this.percentage=.6,this.floorItem=e}setDirection(e){"forward"!==e&&"reverse"!==e||(this.direction=e)}setPercentage(e){this.percentage=Math.max(0,Math.min(1,e))}increaseSpeed(e){this.setPercentage(this.percentage+e)}decreaseSpeed(e){this.setPercentage(this.percentage-e)}turnOn(){this.clock=new Ne.SUY,this.start()}turnOff(){this.stop()}toggle(){this.on?this.turnOff():this.turnOn()}animate(){const e=this.clock.getDelta(),t=2*Math.PI*(this.maxRPM*this.percentage)/60*e;"reverse"===this.direction?this.floorItem.mesh.rotation.y-=t:this.floorItem.mesh.rotation.y+=t,this.on&&requestAnimationFrame((()=>this.animate()))}start(){this.running=!0,this.animate()}stop(){this.running=!1}remove(){this.stop()}};const qa=class extends gi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10;super(),this.name="CoverScaleAnimation",this.startHeightOrWidthSvg=null,this.targetHeightOrWidthSvg=null,this.startTime=null,this.speed=200,this.wallItem=e,this.running=!1,this.closingDirection=t,this.targetPosition=i,this.currentPosition=i,this.previousPosition=i,this.closedOffsetInSvg=o,this.openOffsetInSvg=s,this.refreshPosition()}setClosedOffset(e){const t=this.getOriginalHeightOrWidth(),i=Math.max(Math.min(e,t),0);i!==this.closedOffsetInSvg&&(this.closedOffsetInSvg=i,this.refreshPosition())}setOpenOffset(e){const t=this.getOriginalHeightOrWidth(),i=Math.max(Math.min(e,t),0);i!==this.openOffsetInSvg&&(this.openOffsetInSvg=i,this.refreshPosition())}setSpeed(e){this.speed=Math.max(e,5)}setClosingDirection(e){["top","left","right"].includes(e)&&e!==this.closingDirection&&(this.resizeByWidthHeightDepth(this.wallItem.object2D.additionalParams.width3D,this.wallItem.object2D.additionalParams.height3D,this.wallItem.object2D.additionalParams.depth3D),this.closingDirection=e,this.refreshPosition())}setPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=Math.max(0,Math.min(1,e));(o!==this.targetPosition||i)&&(this.targetPosition=o,0!==t?this.start(t):this.resizeByHeightOrWidth(this.getHeightOrWidthFromPosition(o)))}refreshPosition(){this.setPosition(this.targetPosition,0,!0)}getOriginalHeightOrWidth(){return"top"===this.closingDirection?this.wallItem.object2D.additionalParams.height3D*this.wallItem.floorplan3DThis.scaleFactor:this.wallItem.object2D.additionalParams.width3D*this.wallItem.floorplan3DThis.scaleFactor}getOpenHeightOrWidth(){return this.getOriginalHeightOrWidth()-this.openOffsetInSvg}getHeightOrWidthRange(){return this.getOriginalHeightOrWidth()-this.openOffsetInSvg-this.closedOffsetInSvg}getClosedHeightOrWidth(){return this.getOpenHeightOrWidth()-this.getHeightOrWidthRange()}resizeByHeightOrWidth(e){this.resizeByWidthHeightDepth("top"===this.closingDirection?this.wallItem.object2D.additionalParams.width3D:e/this.wallItem.floorplan3DThis.scaleFactor,"top"===this.closingDirection?e/this.wallItem.floorplan3DThis.scaleFactor:this.wallItem.object2D.additionalParams.height3D,this.wallItem.object2D.additionalParams.depth3D)}resizeToOriginalSize(){this.resizeByWidthHeightDepth(this.wallItem.object2D.additionalParams.width3D,this.wallItem.object2D.additionalParams.height3D,this.wallItem.object2D.additionalParams.depth3D)}resizeByWidthHeightDepth(e,t,i){this.wallItem.resizeByReferencePoint(e,t,i,(()=>"top"===this.closingDirection?this.wallItem.getMeshPoint({x:0,y:1,z:0}):"left"===this.closingDirection?this.wallItem.getMeshPoint({x:1,y:0,z:0}):"right"===this.closingDirection?this.wallItem.getMeshPoint({x:-1,y:0,z:0}):this.wallItem.getMeshCenter()))}getCurrentHeightOrWidth(){const e=this.getOriginalHeightOrWidth()-this.closedOffsetInSvg-this.openOffsetInSvg;return this.openOffsetInSvg+e*(1-this.currentPosition)}getTargetHeightOrWidth(){return(this.getOriginalHeightOrWidth()-this.closedOffsetInSvg-this.openOffsetInSvg)*(1-this.targetPosition)+this.openOffsetInSvg}getPositionFromHeightOrWidth(e){return 1-(e-this.openOffsetInSvg)/(this.getOriginalHeightOrWidth()-this.closedOffsetInSvg-this.openOffsetInSvg)}getHeightOrWidthFromPosition(e){return(1-e)*(this.getOriginalHeightOrWidth()-this.closedOffsetInSvg-this.openOffsetInSvg)+this.openOffsetInSvg}animate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.speed;this.startData||(this.startData={time:e,heightOrWidth:this.getCurrentHeightOrWidth()});const i=(e-this.startData.time)/1e3,o=Math.abs(this.getTargetHeightOrWidth()-this.startData.heightOrWidth),s=0===t?0:o/t,n=0===s?1:Math.min(i/s,1);this.currentPosition=n*this.targetPosition+(1-n)*this.previousPosition;const a=Ne.M8C.lerp(this.startData.heightOrWidth,this.getTargetHeightOrWidth(),n);this.resizeByHeightOrWidth(a),n<1?this.running?requestAnimationFrame((e=>this.animate(e,t))):this.resizeByHeightOrWidth(this.getTargetHeightOrWidth()):this.stop()}start(e){this.running?this.stop():(this.running=!0,this.startData=null,requestAnimationFrame((t=>this.animate(t,e))))}stop(){this.previousPosition=this.currentPosition,this.startData=null,this.running=!1}remove(){this.stop(),this.resizeToOriginalSize()}};class Ya extends o.Component{constructor(){var e;super(),e=this,this.setCheckedStatus=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.setState({checked:t},(()=>!!i&&i()))},this.getCheckedStatus=()=>this.state.checked,this.setDisabledStatus=e=>this.setState({disabled:e}),this.handleBindedObjectsHiglightChange=()=>{this.setState({checked:!this.state.checked},(()=>this.props.onChangeCallback()))},this.state={checked:!1,disabled:!1},this.setCheckedStatus=this.setCheckedStatus.bind(this),this.getCheckedStatus=this.getCheckedStatus.bind(this),this.setDisabledStatus=this.setDisabledStatus.bind(this),this.handleBindedObjectsHiglightChange=this.handleBindedObjectsHiglightChange.bind(this)}render(){return(0,l.jsx)("button",{title:"Highlight binded objects",className:"btn btn-default panel-icon-button-container ".concat(this.state.disabled?"disabled":""," ").concat(this.state.checked?"active":""),onClick:()=>!this.state.disabled&&this.handleBindedObjectsHiglightChange(),children:(0,l.jsx)(Ps,{})})}}const Ka=Ya;var Xa=i(2174);class Za extends o.Component{constructor(){super(),this.handleShowClickableHighlightChange=()=>{this.state.higlightEnabled||this.setState({higlightEnabled:!0},(()=>{this.props.floorplan3DThis.bindedObjectsHighlightInputRef.current.setDisabledStatus(!0);let e=[this.props.floorplan3DThis.floorplan3DViewScene];this.props.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.props.floorplan3DThis.floorplan3DOnMapScene&&e.push(this.props.floorplan3DThis.floorplan3DOnMapScene),this.props.floorplan3DThis.objectConnectorsArray.forEach((t=>{e.forEach((e=>{e.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]).forEach((e=>e.changeStateOnClick&&e.itemObject.setHighlightColor&&e.itemObject.highlightClickableColor()))}))})),setTimeout((()=>{this.props.floorplan3DThis.objectConnectorsArray.forEach((t=>{e.forEach((e=>{e.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]).forEach((e=>e.itemObject.resetHighlightColor&&e.itemObject.resetHighlightColor()))}))})),this.props.floorplan3DThis.bindedObjectsHighlightInputRef.current.setDisabledStatus(!1),this.props.floorplan3DThis.bindedObjectsHighlightInputRef.current.getCheckedStatus()&&this.props.floorplan3DThis.highlightBindedObjects(),this.setState({higlightEnabled:!1})}),this.highlightIntervalMs)}))},this.state={higlightEnabled:!1},this.highlightIntervalMs=3e3,this.handleShowClickableHighlightChange=this.handleShowClickableHighlightChange.bind(this)}render(){return(0,l.jsx)("button",{title:"Show clickable objects",className:"btn btn-default panel-icon-button-container ".concat(this.state.higlightEnabled?"active":""),onClick:this.handleShowClickableHighlightChange,children:(0,l.jsx)(Xa.Z,{})})}}const Ja=Za;class Qa extends o.Component{constructor(){super(),this.setFloorplanFloors3DData=(e,t)=>this.setState({floorplanFloors3D:e},(()=>t&&t())),this.setSelectedFloorplanFloor3D=(e,t)=>this.setState({selectedFloor3D:e},(()=>{this.updateFloorplanItemsInteraction(),this.updateIntersectionGroundPosition(),this.props.floorplan3DThis.centerFirstPersonControlsCamera(),t&&t()})),this.getSelectedFloorplanFloor3D=()=>this.state.selectedFloor3D,this.updateFloorplanItemsInteraction=()=>{this.props.floorplan3DThis.userInteractionCurrentController.removeItemBinder(),this.props.floorplan3DThis.userInteractionCurrentController.setSelectedObject(null);this.props.floorplan3DThis.getActiveScenes().forEach((e=>{const t=e.getObjectsByProperty("isFloorplanItem",!0);for(let i=0;i<t.length;i++)t[i].itemObject.disabled=t[i].itemObject.floorNumber!==this.state.selectedFloor3D.floorNumber}))},this.updateIntersectionGroundPosition=()=>{let e=[this.props.floorplan3DThis.floorplanViewUserInteractionController];this.props.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.props.floorplan3DThis.floorplan3DOnMapScene&&e.push(this.props.floorplan3DThis.floorplanOnMapUserInteractionController);const t=this.props.floorplan3DThis.props.mainComponentThis.getFloorStartElevation(this.state.selectedFloor3D.floorNumber,!0);e.forEach((e=>e.intersectionGround.position.y=t))},this.calculateFirstPersonControlsCameraPositionY=()=>this.state.selectedFloor3D?(this.props.floorplan3DThis.props.mainComponentThis.getFloorStartElevation(this.state.selectedFloor3D.floorNumber)+this.state.selectedFloor3D.floorHeight/2)*this.props.floorplan3DThis.scaleFactor:0,this.onFloorplanFloor3DClick=e=>()=>{this.state.selectedFloor3D.floorNumber!==e.floorNumber&&this.props.floorplan3DThis.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.onFloorplanFloorClick(this.props.floorplan3DThis.props.mainComponentThis.floorplanFloorsData.find((t=>t.floorNumber===e.floorNumber)))()},this.handleFloorplanFloor3DChange=e=>{const t=this.state.selectedFloor3D,i=this.props.floorplan3DThis.props.mainComponentThis.floorplanFloorsData.find((e=>e.floorNumber===t.floorNumber)),o=this.props.floorplan3DThis.floorplanFloors.find((t=>t.floorNumber===e));this.setState({selectedFloor3D:o},(()=>{o.objData=this.props.floorplan3DThis.filterFurnitureObjData(this.props.floorplan3DThis.props.mainComponentThis.OBJDATA);this.props.floorplan3DThis.getActiveScenes().forEach((e=>{const t=e.getObjectsByProperty("isFloorplanItem",!0).filter((e=>e.itemObject.floorNumber===o.floorNumber));for(let i=0;i<t.length;i++)t[i].itemObject.object2D=o.objData.find((e=>e.id===t[i].itemObject.object2D.id))})),t.objData=this.props.floorplan3DThis.filterFurnitureObjData(i.objData).map((e=>{const t=this.props.floorplan3DThis.props.mainComponentThis.createObj2DClassInstanceFromObj(e);return t.update(this.props.floorplan3DThis.props.mainComponentThis),t})),this.props.floorplan3DThis.redrawFloorplanFloorItems(t),this.updateFloorplanItemsInteraction(),this.updateIntersectionGroundPosition(),this.props.floorplan3DThis.centerFirstPersonControlsCamera(),this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.find((e=>e.floorID===o.floorID))&&this.onShowFloor3DClick(o)()}))},this.onHideFloor3DClick=e=>()=>{this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.push(e),this.props.floorplan3DThis.setFloorplanFloorItemsVisibility(e.floorNumber,!1),this.forceUpdate()},this.onShowFloor3DClick=e=>()=>{this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D=this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.filter((t=>t.floorID!==e.floorID)),this.props.floorplan3DThis.setFloorplanFloorItemsVisibility(e.floorNumber,!0),this.forceUpdate()},this.state={floorplanFloors3D:[],selectedFloor3D:null},this.setFloorplanFloors3DData=this.setFloorplanFloors3DData.bind(this),this.setSelectedFloorplanFloor3D=this.setSelectedFloorplanFloor3D.bind(this),this.getSelectedFloorplanFloor3D=this.getSelectedFloorplanFloor3D.bind(this),this.updateFloorplanItemsInteraction=this.updateFloorplanItemsInteraction.bind(this),this.updateIntersectionGroundPosition=this.updateIntersectionGroundPosition.bind(this),this.calculateFirstPersonControlsCameraPositionY=this.calculateFirstPersonControlsCameraPositionY.bind(this),this.handleFloorplanFloor3DChange=this.handleFloorplanFloor3DChange.bind(this),this.onFloorplanFloor3DClick=this.onFloorplanFloor3DClick.bind(this),this.onHideFloor3DClick=this.onHideFloor3DClick.bind(this),this.onShowFloor3DClick=this.onShowFloor3DClick.bind(this)}render(){const{floorplanFloors3D:e,selectedFloor3D:t}=this.state;return(0,l.jsx)("div",{children:t&&(0,l.jsx)("div",{className:"floorplan-floors-buttons-container",children:e.sort(((e,t)=>e.floorNumber-t.floorNumber)).map((e=>(0,l.jsxs)("div",{className:"panel-option-container",children:[(0,l.jsxs)("div",{className:"option-name-note-container",children:[(0,l.jsxs)("button",{title:"Floor ".concat(e.floorNumber),className:"option-button btn ".concat(t.floorNumber===e.floorNumber?"btn-active":""),style:{margin:"5px 0"},onClick:this.onFloorplanFloor3DClick(e),children:[(0,l.jsx)("span",{className:"label-span",children:"Floor\xa0"}),(0,l.jsx)("span",{children:e.floorNumber})]}),(0,l.jsx)("div",{className:"floor-info",children:(0,l.jsx)(st,{indoorPanelExplanationBox:this.props.floorplan3DThis.panelInfoExplanationBox,infoText:Ve(e)})})]}),(0,l.jsx)("button",{className:"btn btn-default action-icon-button ".concat(t.floorNumber===e.floorNumber?"disabled":""),children:this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.find((t=>t.floorID===e.floorID))?(0,l.jsx)(as.Z,{className:"view-3d-visibility-icon",title:"Show floor",onClick:t.floorNumber!==e.floorNumber?this.onShowFloor3DClick(e):void 0}):(0,l.jsx)(ns.Z,{className:"view-3d-visibility-icon",title:"Hide floor",onClick:t.floorNumber!==e.floorNumber?this.onHideFloor3DClick(e):void 0})})]},e.floorNumber)))})})}}const $a=Qa;class er extends o.Component{constructor(){super(),this.setFloorplanFloors3DData=(e,t)=>this.setState({floorplanFloors3D:e},(()=>t&&t())),this.setSelectedFloorplanFloor3D=(e,t)=>this.setState({selectedFloor3D:e},(()=>{this.updateFloorplanFloorsVisibility(e.floorNumber),t&&t()})),this.updateFloorplanFloorsVisibility=e=>{const t=this.state.floorplanFloors3D.filter((t=>t.floorNumber>e)),i=this.state.floorplanFloors3D.filter((t=>t.floorNumber<e));t.forEach((e=>!this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.find((t=>t.floorID===e.floorID))&&this.props.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.onHideFloor3DClick(e)())),i.forEach((e=>this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.find((t=>t.floorID===e.floorID))&&this.props.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.onShowFloor3DClick(e)()))},this.onFloorplanFloor3DClick=e=>()=>{this.state.selectedFloor3D.floorNumber!==e.floorNumber&&(this.updateFloorplanFloorsVisibility(e.floorNumber),this.props.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.onFloorplanFloor3DClick(e)(),this.setState({selectedFloor3D:e}))},this.state={floorplanFloors3D:[],selectedFloor3D:null},this.setFloorplanFloors3DData=this.setFloorplanFloors3DData.bind(this),this.setSelectedFloorplanFloor3D=this.setSelectedFloorplanFloor3D.bind(this),this.onFloorplanFloor3DClick=this.onFloorplanFloor3DClick.bind(this),this.updateFloorplanFloorsVisibility=this.updateFloorplanFloorsVisibility.bind(this)}render(){const{floorplanFloors3D:e,selectedFloor3D:t}=this.state;return(0,l.jsx)("div",{className:"scene-control-tools-container floors-selection",children:t&&e.sort(((e,t)=>e.floorNumber-t.floorNumber)).map((e=>(0,l.jsx)("button",{title:"Floor ".concat(e.floorNumber),className:"btn btn-default panel-icon-button-container ".concat(t.floorNumber===e.floorNumber?"active":""),onClick:this.onFloorplanFloor3DClick(e),children:(0,l.jsx)("div",{className:"floor-number-container",children:e.floorNumber})},e.floorNumber)))})}}const tr=er;var ir=i(1317);class or extends o.Component{constructor(e){var t;super(),t=this,this.addObjectConnectorObject=e=>{let t=[];const i=this.getObjectConnectorParamsData(e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]);if(this.getIsFixed2DObjectsValue(i))for(let s=0;s<this.floorplan3DViewScene.children.length;s++)this.floorplan3DViewScene.children[s].object2D&&e.objID.find((e=>e.id===this.floorplan3DViewScene.children[s].object2D.id))&&t.push(this.floorplan3DViewScene.children[s]);else{for(let i=0;i<e.objID.length;i++){let o;for(let s=0;s<this.floorplanFloors.length;s++)if(o=this.floorplanFloors[s].objData.find((t=>t.id===e.objID[i].id)),o){t.push({obj2D:o,floorNumber:this.floorplanFloors[s].floorNumber});break}}t=t.map((e=>this.getObjectsConnectorUnfixedBindedObjectParameters({object2D:e.obj2D,floorNumber:e.floorNumber})))}const o=new oa(this,[],i);this.objectConnectorsArray.push(o);for(let s=0;s<t.length;s++)ir.log("create ObjectsConnector addBindedObject"),o.addBindedObject(t[s])},this.getObjectConnectorAdditionalParameters=e=>"sensor"===this.getObjectConnectorClassValue(e)?{floorplanViewArrayName:"floorplanViewSensors",currentViewArrayName:"currentViewSensors"}:"other"===this.getObjectConnectorClassValue(e)?{floorplanViewArrayName:"floorplanViewOthers",currentViewArrayName:"currentViewOthers"}:{},this.getObjectsConnectorUnfixedBindedObjectParameters=e=>e?{object2D:e.object2D,floorNumber:e.floorNumber}:{},this.updateRightBoxBindingComponent=e=>{this.props.mainComponentThis.bindingRightBoxComponentRef.current&&this.props.mainComponentThis.bindingRightBoxComponentRef.current.updateKlet3DBinderState(e)},this.getIsFixed2DObjectsValue=e=>({other:!1,sensor:!1,doorWindow:!0,lights:!0,fan:!0,cover:!0,presence:!0}[this.getObjectConnectorClassValue(e)]),this.initialize3DViewController=()=>{this.props.mainComponentThis.addOnDrawingControlerInstance&&this.props.mainComponentThis.addOnDrawingControlerInstance.initializeController("3D",{floorplan3DThis:this})},this.isLightsShadowMapChangeFinished=e=>{for(let t=this.changedLightsShadowMaps.length-1;t>=0;t--)this.changedLightsShadowMaps[t].isMapLight===e&&!Object.hasOwn(this.changedLightsShadowMaps[t],"onLoadingRenderedCallback")&&("off"===this.changedLightsShadowMaps[t].lightObject.state&&!1===this.changedLightsShadowMaps[t].lightObject.castShadow||"on"===this.changedLightsShadowMaps[t].lightObject.state&&!0===this.changedLightsShadowMaps[t].lightObject.castShadow)&&this.changedLightsShadowMaps.splice(t,1);0===this.changedLightsShadowMaps.length&&(s.unmountComponentAtNode(this.props.mainComponentThis.loadingComponentContainer.current),this.changeLightShadowMapsLoadingSet=!1)},this.toggleLightState=async e=>{await this.toggleLightStateAction(e)},this.toggleFanState=async e=>{await this.toggleFanStateAction(e)},this.toggleCoverState=async e=>{await this.toggleCoverStateAction(e)},this.isFloorHidden=e=>this.props.mainComponentThis.hiddenFloorplanFloors3D.find((t=>t.floorID===this.floorplanFloors.find((t=>t.floorNumber===e)).floorID)),this.onResetCameraViewButtonClick=()=>{this.showMapLayer3DInputRef.current.getCheckedStatus()?this.focusFloorplanOnMap():this.currentControls===this.firstPersonControls?(this.centerFirstPersonControlsCamera(),this.updateWallsVisibility()):(this.centerOrbitControlsCamera(),this.orbitControls.target=this.floorplanCenterVector.clone(),this.orbitControls.update())},this.onSwitchControlsClick=()=>{this.showMapLayer3DInputRef.current.getCheckedStatus()||(this.currentControls===this.orbitControls?(this.orbitControls.enabled=!1,this.floorplan3DViewCamera=this.firstPersonControlsCamera,this.currentControls=this.firstPersonControls,this.cameraControlsRef.current.setCurrentControlsType("first_person")):(this.firstPersonControls.enabled=!1,this.firstPersonControls.disposeCircleNavigator(),this.floorplan3DViewCamera=this.orbitControlsCamera,this.currentControls=this.orbitControls,this.cameraControlsRef.current.setCurrentControlsType("orbit")),this.updateWallsVisibility(),this.currentControls.enabled=!0)},this.onBirdPerspectiveViewButtonClick=()=>{this.showMapLayer3DInputRef.current.getCheckedStatus()?(this._map.setPitch(0),this.focusFloorplanOnMap()):this.currentControls===this.orbitControls&&(this.floorplan3DViewCamera.position.set(this.floorplanCenterVector.x,this.orbitControls.maxDistance-1,this.floorplanCenterVector.z),this.orbitControls.target=this.floorplanCenterVector.clone(),this.orbitControls.update())},this.processSceneVec3=e=>{if(this.showMapLayer3DInputRef.current.getCheckedStatus()){const t=new Ne.Pa4(this.floorplanBoundingBoxCoordinates.minX,0,this.floorplanBoundingBoxCoordinates.minY).multiplyScalar(this.scaleFactor),i=this.props.mainComponentThis.floorplanGeneral.floorplan_bearing||0;e.copy(new Ne.Pa4(e.x+t.x,e.y,e.z+t.z));const o=[{x:e.x,y:e.z}];ke(o,{x:t.x,y:t.z},-R(i)),e.x=o[0].x,e.z=o[0].y}},this.getSelectedDrawingOption=()=>null,this.handleKeyDown3D=e=>{"Escape"===e.key&&this.userInteractionCurrentController.setSelectedObject(null)},this.disposeObject=e=>{if(e.isMesh){if(e.geometry.dispose(),e.material.isMaterial)this.disposeObjectMaterial(e.material);else for(const t of e.material)this.disposeObjectMaterial(t);e=null}},this.disposeObjectMaterial=e=>{e.dispose();for(const t of Object.keys(e)){const i=e[t];i&&"object"===typeof i&&"minFilter"in i&&i.dispose()}},this.disposeScene=(e,t)=>{ir.log("disposeScene"),e&&(e.traverse((e=>this.disposeObject(e))),e=null),t&&(t.dispose(),t=null)},this.createPointLight=(e,t)=>{const i=new Ne.cek;return i.state="off",i.power=0,i.decay=1,i.distance=1e3,i.shadow.bias=-.01,i.shadow.mapSize.width=1028,i.shadow.mapSize.height=1028,i.shadow.camera.near=1,i.shadow.camera.far=e.y-this.props.mainComponentThis.getFloorStartElevation(t,!0)+2,i.position.set(e.x,e.y,e.z),i},this.createSpotLight=(e,t,i)=>{const o=new Ne.PMe;return o.state="off",o.power=0,o.decay=1,o.distance=i.spotDistance,o.shadow.bias=-5e-4,o.shadow.mapSize.width=1028,o.shadow.mapSize.height=1028,o.shadow.camera.near=1,o.shadow.camera.far=e.y-this.props.mainComponentThis.getFloorStartElevation(t,!0)+2,o.angle=R(i.spotAngle),o.penumbra=1,o.position.set(e.x,e.y,e.z),o},this.onFloorplanItemSelect=e=>{if(this.currentControls===this.firstPersonControls&&this.currentControls.resetState(),this.floorplanItemCurrentHUDObject.itemSelected(e),this.closeActiveRightBox(),e.object2D)"inWall"===e.object2D.family||"onWall"===e.object2D.family?this.props.mainComponentThis.openWallItemToolsRightBox(e.object2D,this):this.props.mainComponentThis.openFreeItemToolsRightBox(e.object2D,this);else{let t;e.raycastedObject&&(e.raycastedObject.sensorMesh&&"sensor"===e.raycastedObject.sensorMesh.type?t=e.raycastedObject.sensorMesh:e.raycastedObject.otherMesh&&"other"===e.raycastedObject.otherMesh.type&&(t=e.raycastedObject.otherMesh)),t&&this.props.mainComponentThis.openHomeAssistantBindingsToolsRightBox(t.object2D,this)}},this.onFloorplanItemUnselect=()=>{this.floorplanItemCurrentHUDObject.itemUnselected(),this.closeActiveRightBox()},this.userInteractionControlerNothingClickedReset=()=>{this.closeActiveRightBox()},this.closeActiveRightBox=()=>{this.props.mainComponentThis.hideActiveRightBox(),this.props.mainComponentThis.removeSelectedBinder()},this.changeSelectedObjectMaterial=(e,t)=>{const i=t||this.userInteractionCurrentController.selectedObject;if(i&&(e(i),this.showMapLayer3DInputRef.current.getCheckedStatus())){const t=this.getFloorplanViewSceneItem(i.object2D);t&&e(t)}},this.getFloorplanViewSceneItem=e=>{if("inWall"===e.family||"onWall"===e.family){const t="inWall"===e.family?"inWallItemObjects":"onWallItemObjects";let i;for(let o=0;o<this.floorplanViewWalls3D.length;o++)if(i=this.floorplanViewWalls3D[o][t].find((t=>t.object2D.id===e.id)),i)return i}else{let t=[this.floorplanViewFurniture,this.floorplanViewLights,this.floorplanViewFans,this.floorplanViewPresences];for(let i=0;i<t.length;i++)for(let o=0;o<t[i].length;o++)if(t[i][o].object2D.id===e.id)return t[i][o]}return null},this.createFloorplanItem=function(e,i,o,s,n){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const r=new(ki[t.props.mainComponentThis.getObjectItemType(o)])(e,i,t.panelDrawingOptions.find((e=>e.objects3DArray===i)).object3DProperties,s,o,n,t,{fixed:!0,resizable:!1},a);if(r.initObject(),r.mesh.object2D=s,r.mesh.floorNumber=n,t.props.mainComponentThis.isLightObject(o))r.mesh.changeStateMethod=t.handleLightSwitchClick,r.mesh.changeStateOnClick=t.toggleLightState,r.mesh.state="off";else if(t.props.mainComponentThis.isDoorObject(o)||t.props.mainComponentThis.isWindowObject(o)){if(r.mesh.changeStateMethod=t.handleDoorWindowSwitchClick,r.mesh.status="closed",t.props.mainComponentThis.isDoorObject(s.type)){r.mesh.rotationAngleSign="reverse"===s.hinge?1:-1;const e=Math.PI*s.angle/180,t=r.getItemCenter();r.mesh.rotationPivotPoint=new Ne.Pa4(t.x+r.mesh.rotationAngleSign*r.halfSize.x*Math.cos(e),t.y,t.z+r.mesh.rotationAngleSign*r.halfSize.x*Math.sin(e))}else if(t.props.mainComponentThis.isWindowObject(s.type)){const e=Ce(s.limit[0],s.additionalParams.controlPointOnWall)>Ce(s.limit[1],s.additionalParams.controlPointOnWall)?s.limit[0]:s.limit[1],i=r.getItemCenter();r.mesh.rotationPivotPoint=new Ne.Pa4(e.x*t.scaleFactor,i.y,e.y*t.scaleFactor);let o=[];o.push(s.additionalParams.arrowControlPoint),o.push(e),o.push({x:s.x,y:s.y}),o.push(s.additionalParams.arrowControlPoint),r.mesh.rotationAngleSign=le(o)?1:-1}}else t.props.mainComponentThis.isFanObject(o)?(r.mesh.changeStateMethod=t.handleFanSwitchClick,r.mesh.changeStateOnClick=t.toggleFanState,r.mesh.state="off"):t.props.mainComponentThis.isCoverObject(o)?(r.mesh.changeStateMethod=t.handleCoverSwitchClick,r.mesh.changeStateOnClick=t.toggleCoverState):t.props.mainComponentThis.isPresenceObject(o)&&(r.mesh.changeStateMethod=t.handlePresenceDetectionUpdate,r.mesh.state="on");return t.setFloorplanItemMeshProperties(r.mesh,s),r},this.removeFloorplanItem=e=>{this.objectConnectorBindedObjectsOnItemRemoveCheck(e.mesh),e.remove(),this.userInteractionCurrentController.itemRemoved(e)},this.removeUnfixedItem=(e,t)=>{t&&this.objectConnectorBindedObjectsOnItemRemoveCheck(e);e.itemObject.remove()},this.createUnfixedItem=(e,t)=>{const i=new Na(e,t,this,{fixed:!0,resizable:!1});return i.initObject(),i},this.cloneUnfixedBindedObject3D=e=>{const t=e.clone();return t.type=e.type,t.object2D=e.object2D,t.floorNumber=e.floorNumber,e.changeStateMethod&&(t.changeStateMethod=e.changeStateMethod),e.changeStateOnClick&&(t.changeStateOnClick=e.changeStateOnClick),"sensor"===e.type?(e.backgroundMesh&&(t.backgroundMesh=e.backgroundMesh.clone(),t.backgroundMesh.type=e.backgroundMesh.type,t.backgroundMesh.sensorMesh=t),e.roomMesh&&(t.roomMesh=e.roomMesh.clone(),t.roomMesh.type=e.roomMesh.type,t.roomMesh.sensorMesh=t)):"other"===e.type&&e.backgroundMesh&&(t.backgroundMesh=e.backgroundMesh.clone(),t.backgroundMesh.type=e.backgroundMesh.type,t.backgroundMesh.otherMesh=t),this.cloneUnfixedBindedObject3DCustomCallback(e,t),t},this.calculateCurrentDate=()=>new Date(this.floorplanStartDate.getTime()+((new Date).getTime()-this.floorplanStartDateSetTimestamp)),this.createFloorplanTimeMesh=(e,t)=>{if("hidden"===this.props.mainComponentThis.clockVisibility)return;const i=e.getObjectByName("floorplan_time");i&&(e.remove(i),this.disposeObject(i));const o=this.createTextMesh(t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0"),0,100,new Ne.Pa4(this.floorplanCenterVector.x,0,this.floorplanCenterVector.z+.8*this.floorplanBoundingBoxCoordinates.height*this.scaleFactor),1);o.rotation.x=-Math.PI/2,o.name="floorplan_time",e.add(o)},this.getMaxFloorNumber=()=>Math.max(...this.floorplanFloors.map((e=>e.floorNumber))),this.calculateFloorplanXZPlaneBBoxPoints=()=>{let e=[new Ne.Pa4(this.floorplanBoundingBoxCoordinates.minX,0,this.floorplanBoundingBoxCoordinates.minY),new Ne.Pa4(this.floorplanBoundingBoxCoordinates.minX+this.floorplanBoundingBoxCoordinates.width,0,this.floorplanBoundingBoxCoordinates.minY),new Ne.Pa4(this.floorplanBoundingBoxCoordinates.minX,0,this.floorplanBoundingBoxCoordinates.minY+this.floorplanBoundingBoxCoordinates.height),new Ne.Pa4(this.floorplanBoundingBoxCoordinates.minX+this.floorplanBoundingBoxCoordinates.width,0,this.floorplanBoundingBoxCoordinates.minY+this.floorplanBoundingBoxCoordinates.height)];return e.forEach((e=>e.multiplyScalar(this.scaleFactor))),e},this.calculateMaxXMaxZOffsetsFromCenterPoint=(e,t)=>{let i=-1/0,o=-1/0;for(let s=0;s<t.length-1;s++){let i=Math.abs(t[s].z-e.z);i>o&&(o=i)}for(let s=0;s<t.length-1;s++){let o=Math.abs(t[s].x-e.x);o>i&&(i=o)}return{maxXDist:i,maxZDist:o}},this.drawGlobalCoordinateSystem=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ne.Pa4(0,0,0);ir.log(o),t.drawLine([new Ne.Pa4(0,0,0).add(o),new Ne.Pa4(1,0,0).multiplyScalar(i).add(o)],e,16711680),t.drawLine([new Ne.Pa4(0,0,0).add(o),new Ne.Pa4(0,1,0).multiplyScalar(i).add(o)],e,65280),t.drawLine([new Ne.Pa4(0,0,0).add(o),new Ne.Pa4(0,0,1).multiplyScalar(i).add(o)],e,255)},this.drawLine=(e,t,i)=>{const o=new Ne.nls({color:i||16711935}),s=(new Ne.u9r).setFromPoints(e),n=new Ne.x12(s,o);t.add(n)},this.changeCoordinateSystemBasisForPoints=(e,t,i,o)=>{const s=new Ne.Vkp;s.set(t.x,i.x,o.x,t.y,i.y,o.y,t.z,i.z,o.z);let n=[];for(let a=0;a<e.length;a++)n.push(new Ne.Pa4(s.elements[0]*e[a].x+s.elements[1]*e[a].y+s.elements[2]*e[a].z,s.elements[3]*e[a].x+s.elements[4]*e[a].y+s.elements[5]*e[a].z,s.elements[6]*e[a].x+s.elements[7]*e[a].y+s.elements[8]*e[a].z));return n},this.onSunLightPositionCoordinateSystemTransformReady=(e,t,i,o,s,n,a)=>r=>{r.cn2=r.cn2.clone().sub(e),r.cn3=r.cn3.clone().sub(e);const l=new Ne.Pa4(r.cn2.x,r.cn2.y,r.cn2.z).normalize(),h=t.clone().normalize(),c=new Ne.Pa4(r.cn3.x,r.cn3.y,r.cn3.z).normalize(),d=this.changeCoordinateSystemBasisForPoints(i,l,h,c),p=this.changeCoordinateSystemBasisForPoints(o,l,h,c),m=this.changeCoordinateSystemBasisForPoints([e],l,h,c)[0],{maxXDist:u,maxZDist:g}=this.calculateMaxXMaxZOffsetsFromCenterPoint(p[p.length-1],p),f=u,b=g;ir.log("leftRight",f),ir.log("topBottom",b);const w=-f,C=f,x=b,y=-b,S=Math.abs(Math.min(...d.map((e=>Math.abs(m.y-e.y))))),v=Math.abs(Math.max(...d.map((e=>Math.abs(m.y-e.y)))));ir.log("near",S),ir.log("far",v);const D=new Ne.Ox3(16777215,.9);D.castShadow=!0,D.shadow.bias=-.002,D.shadow.mapSize.width=2048,D.shadow.mapSize.height=2048,D.target.position.set(a.x,a.y,a.z),D.position.set(e.x,e.y,e.z),D.shadow.camera.left=w,D.shadow.camera.right=C,D.shadow.camera.top=x,D.shadow.camera.bottom=y,D.shadow.camera.near=S,D.shadow.camera.far=v,D.name="sun_light";const T=s.getObjectByName("sun_light");s.add(D),s.add(D.target),T&&(ir.log("Sun light removed"),s.remove(T),this.disposeObject(T)),n.mainCameraHelper&&(n.mainCameraHelper.dispose(),s.remove(n.mainCameraHelper)),n.mainCameraHelper=new Va(D.shadow.camera),this.textFont&&this.createFloorplanTimeMesh(s,this.calculateCurrentDate())},this.updateSunLightPosition=(e,t)=>{ir.log("updateSunLightPosition call"),ir.log("objectConnectorsArray",this.objectConnectorsArray);const i=this.calculateCurrentDate();if(this.textFont&&this.createFloorplanTimeMesh(e,i),e)return;const o=new Ne.Pa4(this.floorplanCenterVector.x,0,this.floorplanCenterVector.z),s=this.floorplanEnvironmentRadius,n=Dn().getPosition(i,this.props.mainComponentThis.getFloorplanGpsLatitude(this.props.mainComponentThis.floorplanGeneral),this.props.mainComponentThis.getFloorplanGpsLongitude(this.props.mainComponentThis.floorplanGeneral));if(this.skyMaterial.uniforms.sunAltitude.value=Math.max(n.altitude,0),this.skyMaterial.needsUpdate=!0,n.altitude<=0){const o=e.getObjectByName("sun_light");o&&(e.remove(o.target),this.disposeObject(o.target),e.remove(o),this.disposeObject(o)),t.auxiliaryCameraHelper&&(t.auxiliaryCameraHelper.dispose(),t.auxiliaryCameraHelper=null),t.mainCameraHelper&&(t.mainCameraHelper.dispose(),e.remove(t.mainCameraHelper),t.mainCameraHelper=null),this.textFont&&this.createFloorplanTimeMesh(e,i)}else{const i=this.props.mainComponentThis.floorplanGeneral.floorplan_bearing||0;n.azimuth=(n.azimuth+Math.PI-i*(Math.PI/180))%(2*Math.PI);const a=Math.sin(n.altitude)*s,r=Math.cos(n.altitude)*s,l=r*Math.cos(Math.PI/2-n.azimuth),h=-r*Math.sin(Math.PI/2-n.azimuth),c=new Ne.xo$(20,32,15),d=new Ne.vBJ({color:255}),p=new Ne.vBJ({color:255});new Ne.Kj0(c,d).position.set(l+this.floorplanCenterVector.x,0,h+this.floorplanCenterVector.z);const m=new Ne.Kj0(c,p);m.position.set(l+this.floorplanCenterVector.x,a,h+this.floorplanCenterVector.z),this.floorplan3DViewScene.add(m);let u=e.getObjectByName("sun_light_helper");const g=new Ne._fP;g.setFromEuler(e.rotation),u||(u=new Ne.Ox3(16777215,0),u.castShadow=!0,u.target.position.set(o.x,o.y,o.z),u.target.position.sub(e.position),u.target.position.applyQuaternion(g.clone().invert()),u.name="sun_light_helper",e.add(u),e.add(u.target));const f=new Ne.Pa4(l+this.floorplanCenterVector.x,a,h+this.floorplanCenterVector.z);u.position.set(f.x,f.y,f.z),u.position.sub(e.position),u.position.applyQuaternion(g.clone().invert()),u.shadow.camera=new Ne.iKG;let b=this.calculateFloorplanXZPlaneBBoxPoints();const w=this.getMaxFloorNumber();for(let e=0;e<4;e++)b.push(b[e].clone().add(new Ne.Pa4(0,this.props.mainComponentThis.getFloorStartElevation(w,!0)+this.floorplanFloors.find((e=>e.floorNumber===w)).floorHeight*this.scaleFactor,0)));b.push(o);const C=f.clone().sub(o);let x=[];for(let e=0;e<b.length;e++){const t=b[e].clone().projectOnPlane(C.clone().normalize());x.push(t);new Ne.Kj0(new Ne.xo$(40,32,15),new Ne.vBJ({color:16711935})).position.set(t.x,t.y,t.z)}t.auxiliaryCameraHelper&&t.auxiliaryCameraHelper.dispose(),t.auxiliaryCameraHelper=new Va(u.shadow.camera,this.onSunLightPositionCoordinateSystemTransformReady(f,C,b,x,e,t,o))}},this.clearSunLightPositionInterval=(e,t)=>{e&&(clearInterval(e),t?this.sunLightPositionFloorplan3DOnMapInterval=null:this.sunLightPositionFloorplan3DViewInterval=null)},this.initializeSunLightPositionIntervalCalculation=(e,t,i)=>{this.updateSunLightPosition(t,i),e?this.sunLightPositionFloorplan3DOnMapInterval=setInterval((()=>this.updateSunLightPosition(t,i)),this.updateSunLightPositionIntervalDelayMs):this.sunLightPositionFloorplan3DViewInterval=setInterval((()=>this.updateSunLightPosition(t,i)),this.updateSunLightPositionIntervalDelayMs)},this.handleDoorWindowSwitchClick=e=>{const t=e.status,i=this.getDoorWindowOpenStatus(e),o=i?"open":"closed";if(t!==o){e.status=o;const t=2e3,s=0;let n,a=i?-e.rotationAngleSign*Math.PI/2:e.rotationAngleSign*Math.PI/2,r=null,l=0,h=[];this.props.mainComponentThis.isDoorObject(e.object2D.type)&&wo[e.object2D.type]&&0!==wo[e.object2D.type].length?(n=this.rotateChildAroundWorldPoint,wo[e.object2D.type].forEach((t=>h.push(e.getObjectByName(t)))),a*=Co[e.object2D.type]*Math.sign(e.scale.x)):(n=this.rotateAroundPoint,h.push(e));const c=i=>{r||(r=i);const o=i-r;let d;if(o>=t)d=a;else{const e=o/t;d=(1-e)*s+e*a}h.forEach((t=>n(t,e.rotationPivotPoint,new Ne.Pa4(0,1,0),d-l))),l=d,o<t&&requestAnimationFrame(c)};requestAnimationFrame(c)}if(this.bindedObjectsHighlightInputRef.current.getCheckedStatus()){const t=e.itemObject;t.setHighlightColor&&(i?t.highlightOnColor():t.highlightOffColor())}},this.createTextMesh=function(e,i,o,s,n){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;a="number"===typeof a?a:1;const r=new Fn.M(e,{font:t.textFont,size:o,height:n,curveSegments:5});r.computeBoundingBox();const l=[new Ne.vBJ({color:i,transparent:a<1,opacity:a}),new Ne.vBJ({color:i,transparent:a<1,opacity:a})],h=new Ne.Kj0(r,l);return h.position.set(s.x,s.y,s.z),h},this.createTextBackgroundMesh=(e,t,i)=>{const o=(new Ne.ZzF).setFromObject(new Ne.Kj0(e.geometry)),s=Math.abs(o.max.x-o.min.x),n=Math.abs(o.max.y-o.min.y),a=new Ne._12(s+10,n+10),r=new Ne.xoR({transparent:!0,opacity:0,side:Ne.Wl3,color:16777215}),l=new Ne.Kj0(a,r);return l.position.x=t.x*this.scaleFactor+s/2,l.position.z=t.y*this.scaleFactor-n/2,l.rotation.set(-Math.PI/2,0,0),l.translateZ(this.props.mainComponentThis.getFloorStartElevation(i,!0)+this.bindedObjectTextHeight/2),l.type="background_mesh",l},this.initializeSensorColorPaletteImageData=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.sensorValueDecimalPrecision;const o=e[0].value,s=e[e.length-1].value,n=document.createElement("canvas"),a=j((s-o)*Math.pow(10,i),0);n.width=a,n.height=1;const r=n.getContext("2d"),l=r.createLinearGradient(0,0,a,1);let h={0:e[0].color};for(let t=1;t<e.length-1;t++)h[(e[t].value-o)/(s-o)]=e[t].color;h["1.0"]=e[e.length-1].color,ir.log("sensorGradientColorStops",h);for(let t in h)l.addColorStop(t,h[t]);r.fillStyle=l,r.fillRect(0,0,a,1);return{paletteImageData:r.getImageData(0,0,a,1).data,paletteCanvasWidth:a}},this.calculateSensorRangeColoringColor=(e,t,i)=>{let o=[{value:t["".concat(i,"_range_min_value")],color:t["".concat(i,"_range_min_color")]}];o.push(...t["".concat(i,"_range_intermediate_colors")]),o.push({value:t["".concat(i,"_range_max_value")],color:t["".concat(i,"_range_max_color")]});for(let h=0;h<o.length;h++)if(z.isNumber(o[h].value))return ir.log("Invalid range color"),null;const s=o[0].value,n=o[o.length-1].value,a=Math.min(n,Math.max(s,e)),r=this.initializeSensorColorPaletteImageData(o),l=4*j((r.paletteCanvasWidth-1)*(a-s)/(n-s),0);return new Ne.Ilk("rgb(".concat(r.paletteImageData[l],", ").concat(r.paletteImageData[l+1],", ").concat(r.paletteImageData[l+2],")"))},this.createSensorMesh=(e,t)=>{const i=this.getSensorMeshParameters(e,t);if(!i)return null;const{connectorInstanceSavedParameters:o}=i,s={x:e.object2D.x,y:e.object2D.y};ir.log("Sensor parameters",i);const n=this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["background"]),a=this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["text"]),r=this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["sensor_type"]);let l,h;if(n.checked){let t;if(t=fe(s,this.props.mainComponentThis.ROOM))if(t=this.floorplan3DViewScene.getObjectByProperty("roomID",t.id),t){let o;if(ir.log("Background parameters",n),"fixed"===n.background_coloring_type?o=new Ne.Ilk(n.background_fixed_color):"range"===n.background_coloring_type&&"number"===r&&i.isSensorNumberValue&&(o=this.calculateSensorRangeColoringColor(i.sensorOutputValue,n,"background")),o){const i="number"===typeof n.background_opacity?n.background_opacity:1;h=new Ne.Kj0(t.geometry.clone(),new Ne.xoR({color:o,flatShading:!0,side:t.material.side,transparent:i<1,opacity:i})),h.type="room_mesh",h.rotation.set(Math.PI/2,0,0),h.translateZ(-(this.props.mainComponentThis.getFloorStartElevation(e.floorNumber,!0)+this.bindedObjectTextHeight/2))}}else ir.log("Ne postoji soba na sceni");else ir.log("Ne postoji soba")}if(a.checked){let t;ir.log("Text parameters",a),"fixed"===a.text_coloring_type?t=new Ne.Ilk(a.text_fixed_color):"range"===a.text_coloring_type&&"number"===r&&i.isSensorNumberValue&&"range"!==n.background_coloring_type&&(t=this.calculateSensorRangeColoringColor(i.sensorOutputValue,a,"text")),t&&(ir.log("textColor",t),l=this.createTextMesh(""+i.sensorOutputValue+this.getSensorUnitOfMeasurement(e),t,a.text_font_size,new Ne.Pa4(s.x,0,s.y).multiplyScalar(this.scaleFactor),this.bindedObjectTextHeight,a.text_opacity),l.textColor=t,l.backgroundMesh=this.createTextBackgroundMesh(l,s,e.floorNumber),l.backgroundMesh.sensorMesh=l)}return l||h?(l?h&&(l.roomMesh=h,h.sensorMesh=l):(l=new Ne.Kj0,l.roomMesh=h,h.sensorMesh=l),l.rotation.set(-Math.PI/2,0,0),l.translateZ(this.props.mainComponentThis.getFloorStartElevation(e.floorNumber,!0)),l[this.props.mainComponentThis.connectorIDbinderIDPropertyName]=t[this.props.mainComponentThis.connectorIDbinderIDPropertyName],i.sensorMeshPropertiesSetter(l),l.type="sensor",l.object2D=e.object2D,l.floorNumber=e.floorNumber,ir.log("Created sensorTextMesh",l),l):null},this.createOtherMesh=(e,t)=>{const i=this.getOtherMeshParameters(e,t);if(!i)return null;const{connectorInstanceSavedParameters:o}=i,s={x:e.object2D.x,y:e.object2D.y},n=new Ne.Ilk(this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["color"])),a=this.createTextMesh(i.otherValue,n,this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["font_size"]),new Ne.Pa4(s.x,0,s.y).multiplyScalar(this.scaleFactor),this.bindedObjectTextHeight,this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["opacity"]));return a.textColor=n,a.backgroundMesh=this.createTextBackgroundMesh(a,s,e.floorNumber),a.backgroundMesh.otherMesh=a,a.rotation.set(-Math.PI/2,0,0),a.translateZ(this.props.mainComponentThis.getFloorStartElevation(e.floorNumber,!0)),a[this.props.mainComponentThis.connectorIDbinderIDPropertyName]=t[this.props.mainComponentThis.connectorIDbinderIDPropertyName],i.otherMeshPropertiesSetter(a),a.type="other",a.object2D=e.object2D,a.floorNumber=e.floorNumber,a},this.drawFloorplanSensors=e=>{this.currentViewSensors=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorBindedUnfixedObjects(e,this.floorplanFloors[t].objData.filter((e=>"sensor"===e.type)),this.floorplanFloors[t].floorNumber,this.currentViewSensors)},this.drawFloorplanOthers=e=>{this.currentViewOthers=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorBindedUnfixedObjects(e,this.floorplanFloors[t].objData.filter((e=>"other_entity"===e.type)),this.floorplanFloors[t].floorNumber,this.currentViewOthers)},this.drawFloorBindedUnfixedObjects=(e,t,i,o)=>{for(let s=0;s<t.length;s++){let n=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.objID.find((e=>e.id===t[s].id))));if(n){if(this.props.mainComponentThis.getObjectConnectorKlet3DBinderData(n[this.props.mainComponentThis.connectorIDbinderIDPropertyName])){let a=this.objectConnectorsArray.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===n[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));if(a){let n=a.bindedObjects.find((e=>e.object2D.id===t[s].id));if(n){const i=e.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,a[this.props.mainComponentThis.connectorIDbinderIDPropertyName]);let r=!1;for(let e=0;e<i.length;e++)if(i[e].object2D.id===t[s].id){r=!0;break}if(!r){const t=this.cloneUnfixedBindedObject3D(n),i=this.createUnfixedItem(e,t);o.push(i)}}else{const n=a.bindedObjects.length;if(a.addBindedObject(this.getObjectsConnectorUnfixedBindedObjectParameters({object2D:t[s],floorNumber:i}),!1),a.bindedObjects[n]){const t=this.createUnfixedItem(e,a.bindedObjects[n]);o.push(t)}}}else{const a=new oa(this,[this.getObjectsConnectorUnfixedBindedObjectParameters({object2D:t[s],floorNumber:i})],this.getObjectConnectorParamsData(n[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));if(this.objectConnectorsArray.push(a),a.create(this.getObjectConnectorParamsData(n[this.props.mainComponentThis.connectorIDbinderIDPropertyName]),!1),a.bindedObjects[0]){const t=this.createUnfixedItem(e,a.bindedObjects[0]);o.push(t)}}}}}},this.turnWaitingLightOn=e=>{this.addShadowCastLightToList({lightMeshObject:this.shadowCastingLightsWaitingList[e].lightMeshObject,isMapScene:this.shadowCastingLightsWaitingList[e].isMapScene},this.shadowCastingLightsActive),this.setLightStateParameters(this.shadowCastingLightsWaitingList[e].lightMeshObject,!0,!1),this.shadowCastingLightsWaitingList.splice(e,1)},this.setLightStateParameters=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2?arguments[2]:void 0;const n=e.itemObject,a=t.getLightProperties(e);n.renderLight(a.variant,"spot"===a.variant?{spotAngle:a.spot_angle,spotDistance:a.spot_distance}:null);const r=e.light,h=null!==i?i:t.getLightTurnOnState(e);r.color=a.color;const c=Oe(r);if(r.state!==(h?"on":"off")){const e=()=>{r.castShadow=h,r.state=h?"on":"off",r.power=h?a.power:0;const e=c===t.floorplan3DOnMapScene?t.floorplan3DOnMapRenderer:t.floorplan3DViewRenderer;e&&(e.shadowMap.needsUpdate=!0)};o?e():0===t.changedLightsShadowMaps.length?(t.changeLightShadowMapsLoadingSet=null,t.changedLightsShadowMaps.push({lightObject:r,isMapLight:c===t.floorplan3DOnMapScene,onLoadingRenderedCallback:e}),s.render((0,l.jsx)(xn,{}),t.props.mainComponentThis.loadingComponentContainer.current,(()=>{setTimeout((()=>{t.changeLightShadowMapsLoadingSet=!0,t.changedLightsShadowMaps.forEach((e=>{e.onLoadingRenderedCallback&&(e.onLoadingRenderedCallback(),delete e.onLoadingRenderedCallback)}))}),100)}))):null===t.changeLightShadowMapsLoadingSet?t.changedLightsShadowMaps.push({lightObject:r,isMapLight:c===t.floorplan3DOnMapScene,onLoadingRenderedCallback:e}):(t.changedLightsShadowMaps.push({lightObject:r,isMapLight:c===t.floorplan3DOnMapScene}),e())}else r.power=h?a.power:0},this.addShadowCastLightToList=(e,t)=>{!t.find((t=>t.lightMeshObject===e.lightMeshObject))&&t.push(e)},this.handleLightSwitchClick=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ir.log("handleLightSwitchClick params",i),t.shadowCastingLightsWaitingList=t.shadowCastingLightsWaitingList.filter((e=>t.getLightTurnOnState(e.lightMeshObject)));const o=t.getLightTurnOnState(e),s=Oe(e)===t.floorplan3DOnMapScene,n=t.shadowCastingLightsActive.findIndex((t=>t.lightMeshObject===e));if(t.shadowCastingLightsActive.length<t.maxShadowCastingLightsCount){let a;o?-1===n&&(t.showMapLayer3DInputRef.current.getCheckedStatus()&&s||!t.showMapLayer3DInputRef.current.getCheckedStatus()&&!s?(a=!0,t.addShadowCastLightToList({lightMeshObject:e,isMapScene:s},t.shadowCastingLightsActive)):(a=!1,t.addShadowCastLightToList({lightMeshObject:e,isMapScene:s},t.shadowCastingLightsWaitingList))):(a=!1,-1!==n&&t.shadowCastingLightsActive.splice(n,1)),t.setLightStateParameters(e,a,i.isInitialRenderCall)}else if(o)t.addShadowCastLightToList({lightMeshObject:e,isMapScene:s},t.shadowCastingLightsWaitingList),t.setLightStateParameters(e,!1,i.isInitialRenderCall);else if(t.setLightStateParameters(e,!1,i.isInitialRenderCall),-1!==n&&(t.showMapLayer3DInputRef.current.getCheckedStatus()&&s||!t.showMapLayer3DInputRef.current.getCheckedStatus()&&!s)){let e=t.shadowCastingLightsWaitingList.findIndex((e=>e.isMapScene===t.shadowCastingLightsActive[n].isMapScene));t.shadowCastingLightsActive.splice(n,1),-1!==e&&t.turnWaitingLightOn(e)}let a=[];if(a=t.showMapLayer3DInputRef.current.getCheckedStatus()?t.shadowCastingLightsWaitingList.filter((e=>e.isMapScene)):t.shadowCastingLightsWaitingList.filter((e=>!e.isMapScene)),a.length>0?t.maxShadowCastingLightsAlert.current.showAlert((0,l.jsxs)("span",{children:["To ensure optimal performance, add-on currently allows a maximum of ",(0,l.jsx)("b",{children:t.maxShadowCastingLightsCount})," ","lights to be turned on simultaneously"]}),"warning"):t.maxShadowCastingLightsAlert.current.hideAlert(),t.bindedObjectsHighlightInputRef.current.getCheckedStatus()){const t=e.itemObject;t.setHighlightColor&&(o?t.highlightOnColor():t.highlightOffColor())}ir.log("Active",t.shadowCastingLightsActive),ir.log("Waiting",t.shadowCastingLightsWaitingList)},this.handleFanSwitchClick=e=>{const{itemObject:t}=e;let i=t.animations.find((e=>e instanceof Ua));i||(i=new Ua(t),t.animations.push(i));const o=e.state,s=this.getFanState(e);o!==s&&(e.state=s,"on"===s?i.turnOn():i.turnOff());const n=this.getFanProperties(e);if(i.setPercentage(n.percentage/100),i.setDirection(n.direction),this.bindedObjectsHighlightInputRef.current.getCheckedStatus()){const t=e.itemObject;t.setHighlightColor&&("on"===s?t.highlightOnColor():t.highlightOffColor())}},this.handleCoverSwitchClick=e=>{const{itemObject:t}=e;let i=t.animations.find((e=>e instanceof qa));i||(i=new qa(t),t.animations.push(i));const o=this.getCoverProperties(e);if(i.setOpenOffset(o.openOffset*this.scaleFactor),i.setClosedOffset(o.closedOffset*this.scaleFactor),i.setClosingDirection(o.closingDirection),i.setPosition(o.currentPosition/100),this.bindedObjectsHighlightInputRef.current.getCheckedStatus()){const t=e.itemObject;t.setHighlightColor&&(0!==o.currentPosition?t.highlightOnColor():t.highlightOffColor())}},this.handlePresenceDetectionUpdate=e=>{const t=e.itemObject,i=e.state,o=this.getPresenceState(e);i!==o&&(e.state=o);const s=this.getPresenceProperties(e);"on"===o?t.setMaterialOpacity(s.detectedOpacity):t.setMaterialOpacity(s.undetectedOpacity)},this.onExportPngClick=()=>{const e=this.showMapLayer3DInputRef.current.getCheckedStatus()?this._map.getCanvas():this.canvasRef.current,t=e.toDataURL("image/png");let i=document.createElement("canvas");i.width=e.width*this.exportPngResolutionScale,i.height=e.height*this.exportPngResolutionScale;let o=i.getContext("2d");o.scale(this.exportPngResolutionScale,this.exportPngResolutionScale);let s=new Image;s.onload=()=>{o.drawImage(s,0,0);let t=new Image;t.onload=()=>{o.drawImage(t,e.width-176,e.height-50,166,40);const s=i.toDataURL("image/png"),n=document.createElement("a");n.download="GLAMOS_3DFloorplan_".concat((new Date).getDate().toString().padStart(2,"0"),"_").concat(((new Date).getMonth()+1).toString().padStart(2,"0"),"_").concat((new Date).getFullYear()),n.href=s,n.click()},t.src=a},s.src=t},this.hidePanel=()=>{this.panel.current.style.transform="translateX(0px)",this.sceneControlToolsContainer.current.style.transform="translateX(0px)",this.panelControl.current.style.transform="translateX(0px)"},this.onPanelControlClick=()=>{this.state.isPanelShowed?this.hidePanel():(this.panel.current.style.transform="translateX(".concat(this.panelWidth,"px)"),this.sceneControlToolsContainer.current.style.transform="translateX(".concat(this.panelWidth,"px)"),this.panelControl.current.style.transform="translateX(".concat(this.panelWidth,"px)")),this.setState({isPanelShowed:!this.state.isPanelShowed})},this.setFloorplanItemShadow=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.traverse((e=>{e.isMesh&&(e.castShadow=!t,e.receiveShadow=!0)}))},this.rotateAroundPoint=(e,t,i,o)=>{e.position.sub(t),e.position.applyAxisAngle(i,o),e.position.add(t),e.rotateOnAxis(i,o)},this.rotateChildAroundWorldPoint=(e,t,i,o)=>{const s=t.clone();if(Oe(e)===this.floorplan3DOnMapScene){const e=t.clone();this.processSceneVec3(e),s.sub(e.sub(t))}e.parent.worldToLocal(s);const n=e.position.clone().sub(s);n.applyAxisAngle(i.normalize(),o),e.position.copy(n).add(s),e.rotateOnAxis(i.normalize(),o)},this.translateObjectInWorld=(e,t,i,o)=>{const s=new Ne.Pa4(t,i,o),n=new Ne.Pa4;e.getWorldPosition(n),n.add(s),Oe(e)===this.floorplan3DOnMapScene&&this.processSceneVec3(n),e.position.set(n.x,n.y,n.z)},this.createMeshFromObject=(e,t)=>{let i=[],o=[];for(let a=0;a<e.children.length;a++){let t=e.children[a];"Mesh"===t.type&&(t.material.length?i=i.concat(t.material):i.push(t.material),t.geometry.isBufferGeometry&&o.push(t.geometry))}let s=new Ne.u9r;s=On.qf([...o],!0),s.computeVertexNormals(),s.computeBoundingBox(),s.normalizeNormals();const n=new Ne.Kj0(s,i);t.add(n)},this.onCameraMoved=()=>{this.updateWallsVisibility()},this.updateWallsVisibility=()=>{for(let e=0;e<this.currentWalls3D.length;e++)this.currentWalls3D[e].updateFrontWallVisibility()},this.updateControlPanelState=()=>{this.controlPanelRef.current.setSensorValues(),this.controlPanelRef.current.setOthersValues(),this.controlPanelRef.current.setDoorsWindowsSwitches(),this.controlPanelRef.current.setLightsSwitches(),this.controlPanelRef.current.setFansSwitches(),this.controlPanelRef.current.setCoverSwitches(),this.controlPanelRef.current.setPresenceSwitches()},this.onInitialFloorplanDrawingFinishedCallback=()=>{this.floorplanViewWalls3D=[...this.currentWalls3D],this.floorplanViewRoomFloors=[...this.currentRoomFloors],this.floorplanViewFurniture=[...this.currentFurniture],this.floorplanViewLights=[...this.currentViewLights],this.floorplanViewFans=[...this.currentViewFans],this.floorplanViewPresences=[...this.currentViewPresences],this.floorplanViewSensors=[...this.currentViewSensors],this.floorplanViewOthers=[...this.currentViewOthers],this.loadedTextures=[...this.roomFloorTextures],this.updateControlPanelState(),this.floorplanFloorsPanelSelection3DRef.current.setFloorplanFloors3DData(this.floorplanFloors,(()=>{const e=this.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor(),t=this.floorplanFloors.find((t=>t.floorNumber===e.floorNumber));this.floorplanFloorsPanelSelection3DRef.current.setSelectedFloorplanFloor3D(t,(()=>{this.floorplanFloorsSceneControlsSelectionRef.current.setFloorplanFloors3DData(this.floorplanFloors,(()=>this.floorplanFloorsSceneControlsSelectionRef.current.setSelectedFloorplanFloor3D(t)))}))})),s.unmountComponentAtNode(this.props.mainComponentThis.loadingComponentContainer.current),requestAnimationFrame((()=>{this.state.isPanelShowed&&(this.props.mainComponentThis.taille_w>=this.props.mainComponentThis.smallScreenPixelSize?(this.panel.current.style.transform="translateX(".concat(this.panelWidth,"px)"),this.sceneControlToolsContainer.current.style.transform="translateX(".concat(this.panelWidth,"px)"),this.panelControl.current.style.transform="translateX(".concat(this.panelWidth,"px)")):this.onPanelControlClick())})),ir.log("Active",this.shadowCastingLightsActive),ir.log("Waiting",this.shadowCastingLightsWaitingList),this.isInitialFloorplanDrawingFinished=!0},this.isInitialLoadingFinished=()=>{if(!this.showMapLayer3DInputRef.current.getCheckedStatus()){ir.log(JSON.stringify(this.loadingCallbacksStatuses));for(let e=0;e<this.loadingCallbacksStatuses.length;e++)if(!this.loadingCallbacksStatuses[e])return;this.onInitialFloorplanDrawingFinishedCallback()}},this.floorplan3DViewAnimate=()=>{this.mounted&&(setTimeout((()=>{requestAnimationFrame(this.floorplan3DViewAnimate)}),this.timeIntervalBetweenFrames),!this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.currentControls.enabled&&this.currentControls===this.firstPersonControls&&this.currentControls.animate(),this.floorplan3DViewRenderer.clear(),this.floorplan3DViewRenderer.render(this.floorplan3DViewScene,this.floorplan3DViewCamera),this.changedLightsShadowMaps.length>0&&this.isLightsShadowMapChangeFinished(!1))},this.onWindowResize=()=>{ir.log("Canvas resize");let e=this.props.mainComponentThis.floorplan3DContainerRef.current.getBoundingClientRect();new Array(this.orbitControlsCamera,this.firstPersonControlsCamera).forEach((t=>{t.aspect=e.width/e.height,t.updateProjectionMatrix()})),this.floorplan3DViewRenderer.setSize(e.width,e.height),this.showMapLayer3DInputRef.current.getCheckedStatus()&&(this.floorplan3DOnMapCamera.aspect=e.width/e.height,this.floorplan3DOnMapCamera.updateProjectionMatrix(),this.floorplan3DOnMapRenderer.setSize(e.width,e.height))},this.calculateAngleBetween2DVectors=(e,t,i,o)=>-Math.atan2(e*o-t*i,e*i+t*o),this.calculateShapeGeometryUVMappings=(e,t)=>{let i,o=e.getAttribute("uv"),s=e.getAttribute("position"),n=new Ne.Pa4;for(let a=0;a<o.count;a++)n.fromBufferAttribute(s,a),i=t(n),o.setXY(a,i.x,i.y);o.needsUpdate=!0},this.createAmbientLight=e=>{const t=new Ne.Mig(4210752,2);e.add(t)},this.createFloorplanEnvironmentGround=e=>{const t=this.props.mainComponentThis.groundColor,i=parseInt(t.split("#").at(-1),16),o=new Ne.zf8(this.floorplanEnvironmentRadius,this.environmentCircleSegmentsCount),s=new Ne.YBo({color:16777215});s.color.setHex(i);const n=new Ne.Kj0(o,s);n.rotation.x=-Math.PI/2,n.receiveShadow=!0,n.translateX(this.floorplanCenterVector.x),n.translateY(-this.floorplanCenterVector.z),n.translateZ(-5),e.add(n)},this.createFloorplanEnvironment=e=>{if("color"===this.props.mainComponentThis.skyColorType)e.background=new Ne.Ilk(this.props.mainComponentThis.skyColor);else{const t=this.calculateControlsMaxDistance();this.orbitControls.maxDistance=t,this.firstPersonControls.maxDistance=t;const i="\n    varying vec3 vWorldPosition;\n\n    void main() {\n\n      vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n      vWorldPosition = worldPosition.xyz;\n\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }",o="uniform vec3 topColorDay;\n        uniform vec3 bottomColorDay;\n        uniform vec3 topColorNight;\n        uniform vec3 bottomColorNight;\n        uniform float sunAltitude;\n        \n        varying vec3 vWorldPosition;\n\n        // Function to adjust exposure\n        vec3 applyExposure(vec3 color, float exposure) {\n          return 1.0 - exp(-color * exposure);\n        }\n        \n        void main() {\n          float dayNightFactor = smoothstep(0.2, 1.0, 0.5 + 0.5 * cos(sunAltitude));\n        \n          vec3 topColor = mix(topColorDay, topColorNight, dayNightFactor);\n          vec3 bottomColor = mix(bottomColorDay, bottomColorNight, dayNightFactor);\n\n          // Adjust the intensity using exposure control\n          float exposure = 15.0;  // Adjust this value for desired brightness\n          topColor = applyExposure(topColor, exposure);\n          bottomColor = applyExposure(bottomColor, exposure);\n      \n          float h = normalize(vWorldPosition).y;\n          gl_FragColor = vec4(mix(bottomColor, topColor, h), 1.0);\n        }",s=Dn().getPosition(this.floorplanStartDate,this.props.mainComponentThis.getFloorplanGpsLatitude(this.props.mainComponentThis.floorplanGeneral),this.props.mainComponentThis.getFloorplanGpsLongitude(this.props.mainComponentThis.floorplanGeneral)),n={topColorDay:{value:new Ne.Ilk(.6,.8,1)},bottomColorDay:{value:new Ne.Ilk(.8,.9,1)},topColorNight:{value:new Ne.Ilk(0,.05,.2)},bottomColorNight:{value:new Ne.Ilk(0,0,.05)},offset:{value:33},exponent:{value:.6},sunAltitude:{value:Math.max(s.altitude,0)}},a=new Ne.xo$(this.floorplanEnvironmentRadius,this.environmentCircleSegmentsCount,15);this.skyMaterial=new Ne.jyz({uniforms:n,vertexShader:i,fragmentShader:o,side:Ne._Li});const r=new Ne.Kj0(a,this.skyMaterial);r.translateX(this.floorplanCenterVector.x),r.translateZ(this.floorplanCenterVector.z),e.add(r)}this.createFloorplanEnvironmentGround(e)},this.centerOrbitControlsCamera=()=>{this.orbitControlsCamera.position.copy(this.floorplanCenterVector.clone().add(new Ne.Pa4(0,this.YZDistanceFromFloorplanCenter.offsetY,this.YZDistanceFromFloorplanCenter.offsetZ)))},this.calculateYZDistanceFromFloorplanCenter=()=>{const e=R(45),t=this.calculateControlsMaxDistance();this.YZDistanceFromFloorplanCenter.offsetY=.6*t*Math.sin(e),this.YZDistanceFromFloorplanCenter.offsetZ=.6*t*Math.cos(e)},this.calculateFloorplanEnvironmentRadius=()=>{let e=this.calculateFloorplanXZPlaneBBoxPoints();const{maxXDist:t,maxZDist:i}=this.calculateMaxXMaxZOffsetsFromCenterPoint(this.floorplanCenterVector,e),o=this.props.mainComponentThis.getHighestFloorData();this.floorplanEnvironmentRadius=Math.max((this.props.mainComponentThis.getFloorStartElevation(o.floorNumber)+2*o.floorHeight)*this.scaleFactor,6*Math.max(t,i))},this.calculateControlsMaxDistance=()=>Math.cos(360/this.environmentCircleSegmentsCount/2*(Math.PI/180))*this.floorplanEnvironmentRadius,this.centerFirstPersonControlsCamera=()=>{const e=J(this.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor().wallData);if(e){const t=Q(e,this.scaleFactor);this.firstPersonControlsCamera.position.set(t.x,this.floorplanFloorsPanelSelection3DRef.current.calculateFirstPersonControlsCameraPositionY(),t.z),this.firstPersonControlsCamera.lookAt(this.firstPersonControlsCamera.position.x-1,this.firstPersonControlsCamera.position.y,this.firstPersonControlsCamera.position.z)}},this.drawFloorplanFreeLights=e=>{this.currentViewLights=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorFreeLights(e,this.filterFreeLightsObjData(this.floorplanFloors[t].objData),this.floorplanFloors[t].floorNumber,this.currentViewLights)},this.drawFloorFreeLights=(e,t,i,o)=>{for(let s=0;s<t.length;s++){const n=this.createFloorplanItem(e,this.lightObjects3D,t[s].type,t[s],i,!1);o.push(n)}},this.drawFloorplanFans=e=>{this.currentViewFans=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorFans(e,this.floorplanFloors[t].objData.filter((e=>this.props.mainComponentThis.isFanObject(e.type))),this.floorplanFloors[t].floorNumber,this.currentViewFans)},this.drawFloorFans=(e,t,i,o)=>{for(let s=0;s<t.length;s++){const n=this.createFloorplanItem(e,this.fanObjects3D,t[s].type,t[s],i,!1);o.push(n)}},this.drawFloorplanPresences=e=>{this.currentViewPresences=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorPresences(e,this.floorplanFloors[t].objData.filter((e=>this.props.mainComponentThis.isPresenceObject(e.type))),this.floorplanFloors[t].floorNumber,this.currentViewPresences)},this.drawFloorPresences=(e,t,i,o)=>{for(let s=0;s<t.length;s++){const n=this.createFloorplanItem(e,this.presenceObjects3D,t[s].type,t[s],i,!1);o.push(n)}},this.drawFloorFreeFurniture=(e,t,i,o)=>{for(let s=0;s<t.length;s++){const n=this.createFloorplanItem(e,this.furnitureObjects3D,t[s].type,t[s],i,!1);o.push(n)}},this.loadFloorplanItemObject3D=(e,t,i,o)=>{let s=this.loadingCallbacksStatuses.length;this.loadingCallbacksStatuses.push(!1);let n=t.length;t.push(!1);let a=new In.v((e=>{const t=new Ne.lLk;return t.itemError=t=>{const i=t.split("/"),o=i[i.length-1];Ee.log("Item error",o,e[o]),e[o]&&e[o].forEach((e=>{e.materialObject[e.materialTexturePropertyName]=null,e.materialObject.needsUpdate=!0}))},t})(this.materialToTextureMappings)),r=new _n.L;const l=this.props.mainComponentThis.getObjectFolderName(e.floorplanItemType),h=this.props.mainComponentThis.folderNameToModelsMapping[l].details[e.floorplanItemType].objId?"https://app.klet3d.com/api/glamos/klet3d/objects-download2/".concat(this.props.mainComponentThis.folderNameToModelsMapping[l].details[e.floorplanItemType].objId):"https://app.klet3d.com/models3D/objMtl/models/".concat(l,"/").concat(e.floorplanItemType);a.load("".concat(h,"/").concat(e.floorplanItemType,".mtl"),(l=>{this.loadingCallbacksStatuses[s]=!0,t[n]=!0,l.preload(),((e,t)=>{for(let i in e.materialsInfo){const o=e.materialsInfo[i],s=e.materials[i];let n;for(let e in s)if(s[e]&&s[e].isTexture){n=e;break}for(let e in o)if("name"!==e){const i=o[e];/^[a-zA-Z0-9_-]+\.(jpg|jpeg|png|bmp|tga)$/i.test(i)&&(t[i]?t[i].push({materialObject:s,materialTexturePropertyName:n}):t[i]=[{materialObject:s,materialTexturePropertyName:n}])}}})(l,this.materialToTextureMappings),r.setMaterials(l),s=this.loadingCallbacksStatuses.length,this.loadingCallbacksStatuses.push(!1),n=t.length,t.push(!1),r.load("".concat(h,"/").concat(e.floorplanItemType,".obj"),(l=>{this.loadingCallbacksStatuses[s]=!0,t[n]=!0,this.setFloorplanItemShadow(l,this.props.mainComponentThis.isLightObject(e.floorplanItemType));const h=(new Ne.ZzF).setFromObject(l),c=new Ne.Pa4;h.getSize(c),e.object=l,e.sizeVector=c,a=null,r=null,Se(t)&&o(),i&&this.isInitialLoadingFinished()}))}))},this.createTextureMaterial=(e,t,i,o)=>{const s=e.clone();if(i&&i.scaleValue){let e,t;if(o){i.width/i.height>1?(t=o,e=o*(i.width/i.height)):(t=o*(i.height/i.width),e=o)}else e=i.width/i.scaleValue,t=i.height/i.scaleValue;e>1&&(s.wrapS=Ne.rpg),t>1&&(s.wrapT=Ne.rpg),s.repeat.set(e,t),s.offset.set(0,0)}return new Ne.xoR({color:16777215,side:t,map:s})},this.loadTexture=(e,t,i,o)=>{let s=this.loadingCallbacksStatuses.length;this.loadingCallbacksStatuses.push(!1);let n=t.length;t.push(!1),this.textureLoader.load(i(e),(i=>{this.loadingCallbacksStatuses[s]=!0,t[n]=!0,e.textureData=i,Se(t)&&o(),this.isInitialLoadingFinished()}),null,(e=>ir.error("Texture loading error",e)))},this.redrawFloorplanFloorItems=e=>{let t=[{scene:this.floorplan3DViewScene,walls3DArray:this.floorplanViewWalls3D,floorFreeFurniture3DArray:"floorplanViewFurniture",floorFreeLights3DArray:"floorplanViewLights",floorFans3DArray:"floorplanViewFans",floorPresences3DArray:"floorplanViewPresences"}];this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene&&t.push({scene:this.floorplan3DOnMapScene,walls3DArray:this.currentWalls3D,floorFreeFurniture3DArray:"currentFurniture",floorFreeLights3DArray:"currentViewLights",floorFans3DArray:"currentViewFans",floorPresences3DArray:"currentViewPresences"}),t.forEach((t=>{const i=t.scene.getObjectsByProperty("isFloorplanItem",!0).filter((t=>t.itemObject.floorNumber===e.floorNumber));for(let e=0;e<i.length;e++)this.removeFloorplanItem(i[e].itemObject);new Array(t.floorFreeFurniture3DArray,t.floorFreeLights3DArray,t.floorFans3DArray,t.floorPresences3DArray).forEach((t=>this[t]=this[t].filter((t=>t.floorNumber!==e.floorNumber))));const o=t.walls3DArray.filter((t=>t.floorNumber===e.floorNumber));for(let s=0;s<o.length;s++)o[s].wall2DObjects=this.props.mainComponentThis.editor.objFromWall(o[s].wall2D,e.objData),o[s].drawWallObjects();this.drawFloorFreeFurniture(t.scene,this.filterFreeFurnitureObjData(e.objData),e.floorNumber,this[t.floorFreeFurniture3DArray]),this.drawFloorFreeLights(t.scene,this.filterFreeLightsObjData(e.objData),e.floorNumber,this[t.floorFreeLights3DArray]),this.drawFloorFans(t.scene,e.objData.filter((e=>this.props.mainComponentThis.isFanObject(e.type))),e.floorNumber,this[t.floorFans3DArray]),this.drawFloorPresences(t.scene,e.objData.filter((e=>this.props.mainComponentThis.isPresenceObject(e.type))),e.floorNumber,this[t.floorPresences3DArray])}))},this.drawFloorplan=e=>{for(let h=0;h<this.floorplanFloors.length;h++){for(let e=0;e<this.floorplanFloors[h].wallData.length;e++){[this.floorplanFloors[h].wallData[e].interiorPlaneMaterial,this.floorplanFloors[h].wallData[e].exteriorPlaneMaterial].forEach((e=>{"Glass"!==e&&"Unknown"!==e&&z.isHexColor(e)&&!this.floorplanWallMaterials.find((t=>t.name===e))&&this.floorplanWallMaterials.push({name:e,textureData:null})}))}for(let e=0;e<this.floorplanFloors[h].roomData.length;e++)"none"===this.floorplanFloors[h].roomData[e].floorTexture||this.roomFloorTextures.find((t=>t.name===this.floorplanFloors[h].roomData[e].floorTexture))||this.roomFloorTextures.push({name:this.floorplanFloors[h].roomData[e].floorTexture,textureData:null});[{floorItems:this.floorplanFloors[h].objData.filter((e=>!("doorWindow"!==e.class||!this.props.mainComponentThis.isDoorObject(e.type)))),itemsArrayName:"doorObjects3D"},{floorItems:this.floorplanFloors[h].objData.filter((e=>!("doorWindow"!==e.class||!this.props.mainComponentThis.isWindowObject(e.type)))),itemsArrayName:"windowObjects3D"},{floorItems:this.floorplanFloors[h].objData.filter((e=>"lights"===e.class)),itemsArrayName:"lightObjects3D"},{floorItems:this.floorplanFloors[h].objData.filter((e=>!("furniture"!==e.class||this.props.mainComponentThis.isFanObject(e.type)||this.props.mainComponentThis.isCoverObject(e.type)||this.props.mainComponentThis.isPresenceObject(e.type)))),itemsArrayName:"furnitureObjects3D"},{floorItems:this.floorplanFloors[h].objData.filter((e=>!!this.props.mainComponentThis.isFanObject(e.type))),itemsArrayName:"fanObjects3D"},{floorItems:this.floorplanFloors[h].objData.filter((e=>!!this.props.mainComponentThis.isCoverObject(e.type))),itemsArrayName:"coverObjects3D"},{floorItems:this.floorplanFloors[h].objData.filter((e=>!!this.props.mainComponentThis.isPresenceObject(e.type))),itemsArrayName:"presenceObjects3D"}].forEach((e=>{for(let t=0;t<e.floorItems.length;t++)this[e.itemsArrayName].find((i=>i.floorplanItemType===e.floorItems[t].type))||this[e.itemsArrayName].push({object2D:e.floorItems[t],floorplanItemType:e.floorItems[t].type,object:null,sizeVector:null})}))}const t=this.floorplanWallMaterials.find((e=>!e.textureData)),i=this.roomFloorTextures.find((e=>!e.textureData)),o=[...this.doorObjects3D,...this.windowObjects3D,...this.lightObjects3D,...this.furnitureObjects3D,...this.coverObjects3D].filter((e=>("onWall"===e.object2D.family||"inWall"===e.object2D.family)&&null===e.object)),s=this.lightObjects3D.filter((e=>"onWall"!==e.object2D.family&&"inWall"!==e.object2D.family&&"lightSource"!==e.floorplanItemType&&null===e.object)),n=this.furnitureObjects3D.filter((e=>"onWall"!==e.object2D.family&&"inWall"!==e.object2D.family&&null===e.object)),a=this.fanObjects3D.filter((e=>null===e.object)),r=this.presenceObjects3D.filter((e=>null===e.object)),l=!this.textFont;if(t&&this.floorplanWallMaterials.forEach((t=>this.loadTexture(t,this.loadingWallMaterialsStatuses,(()=>"https://app.klet3d.com/wallMaterials/".concat(t.name,".png")),(()=>{this.drawFloorplanFloorsWalls(e),e===this.floorplan3DViewScene&&(this.floorplanViewWalls3D=[...this.currentWalls3D]),Se(this.loadingWallObjectsStatuses)&&this.drawFloorplanFloorsWallObjects(e)})))),o.length>0&&o.forEach((t=>this.loadFloorplanItemObject3D(t,this.loadingWallObjectsStatuses,!0,(()=>{Se(this.loadingWallMaterialsStatuses)&&this.drawFloorplanFloorsWallObjects(e)})))),i?this.roomFloorTextures.forEach((t=>this.loadTexture(t,this.loadingRoomFloorTexturesStatuses,(()=>"https://app.klet3d.com/textures/".concat(t.name,".png")),(()=>this.drawFloorplanRoomFloors(e))))):this.drawFloorplanRoomFloors(e),s.length>0?s.forEach((t=>this.loadFloorplanItemObject3D(t,this.loadingFreeLightObjectsStatuses,!0,(()=>this.drawFloorplanFreeLights(e))))):this.drawFloorplanFreeLights(e),n.length>0?n.forEach((t=>this.loadFloorplanItemObject3D(t,this.loadingFreeFurnitureObjectsStatuses,!0,(()=>this.drawFloorplanFreeFurniture(e))))):this.drawFloorplanFreeFurniture(e),a.length>0?a.forEach((t=>this.loadFloorplanItemObject3D(t,this.loadingFanObjectsStatuses,!0,(()=>this.drawFloorplanFans(e))))):this.drawFloorplanFans(e),r.length>0?r.forEach((t=>this.loadFloorplanItemObject3D(t,this.loadingPresenceObjectsStatuses,!0,(()=>this.drawFloorplanPresences(e))))):this.drawFloorplanPresences(e),l){let t=this.loadingCallbacksStatuses.length;this.loadingCallbacksStatuses.push(!1),this.fontLoader.load("https://cdn.jsdelivr.net/gh/mrdoob/three.js@master/examples/fonts/droid/droid_sans_regular.typeface.json",(i=>{this.textFont=i,this.loadingCallbacksStatuses[t]=!0,this.isInitialLoadingFinished(),this.drawFloorplanSensors(e),this.drawFloorplanOthers(e),this.createFloorplanTimeMesh(e,this.calculateCurrentDate())}))}else this.drawFloorplanSensors(e),this.drawFloorplanOthers(e);t||(this.drawFloorplanFloorsWalls(e),e===this.floorplan3DViewScene&&(this.floorplanViewWalls3D=[...this.currentWalls3D])),o.length||this.drawFloorplanFloorsWallObjects(e),this.isInitialLoadingFinished()},this.drawFloorplanFloorsWalls=e=>{this.currentWalls3D=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorWalls(e,this.floorplanFloors[t].wallData,this.floorplanFloors[t].floorNumber,this.currentWalls3D)},this.drawFloorplanFreeFurniture=e=>{this.currentFurniture=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorFreeFurniture(e,this.filterFreeFurnitureObjData(this.floorplanFloors[t].objData),this.floorplanFloors[t].floorNumber,this.currentFurniture)},this.drawFloorplanFloorsWallObjects=()=>{for(let e=0;e<this.currentWalls3D.length;e++)this.currentWalls3D[e].drawWallObjects()},this.drawFloorWalls=function(e,i,o,s){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];for(let a=0;a<i.length;a++){let r=new Zn(t,e,i[a],t.props.mainComponentThis.editor.objFromWall(i[a],t.floorplanFloors.find((e=>e.floorNumber===o)).objData),o);r.wall3D?(s.push(r),n&&r.drawWallObjects()):r=null}100!==t.wallsOpacityRef.current.getWallsOpacityValue()&&t.changeWallMaterialOpacity(s,t.wallsOpacityRef.current.getWallsOpacityValue()),!t.wallsVisibilityOptionsRef.current.getShowWallSwitchState()&&t.wallsVisibilityOptionsRef.current.hideFloorplanWalls(s),t.wallsVisibilityOptionsRef.current.getFrontWallsSwitchState()&&t.wallsVisibilityOptionsRef.current.showFrontFloorplanWalls(s)},this.drawFloorplanRoomFloors=e=>{this.currentRoomFloors=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorRoomFloors(e,this.floorplanFloors[t],this.currentRoomFloors)},this.drawFloorRoomFloors=(e,t,i)=>{const o=[{name:"Room floor",translateZ:-this.props.mainComponentThis.getFloorStartElevation(t.floorNumber,!0),castShadow:!1,receiveShadow:!0,floorNumber:t.floorNumber}];for(let s=0;s<t.roomData.length;s++){let n=[];for(let e=0;e<t.roomData[s].coordsOutsideWithOrphans.length;e++)n.push(new Ne.FM8(t.roomData[s].coordsOutsideWithOrphans[e].x,t.roomData[s].coordsOutsideWithOrphans[e].y).multiplyScalar(this.scaleFactor));let a,r=new Ne.bnF(n),l=new Ne.oa8(r);for(let h=0;h<o.length;h++){if(o[h].material)a=o[h].material;else if("none"!==t.roomData[s].floorTexture){const e=Pe(n),i=t=>{const i=(t.x-e.minX)/e.width,o=(e.maxY-t.y)/e.height;return new Ne.FM8(Math.min(1,Math.max(0,i)),Math.min(1,Math.max(0,o)))};this.calculateShapeGeometryUVMappings(l,i),a=this.createTextureMaterial(this.roomFloorTextures.find((e=>e.name===t.roomData[s].floorTexture)).textureData,Ne._Li,{width:e.width,height:e.height,scaleValue:512},t.roomData[s].floorTextureRepeatCount)}else a=this.roomFloorDefaultMaterial;const c=new Ne.Kj0(l,a);c.rotation.set(Math.PI/2,0,0);const d=this.props.mainComponentThis.getFloorStartElevation(t.floorNumber,!0);c.translateZ(-d),i.push(c),c.receiveShadow=o[h].receiveShadow,c.castShadow=o[h].castShadow,c.name=o[h].name,c.floorNumber=o[h].floorNumber,"Room roof"!==o[h].name&&(c.roomID=t.roomData[s].id),this.isFloorHidden(t.floorNumber)&&(c.visible=!1),e.add(c);const p=new Ne.Kj0(new Ne.O7d(r,{depth:this.props.mainComponentThis.floorThickness*this.scaleFactor,bevelEnabled:!1}),this.roomFloorDefaultMaterial);p.rotation.set(Math.PI/2,0,0),p.translateZ(-d),c.thickMesh=p,this.isFloorHidden(t.floorNumber)&&(p.visible=!1),e.add(p)}}},this.removeFloorplanFloor=e=>{this.removeFloorplanFloorItems(this.floorplan3DViewScene,e,"floorplanViewWalls3D","floorplanViewRoomFloors","floorplanViewFurniture","floorplanViewLights","floorplanViewFans","floorplanViewPresences","floorplanViewSensors","floorplanViewOthers"),this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene?this.removeFloorplanFloorItems(this.floorplan3DOnMapScene,e,"currentWalls3D","currentRoomFloors","currentFurniture","currentViewLights","currentViewFans","currentViewPresences","currentViewSensors","currentViewOthers"):this.setCurrentFromFloorplanArrays(),this.updateControlPanelState()},this.objectConnectorBindedObjectsOnItemRemoveCheck=e=>{if(this.isFloorplanItemMeshBinded(e)){let t=this.objectConnectorsArray.find((t=>t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));t&&(t.bindedObjects=t.bindedObjects.filter((t=>t.object2D.id!==e.object2D.id)))}},this.removeFloorplanFloorItems=(e,t,i,o,s,n,a,r,l,h)=>{this[i]=this[i].filter((e=>e.floorNumber!==t||(e.removeWall(),!1)));let c=[t];t===this.getMaxFloorNumber()&&c.push(this.getMaxFloorNumber()+1),this[o]=this[o].filter((t=>!c.includes(t.floorNumber)||(e.remove(t.thickMesh),this.disposeObject(t.thickMesh),e.remove(t),this.disposeObject(t),!1))),this[s]=this[s].filter((e=>e.floorNumber!==t||(this.removeFloorplanItem(e),!1))),this[n]=this[n].filter((e=>e.floorNumber!==t||(this.removeFloorplanItem(e),!1))),this[a]=this[a].filter((e=>e.floorNumber!==t||(this.removeFloorplanItem(e),!1))),this[r]=this[r].filter((e=>e.floorNumber!==t||(this.removeFloorplanItem(e),!1)));[l,h].forEach((e=>{this[e]=this[e].filter((e=>{const i=e.mesh;return i.floorNumber!==t||(this.removeUnfixedItem(i,!0),!1)}))}))},this.setFloorplanFloorItemsVisibility=(e,t)=>{const i=["floorplanViewWalls3D"],o=["floorplanViewRoomFloors"],s=["floorplanViewFurniture","floorplanViewLights","floorplanViewFans","floorplanViewPresences"];this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene&&(i.push("currentWalls3D"),o.push("currentRoomFloors"),s.push("currentFurniture","currentViewLights","currentViewFans","currentViewPresences")),i.forEach((i=>this[i].forEach((i=>{i.floorNumber===e&&(i.setWallPlanesObjectsVisibility(t,!1),i.floorThicknessWallPart.visible=t,i.updateFrontWallVisibility())})))),o.forEach((i=>this[i].forEach((i=>{i.floorNumber===e&&(i.thickMesh.visible=t,i.visible=t)})))),s.forEach((i=>this[i].forEach((i=>{i.floorNumber===e&&(i.mesh.visible=t,i.errorGlow.visible=t)}))))},this.addFloorplanFloor=e=>{this.addFloorplanFloorItems(this.floorplan3DViewScene,e,this.floorplanViewWalls3D,this.floorplanViewRoomFloors,this.floorplanViewFurniture,this.floorplanViewLights,this.floorplanViewFans,this.floorplanViewPresences,this.floorplanViewSensors,this.floorplanViewOthers),this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene?this.addFloorplanFloorItems(this.floorplan3DOnMapScene,e,this.currentWalls3D,this.currentRoomFloors,this.currentFurniture,this.currentViewLights,this.currentViewFans,this.currentViewPresences,this.currentViewSensors,this.currentViewOthers):this.setCurrentFromFloorplanArrays(),this.updateControlPanelState()},this.addFloorplanFloorItems=(e,t,i,o,s,n,a,r,l,h)=>{this.drawFloorWalls(e,t.wallData,t.floorNumber,i,!0),this.drawFloorFreeFurniture(e,this.filterFreeFurnitureObjData(t.objData),t.floorNumber,s),this.drawFloorRoomFloors(e,t,o),this.drawFloorFreeLights(e,this.filterFreeLightsObjData(t.objData),t.floorNumber,n),this.drawFloorFans(e,t.objData.filter((e=>this.props.mainComponentThis.isFanObject(e.type))),t.floorNumber,a),this.drawFloorPresences(e,t.objData.filter((e=>this.props.mainComponentThis.isPresenceObject(e.type))),t.floorNumber,r),this.drawFloorBindedUnfixedObjects(e,t.objData.filter((e=>"sensor"===e.type)),t.floorNumber,l),this.drawFloorBindedUnfixedObjects(e,t.objData.filter((e=>"other_entity"===e.type)),t.floorNumber,h)},this.setCurrentFromFloorplanArrays=()=>{this.currentWalls3D=[...this.floorplanViewWalls3D],this.currentRoomFloors=[...this.floorplanViewRoomFloors],this.currentFurniture=[...this.floorplanViewFurniture],this.currentViewLights=[...this.floorplanViewLights],this.currentViewSensors=[...this.floorplanViewSensors],this.currentViewOthers=[...this.floorplanViewOthers],this.currentViewFans=[...this.floorplanViewFans],this.currentViewPresences=[...this.floorplanViewPresences]},this.backTo2D=()=>{this.closeActiveRightBox(),window.removeEventListener("keydown",this.handleKeyDown3D),window.addEventListener("keydown",this.props.mainComponentThis.handleKeyDown,{capture:!0}),this.props.mainComponentThis.setShow3DStatus(!1)},this.changeWallMaterialOpacity=(e,t)=>{const i=t/100,o=100!==t;this.wallTopPlaneMaterial.opacity=i,this.wallTopPlaneMaterial.transparent=o,this.wallTopPlaneMaterial.needsUpdate=!0,this.wallStartEndPlanesMaterial.opacity=i,this.wallStartEndPlanesMaterial.transparent=o,this.wallStartEndPlanesMaterial.needsUpdate=!0,e.forEach((e=>e.setExteriorInteriorPlanesOpacity(i)))},this.focusFloorplanOnMap=()=>{const e=this.props.mainComponentThis.floorplanGeneral.floorplan_bearing||0;pe(this._map,de(this.props.mainComponentThis.getFloorplanGpsLatitude(this.props.mainComponentThis.floorplanGeneral),this.props.mainComponentThis.getFloorplanGpsLongitude(this.props.mainComponentThis.floorplanGeneral),this.floorplanBoundingBoxCoordinates.width/this.props.mainComponentThis.meter,this.floorplanBoundingBoxCoordinates.height/this.props.mainComponentThis.meter,e),e,20)},this.show3DFloorplanOnMap=function(e){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t._map=e,e.setMaxZoom(22);const o=[t.props.mainComponentThis.getFloorplanGpsLongitude(t.props.mainComponentThis.floorplanGeneral),t.props.mainComponentThis.getFloorplanGpsLatitude(t.props.mainComponentThis.floorplanGeneral)],s=t.props.mainComponentThis.floorplanGeneral.floorplan_bearing||0,n=[Math.PI/2,0,0],a=Sn().MercatorCoordinate.fromLngLat(o,0),r={translateX:a.x,translateY:a.y,translateZ:a.z,rotateX:n[0],rotateY:n[1],rotateZ:n[2],scale:a.meterInMercatorCoordinateUnits()/(t.scaleFactor*t.props.mainComponentThis.meter)},l=t,h={id:"floorplan-3d-model",type:"custom",renderingMode:"3d",onAdd:function(e,t){this.showFloorplan3DOnMapCamera=new Ne.cPb(45,l.canvasRef.current.offsetWidth/l.canvasRef.current.offsetHeight,1,5e4),l.floorplan3DOnMapCamera=this.showFloorplan3DOnMapCamera,l.floorplan3DOnMapCameraPosition=this.showFloorplan3DOnMapCamera.position.clone(),this.showFloorplan3DOnMapScene=new Ne.xsS,l.floorplan3DOnMapScene=this.showFloorplan3DOnMapScene,this.map=e,this.showFloorplan3DOnMapRenderer=new Ne.CP7({canvas:e.getCanvas(),context:t,antialias:!0,preserveDrawingBuffer:!0}),l.floorplan3DOnMapRenderer=this.showFloorplan3DOnMapRenderer,this.showFloorplan3DOnMapRenderer.setClearColor(16777215,1),this.showFloorplan3DOnMapRenderer.setPixelRatio(window.devicePixelRatio),this.showFloorplan3DOnMapRenderer.setSize(l.canvasRef.current.offsetWidth,l.canvasRef.current.offsetHeight),this.showFloorplan3DOnMapRenderer.autoClear=!1,this.showFloorplan3DOnMapRenderer.shadowMap.enabled=!0,this.showFloorplan3DOnMapRenderer.shadowMap.type=Ne.ntZ,l.floorplanOnMapHUDObject=new Pa(this.showFloorplan3DOnMapScene),l.floorplanItemCurrentHUDObject=l.floorplanOnMapHUDObject,l.createAmbientLight(this.showFloorplan3DOnMapScene),l.drawFloorplan(this.showFloorplan3DOnMapScene),l.floorplanOnMapUserInteractionController=new ka(this.showFloorplan3DOnMapScene,this.map.getCanvas(),l),l.userInteractionCurrentController=l.floorplanOnMapUserInteractionController;const o=new Ne.Pa4(l.floorplanBoundingBoxCoordinates.minX,0,l.floorplanBoundingBoxCoordinates.minY).multiplyScalar(l.scaleFactor);this.showFloorplan3DOnMapScene.translateX(-o.x),this.showFloorplan3DOnMapScene.translateZ(-o.z),l.rotateAroundPoint(this.showFloorplan3DOnMapScene,new Ne.Pa4(0,0,0),new Ne.Pa4(0,1,0),-s*(Math.PI/180)),document.dispatchEvent(new CustomEvent("sceneTransformed")),l.initializeSunLightPositionIntervalCalculation(!0,l.floorplan3DOnMapScene,l.sunLightPositionFloorplan3DOnMapCameraHelpers),i&&l.focusFloorplanOnMap()},render:function(e,t){if(!l.mounted)return;const i=(new Ne.yGw).makeRotationAxis(new Ne.Pa4(1,0,0),r.rotateX),o=(new Ne.yGw).makeRotationAxis(new Ne.Pa4(0,1,0),r.rotateY),s=(new Ne.yGw).makeRotationAxis(new Ne.Pa4(0,0,1),r.rotateZ),n=(new Ne.yGw).fromArray(t),a=(new Ne.yGw).makeTranslation(r.translateX,r.translateY,r.translateZ).scale(new Ne.Pa4(r.scale,-r.scale,r.scale)).multiply(i).multiply(o).multiply(s);this.showFloorplan3DOnMapCamera.projectionMatrix=n.multiply(a);const h=(new Ne.Pa4).applyMatrix4(this.showFloorplan3DOnMapCamera.projectionMatrix.clone().invert());h.equals(l.floorplan3DOnMapCameraPosition)||(l.floorplan3DOnMapCameraPosition.copy(h),l.onCameraMoved()),this.showFloorplan3DOnMapRenderer.resetState(),this.showFloorplan3DOnMapRenderer.render(this.showFloorplan3DOnMapScene,this.showFloorplan3DOnMapCamera),l.changedLightsShadowMaps.length>0&&l.isLightsShadowMapChangeFinished(!0),this.map.triggerRepaint()}};e.getStyle().layers.find((e=>"waterway-label"===e.id))?e.addLayer(h,"waterway-label"):e.addLayer(h)},this.onShowOnMapLayer3DClick=()=>{if(this.userInteractionCurrentController.removeItemBinder(),this.userInteractionCurrentController.setSelectedObject(null),this.showMapLayer3DInputRef.current.getCheckedStatus()){this.currentControls.enabled=!0,this.cameraControlsRef.current.setIsMapActiveState(!1),this.glamosLogoImgRef.current.setAttribute("src",Fa),this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DOnMapInterval,!0),this.disposeScene(this.floorplan3DOnMapScene,this.floorplan3DOnMapRenderer),this.shadowCastingLightsActive=this.shadowCastingLightsActive.filter((e=>!e.isMapScene)),this.shadowCastingLightsWaitingList=this.shadowCastingLightsWaitingList.filter((e=>!e.isMapScene));const t=this.maxShadowCastingLightsCount-this.shadowCastingLightsActive.length;if(t>0){var e=[];for(let i=this.shadowCastingLightsWaitingList.length-1;i>=0&&i>this.shadowCastingLightsWaitingList.length-1-t;i--)e.push(i);e.forEach((e=>this.turnWaitingLightOn(e)))}this.initializeSunLightPositionIntervalCalculation(!1,this.floorplan3DViewScene,this.sunLightPositionFloorplan3DViewCameraHelpers),this.mapLayer3DContainerRef.current.classList.remove("active"),this.showMapLayer3DInputRef.current.setCheckedStatus(!1,this.onCameraMoved),this.setCurrentFromFloorplanArrays(),this.userInteractionCurrentController=this.floorplanViewUserInteractionController,this.floorplanItemCurrentHUDObject=this.floorplanViewHUDObject,s.unmountComponentAtNode(this.mapLayer3DContainerRef.current)}else C.get.call(this,"/klet3d/entity/".concat(this.props.mainComponentThis.getFloorplanID(),"/").concat(this.props.mainComponentThis.props.licenseKey),(e=>{e&&e.length>0?F(this.props.mainComponentThis.getFloorplanGpsLatitude(e[0].plan_general))&&F(this.props.mainComponentThis.getFloorplanGpsLongitude(e[0].plan_general))?(this.mapLayer3DContainerRef.current.classList.remove("active"),this.showMapLayer3DInputRef.current.setCheckedStatus(!1),this.props.mainComponentThis.onFloorplanGpsCoordsClick()):(this.currentControls.enabled=!1,this.cameraControlsRef.current.setIsMapActiveState(!0),this.glamosLogoImgRef.current.setAttribute("src",a),this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DViewInterval),this.mapLayer3DContainerRef.current.classList.add("active"),this.props.mainComponentThis.floorplanGeneral=e[0].plan_general,this.shadowCastingLightsActive=this.shadowCastingLightsActive.filter((e=>(e.isMapScene||(this.setLightStateParameters(e.lightMeshObject,!1,!1),this.addShadowCastLightToList(e,this.shadowCastingLightsWaitingList)),!1))),this.showMapLayer3DInputRef.current.setCheckedStatus(!0,(()=>{s.render((0,l.jsx)(_a,{is3D:!0,center:[this.props.mainComponentThis.getFloorplanGpsLongitude(e[0].plan_general),this.props.mainComponentThis.getFloorplanGpsLatitude(e[0].plan_general)],floorplanGpsCoords:[this.props.mainComponentThis.getFloorplanGpsLongitude(e[0].plan_general),this.props.mainComponentThis.getFloorplanGpsLatitude(e[0].plan_general)],onMapContextLoadedCallback:this.show3DFloorplanOnMap,preserveDrawingBuffer:!0,mainComponentThis:this.props.mainComponentThis}),this.mapLayer3DContainerRef.current)}))):(this.mapLayer3DContainerRef.current.classList.remove("active"),this.showMapLayer3DInputRef.current.setCheckedStatus(!1),this.boxInfo.current.innerHTML="There is no floorplan with specified id")}));ir.log("Active",this.shadowCastingLightsActive),ir.log("Waiting",this.shadowCastingLightsWaitingList)},this.highlightBindedObjects=()=>{let e=[this.floorplan3DViewScene];this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene&&e.push(this.floorplan3DOnMapScene),this.bindedObjectsHighlightInputRef.current.getCheckedStatus()?this.objectConnectorsArray.forEach((t=>{e.forEach((e=>{e.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]).forEach((e=>e.changeStateMethod&&e.changeStateMethod(e,this.getObjectConnectorParamsData(e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]))))}))})):this.objectConnectorsArray.forEach((t=>{e.forEach((e=>{e.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]).forEach((e=>e.itemObject.resetHighlightColor&&e.itemObject.resetHighlightColor()))}))}))},this.getActiveScenes=()=>{let e=[this.floorplan3DViewScene];return this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene&&e.push(this.floorplan3DOnMapScene),e},this.filterFurnitureObjData=e=>e.filter((e=>"furniture"!==e.class||this.props.mainComponentThis.furnitureDimensions[e.type])),this.filterFreeFurnitureObjData=e=>e.filter((e=>"furniture"===e.class&&!this.props.mainComponentThis.isFanObject(e.type)&&!this.props.mainComponentThis.isCoverObject(e.type)&&!this.props.mainComponentThis.isPresenceObject(e.type)&&"onWall"!==e.family&&"inWall"!==e.family)),this.filterFreeLightsObjData=e=>e.filter((e=>"lights"===e.class&&"onWall"!==e.family&&"inWall"!==e.family)),this.removeNonWallFloorplanItemFrom3DArray=function(e){const i=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?["currentFurniture","currentViewLights","currentViewFans","currentViewPresences"]:["floorplanViewFurniture","floorplanViewLights","floorplanViewFans","floorplanViewPresences"];let o;for(let s=0;s<i.length;s++)if(o=t[i[s]].findIndex((t=>t.object2D.id===e.id)),-1!==o){t[i[s]].splice(o,1);break}},this.calculateRoomCoordsOutsideWithOrphans=e=>{const t=[e.coordsInsideWithOrphans.map((e=>({X:e.x,Y:e.y})))],i=new(jn().Paths),o=new(jn().ClipperOffset);o.AddPaths(t,jn().JoinType.jtMiter,jn().EndType.etClosedPolygon),o.Execute(i,1);let s=i[0];return s?(s=s.map((e=>({x:e.X,y:e.Y}))),re(s[0],s[s.length-1])||s.push(s[0])):s=e.coordsInsideWithOrphans,{...e,coordsOutsideWithOrphans:s}},this.onDataLoadedCallback=()=>{const e=this.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor();this.floorplanFloors=this.props.mainComponentThis.floorplanFloorsData.map((t=>t.floorNumber===e.floorNumber?{...t,floorHeight:this.props.mainComponentThis.floorHeight,objData:this.filterFurnitureObjData(this.props.mainComponentThis.OBJDATA),wallData:this.props.mainComponentThis.WALLS,roomData:this.props.mainComponentThis.ROOM.map((e=>this.calculateRoomCoordsOutsideWithOrphans(e))),floorNumber:this.props.mainComponentThis.floorNumber,floorNote:this.props.mainComponentThis.floorNote}:{...t,roomData:t.roomData.map((e=>this.calculateRoomCoordsOutsideWithOrphans(e))),objData:this.filterFurnitureObjData(t.objData).map((e=>{const t=this.props.mainComponentThis.createObj2DClassInstanceFromObj(e);return t.update(this.props.mainComponentThis),t}))})),this.floorplan3DViewScene=new Ne.xsS,this.floorplan3DViewRenderer=new Ne.CP7({antialias:!0,canvas:this.canvasRef.current,preserveDrawingBuffer:!0}),this.floorplan3DViewRenderer.setClearColor(16777215,1),this.floorplan3DViewRenderer.setPixelRatio(window.devicePixelRatio),this.floorplan3DViewRenderer.setSize(this.canvasRef.current.offsetWidth,this.canvasRef.current.offsetHeight),this.floorplan3DViewRenderer.autoClear=!1,this.floorplan3DViewRenderer.shadowMap.enabled=!0,this.floorplan3DViewRenderer.shadowMap.type=Ne.ntZ,this.floorplanBoundingBoxCoordinates=this.props.mainComponentThis.getFloorplanBBoxCoords();const t=Q(this.floorplanBoundingBoxCoordinates,this.scaleFactor);this.floorplanCenterVector=new Ne.Pa4(t.x,this.cameraYOffset,t.y),this.orbitControlsCamera=new Ne.cPb(45,this.floorplan3DViewRenderer.domElement.offsetWidth/this.floorplan3DViewRenderer.domElement.offsetHeight,1,5e4),this.firstPersonControlsCamera=this.orbitControlsCamera.clone(),this.calculateFloorplanEnvironmentRadius(),this.calculateYZDistanceFromFloorplanCenter(),this.centerOrbitControlsCamera(),this.centerFirstPersonControlsCamera(),this.orbitControls=new Ln(this.orbitControlsCamera,this.floorplan3DViewRenderer.domElement,new Ne.Pa4(this.floorplanCenterVector.x,0,this.floorplanCenterVector.z)),this.orbitControls.target=this.floorplanCenterVector.clone(),this.orbitControls.update(),this.firstPersonControls=new Kn(this.firstPersonControlsCamera,this.floorplan3DViewRenderer.domElement,this.floorplan3DViewScene,new Ne.Pa4(this.floorplanCenterVector.x,0,this.floorplanCenterVector.z),this),this.firstPersonControls.enabled=!1,this.floorplan3DViewCamera=this.orbitControlsCamera,this.currentControls=this.orbitControls,this.floorplanViewHUDObject=new Pa(this.floorplan3DViewScene),this.floorplanItemCurrentHUDObject=this.floorplanViewHUDObject,this.HAConfigObject=this.props.mainComponentThis.homeAssistantConfigObject,this.floorplanStartDate=W(this.HAConfigObject.time_zone),this.floorplanStartDateSetTimestamp=(new Date).getTime(),this.createAmbientLight(this.floorplan3DViewScene),this.createFloorplanEnvironment(this.floorplan3DViewScene),this.initializeSunLightPositionIntervalCalculation(!1,this.floorplan3DViewScene,this.sunLightPositionFloorplan3DViewCameraHelpers),Ne.Tme.prototype.deepClone=function(e){return(new this.constructor).deepCopy(this,e)},Ne.Tme.prototype.deepCopy=function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),e.material)if(e.material.isMaterial)this.material=e.material.clone();else{this.material=[];for(const t of e.material)this.material.push(t.clone())}if(e.geometry&&(this.geometry=e.geometry.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var i=0;i<e.children.length;i++){var o=e.children[i];this.add(o.deepClone())}return this},this.drawFloorplan(this.floorplan3DViewScene),this.floorplanViewUserInteractionController=new ka(this.floorplan3DViewScene,this.canvasRef.current,this),this.userInteractionCurrentController=this.floorplanViewUserInteractionController,this.floorplan3DViewAnimate(),window.addEventListener("keydown",this.handleKeyDown3D),this.floorplan3DViewRenderer.domElement.addEventListener("cameraMoved",this.onCameraMoved)},this.state={isPanelShowed:!1},this.canvasRef=o.createRef(),this.panel=o.createRef(),this.panelControl=o.createRef(),this.sceneControlToolsContainer=o.createRef(),this.controlPanelRef=o.createRef(),this.panelInfoExplanationBox=o.createRef(),this.heightFactorRef=o.createRef(),this.wallsOpacityRef=o.createRef(),this.mapLayer3DContainerRef=o.createRef(),this.showMapLayer3DInputRef=o.createRef(),this.bindedObjectsHighlightInputRef=o.createRef(),this.clickableObjectsHighlightInputRef=o.createRef(),this.wallsVisibilityOptionsRef=o.createRef(),this.cameraControlsRef=o.createRef(),this.floorplanFloorsPanelSelection3DRef=o.createRef(),this.floorplanFloorsSceneControlsSelectionRef=o.createRef(),this.glamosLogoImgRef=o.createRef(),this.alertRef=o.createRef(),this.maxShadowCastingLightsAlert=o.createRef(),this.timeIntervalBetweenFrames=50,this.floorplan3DViewRenderer=null,this.floorplan3DViewCamera=null,this.orbitControlsCamera=null,this.firstPersonControlsCamera=null,this.YZDistanceFromFloorplanCenter={},this.floorplan3DViewScene=null,this.currentControls=null,this.orbitControls=null,this.firstPersonControls=null,this.exportPngResolutionScale=4,this.scaleFactor=e.mainComponentThis.floorplan3DScaleFactor,this.doorHeight=180,this.windowHeight=100,this.isPointOnWallDecimalPrecision=e.mainComponentThis.isPointOnWallDecimalPrecision,this.panelWidth=220,this.cameraYOffset=150,this.floorplanBoundingBoxCoordinates=null,this.floorplanCenterVector=null,this.wallStartEndPlanesColor=13421772,this.wallTopBottomPlanesColor=14540253,this.wallStartEndPlanesMaterial=null,this.wallBottomPlaneMaterial=null,this.wallTopPlaneMaterial=null,this.textureLoader=new Ne.dpR,this.gltfLoader=new Pn.E,this.fontLoader=new kn.J,this.materialToTextureMappings={},this.mounted=!1,this.floorplanWallMaterials=[],this.roomFloorTextures=[],this.loadedTextures=[],this.loadingWallMaterialsStatuses=[],this.loadingRoomFloorTexturesStatuses=[],this.loadingCallbacksStatuses=[],this.loadingWallObjectsStatuses=[],this.loadingFreeLightObjectsStatuses=[],this.loadingFreeFurnitureObjectsStatuses=[],this.loadingFanObjectsStatuses=[],this.loadingCoverObjectsStatuses=[],this.loadingPresenceObjectsStatuses=[],this.floorplanViewWalls3D=[],this.currentWalls3D=[],this.floorplanViewRoomFloors=[],this.currentRoomFloors=[],this.floorplanViewFurniture=[],this.currentFurniture=[],this.floorplanViewLights=[],this.currentViewLights=[],this.floorplanViewFans=[],this.currentViewFans=[],this.floorplanViewPresences=[],this.currentViewPresences=[],this.floorplanViewSensors=[],this.currentViewSensors=[],this.floorplanViewOthers=[],this.currentViewOthers=[],this.textFont=null,this.doorObjects3D=[],this.windowObjects3D=[],this.lightObjects3D=[],this.furnitureObjects3D=[],this.fanObjects3D=[],this.coverObjects3D=[],this.presenceObjects3D=[],this.floorplan3DOnMapScene=null,this.floorplan3DOnMapCameraPosition=null,this.floorplan3DOnMapCamera=null,this.floorplan3DOnMapRenderer=null,this._map=null,this.floorplanFloors=[],this.wallStartEndPlanesMaterial=new Ne.xoR({color:this.wallStartEndPlanesColor,side:Ne.ehD}),this.wallBottomPlaneMaterial=new Ne.xoR({color:this.wallTopBottomPlanesColor,side:Ne._Li}),this.wallTopPlaneMaterial=new Ne.xoR({color:this.wallTopBottomPlanesColor,side:Ne.ehD}),this.roomFloorDefaultMaterial=new Ne.xoR({side:Ne.ehD,color:15658734}),this.sensorValueDecimalPrecision=1,this.lightSourceLightSphereMaterialColor=new Ne.Ilk(10066329),this.floorplanViewUserInteractionController=null,this.floorplanOnMapUserInteractionController=null,this.userInteractionCurrentController=null,this.floorplanViewHUDObject=null,this.floorplanOnMapHUDObject=null,this.floorplanItemCurrentHUDObject=null,this.floorplanEnvironmentRadius=0,this.environmentCircleSegmentsCount=32,this.panelDrawingOptions=[{objects3DArray:this.furnitureObjects3D,object3DProperties:{type:"furniture"},currentViewArray:this.currentFurniture,floorplanViewArray:this.floorplanViewFurniture},{objects3DArray:this.doorObjects3D,object3DProperties:{type:"door"}},{objects3DArray:this.windowObjects3D,object3DProperties:{type:"window"}},{objects3DArray:this.lightObjects3D,object3DProperties:{type:"light"},currentViewArray:this.currentViewLights,floorplanViewArray:this.floorplanViewLights},{objects3DArray:this.fanObjects3D,object3DProperties:{type:"fan"},currentViewArray:this.currentViewFans,floorplanViewArray:this.floorplanViewFans},{objects3DArray:this.coverObjects3D,object3DProperties:{type:"cover"}},{objects3DArray:this.presenceObjects3D,object3DProperties:{type:"presence"},currentViewArray:this.currentViewPresences,floorplanViewArray:this.floorplanViewPresences}],this.sunLightPositionFloorplan3DViewInterval=null,this.sunLightPositionFloorplan3DOnMapInterval=null,this.updateSunLightPositionIntervalDelayMs=6e4,this.sunLightPositionFloorplan3DViewCameraHelpers={auxiliaryCameraHelper:null,mainCameraHelper:null,type:"floorplan3DView"},this.sunLightPositionFloorplan3DOnMapCameraHelpers={auxiliaryCameraHelper:null,mainCameraHelper:null,type:"floorplan3DOnMap"},this.floorplanStartDate=null,this.floorplanStartDateSetTimestamp=(new Date).getTime(),this.skyMaterial=null,this.bindedObjectTextHeight=2,this.editModeValue=xo.find((e=>"Edit"===e.label)).value,this.defaultUserMode=xo.find((e=>"Control"===e.label)).value,this.selectedUserMode=this.defaultUserMode,this.shadowCastingLightsActive=[],this.shadowCastingLightsWaitingList=[],this.maxShadowCastingLightsCount=15,this.changedLightsShadowMaps=[],this.changeLightShadowMapsLoadingSet=!1,this.isInitialFloorplanDrawingFinished=!1,this.componentWillUnmountCustomCallback=null,this.objectConnectorsArray=[],this.initialize3DViewController=this.initialize3DViewController.bind(this),this.backTo2D=this.backTo2D.bind(this),this.floorplan3DViewAnimate=this.floorplan3DViewAnimate.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.createAmbientLight=this.createAmbientLight.bind(this),this.createFloorplanEnvironmentGround=this.createFloorplanEnvironmentGround.bind(this),this.createFloorplanEnvironment=this.createFloorplanEnvironment.bind(this),this.centerOrbitControlsCamera=this.centerOrbitControlsCamera.bind(this),this.calculateYZDistanceFromFloorplanCenter=this.calculateYZDistanceFromFloorplanCenter.bind(this),this.calculateFloorplanEnvironmentRadius=this.calculateFloorplanEnvironmentRadius.bind(this),this.calculateControlsMaxDistance=this.calculateControlsMaxDistance.bind(this),this.centerFirstPersonControlsCamera=this.centerFirstPersonControlsCamera.bind(this),this.loadFloorplanItemObject3D=this.loadFloorplanItemObject3D.bind(this),this.loadTexture=this.loadTexture.bind(this),this.drawFloorplan=this.drawFloorplan.bind(this),this.redrawFloorplanFloorItems=this.redrawFloorplanFloorItems.bind(this),this.updateControlPanelState=this.updateControlPanelState.bind(this),this.onInitialFloorplanDrawingFinishedCallback=this.onInitialFloorplanDrawingFinishedCallback.bind(this),this.drawFloorplanFloorsWalls=this.drawFloorplanFloorsWalls.bind(this),this.drawFloorplanFreeFurniture=this.drawFloorplanFreeFurniture.bind(this),this.drawFloorplanRoomFloors=this.drawFloorplanRoomFloors.bind(this),this.drawFloorRoomFloors=this.drawFloorRoomFloors.bind(this),this.drawFloorWalls=this.drawFloorWalls.bind(this),this.drawFloorplanFloorsWallObjects=this.drawFloorplanFloorsWallObjects.bind(this),this.drawFloorFreeFurniture=this.drawFloorFreeFurniture.bind(this),this.drawFloorplanFreeLights=this.drawFloorplanFreeLights.bind(this),this.drawFloorFreeLights=this.drawFloorFreeLights.bind(this),this.drawFloorplanFans=this.drawFloorplanFans.bind(this),this.drawFloorFans=this.drawFloorFans.bind(this),this.drawFloorplanPresences=this.drawFloorplanPresences.bind(this),this.drawFloorPresences=this.drawFloorPresences.bind(this),this.calculateShapeGeometryUVMappings=this.calculateShapeGeometryUVMappings.bind(this),this.calculateAngleBetween2DVectors=this.calculateAngleBetween2DVectors.bind(this),this.isInitialLoadingFinished=this.isInitialLoadingFinished.bind(this),this.rotateAroundPoint=this.rotateAroundPoint.bind(this),this.rotateChildAroundWorldPoint=this.rotateChildAroundWorldPoint.bind(this),this.translateObjectInWorld=this.translateObjectInWorld.bind(this),this.createMeshFromObject=this.createMeshFromObject.bind(this),this.onCameraMoved=this.onCameraMoved.bind(this),this.updateWallsVisibility=this.updateWallsVisibility.bind(this),this.setFloorplanItemShadow=this.setFloorplanItemShadow.bind(this),this.onPanelControlClick=this.onPanelControlClick.bind(this),this.onExportPngClick=this.onExportPngClick.bind(this),this.changeWallMaterialOpacity=this.changeWallMaterialOpacity.bind(this),this.focusFloorplanOnMap=this.focusFloorplanOnMap.bind(this),this.show3DFloorplanOnMap=this.show3DFloorplanOnMap.bind(this),this.onShowOnMapLayer3DClick=this.onShowOnMapLayer3DClick.bind(this),this.highlightBindedObjects=this.highlightBindedObjects.bind(this),this.removeFloorplanFloor=this.removeFloorplanFloor.bind(this),this.removeFloorplanFloorItems=this.removeFloorplanFloorItems.bind(this),this.addFloorplanFloor=this.addFloorplanFloor.bind(this),this.addFloorplanFloorItems=this.addFloorplanFloorItems.bind(this),this.setFloorplanFloorItemsVisibility=this.setFloorplanFloorItemsVisibility.bind(this),this.setCurrentFromFloorplanArrays=this.setCurrentFromFloorplanArrays.bind(this),this.hidePanel=this.hidePanel.bind(this),this.createTextMesh=this.createTextMesh.bind(this),this.createTextBackgroundMesh=this.createTextBackgroundMesh.bind(this),this.initializeSensorColorPaletteImageData=this.initializeSensorColorPaletteImageData.bind(this),this.calculateSensorRangeColoringColor=this.calculateSensorRangeColoringColor.bind(this),this.createSensorMesh=this.createSensorMesh.bind(this),this.createOtherMesh=this.createOtherMesh.bind(this),this.drawFloorplanSensors=this.drawFloorplanSensors.bind(this),this.drawFloorplanOthers=this.drawFloorplanOthers.bind(this),this.drawFloorBindedUnfixedObjects=this.drawFloorBindedUnfixedObjects.bind(this),this.addObjectConnectorObject=this.addObjectConnectorObject.bind(this),this.getObjectConnectorAdditionalParameters=this.getObjectConnectorAdditionalParameters.bind(this),this.getObjectsConnectorUnfixedBindedObjectParameters=this.getObjectsConnectorUnfixedBindedObjectParameters.bind(this),this.updateRightBoxBindingComponent=this.updateRightBoxBindingComponent.bind(this),this.getIsFixed2DObjectsValue=this.getIsFixed2DObjectsValue.bind(this),this.handleLightSwitchClick=this.handleLightSwitchClick.bind(this),this.handleDoorWindowSwitchClick=this.handleDoorWindowSwitchClick.bind(this),this.handleFanSwitchClick=this.handleFanSwitchClick.bind(this),this.handleCoverSwitchClick=this.handleCoverSwitchClick.bind(this),this.handlePresenceDetectionUpdate=this.handlePresenceDetectionUpdate.bind(this),this.initializeSunLightPositionIntervalCalculation=this.initializeSunLightPositionIntervalCalculation.bind(this),this.clearSunLightPositionInterval=this.clearSunLightPositionInterval.bind(this),this.updateSunLightPosition=this.updateSunLightPosition.bind(this),this.onSunLightPositionCoordinateSystemTransformReady=this.onSunLightPositionCoordinateSystemTransformReady.bind(this),this.drawLine=this.drawLine.bind(this),this.drawGlobalCoordinateSystem=this.drawGlobalCoordinateSystem.bind(this),this.changeCoordinateSystemBasisForPoints=this.changeCoordinateSystemBasisForPoints.bind(this),this.calculateFloorplanXZPlaneBBoxPoints=this.calculateFloorplanXZPlaneBBoxPoints.bind(this),this.calculateMaxXMaxZOffsetsFromCenterPoint=this.calculateMaxXMaxZOffsetsFromCenterPoint.bind(this),this.getMaxFloorNumber=this.getMaxFloorNumber.bind(this),this.createFloorplanTimeMesh=this.createFloorplanTimeMesh.bind(this),this.disposeObject=this.disposeObject.bind(this),this.disposeObjectMaterial=this.disposeObjectMaterial.bind(this),this.disposeScene=this.disposeScene.bind(this),this.calculateCurrentDate=this.calculateCurrentDate.bind(this),this.cloneUnfixedBindedObject3D=this.cloneUnfixedBindedObject3D.bind(this),this.createUnfixedItem=this.createUnfixedItem.bind(this),this.removeUnfixedItem=this.removeUnfixedItem.bind(this),this.createPointLight=this.createPointLight.bind(this),this.createSpotLight=this.createSpotLight.bind(this),this.createFloorplanItem=this.createFloorplanItem.bind(this),this.removeFloorplanItem=this.removeFloorplanItem.bind(this),this.objectConnectorBindedObjectsOnItemRemoveCheck=this.objectConnectorBindedObjectsOnItemRemoveCheck.bind(this),this.createTextureMaterial=this.createTextureMaterial.bind(this),this.onFloorplanItemSelect=this.onFloorplanItemSelect.bind(this),this.onFloorplanItemUnselect=this.onFloorplanItemUnselect.bind(this),this.userInteractionControlerNothingClickedReset=this.userInteractionControlerNothingClickedReset.bind(this),this.closeActiveRightBox=this.closeActiveRightBox.bind(this),this.getSelectedDrawingOption=this.getSelectedDrawingOption.bind(this),this.handleKeyDown3D=this.handleKeyDown3D.bind(this),this.processSceneVec3=this.processSceneVec3.bind(this),this.getFloorplanViewSceneItem=this.getFloorplanViewSceneItem.bind(this),this.onBirdPerspectiveViewButtonClick=this.onBirdPerspectiveViewButtonClick.bind(this),this.onDataLoadedCallback=this.onDataLoadedCallback.bind(this),this.onSwitchControlsClick=this.onSwitchControlsClick.bind(this),this.onResetCameraViewButtonClick=this.onResetCameraViewButtonClick.bind(this),this.toggleLightState=this.toggleLightState.bind(this),this.toggleFanState=this.toggleFanState.bind(this),this.toggleCoverState=this.toggleCoverState.bind(this),this.turnWaitingLightOn=this.turnWaitingLightOn.bind(this),this.setLightStateParameters=this.setLightStateParameters.bind(this),this.addShadowCastLightToList=this.addShadowCastLightToList.bind(this),this.isLightsShadowMapChangeFinished=this.isLightsShadowMapChangeFinished.bind(this),this.changeSelectedObjectMaterial=this.changeSelectedObjectMaterial.bind(this),this.calculateRoomCoordsOutsideWithOrphans=this.calculateRoomCoordsOutsideWithOrphans.bind(this),this.getActiveScenes=this.getActiveScenes.bind(this),this.filterFurnitureObjData=this.filterFurnitureObjData.bind(this),this.filterFreeFurnitureObjData=this.filterFreeFurnitureObjData.bind(this),this.filterFreeLightsObjData=this.filterFreeLightsObjData.bind(this),this.removeNonWallFloorplanItemFrom3DArray=this.removeNonWallFloorplanItemFrom3DArray.bind(this),this.isFloorHidden=this.isFloorHidden.bind(this)}componentDidMount(){this.mounted=!0,this.initialize3DViewController()}componentWillUnmount(){this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DViewInterval),this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DOnMapInterval,!0),this.disposeScene(this.floorplan3DViewScene,this.floorplan3DViewRenderer),this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene&&this.disposeScene(this.floorplan3DOnMapScene,this.floorplan3DOnMapRenderer),this.orbitControls&&this.orbitControls.dispose(),this.firstPersonControls&&this.firstPersonControls.dispose(),this.componentWillUnmountCustomCallback&&this.componentWillUnmountCustomCallback(),this.props.mainComponentThis.addOnDrawingControlerInstance&&(this.props.mainComponentThis.addOnDrawingControlerInstance.view3DController=null),this.mounted=!1}render(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{className:"glamos-bottom-left-logo",style:{right:10,left:"auto"},children:(0,l.jsx)("img",{ref:this.glamosLogoImgRef,alt:"Glamos logo",src:Fa})}),(0,l.jsx)("canvas",{className:"full-height",ref:this.canvasRef}),(0,l.jsx)("div",{ref:this.mapLayer3DContainerRef,className:"map-layer-container floorplan3d"}),(0,l.jsxs)(Et.Z,{theme:Yt,children:[(0,l.jsx)("div",{ref:this.panelInfoExplanationBox,className:"panel-info-explanation-box",style:{width:"auto",maxWidth:200}}),(0,l.jsxs)("div",{ref:this.sceneControlToolsContainer,className:"scene-control-tools-container panel-transition",children:[(0,l.jsx)(Ga,{ref:this.cameraControlsRef,floorplan3DThis:this}),(0,l.jsx)(Ka,{ref:this.bindedObjectsHighlightInputRef,onChangeCallback:this.highlightBindedObjects}),(0,l.jsx)(Ja,{ref:this.clickableObjectsHighlightInputRef,floorplan3DThis:this,mainComponentThis:this.props.mainComponentThis})]}),(0,l.jsx)(tr,{ref:this.floorplanFloorsSceneControlsSelectionRef,floorplan3DThis:this}),(0,l.jsx)(ri,{ref:this.maxShadowCastingLightsAlert}),(0,l.jsx)(ri,{ref:this.alertRef,delay:5e3}),(0,l.jsxs)(As,{panelRef:this.panel,panelWidth:this.panelWidth,children:[(0,l.jsx)("li",{className:"back-to-2d-container panel-action-button",children:(0,l.jsx)(Ge,{type:"blue",onClick:this.backTo2D,children:"Back to 2D"})}),(0,l.jsx)($a,{ref:this.floorplanFloorsPanelSelection3DRef,floorplan3DThis:this}),(0,l.jsx)("br",{}),(0,l.jsx)(Ma,{floorplan3DThis:this}),(0,l.jsx)("br",{}),(0,l.jsx)(Qn,{ref:this.wallsVisibilityOptionsRef,panelInfoExplanationBox:this.panelInfoExplanationBox,mainComponentThis:this}),(0,l.jsx)(ta,{ref:this.wallsOpacityRef,mainComponentThis:this}),(0,l.jsx)("br",{}),(0,l.jsx)("li",{children:(0,l.jsxs)("button",{className:"btn btn-default fully panel-icon-button-container",title:"Export as PNG",onClick:this.onExportPngClick,children:[(0,l.jsx)(is.Z,{}),(0,l.jsx)("p",{children:"EXPORT PNG"})]})}),(0,l.jsx)("br",{}),(0,l.jsx)("li",{children:(0,l.jsx)(wn,{ref:this.showMapLayer3DInputRef,onChangeCallback:this.onShowOnMapLayer3DClick})}),(0,l.jsx)("br",{}),(0,l.jsx)(Pt,{label:"Add-on URL",value:"".concat(window.location.pathname).concat(window.location.search),containerStyle:{marginBottom:"1rem"}}),(0,l.jsx)(na,{ref:this.controlPanelRef,floorplan3DThis:this,mainComponentThis:this.props.mainComponentThis})]}),(0,l.jsx)("div",{ref:this.panelControl,className:"panel-control-container panel-transition svg-center-inside-container",title:this.state.isPanelShowed?"Hide settings":"Open settings",onClick:this.onPanelControlClick,children:this.state.isPanelShowed?(0,l.jsx)(Rs.Z,{className:"panel-transition"}):(0,l.jsx)(rs.Z,{style:{padding:2,boxSizing:"border-box"}})})]})]})}}const sr=or;var nr=i(1317);function ar(e,t,i,o){const s=this.panel.current.style.width.slice(0,-2);nr.log("Panel width "+s);let n,a=(s-this.offset.left)*t+i,r=e.minX-a,l=24*t+o,h=e.minY-l,c=this.taille_h*t+o-e.maxY,d=ae();return n=d?(this.taille_w-this.offset.left-d.offsetWidth)*t+i:(this.taille_w-this.offset.left)*t+i,{minX:r,maxX:n-e.maxX,minY:h,maxY:c}}function rr(e,t,i){return t.width_viewbox_clone=t.width_viewbox_clone-i*this.zoomXMove,t.zoomFactor_clone=t.width_viewbox_clone/this.taille_w,t.originX_viewbox_clone=t.originX_viewbox_clone+i*this.zoomXMove/2,t.originY_viewbox_clone=t.originY_viewbox_clone+i*(this.zoomXMove/2)*this.ratio_viewbox,this.getBoxDimensionsForCurrentZoom(e,t.zoomFactor_clone,t.originX_viewbox_clone,t.originY_viewbox_clone)}function lr(e,t,i,o,s){let n=!0;do{if(nr.log("Do while "+i+" "+s+" "+JSON.stringify(t)+" params "+JSON.stringify(o)),-1===s){if(this.isOverMaxZoomOut(o.width_viewbox_clone,this.zoomXMove))break;n=t[i]<0}else{if(this.isOverMaxZoomIn(o.width_viewbox_clone,this.zoomXMove))break;let a={...o};n=(t=this.boxZoomSimulationSetZoomParameters(e,a,s))[i]>0}n&&(o.zoomLevelsNeeded=o.zoomLevelsNeeded+1*s,t=this.boxZoomSimulationSetZoomParameters(e,o,s))}while(n)}function hr(e,t,i){const o=this.showWholeBoxZoomOperations(e,t,i);this.width_viewbox=o.width_viewbox,this.height_viewbox=o.height_viewbox,this.originX_viewbox=o.originX_viewbox,this.originY_viewbox=o.originY_viewbox,this.zoomFactor=o.zoomFactor,this.zoom=o.zoom}function cr(e,t,i){this.originX_viewbox=e.x-this.width_viewbox/2,this.originY_viewbox=e.y-this.height_viewbox/2;const o=this.getBoxDimensionsForCurrentZoom(t,this.zoomFactor,this.originX_viewbox,this.originY_viewbox);if(o.minX<0){const e=this.panel.current.style.width.slice(0,-2);e-this.offset.left>this.taille_w/2&&(nr.log("Upao u zastitu left panela"),this.originX_viewbox+=Math.floor(o.minX),o.minX=t.minX-((e-this.offset.left)*this.zoomFactor+this.originX_viewbox))}o.minY<0&&24>this.taille_w/2*this.ratio_viewbox&&(nr.log("Upao u zastitu gornjeg dijela"),this.originY_viewbox+=Math.floor(o.minY),o.minY=t.minY-(24*this.zoomFactor+this.originY_viewbox)),this.showWholeBoxZoom(t,o,i)}function dr(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=J(this.WALLS),i=Q(t);i&&this.centerAndShowWholeBoxOperations(i,t,e)}function pr(e,t,i){let o={width_viewbox_clone:this.width_viewbox,originX_viewbox_clone:this.originX_viewbox,originY_viewbox_clone:this.originY_viewbox,zoomFactor_clone:this.zoomFactor,zoomLevelsNeeded:0};nr.log("Box rib dimensions"),nr.log(t);let s=[],n="zoomout",a=-1;for(let d in t)nr.log(d),t[d]<0&&s.push({value:t[d],propertyName:d,isVertical:"minY"===d||"maxY"===d});if(nr.log("Negative dimension"),nr.log(JSON.stringify(s)),0===s.length){for(let e in t)s.push({value:t[e],propertyName:e,isVertical:"minY"===e||"maxY"===e});n="zoomin",a=1}let r=null,l=s.filter((e=>!e.isVertical));if(l.length>0){r=l[0];for(let e=1;e<l.length;e++)l[e].value<r.value&&(r=l[e])}let h=null,c=s.filter((e=>e.isVertical));if(c.length>0){h=c[0];for(let e=1;e<c.length;e++)c[e].value<h.value&&(h=c[e])}if(r&&!h)nr.log("Samo horizontalni"),this.boxZoomSimulation(e,t,r.propertyName,o,a),!i&&this.zoomToSpecificLevel(n,Math.abs(o.zoomLevelsNeeded));else if(!r&&h)nr.log("Samo vertikalni"),this.boxZoomSimulation(e,t,h.propertyName,o,a),!i&&this.zoomToSpecificLevel(n,Math.abs(o.zoomLevelsNeeded));else{nr.log("Oba");let s=r.propertyName,l=h.propertyName;r.value>h.value&&(s=h.propertyName,l=r.propertyName),this.boxZoomSimulation(e,t,s,o,a),(t=this.getBoxDimensionsForCurrentZoom(e,o.zoomFactor_clone,o.originX_viewbox_clone,o.originY_viewbox_clone))[l]>0||(nr.log("Zoom druge dimenzije"),"zoomin"===n&&(a=-1),this.boxZoomSimulation(e,t,l,o,a)),!i&&this.zoomToSpecificLevel(n,Math.abs(o.zoomLevelsNeeded))}return!i&&this.setSvgViewBoxes(),nr.log("Levels needed "+o.zoomLevelsNeeded),{originX_viewbox:i?this.originX_viewbox:o.originX_viewbox_clone,originY_viewbox:i?this.originY_viewbox:o.originY_viewbox_clone,width_viewbox:i?this.width_viewbox:o.width_viewbox_clone,height_viewbox:i?this.height_viewbox:o.width_viewbox_clone*this.ratio_viewbox,zoomFactor:i?this.zoomFactor:o.zoomFactor_clone,zoom:this.zoom+o.zoomLevelsNeeded}}function mr(e,t){let i,o=t;if(nr.log("Initial zoom level change "+t+"zzoom type "+e),"zoomout"===e){if(this.isOverMaxZoomOut(this.width_viewbox,t*this.zoomXMove))for(o--;this.isOverMaxZoomOut(this.width_viewbox,o*this.zoomXMove);)o--;i=o*this.zoomXMove,this.setZoomParameters("zoomout",i,!1)}else{if(this.isOverMaxZoomIn(this.width_viewbox,t*this.zoomXMove))for(o--;this.isOverMaxZoomIn(this.width_viewbox,o*this.zoomXMove);)o--;nr.log("Zoom level change "+t),i=o*this.zoomXMove,this.setZoomParameters("zoomin",i,!1)}}function ur(e,t){let i;if("zoomin"===e){if(this.isOverMaxZoomIn(this.width_viewbox,t))return!1;this.width_viewbox-=t,i=this.taille_w/this.width_viewbox,this.height_viewbox=this.width_viewbox*this.ratio_viewbox,this.originX_viewbox=this.originX_viewbox+t/2,this.originY_viewbox=this.originY_viewbox+t/2*this.ratio_viewbox}else if("zoomout"===e){if(this.isOverMaxZoomOut(this.width_viewbox,t))return!1;this.width_viewbox+=t,i=this.taille_w/this.width_viewbox,this.height_viewbox=this.width_viewbox*this.ratio_viewbox,this.originX_viewbox=this.originX_viewbox-t/2,this.originY_viewbox=this.originY_viewbox-t/2*this.ratio_viewbox}return this.setScaleValueWidth(i),this.zoomFactor=this.width_viewbox/this.taille_w,!0}function gr(e,t,i){if(this.showMapLayer2DInputRef.current.getCheckedStatus())var o=this.calcul_snap({pageX:this.offset.left,pageY:this.offset.top+this.offset.scrollY});if("zoomout"===e||"zoomin"===e){if(!this.setZoomParameters(e,t,!0))return}else"zoomreset"===e?(this.showHideLeftRightBoxes(),this.centerAndShowFloorplanAndUploadedFloorplanImage(!1)):"zoomright"===e?this.originX_viewbox+=i:"zoomleft"===e?this.originX_viewbox-=i:"zoomtop"===e?this.originY_viewbox-=i:"zoombottom"===e?this.originY_viewbox+=i:"zoomdrag"===e&&(this.originX_viewbox-=t,this.originY_viewbox-=i);this.showMapLayer2DInputRef.current.getCheckedStatus()&&("zoomreset"===e||"zoomout"===e||"zoomin"===e?this.handleMapZoomChange(o):this.handleMapDrag(o)),this.drawingAreaPopupActive&&this.drawingAreaPopupZoomTranslateControl(),"zoomreset"!==e&&this.setSvgViewBoxes()}function fr(e){if(this.boxFloorplanImage.current.childNodes.length>0){const t=(e=>{let t=e[0].minX,i=e[0].maxX,o=e[0].minY,s=e[0].maxY;for(let n=1;n<e.length;n++)e[n].maxY>s&&(s=e[n].maxY),e[n].minY<o&&(o=e[n].minY),e[n].maxX>i&&(i=e[n].maxX),e[n].minX<t&&(t=e[n].minX);return[{x:t+(i-t)/2,y:o+(s-o)/2},{minX:t,maxX:i,minY:o,maxY:s}]})([this.uploadFloorplanImageToolsRef.current.getFloorplanImageBoundingBox(),J(this.WALLS)||{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}]);this.centerAndShowWholeBoxOperations(t[0],t[1],e)}else this.centerAndShowWholeFloor(e)}function br(e,t){const i=this.taille_w-e+t>(this.maxZoomInLevel-this.defaultZoomLevel)*this.zoomXMove;if(this.showMapLayer2DInputRef.current.getCheckedStatus()&&!i){const i=ce(this._map.getCenter().lat,(e-t)/this.taille_w/this.meter);return nr.log("New map layer zoom "+i),i>22}return i}function wr(e,t){const i=e-this.taille_w+t>Math.abs(this.maxZoomOutLevel-this.defaultZoomLevel)*this.zoomXMove;if(this.showMapLayer2DInputRef.current.getCheckedStatus()&&!i){const i=ce(this._map.getCenter().lat,(e+t)/this.taille_w/this.meter);return nr.log("New map layer zoom "+i),i<0}return i}function Cr(){if(this.taille_w-(this.maxZoomInLevelDefaultValue-this.defaultZoomLevel)*this.zoomXMove<0){let e=this.maxZoomInLevelDefaultValue-1;for(;this.taille_w-(e-this.defaultZoomLevel)*this.zoomXMove<0;)e--;this.maxZoomInLevel=e}else if(this.taille_w-(this.maxZoomInLevelDefaultValue-this.defaultZoomLevel)*this.zoomXMove>0){let e=this.maxZoomInLevelDefaultValue;for(;this.taille_w-(e+1-this.defaultZoomLevel)*this.zoomXMove>0;)e++;this.maxZoomInLevel=e}else this.maxZoomInLevel=this.maxZoomInLevelDefaultValue}function xr(e){const t=this.meter*e;let i="metric"===this.measureSystemContext.userUnit?t:M(this.imperialSystemSquareFeetSize,"feet","meter")*t;this.scaleVal.current.style.width=i+"px"}function yr(e){let t=e.coordsInsideWithOrphans,i="M"+t[0].x+","+t[0].y;for(let o=1;o<t.length-1;o++)i=i+" L"+t[o].x+","+t[o].y;if(i+="Z",e.inside.length>0)for(let o=0;o<e.inside.length;o++){i=i+" M"+this.Rooms.polygons[e.inside[o]].coords[this.Rooms.polygons[e.inside[o]].coords.length-1].x+","+this.Rooms.polygons[e.inside[o]].coords[this.Rooms.polygons[e.inside[o]].coords.length-1].y;for(let t=this.Rooms.polygons[e.inside[o]].coords.length-2;t>-1;t--)i=i+" L"+this.Rooms.polygons[e.inside[o]].coords[t].x+","+this.Rooms.polygons[e.inside[o]].coords[t].y}return i}function Sr(e){let t=this.createRoomPath(e),i=this.qSVG.create(this.boxBind,"path",{id:"roomSelected",d:t,fill:"#c9c14c","fill-opacity":.5,stroke:"#c9c14c","fill-rule":"evenodd","stroke-width":3});return i.type="room",i.realRoomArea=e.realRoomArea,i.id=e.id,i}function vr(){this.selectedBinder&&(this.selectedBinder.graph?this.selectedBinder.graph.remove():this.selectedBinder.remove(),"room"===this.selectedBinder.binderType&&this.updateSelectedRoomFill(this.ROOM.find((e=>e.id===this.selectedRoomId)).floorTexture),this.selectedBinder=null,this.windowRotationAxisDirectionGraph&&(this.windowRotationAxisDirectionGraph.remove(),this.windowRotationAxisDirectionGraph=null))}function Dr(){this.binder&&(this.binder.graph?this.binder.graph.remove():this.binder.remove(),this.binder=null)}var Tr=i(1317);function jr(){this.hideSubItems(),this.razButton(),"block"===this.layerList.current.style.display?(Tr.log("Hide layer list"),X(this.layerList.current,this.othersTimeout,null,!1),this.layersListArrowRef.current.classList.remove("down"),this.foncButton("select_mode"),this.boxInfo.current.innerHTML="Select mode"):(Tr.log("Show layer list"),K(this.layerList.current,this.othersTimeout,null,"block",!1),this.layersListArrowRef.current.classList.add("down"),this.layerMode.current.classList.add("btn-success"),this.foncButton("layer_mode"),this.boxInfo.current.innerHTML="",this.modeOption=void 0),this.removeSelectedBinder()}function _r(){"room_mode"!==this.mode&&(this.cursor("pointer"),k()?this.boxInfo.current.innerHTML="Touch room which you want to configure":this.boxInfo.current.innerHTML="Configure rooms",this.removeSelectedBinder(),this.foncButton("room_mode"))}function Ir(){"select_mode"!==this.mode&&(this.boxInfo.current.innerHTML="Select mode",this.removeSelectedBinder(),this.foncButton("select_mode"))}function kr(){"none"!==this.uploadImageFloorplanShowRef.current.style.display?K(this.boxFloorplanImage.current,this.othersTimeout,(()=>{K(this.uploadImageFloorplanHideRef.current,0,null,"inline",!1),X(this.uploadImageFloorplanShowRef.current,0,null,!1),this.uploadFloorplanImageStatusContainerRef.current.title="Hide floorplan image"}),"inline",!1):(Tr.log("Sakrij floorplan image"),X(this.boxFloorplanImage.current,this.othersTimeout,(()=>{K(this.uploadImageFloorplanShowRef.current,0,null,"inline",!1),X(this.uploadImageFloorplanHideRef.current,0,null,!1),this.uploadFloorplanImageStatusContainerRef.current.title="Show floorplan image"}),!1))}function Pr(){("upload_floorplan_image_mode"!==this.mode||"upload_floorplan_image_mode"===this.mode&&!ae())&&(this.removeSelectedBinder(),this.hideSubItems(),this.translateRightBox(this.floorplanImageTools.current,-250,!0),this.foncButton("upload_floorplan_image_mode"),this.cursor("default"),this.boxInfo.current.innerHTML="Upload floorplan image")}function Fr(){"layer_mode"===this.mode&&"block"===this.layerList.current.style.display?(X(this.layerList.current,this.othersTimeout,null,!1),this.layersListArrowRef.current.classList.remove("down")):(this.hideActiveRightBox(),this.removeSelectedBinder(),"upload_floorplan_image_mode"!==this.mode&&"floorplan_image_scaling"!==this.mode&&"floorplan_image_translation"!==this.mode||(this.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group")&&this.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group").remove(),this.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group")&&this.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group").remove()))}function Or(){this.selectMode.current.classList.remove("btn-success"),this.selectMode.current.classList.add("btn-default"),this.roomMode.current.classList.remove("btn-success"),this.roomMode.current.classList.add("btn-default"),this.uploadFloorplanImageMode.current.classList.remove("btn-success"),this.uploadFloorplanImageMode.current.classList.add("btn-default"),this.layerMode.current.classList.remove("btn-success"),this.layerMode.current.classList.add("btn-default")}function Mr(e,t){if("dont_save"!==t&&this.save(!1,!1),Tr.log("Option: "+t),"layer_mode"!==e){let t;"upload_floorplan_image_mode"!==e&&this.hideSubItems(),this.razButton(),"select_mode"===e?t=this.selectMode:"room_mode"===e?t=this.roomMode:"upload_floorplan_image_mode"===e&&(t=this.uploadFloorplanImageMode),t.current.classList.remove("bnt-default"),t.current.classList.add("btn-success")}Tr.log("New mode "+e),this.mode=e,this.modeOption=t,this.lineIntersectionP&&(this.lineIntersectionP.remove(),this.lineIntersectionP=null)}var Lr=i(1317);const Rr=(e,t,i)=>{if(i){const i="GLAMOS_'Floorplan_".concat((new Date).getDate().toString().padStart(2,"0"),"_").concat(((new Date).getMonth()+1).toString().padStart(2,"0"),"_").concat((new Date).getFullYear());if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob){const t=e.msToBlob();navigator.msSaveOrOpenBlob(t,i)}else{((e,t)=>{let i=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),o=document.createElement("a");o.setAttribute("download",t),o.setAttribute("href",e),o.setAttribute("target","_blank"),o.dispatchEvent(i)})(e.toDataURL("image/png"),i)}t(!0)}else t(e.toDataURL("image/png"))};function Br(e,t,i,o,s,n,r,l,h){return new Promise(((c,d)=>{const p=l?0:60,m=h?this.getFloorplanBBoxCoords():this.boxWallCoordinates;if(i.drawImage(e,0,0),o.revokeObjectURL(s),r){let e=new Image;e.onload=()=>{i.drawImage(e,(m.width+2*p)/2-83,m.height+2*p-50,166,40),Rr(t,c,n)},e.onerror=e=>{this.boxInfo.current.innerHTML="Ooops. An error happened during exporting to png.",d(e)},e.src=a}else Rr(t,c,n)}))}function Ar(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return new Promise(((a,r)=>{let l,h;if(Lr.log(s),n)l=n.svgElement,h=this.getFloorplanBBoxCoords();else{let e=this.linRef.current.cloneNode(!0);h=this.boxWallCoordinates,this.exportPngShowGrid?e.querySelector(".boxGrid").style.opacity=1:e.querySelector(".boxGrid").remove(),this.exportPngShowMeasures?e.querySelector("#boxRib").style.display="inline":e.querySelector("#boxRib").remove(),e.querySelector("#boxScale").remove(),e.querySelector("#boxBind").remove(),e.querySelector("#boxFloorDrawingHelper").remove()}l.style.width="",l.style.height="";const c=i?0:60;l.setAttribute("viewBox",h.minX-c+" "+(h.minY-c)+" "+(h.width+2*c)+" "+(h.height+2*c)),l.setAttribute("width",h.width+2*c),l.setAttribute("height",h.height+2*c),o||(l.style.backgroundColor="#ffffff"),oe(l,l);let d=document.createElement("canvas");this.exportPngResolutionScale=4;const p=1e4;(h.width+2*c)*this.exportPngResolutionScale>p&&(this.exportPngResolutionScale=j(p/(h.width+2*c),2)),(h.height+2*c)*this.exportPngResolutionScale>p&&(this.exportPngResolutionScale=j(p/(h.height+2*c),2)),d.width=(h.width+2*c)*this.exportPngResolutionScale,d.height=(h.height+2*c)*this.exportPngResolutionScale,Lr.log("Canvas element"),Lr.log(d);let m=d.getContext("2d");m.scale(this.exportPngResolutionScale,this.exportPngResolutionScale);let u=(new XMLSerializer).serializeToString(l),g=window.URL||window.webkitURL||window,f=new Image,b=new Blob([u],{type:"image/svg+xml;charset=utf-8"}),w=g.createObjectURL(b);f.onload=()=>{a(this.exportFloorplanPngOnLoadCallback(f,d,m,g,w,e,t,i,n))},f.onerror=e=>{this.boxInfo.current.innerHTML="Ooops. An error happened during exporting to png.",r(e)},f.src=w}))}var Wr=i(1317);function Vr(){this.HISTORY=[],this.HISTORY.index=0,window.localStorage.removeItem("history")}function Nr(e,t){"set_name"===e&&(this.boxPlanName.current.innerHTML=t)}function Er(e,t){((e,t)=>{for(let i in e)null!=e[i].child&&(e[i].child=e.indexOf(e[i].child)),null!=e[i].parent&&(e[i].parent=e.indexOf(e[i].parent));for(let i=0;i<t.length;i++)t[i].up&&delete t[i].up,t[i].down&&delete t[i].down})(this.WALLS,this.OBJDATA),Wr.log("OBJ DATA"),Wr.log(this.OBJDATA);let i={floorHeight:this.floorHeight,objData:this.OBJDATA,wallData:this.WALLS,roomData:this.ROOM,floorNumber:this.floorNumber,floorNote:this.floorNote,groundColor:this.groundColor,skyColorType:this.skyColorType,skyColor:this.skyColor,clockVisibility:this.clockVisibility};const o=JSON.stringify(Fe(i));let s=[this.HISTORY[this.HISTORY.index-1],this.lastSavedObject];for(let n=0;n<s.length;n++)s[n]&&(s[n]=JSON.parse(s[n]),s[n]=Fe(s[n]),s[n]=JSON.stringify(s[n]));this.saveNeeded=!!s[1]&&o!==s[1],this.determineBoxPlanNameValue(this.saveNeeded?"save":"remove_asterisk");return o!==s[0]?(t&&(this.boxInfo.current.innerHTML=""),e&&window.localStorage.removeItem("history"),this.HISTORY.index<this.HISTORY.length&&this.HISTORY.splice(this.HISTORY.index,this.HISTORY.length-this.HISTORY.index),I(i)||(Wr.log("Resetiraj history"),this.resetHistory()),this.HISTORY.push(JSON.stringify(i)),Wr.log("History IN SAVE:"),Wr.log(this.HISTORY),window.localStorage.setItem("history",JSON.stringify(this.HISTORY)),this.HISTORY.index++,this.setWallsChildParentValues(this.WALLS),!0):(this.setWallsChildParentValues(this.WALLS),Wr.log("Ne spremaj duplicirani HISTORY"),!1)}function zr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.HISTORY.index,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=[];if(i)s=i;else{if(0===this.HISTORY.length&&!t)return!1;s=JSON.parse(window.localStorage.getItem("history")),s=JSON.parse(s[e])}Wr.log("OBJ DATA IN LOAD"),Wr.log(this.OBJDATA);for(let a in this.OBJDATA)this.OBJDATA[a].graph.remove();this.OBJDATA=[];for(let a in s.objData){let e=s.objData[a];if("text"===e.class||"homeAssistant"===e.class||"sensors"===e.class||""!==this.getObjectFolderName(e.type)){e.hinge||(e.hinge="normal");let t=this.createObj2DClassInstanceFromObj(e);this.OBJDATA.push(t),this.boxCarpentry.current.appendChild(this.OBJDATA[this.OBJDATA.length-1].graph),t.update(this),Wr.log("End object"),Wr.log(t)}else Wr.log("Obj filtered",e.type)}if(this.WALLS=s.wallData,Wr.log(this.WALLS),this.setWallsChildParentValues(this.WALLS),this.ROOM=s.roomData,this.editor.architect(this.WALLS),!o){this.wallIdCounter=this.WALLS.length;for(let e=0;e<this.ROOM.length;e++)this.ROOM[e].id=e;this.roomIdCounter=this.ROOM.length}let n=[];this.OBJDATA.forEach(((e,t)=>{if(("onWall"===e.family||"inWall"===e.family)&&0===e.limit.length){const i={x:e.x,y:e.y};let o=this.editor.rayCastingWall(i,!0);o?(e.limit=ne(o.equations.base,e.size,i),Wr.log("Set obj limit",e)):(o=this.editor.nearWall(i),o?(this.inWallonWallObjectBinderJoinToWall(o.wall,o,i,e),Wr.log("Join obj to wall",e)):e.params.bindBox?Wr.log("Keep bind box object without limits"):(Wr.log("Delete socle object without limit"),n.push(t)))}})),n.sort(((e,t)=>t-e)),n.forEach((e=>this.OBJDATA.splice(e,1))),this.editor.showScaleBox(),this.rib()}function Hr(e,t){this.resetHistory(),this.lastSavedObject=null,this.setFloorParametersValues(e),this.load(0,!1,e),this.save(!0,!1),this.lastSavedObject=this.HISTORY[this.HISTORY.length-1],this.centerAndShowWholeFloor(),this.floorplanFloorsPanelBoxRef.current.setSelectedFloorplanFloor(e,t),this.showMapLayer2DInputRef.current.getCheckedStatus()&&this._map&&this.onMapContextLoadedCallback2D(this._map),ie(this.boxFloorDrawingHelper.current),this.floorDrawingHelperOptionsRef.current.getCheckedStatus()&&this.drawUnderlyingFloorDrawingHelper(e)}function Gr(){if(this.isFloorplanNoWalls()){const e=this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor();for(let t=0;t<this.floorplanFloorsData.length;t++){if((this.floorplanFloorsData[t].floorNumber===e.floorNumber?this.OBJDATA:this.floorplanFloorsData[t].objData).length>0)return!1}return!0}return!1}function Ur(){const e=this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor();for(let t=0;t<this.floorplanFloorsData.length;t++){if((this.floorplanFloorsData[t].floorNumber===e.floorNumber?this.WALLS:this.floorplanFloorsData[t].wallData).filter((e=>!re(e.start,e.end))).length>0)return!1}return!0}var qr=i(1317);function Yr(e,t){let i,o;if(e.touches){let t=e.changedTouches;i=t[0].pageX,o=t[0].pageY}else i=e.pageX,o=e.pageY;let s,n,a=(i-this.offset.left)*this.zoomFactor+this.originX_viewbox,r=(o-this.offset.scrollY-this.offset.top)*this.zoomFactor+this.originY_viewbox;return"on"===t&&(s=Math.round(a/this.grid)*this.grid,n=Math.round(r/this.grid)*this.grid),"off"===t&&(s=a,n=r),{x:s,y:n,xMouse:a,yMouse:r}}function Kr(e,t){return{screenX:(e-this.originX_viewbox)/this.zoomFactor+this.offset.left,screenY:(t-this.originY_viewbox)/this.zoomFactor+this.offset.scrollY+this.offset.top}}function Xr(e){this.linRef.current.style.cursor=e}function Zr(){let e=ae();qr.log("Queried element"),qr.log(e),e&&(e!==this.floorplanImageTools.current?e.querySelector(".close-rightBox").click():this.uploadFloorplanImageToolsRef.current.onInsertFlorplanImageClose(null,!0))}function Jr(e,t,i){i?e.classList.add("active"):e.classList.remove("active"),this.isSmallScreen()&&this.isPanelMaximized()&&this.onPanelControlClick(),this.isSmallScreen()||(this.rightControlsBox.current.style.transform="translateX(".concat(i?t-150:-150,"px)")),e.style.transform="translateX(".concat(t,"px)")}function Qr(e,t,i,o,s){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:10,a=[];if(a.params={},a.params.bindBox=!1,a.params.move=!1,a.params.resize=!1,a.params.resizeLimit={},a.params.resizeLimit.width={min:!1,max:!1},a.params.resizeLimit.height={min:!1,max:!1},a.params.rotate=!1,"onWall"===e&&(a.params.onWallOffsetAngle=0),"socle"===t&&a.push({path:"M "+-o/2+","+-s/2+" L "+-o/2+","+s/2+" L "+o/2+","+s/2+" L "+o/2+","+-s/2+" Z",fill:"#19ab7f",stroke:"#19ab7f",strokeDashArray:""}),"lights"===t){const e=-o/2,t=.5*-s,n=o/2,r=.5*s;"onWall"===Oi[this.lightsDetails[i].itemType]?(a.push({path:"M".concat(o/2," ").concat(-s/2," L").concat(o/2," ").concat(s/2," M").concat(e," ").concat(t," L").concat(n," ").concat(r," M").concat(e," ").concat(r," L").concat(n," ").concat(t),fill:"none",stroke:"#333",strokeDashArray:""}),a.params.bindBox=!0,a.params.onWallOffsetAngle=90):(a.params.bindBox=!0,a.params.move=!0,a.push({path:"M".concat(e," ").concat(t," L").concat(n," ").concat(r," M").concat(e," ").concat(r," L").concat(n," ").concat(t),fill:"none",stroke:"#333",strokeDashArray:""})),a.params.width=o,a.params.height=s}if("furniture"===t)if(a.params.bindBox=!0,a.params.move=!0,a.params.resize=!0,a.params.rotate=!0,this.isStaircaseObject(i)){a.push({path:"M "+-o/2+","+-s/2+" L "+-o/2+","+s/2+" L "+o/2+","+s/2+" L "+o/2+","+-s/2+" Z",fill:"#fff",stroke:"#333",strokeDashArray:""});const e=s/n;for(var r=1;r<n+1;r++)a.push({path:"M "+-o/2+","+(-s/2+r*e)+" L "+o/2+","+(-s/2+r*e),fill:"none",stroke:"#333",strokeDashArray:"none"})}else!this.furnitureAsyncPatternRef.current.isPatternLoaded(i)&&this.furnitureAsyncPatternRef.current.loadPattern(i),a.push({path:"M "+-o/2+","+-s/2+" L "+-o/2+","+s/2+" L "+o/2+","+s/2+" L "+o/2+","+-s/2+" Z",fill:"url(#".concat(i,")"),strokeDashArray:""});return"homeAssistant"===t&&"other_entity"===i&&(a.params.bindBox=!0,a.params.move=!0,a.params.resize=!1,a.params.rotate=!1,a.push({path:this.qSVG.circlePath(0,0,o),fill:"#fff",stroke:"#333",strokeDashArray:""})),"sensors"===t&&"sensor"===i&&(a.params.bindBox=!0,a.params.move=!0,a.params.resize=!1,a.params.rotate=!1,a.push({path:"M "+-o/2+",0 L "+-o/4+","+-o*Math.sqrt(3)/4+" L "+o/4+","+-o*Math.sqrt(3)/4+" L "+o/2+",0 L "+o/4+","+o*Math.sqrt(3)/4+" L "+-o/4+","+o*Math.sqrt(3)/4+" Z",fill:"#fff",stroke:"#333",strokeDashArray:""})),"doorWindow"===t&&(this.isDoorObject(i)&&(a.push({path:"M "+-o/2+","+-s/2+" L "+-o/2+","+s/2+" L "+o/2+","+s/2+" L "+o/2+","+-s/2+" Z",fill:"#ccc",stroke:"none",strokeDashArray:""}),a.push({path:"M "+-o/2+","+-s/2+" L "+-o/2+","+(-o-s/2)+"  A"+o+","+o+" 0 0,1 "+o/2+","+-s/2,fill:"none",stroke:this.colorWall,strokeDashArray:""}),a.params.resize=!0,a.params.resizeLimit.width={min:this.doorWidthMinValue,max:this.doorWidthMaxValue}),this.isWindowObject(i)&&(a.push({path:"M "+-o/2+",-2 L "+-o/2+",2 L "+o/2+",2 L "+o/2+",-2 Z",fill:"#ccc",stroke:"none",strokeDashArray:""}),a.push({path:"M "+-o/2+","+-s/2+" L "+-o/2+","+s/2+" M "+o/2+","+s/2+" L "+o/2+","+-s/2,fill:"none",stroke:"#ccc",strokeDashArray:""}),a.params.resize=!0,a.params.resizeLimit.width={min:this.windowWidthMinValue,max:this.windowWidthMaxValue})),"measure"===t&&(a.params.bindBox=!0,a.push({path:"M-"+o/2+",0 l10,-10 l0,8 l"+(o-20)+",0 l0,-8 l10,10 l-10,10 l0,-8 l-"+(o-20)+",0 l0,8 Z",fill:"#729eeb",stroke:"none",strokeDashArray:""})),"boundingBox"===t&&a.push({path:"M"+(-o/2-10)+","+(-s/2-10)+" L"+(o/2+10)+","+(-s/2-10)+" L"+(o/2+10)+","+(s/2+10)+" L"+(-o/2-10)+","+(s/2+10)+" Z",fill:"none",stroke:"#aaa",strokeDashArray:""}),"text"===t&&(a.params.bindBox=!0,a.params.move=!0,a.params.rotate=!0,a.push({text:n.text,x:"0",y:"0",fill:i,stroke:i,fontSize:n.size+"px",strokeWidth:"0px"})),a}function $r(){ae()&&(this.hideActiveRightBox(),this.removeSelectedBinder())}function el(){this.isSmallScreen()?(this.hideRightBox(),this.minimizePanel(this.smallScreenMinimizedPanelSize)):this.panel.current.style.width==="".concat(this.smallScreenMinimizedPanelSize,"px")?this.minimizePanel(this.bigScreenMinimizedPanelSize):this.panel.current.style.width==="".concat(this.smallScreenMaximizedPanelSize,"px")&&this.maximizePanel(this.bigScreenMaximizedPanelSize)}function tl(){if(this.isSmallScreen())this.rightControlsBox.current.style.transform="translateX(-150px)";else{const t=ae();this.rightControlsBox.current.style.transform="translateX(".concat(t?(e=t.style.transform,-parseFloat(e.replace(/[^\d.]/g,""))-150):-150,"px)")}var e}function il(){return this.panel.current.style.width==="".concat(this.smallScreenMaximizedPanelSize,"px")||this.panel.current.style.width==="".concat(this.bigScreenMaximizedPanelSize,"px")}function ol(){return this.taille_w<this.smallScreenPixelSize}function sl(){return this.props.floorplanID}function nl(){let e=this.boxPlanName.current.innerHTML;return""===e||"Draft(not saved)"===e?null:"*"===e[e.length-1]?e.slice(0,e.length-1):e}function al(){this.linRef.current.setAttribute("viewBox",this.originX_viewbox+" "+this.originY_viewbox+" "+this.width_viewbox+" "+this.height_viewbox),this.gridSvgElementRef.current.setAttribute("viewBox",this.originX_viewbox+" "+this.originY_viewbox+" "+this.width_viewbox+" "+this.height_viewbox)}function rl(e,t,i){const{translateX:o,translateY:s}=Ie(e,i),n=this.qSVG.create("none","path",{d:"M"+t.point2.x+" "+t.point2.y+" Q "+t.controlPoint.x+" "+t.controlPoint.y+" "+t.point1.x+" "+t.point1.y,"stroke-width":2,stroke:"#f00",fill:"transparent","marker-end":"url(#window-rotation-direction-arrow-triangle)"});return{svgGroupElement:this.qSVG.create("none","g",{transform:"translate(".concat(o,", ").concat(s,") rotate(").concat(e.angle+90,",0,0) scale(").concat("up"===i?1:-1,", 1)")}),curveArrowPath:n}}function ll(e){const t=e.additionalParams.rotationDirection||"up",i=e.additionalParams.rotationAxis||"start",o=_e(i,t,e);e.additionalParams.rotationDirection=t,e.additionalParams.rotationAxis=i,e.additionalParams.curvePoints={point1:{x:o.curvePoint1X,y:o.curvePoint1Y},point2:{x:o.curvePoint2X,y:o.curvePoint2Y},controlPoint:{x:o.controlPointX,y:o.controlPointY}},e.additionalParams.controlPointOnWall={x:o.transformedControlPointOnWallCoordinates.x,y:o.transformedControlPointOnWallCoordinates.y},e.additionalParams.arrowControlPoint={x:o.transformedArrowControlPointCoordinates.x,y:o.transformedArrowControlPointCoordinates.y};const s=this.editor.rayCastingWall({x:e.x,y:e.y},!0);if(s){const t=e.angleSign;this.inWallonWallObjectBinderAngleCalculation(s,e.additionalParams.arrowControlPoint,e),e.additionalParams.arrowControlPointAngleSign=e.angleSign,e.angleSign=t}}function hl(e,t,i){let o=this.qSVG.angleDeg(e.start.x,e.start.y,e.end.x,e.end.y),s=this.qSVG.vectorXY({x:e.start.x,y:e.start.y},{x:e.end.x,y:e.end.y}),n=this.qSVG.vectorXY({x:e.end.x,y:e.end.y},t),a=this.qSVG.vectorDeter(s,n);return i.angleSign=0,1===Math.sign(a)&&(i.angleSign=1,o+=180),o}function cl(e,t,i,o){let s=ne(e.equations.base,o.size,t);return!!(this.qSVG.btwn(s[0].x,e.start.x,e.end.x)&&this.qSVG.btwn(s[0].y,e.start.y,e.end.y)&&this.qSVG.btwn(s[1].x,e.start.x,e.end.x)&&this.qSVG.btwn(s[1].y,e.start.y,e.end.y))&&(o.x=t.x,o.y=t.y,o.angle=this.inWallonWallObjectBinderAngleCalculation(e,i,o),o.limit=s,("onWall"===o.family||o.obj&&"onWall"===o.obj.family)&&(o.obj?o.angle+=o.obj.params.onWallOffsetAngle:o.angle+=o.params.onWallOffsetAngle,o.additionalParams.onWallAngle=e.angle,o.additionalParams.onWallThick=e.thick),o.update(this),!0)}function dl(e,t){let i;if(i=this.editor.nearWall(this.snap)){let o=i.wall;this.cursor("crosshair"),this.binder?e&&this.inWallonWallObjectBinderJoinToWall(o,i,this.snap,this.binder):(this.binder=t(o,i),this.binder.angle=this.inWallonWallObjectBinderAngleCalculation(o,this.snap,this.binder),("onWall"===this.binder.family||this.binder.obj&&"onWall"===this.binder.obj.family)&&(this.binder.obj?this.binder.angle+=this.binder.obj.params.onWallOffsetAngle:this.binder.angle+=this.binder.params.onWallOffsetAngle,this.binder.additionalParams.onWallAngle=o.angle,this.binder.additionalParams.onWallThick=o.thick),this.binder.update(this),this.boxBind.current.appendChild(this.binder.graph))}else this.removeBinder()}function pl(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const n=[{x:e.x-i,y:e.y-o},{x:e.x-i,y:e.y+o},{x:e.x+i,y:e.y+o},{x:e.x+i,y:e.y-o}];ke(n,e,R(s));for(let a=0;a<t.length;a++)if(this.qSVG.polygonPolygonIntersect(n,t[a].coords))return!1;return!0}function ml(e,t){let i="";i=this.isDoorObject(e.type)?"Modify door":this.isWindowObject(e.type)?"Modify window":"lights"===e.class?"Modify light":"Modify furniture",this.wallItemToolsTitle.current.innerHTML=i,this.isDoorObject(e.type)?K(this.doorHinge.current,0):X(this.doorHinge.current,0),this.hideActiveRightBox(),this.translateRightBox(this.wallItemToolsRef.current,-this.rightBoxWidth,!0),this.setWallItemToolsValue(e,t)}function ul(e,t){let i="";"text"===e.class?(K(this.freeItemTextToolsRef.current,0),i="Modify text"):(X(this.freeItemTextToolsRef.current,0),("lights"!==e.class||"free"!==e.family&&"floorFree"!==e.family)&&"furniture"!==e.class||(i="lights"!==e.class||"free"!==e.family&&"floorFree"!==e.family?this.isFanObject(e.type)?"Modify fan":this.isCoverObject(e.type)?"Modify cover":this.isPresenceObject(e.type)?"Modify presence":"Modify furniture":"Modify light")),this.freeItemTitleRef.current.innerHTML=i,this.hideActiveRightBox(),this.translateRightBox(this.freeItemToolsRef.current,-this.rightBoxWidth,!0),this.setFreeItemToolsValue(e,t)}function gl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"centimeter",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"inch";return Te(parseFloat(e),this.measureSystemContext.userUnit,"metric"===this.measureSystemContext.userUnit?t:i,"meter",!0)*this.meter}function fl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"centimeter",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"inch",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.itemDimensionsDecimalPrecision;return De(e/this.meter,this.measureSystemContext.userUnit,"meter","metric"===this.measureSystemContext.userUnit?t:i,o,!1,!1,!0)}function bl(e,t){const i=this.boxRoom.current.querySelector('[data-room-id="'.concat(this.selectedRoomId,'"]'));i&&i.setAttribute("fill","none"!==e?"url(#room-texture_".concat(this.selectedRoomId,")"):"none"),this.editor.renderRoomTextures(this.ROOM.map((i=>({...i,...i.id===this.selectedRoomId&&{...e&&{floorTexture:e},...t>=0&&{floorTextureRepeatCount:t}}}))))}function wl(e){if(!this.binder)return this.foncButton("select_mode"),!1;this.binder.id=(0,di.v4)(),this.OBJDATA.push(this.binder),this.binder.graph.remove(),this.boxCarpentry.current.appendChild(this.OBJDATA[this.OBJDATA.length-1].graph),this.binder=null,this.boxInfo.current.innerHTML=e,this.saveNeeded=!0,this.save(!1,!1)}function Cl(e,t,i){const o="groundColor"===i?this.groundColorDefaultValue:this.clockVisibilityDefaultValue;return t&&e?Object.hasOwn(t,i)?t[i]:Object.hasOwn(e[0],i)?e[0][i]:o:o}function xl(e,t){this.groundColor=this.getFloorplanGroundColorClockVisibilityValue(e,t,"groundColor"),this.clockVisibility=this.getFloorplanGroundColorClockVisibilityValue(e,t,"clockVisibility")}function yl(e,t,i){const o="skyColor"===i?this.skyColorDefaultValue:this.skyColorDefaultType;return t&&e&&Object.hasOwn(t,i)?t[i]:o}function Sl(e,t){this.skyColorType=this.getSkyColorTypeColorValue(e,t,"skyColorType"),this.skyColor=this.getSkyColorTypeColorValue(e,t,"skyColor")}function vl(e,t){let i=[],o=[];this.setFloorplanGroundColorClockVisibilityValues(e,t),this.setSkyColorTypeColorValue(e,t);for(let s=0;s<e.length;s++){for(let t=0;t<e[s].roomData.length;t++)"none"!==e[s].roomData[t].floorTexture&&!i.find((i=>i.name===e[s].roomData[t].floorTexture))&&i.push(e[s].roomData[t].floorTexture);for(let t=0;t<e[s].objData.length;t++){const i=Oi[this.getObjectItemType(e[s].objData[t].type)];i&&e[s].objData[t].family!==i&&(qr.log("Object family change",e[s].objData[t].type,e[s].objData[t].family,i),e[s].objData[t].family=i),"furniture"!==e[s].objData[t].class||this.isStaircaseObject(e[s].objData[t].type)||o.find((i=>i.name===e[s].objData[t].type))||!this.furnitureDimensions[e[s].objData[t].type]||o.push(e[s].objData[t].type)}}this.furnitureAsyncPatternRef.current.addImagePathData(this.getFurniturePatternImagePaths()),o.forEach((e=>this.furnitureAsyncPatternRef.current.loadPattern(e))),i.forEach((e=>this.roomTexturesAsyncPatternRef.current.loadPattern(e))),this.wallMaterialsAsyncPatternRef.current.onFloorplanDrawedCallback()}function Dl(){this.freeItemMaterialsComponentRef.current&&this.freeItemMaterialsComponentRef.current.reset(),this.wallItemMaterialsComponentRef.current&&this.wallItemMaterialsComponentRef.current.reset()}function Tl(e){return F(e.gps_latitude)?this.homeAssistantConfigObject?this.homeAssistantConfigObject.latitude:null:e.gps_latitude}function jl(e){return F(e.gps_longitude)?this.homeAssistantConfigObject?this.homeAssistantConfigObject.longitude:null:e.gps_longitude}function _l(e){return"doorWindow"===e.class?{open_state:"on",closed_state:"off"}:"lights"===e.class?{switched_on_state:"on",switched_off_state:"off",power_sync:!1,power:10,color_sync:!1,color:"#ffffff",variant:"point",spot_angle:45,spot_distance:this.SPOT_DISTANCE_MAX}:"sensors"===e.class?{sensor_type:"number",background:{background_coloring_type:null,background_fixed_color:"#ffffff",background_range_min_value:"",background_range_min_color:"#0000ff",background_range_max_value:"",background_range_max_color:"#ff0000",background_range_intermediate_colors:[],background_opacity:1,checked:!1},text:{text_coloring_type:"fixed",text_fixed_color:"#000000",text_range_min_value:"",text_range_min_color:"#0000ff",text_range_max_value:"",text_range_max_color:"#ff0000",text_range_intermediate_colors:[],text_opacity:1,text_font_size:20,checked:!0}}:"homeAssistant"===e.class?{color:"#000000",opacity:1,font_size:20}:"furniture"!==e.class?null:this.isFanObject(e.type)?{switched_on_state:"on",switched_off_state:"off",percentage_sync:!1,percentage:50,direction_sync:!1,direction:"forward"}:this.isCoverObject(e.type)?{closing_direction:"top",open_offset:this.convertValueToSvgUnits("metric"===this.measureSystemContext.userUnit?10:5),closed_offset:0}:this.isPresenceObject(e.type)?{detected_state:"on",undetected_state:"off",detected_opacity:100,undetected_opacity:0}:void 0}function Il(e){if("lights"===e.class)return{variant:!0};if("sensors"===e.class)return{background:{background_coloring_type:!0,background_fixed_color:!0,background_range_min_value:!0,background_range_min_color:!0,background_range_max_value:!0,background_range_max_color:!0,background_range_intermediate_colors:!0,background_opacity:!0,checked:!0},text:{text_coloring_type:!0,text_fixed_color:!0,text_range_min_value:!0,text_range_min_color:!0,text_range_max_value:!0,text_range_max_color:!0,text_range_intermediate_colors:!0,text_opacity:!0,text_font_size:!0,checked:!0}};if("homeAssistant"===e.class)return{color:!0,opacity:!0,font_size:!0};if("furniture"===e.class){if(this.isFanObject(e.type))return{percentage_sync:!0,percentage:!0,direction_sync:!0,direction:!0};if(this.isCoverObject(e.type))return{closing_direction:!0,open_offset:!0,closed_offset:!0};if(this.isPresenceObject(e.type))return{detected_opacity:!0,undetected_opacity:!0}}return{}}function kl(){if(this.bindingRightBoxComponentRef.current){const e=this.bindingRightBoxComponentRef.current.activeParameters.current;e&&e.resetValues&&e.resetValues()}}function Pl(e){return this.windowModels.includes(e)}function Fl(e){return this.doorModels.includes(e)}function Ol(e){return this.isWindowObject(e)||this.isDoorObject(e)}function Ml(e){return this.lightModels.includes(e)}function Ll(e){return this.staircaseModels.includes(e)}function Rl(e){return this.fanModels.includes(e)}function Bl(e){return this.coverModels.includes(e)}function Al(e){return this.presenceModels.includes(e)}function Wl(e){return this.furnitureModels.includes(e)}function Vl(e,t){return"sensor"===e&&"sensor"===t||("other_entity"===e&&"other_entity"===t||(!(!this.isDoorWindowObject(e)||!this.isDoorWindowObject(t))||(!(!this.isLightObject(e)||!this.isLightObject(t))||(!(!this.isFanObject(e)||!this.isFanObject(t))||(!(!this.isCoverObject(e)||!this.isCoverObject(t))||!(!this.isPresenceObject(e)||!this.isPresenceObject(t)))))))}function Nl(e){return"other_entity"===e?"homeAssistant":"sensor"===e?"sensors":this.isLightObject(e)?"lights":this.isDoorObject(e)||this.isWindowObject(e)?"doorWindow":"furniture"}function El(e){return{name:e,folder:this.getObjectFolderName(e),width:j(this.furnitureDimensions[e].width,0),height:j(this.furnitureDimensions[e].height,0),mirrorImage:Xi.includes(e),objId:this.folderNameToModelsMapping[this.getObjectFolderName(e)].details[e].objId}}function zl(){return[...this.furnitureModels,...this.fanModels,...this.coverModels,...this.presenceModels].filter((e=>this.furnitureDimensions[e])).map((e=>this.createFurniturePatternImagePathData(e)))}function Hl(e){for(const[t,i]of Object.entries(this.folderNameToModelsMapping))if(i.models.includes(e))return t;return""}function Gl(e){for(const t of Object.values(this.folderNameToModelsMapping))if(t.models.includes(e))return t.details[e].itemType;return""}function Ul(e){if(""!==this.getObjectFolderName(e.object_external_id))this.folderNameToModelsMapping[this.getObjectFolderName(e.object_external_id)].details[e.object_external_id].itemType=e.object_metadata.details.itemType;else{let t;e.object_metadata.objCategory?t=e.object_metadata.objCategory:"lights"===e.object_metadata.objClass&&(t="light");const i=Ji(e.object_metadata.details.dimensions.width3D,e.object_metadata.details.dimensions.depth3D,e.object_metadata.details.dimensions.height3D,e.object_metadata.details.author,e.object_name,e.object_metadata.details.itemType);i.objId=e.object_id,this.folderNameToModelsMapping[t].models.push(e.object_external_id),this.folderNameToModelsMapping[t].details[e.object_external_id]=i,this.folderNameToModelsMapping[t].isFurnitureCategory&&(this.furnitureModels.push(e.object_external_id),this.furnitureDetails[e.object_external_id]=i),"furniture"===e.object_metadata.objClass&&(this.furnitureDimensions[e.object_external_id]={width:j(e.object_metadata.thumbnailTopWidth,0),height:j(e.object_metadata.thumbnailTopHeight,0)})}}const ql=(e,t)=>{let i=e;for(let o=0;o<t.length&&void 0!==i;o++)i=i[t[o]];return i};function Yl(e,t,i,o,s,n){const a=void 0!==s?s:o?o.selectInput?o.value.value:o.value:void 0,r=e.objID.find((e=>e.id===t.id));let l;l=ql(this.getKlet3DBinderObjectLevelParams(t),i)&&r?r:e.params;for(let h=0;h<i.length;h++){const e=i[h];h===i.length-1?n?(Array.isArray(l[e])||(l[e]=[]),l[e].push(a)):l[e]=a:(void 0===l[e]&&(l[e]={}),l=l[e])}}function Kl(e,t,i){const o=ql(this.getKlet3DBinderParamsDefaultValues(t),i);if(e){const s=ql(e.params,i),n=e.objID.find((e=>e.id===t.id)),a=n?ql(n,i):void 0;return ql(this.getKlet3DBinderObjectLevelParams(t),i)&&n?P(a)?P(s)?o:s:a:P(s)?n&&!P(a)?a:o:s}return o}function Xl(){let e=this.floorplanFloorsData[0];for(let t=1;t<this.floorplanFloorsData.length;t++)this.floorplanFloorsData[t].floorNumber<e.floorNumber&&(e=this.floorplanFloorsData[t]);return e}function Zl(){let e=this.floorplanFloorsData[0];for(let t=1;t<this.floorplanFloorsData.length;t++)this.floorplanFloorsData[t].floorNumber>e.floorNumber&&(e=this.floorplanFloorsData[t]);return e}function Jl(e,t){let i=this.floorThickness;for(let o=0;o<e;o++){const e=this.floorplanFloorsData.find((e=>e.floorNumber===o));i+=e?e.floorHeight:this.wallHeightDefaultValue,i+=this.floorThickness}return t?i*this.floorplan3DScaleFactor:i}function Ql(e){const t=this.convertSvgToValueUnits(e,"centimeter","inch",this.wallHeightDecimalPrecision);this.floorHeightInputRef.current.setValue(t),this.floorHeightInputRef.current.setInitialValue(t),this.onFloorHeightInputChange(!1)}function $l(e){this.floorHeight=e&&e.floorHeight||this.wallHeightDefaultValue,this.setFloorHeightInputValue(this.floorHeight),this.floorNote=e.floorNote,this.floorNoteInputRef.current.setFloorNoteValue(e.floorNote),this.floorNumber=e.floorNumber,this.floorNumberInputRef.current.setFloorNumber(e.floorNumber)}function eh(e){const t=new Ao(e.family,e.class,e.type,{x:e.x,y:e.y},e.angle,e.angleSign,e.size,e.hinge,e.thick,e.value,e.additionalParams,this);return t.id=e.id,t.limit=e.limit,t}function th(){let e=[];this.floorplanFloorsData.forEach((t=>e.push(...t.wallData)));let t=J(e);return t?(t.minX=j(t.minX,0),t.minY=j(t.minY,0),t.maxX=j(t.maxX,0),t.maxY=j(t.maxY,0),t.width=t.maxX-t.minX,t.height=t.maxY-t.minY):(t={},t.minX=t.minY=t.maxX=t.maxY=t.width=t.height=0),t}function ih(e){for(let t in e)null!=e[t].child&&(e[t].child=e[e[t].child]),null!=e[t].parent&&(e[t].parent=e[e[t].parent])}function oh(e){ie(this.boxFloorDrawingHelper.current);const t=this.floorplanFloorsData.filter((t=>t.floorNumber<e.floorNumber));if(t.length>0){t.sort(((e,t)=>t.floorNumber-e.floorNumber)),this.setWallsChildParentValues(t[0].wallData),this.editor.wallsComputing(t[0].wallData,!1,this.boxFloorDrawingHelper.current),t[0].roomData.forEach((e=>this.qSVG.create(this.boxFloorDrawingHelper,"path",{class:"room-path",d:this.createRoomPath(e),"fill-rule":"evenodd","stroke-width":0})));const e=J(t[0].wallData);if(e){const t=Q(e);this.qSVG.create(this.boxFloorDrawingHelper,"text",{x:t.x,y:t.y,"font-size":"1em",stroke:"#555","text-anchor":"middle"})}}}var sh=i(1317);function nh(){sh.log("Hide all size"),ie(this.boxBind.current),this.sizeText=[],this.showAllSizeStatus=0}function ah(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];sh.log("In wall rib pozvan"),t||ie(this.boxRib.current);let i,o=[];o.push([]),o.push([]);let s,n=e.angle*(180/Math.PI),a=this.editor.objFromWall(e);o[0].push({wall:e,crossObj:!1,side:"up",coords:e.coords[0],distance:0}),o[1].push({wall:e,crossObj:!1,side:"down",coords:e.coords[1],distance:0});for(let r in a)s=a[r],s.up=[this.qSVG.nearPointOnEquation(e.equations.up,s.limit[0]),this.qSVG.nearPointOnEquation(e.equations.up,s.limit[1])],s.down=[this.qSVG.nearPointOnEquation(e.equations.down,s.limit[0]),this.qSVG.nearPointOnEquation(e.equations.down,s.limit[1])],i=Ce(e.coords[0],s.up[0])/this.meter,o[0].push({wall:s,crossObj:r,side:"up",coords:s.up[0],distance:i.toFixed(2)}),i=Ce(e.coords[0],s.up[1])/this.meter,o[0].push({wall:s,crossObj:r,side:"up",coords:s.up[1],distance:i.toFixed(2)}),i=Ce(e.coords[1],s.down[0])/this.meter,o[1].push({wall:s,crossObj:r,side:"down",coords:s.down[0],distance:i.toFixed(2)}),i=Ce(e.coords[1],s.down[1])/this.meter,o[1].push({wall:s,crossObj:r,side:"down",coords:s.down[1],distance:i.toFixed(2)});i=Ce(e.coords[0],e.coords[3])/this.meter,o[0].push({wall:s,crossObj:!1,side:"up",coords:e.coords[3],distance:i}),i=Ce(e.coords[1],e.coords[2])/this.meter,o[1].push({wall:s,crossObj:!1,side:"down",coords:e.coords[2],distance:i}),o[0].sort((function(e,t){return(e.distance-t.distance).toFixed(2)})),o[1].sort((function(e,t){return(e.distance-t.distance).toFixed(2)}));for(let r in o)for(let e=1;e<o[r].length;e++){let t=!0,i=-5,s=Math.abs(o[r][e-1].distance-o[r][e].distance),a=n;if(t){"down"===o[r][e-1].side&&(i=10-i),(a>89||a<-89)&&(a-=180,i="down"===o[r][e-1].side?-5:10-i),this.sizeText[e]=document.createElementNS("http://www.w3.org/2000/svg","text");let t=this.qSVG.middle(o[r][e-1].coords.x,o[r][e-1].coords.y,o[r][e].coords.x,o[r][e].coords.y);this.sizeText[e].setAttributeNS(null,"x",t.x),this.sizeText[e].setAttributeNS(null,"y",t.y+i),this.sizeText[e].setAttributeNS(null,"text-anchor","middle"),this.sizeText[e].setAttributeNS(null,"font-family","system-ui"),this.sizeText[e].setAttributeNS(null,"pointer-events","none"),this.sizeText[e].setAttributeNS(null,"stroke","#ffffff"),this.sizeText[e].textContent=De(s,this.measureSystemContext.userUnit),this.sizeText[e].textContent<1?(this.sizeText[e].setAttributeNS(null,"font-size","0.8em"),this.sizeText[e].textContent=this.sizeText[e].textContent.substring(1,this.sizeText[e].textContent.length)):this.sizeText[e].setAttributeNS(null,"font-size","15px"),this.sizeText[e].setAttributeNS(null,"stroke-width","0.27px"),this.sizeText[e].setAttributeNS(null,"fill","#666666"),this.sizeText[e].setAttribute("transform","rotate("+a+" "+t.x+","+t.y+")"),this.boxRib.current.appendChild(this.sizeText[e])}}}function rh(){let e,t,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,s=[];s.push([]),s.push([]);for(let n in this.WALLS)if(this.WALLS[n].equations.base){s[0].push([]),s[0][n].push({wallIndex:n,crossEdge:n,side:"up",coords:this.WALLS[n].coords[0],distance:0}),s[1].push([]),s[1][n].push({wallIndex:n,crossEdge:n,side:"down",coords:this.WALLS[n].coords[1],distance:0});for(let o in this.WALLS)n!==o&&this.WALLS[o].equations.base&&(i=ge(this.WALLS[n].equations.base,this.WALLS[o].equations.base,"object"),this.qSVG.btwn(i.x,this.WALLS[n].start.x,this.WALLS[n].end.x,"round")&&this.qSVG.btwn(i.y,this.WALLS[n].start.y,this.WALLS[n].end.y,"round")&&(e=ge(this.WALLS[n].equations.up,this.WALLS[o].equations.up,"object"),this.qSVG.btwn(e.x,this.WALLS[n].coords[0].x,this.WALLS[n].coords[3].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[n].coords[0].y,this.WALLS[n].coords[3].y,"round")&&this.qSVG.btwn(e.x,this.WALLS[o].coords[0].x,this.WALLS[o].coords[3].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[o].coords[0].y,this.WALLS[o].coords[3].y,"round")&&(t=Ce(this.WALLS[n].coords[0],e)/this.meter,s[0][n].push({wallIndex:n,crossEdge:o,side:"up",coords:e,distance:t.toFixed(2)})),e=ge(this.WALLS[n].equations.up,this.WALLS[o].equations.down,"object"),this.qSVG.btwn(e.x,this.WALLS[n].coords[0].x,this.WALLS[n].coords[3].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[n].coords[0].y,this.WALLS[n].coords[3].y,"round")&&this.qSVG.btwn(e.x,this.WALLS[o].coords[1].x,this.WALLS[o].coords[2].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[o].coords[1].y,this.WALLS[o].coords[2].y,"round")&&(t=Ce(this.WALLS[n].coords[0],e)/this.meter,s[0][n].push({wallIndex:n,crossEdge:o,side:"up",coords:e,distance:t.toFixed(2)})),e=ge(this.WALLS[n].equations.down,this.WALLS[o].equations.up,"object"),this.qSVG.btwn(e.x,this.WALLS[n].coords[1].x,this.WALLS[n].coords[2].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[n].coords[1].y,this.WALLS[n].coords[2].y,"round")&&this.qSVG.btwn(e.x,this.WALLS[o].coords[0].x,this.WALLS[o].coords[3].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[o].coords[0].y,this.WALLS[o].coords[3].y,"round")&&(t=Ce(this.WALLS[n].coords[1],e)/this.meter,s[1][n].push({wallIndex:n,crossEdge:o,side:"down",coords:e,distance:t.toFixed(2)})),e=ge(this.WALLS[n].equations.down,this.WALLS[o].equations.down,"object"),this.qSVG.btwn(e.x,this.WALLS[n].coords[1].x,this.WALLS[n].coords[2].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[n].coords[1].y,this.WALLS[n].coords[2].y,"round")&&this.qSVG.btwn(e.x,this.WALLS[o].coords[1].x,this.WALLS[o].coords[2].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[o].coords[1].y,this.WALLS[o].coords[2].y,"round")&&(t=Ce(this.WALLS[n].coords[1],e)/this.meter,s[1][n].push({wallIndex:n,crossEdge:o,side:"down",coords:e,distance:t.toFixed(2)}))));t=Ce(this.WALLS[n].coords[0],this.WALLS[n].coords[3])/this.meter,s[0][n].push({wallIndex:n,crossEdge:n,side:"up",coords:this.WALLS[n].coords[3],distance:t.toFixed(2)}),t=Ce(this.WALLS[n].coords[1],this.WALLS[n].coords[2])/this.meter,s[1][n].push({wallIndex:n,crossEdge:n,side:"down",coords:this.WALLS[n].coords[2],distance:t.toFixed(2)})}for(let n in s[0])s[0][n].sort((function(e,t){return(e.distance-t.distance).toFixed(2)}));for(let n in s[1])s[1][n].sort((function(e,t){return(e.distance-t.distance).toFixed(2)}));this.sizeText=[],5===o&&ie(this.boxRib.current);for(let n in s)for(let e in s[n])for(let t=1;t<s[n][e].length;t++)if(s[n][e][t-1].wallIndex===s[n][e][t].wallIndex){let i=!0,a=Math.abs(s[n][e][t-1].distance-s[n][e][t].distance);if(a<.15&&(i=!1),i&&s[n][e][t-1].crossEdge===s[n][e][t].crossEdge&&s[n][e][t].crossEdge!==s[n][e][t].wallIndex&&(i=!1),i&&s[n][e].length>2&&1===t){let o=[];for(let i=0;i<4;i++)o.push({x:this.WALLS[s[n][e][t].crossEdge].coords[i].x,y:this.WALLS[s[n][e][t].crossEdge].coords[i].y});me(s[n][e][0].coords,o)&&(i=!1)}if(i&&s[n][e].length>2&&t===s[n][e].length-1){let o=[];for(let i=0;i<4;i++)o.push({x:this.WALLS[s[n][e][t-1].crossEdge].coords[i].x,y:this.WALLS[s[n][e][t-1].crossEdge].coords[i].y});me(s[n][e][s[n][e].length-1].coords,o)&&(i=!1)}if(i){let i=this.WALLS[s[n][e][t].wallIndex].angle*(180/Math.PI),r=-o;"down"===s[n][e][t-1].side&&(r=10-r),(i>90||i<-89)&&(i-=180,r="down"===s[n][e][t-1].side?-o:10-r),this.sizeText[t]=document.createElementNS("http://www.w3.org/2000/svg","text");let l=this.qSVG.middle(s[n][e][t-1].coords.x,s[n][e][t-1].coords.y,s[n][e][t].coords.x,s[n][e][t].coords.y);this.sizeText[t].setAttributeNS(null,"x",l.x),this.sizeText[t].setAttributeNS(null,"y",l.y+r),this.sizeText[t].setAttributeNS(null,"text-anchor","middle"),this.sizeText[t].setAttributeNS(null,"font-family","roboto"),this.sizeText[t].setAttributeNS(null,"stroke","#ffffff"),this.sizeText[t].textContent=De(a,this.measureSystemContext.userUnit),this.sizeText[t].textContent<1?(this.sizeText[t].setAttributeNS(null,"font-size","0.73em"),this.sizeText[t].textContent=this.sizeText[t].textContent.substring(1,this.sizeText[t].textContent.length)):this.sizeText[t].setAttributeNS(null,"font-size","0.9em"),this.sizeText[t].setAttributeNS(null,"stroke-width","0.2px"),this.sizeText[t].setAttributeNS(null,"fill","#555555"),this.sizeText[t].setAttribute("transform","rotate("+i+" "+l.x+","+l.y+")"),this.boxRib.current.appendChild(this.sizeText[t])}}}function lh(){this.lineIntersectionP&&(this.lineIntersectionP.remove(),this.lineIntersectionP=null)}function hh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],o={},s={};o.distance=t,this.lineIntersectionP&&(this.lineIntersectionP.remove(),this.lineIntersectionP=null),this.lineIntersectionP=this.qSVG.create(this.boxBind,"path",{d:"",stroke:"transparent","stroke-width":.5,"stroke-opacity":"1",fill:"none"});for(let n=0;n<this.WALLS.length;n++)if(-1===i.indexOf(this.WALLS[n])){let t,i=this.WALLS[n].start.x,a=this.WALLS[n].start.y,r=this.WALLS[n].end.x,l=this.WALLS[n].end.y;0===Math.abs(l-a)?(s.C="v",s.D=i,s.E="h",s.F=a,s.G="v",s.H=r,s.I="h",s.J=l):0===Math.abs(r-i)?(s.C="h",s.D=a,s.E="v",s.F=i,s.G="h",s.H=l,s.I="v",s.J=r):(s.C=(i-r)/(l-a),s.D=a-i*s.C,s.E=(l-a)/(r-i),s.F=a-i*s.E,s.G=(i-r)/(l-a),s.H=l-r*s.C,s.I=(l-a)/(r-i),s.J=l-r*s.E),s.A=s.C,s.B=s.D,t=this.qSVG.nearPointOnEquation(s,e),t.distance<o.distance&&(o.distance=t.distance,o.node=n,o.x=t.x,o.y=t.y,o.x1=i,o.y1=a,o.x2=r,o.y2=l,o.way=1),s.A=s.E,s.B=s.F,t=this.qSVG.nearPointOnEquation(s,e),t.distance<o.distance&&(o.distance=t.distance,o.node=n,o.x=t.x,o.y=t.y,o.x1=i,o.y1=a,o.x2=r,o.y2=l,o.way=1),s.A=s.G,s.B=s.H,t=this.qSVG.nearPointOnEquation(s,e),t.distance<o.distance&&(o.distance=t.distance,o.node=n,o.x=t.x,o.y=t.y,o.x1=i,o.y1=a,o.x2=r,o.y2=l,o.way=2),s.A=s.I,s.B=s.J,t=this.qSVG.nearPointOnEquation(s,e),t.distance<o.distance&&(o.distance=t.distance,o.node=n,o.x=t.x,o.y=t.y,o.x1=i,o.y1=a,o.x2=r,o.y2=l,o.way=2)}return o.distance<t&&(2===o.way?(this.lineIntersectionP.setAttribute("d","M"+o.x1+","+o.y1+" L"+o.x2+","+o.y2+" L"+o.x+","+o.y),this.lineIntersectionP.setAttribute("stroke","#d7ac57")):(this.lineIntersectionP.setAttribute("d","M"+o.x2+","+o.y2+" L"+o.x1+","+o.y1+" L"+o.x+","+o.y),this.lineIntersectionP.setAttribute("stroke","#d7ac57")),{x:o.x,y:o.y,wall:this.WALLS[o.node],distance:o.distance})}var ch=i(5828),dh=i(7575);class ph extends o.Component{constructor(){super(),this.onFloorplanItemModelClick=e=>{this.setState({selectedFloorplanItemModel:e}),this.props.onFloorplanItemSelectionCallback(e)},this.onFloorplanItemsCategorySelectClick=e=>{const t=e.target.textContent;this.setState({selectedCategory:t},(()=>{this.floorplanItemCategorySelectRef.current.closeDropdownMenu(),this.floorplanItemCategorySelectRef.current.setValue(t)}))},this.onFloorplanItemSearchInputChange=e=>{let t=[];t=""===e.target.value?this.props.items:this.props.items.map((t=>({...t,models:t.models.filter((i=>i.toLowerCase().includes(e.target.value.toLowerCase())||t.details[i].title.toLowerCase().includes(e.target.value.toLowerCase())))}))),this.setState({floorplanItemsFiltered:t,searchInputValue:e.target.value})},this.state={floorplanItemsFiltered:[],selectedFloorplanItemModel:null,searchInputValue:"",selectedCategory:"All"},this.floorplanItemCategorySelectRef=o.createRef(),this.onFloorplanItemModelClick=this.onFloorplanItemModelClick.bind(this),this.onFloorplanItemsCategorySelectClick=this.onFloorplanItemsCategorySelectClick.bind(this),this.onFloorplanItemSearchInputChange=this.onFloorplanItemSearchInputChange.bind(this)}componentDidMount(){this.setState({floorplanItemsFiltered:this.props.items,selectedFloorplanItemModel:this.props.initialSelectedItemModel,searchInputValue:"",selectedCategory:"All"},(()=>this.floorplanItemCategorySelectRef.current&&this.floorplanItemCategorySelectRef.current.setValue("All")))}render(){const{floorplanItemsFiltered:e,selectedFloorplanItemModel:t,searchInputValue:i,selectedCategory:o}=this.state,s="All"===o?e:[e.find((e=>e.title===o))];return(0,l.jsxs)("div",{className:"floorplan-items-container ".concat(this.props.containerClasses||""),children:[this.props.items.length>1&&(0,l.jsx)(Ot,{ref:this.floorplanItemCategorySelectRef,onListItemClick:this.onFloorplanItemsCategorySelectClick,listItems:["All",...Object.values(this.props.items).map((e=>e.title))]}),this.props.items.reduce(((e,t)=>e+t.models.length),0)>1&&(0,l.jsxs)("div",{className:"search-container",children:[(0,l.jsxs)("div",{style:{flexGrow:1},children:[(0,l.jsx)("div",{className:"hidden-placeholder",children:"Search"}),(0,l.jsx)("input",{placeholder:"Search",className:"form-control input",value:i,onChange:this.onFloorplanItemSearchInputChange})]}),(0,l.jsx)("div",{className:"search-icon-container",children:(0,l.jsx)(dh.Z,{})})]}),(0,l.jsx)("div",{className:"floorplan-items-data-container",children:s.map((e=>e.models.length>0&&(0,l.jsxs)("div",{className:"floorplan-item-data-container",children:[(0,l.jsx)("div",{className:"floorplan-item-category-label",children:e.title}),(0,l.jsx)("div",{className:"floorplan-item-models-selection-grid ".concat(this.props.gridContainerClasses||""),children:e.models.map((i=>(0,l.jsx)("div",{className:"selection-grid-item-card ".concat(t===i?"selected":""," ").concat(this.props.disabled?"disabled":""),onClick:()=>!this.props.disabled&&this.onFloorplanItemModelClick(i),children:(0,l.jsx)(ch.LazyLoadImage,{alt:e.details[i].title,src:e.details[i].objId?"https://app.klet3d.com/api/glamos/klet3d/objects-download2/".concat(e.details[i].objId,"/").concat(i,".png"):"https://app.klet3d.com/models3D/objMtl/thumbnails/".concat(this.props.mainComponentThis.getObjectFolderName(i),"/").concat(i,".png"),placeholder:(0,l.jsx)("div",{className:"spinner-container",children:(0,l.jsx)(Mt,{center:!0,noMargin:!0,spinnerStyle:{width:14,height:14}})}),width:"100%",height:"100%",onLoad:()=>this.setState({["".concat(i,"_loaded")]:!0}),visibleByDefault:this.state["".concat(i,"_loaded")]})},i)))})]},e.title)))})]})}}const mh=ph;class uh extends o.Component{constructor(){super(),this.onItemClick=e=>t=>{this.setState({selectedItem:e}),this.props.onClickCallback&&this.props.onClickCallback(t,e)},this.setSelectedItem=e=>this.setState({selectedItem:e}),this.getSelectedItem=()=>this.state.selectedItem,this.state={selectedItem:null},this.onItemClick=this.onItemClick.bind(this),this.setSelectedItem=this.setSelectedItem.bind(this),this.getSelectedItem=this.getSelectedItem.bind(this)}render(){const{selectedItem:e}=this.state;return(0,l.jsx)("div",{className:"colors-textures-grid-container ".concat(this.props.isColor?"":"textures"),children:this.props.isColor?this.props.items.map((t=>(0,l.jsx)("div",{className:"selection-grid-item-card color textEditorColorModify ".concat(e===t.gradientStartColor?"selected":""," ").concat(this.props.disabled?"disabled":""),style:{color:t.gradientStartColor,background:"linear-gradient(30deg, ".concat(t.gradientStartColor,", ").concat(t.gradientStopColor,")")},onClick:this.props.disabled?void 0:this.onItemClick(t.gradientStartColor)},t.gradientStartColor))):this.props.items.map(((t,i)=>(0,l.jsx)("div",{className:"selection-grid-item-card ".concat(e===t?"selected":""," ").concat(this.props.disabled?"disabled":""),style:{backgroundImage:"none"===t?t:"/textures/".concat(t,".png")},onClick:this.props.disabled?void 0:this.onItemClick(t),children:"none"!==t&&(0,l.jsx)("img",{src:"https://app.klet3d.com/textures/".concat(t,".png")})},i)))})}}const gh=uh;class fh extends o.Component{constructor(){super(),this.MIN_REPEAT_TIMES=5,this.MAX_REPEAT_TIMES=5,this.NUMBER_OF_STEPS=40,this.MIN_REPEAT_VALUE=1/this.MIN_REPEAT_TIMES,this.MAX_REPEAT_VALUE=1*this.MAX_REPEAT_TIMES,this.STEP_VALUE=Math.round((this.MAX_REPEAT_VALUE-this.MIN_REPEAT_VALUE)/this.NUMBER_OF_STEPS*10)/10,this.onManualTextureToggleChange=e=>{const t=e.target.checked?1:0;this.props.onRepeatChangeCallback&&this.props.onRepeatChangeCallback(t,this.props.roomFloorTypesSelectionRef.current.getSelectedItem()),this.setValue(t)},this.onTextureRepeatCountChange=e=>{const t=parseFloat(e);this.props.onRepeatChangeCallback&&this.props.onRepeatChangeCallback(t,this.props.roomFloorTypesSelectionRef.current.getSelectedItem()),this.setValue(t)},this.state={floorTextureRepeatCount:void 0},this.repeatSliderInputRef=o.createRef(),this.repeatSliderComponentRef=o.createRef()}getValue(){return this.state.floorTextureRepeatCount}setValue(e){this.setState({floorTextureRepeatCount:e}),this.repeatSliderInputRef.current.value=e,this.repeatSliderComponentRef.current.inputNumberComponentRef.current.setValue(e),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}render(){return(0,l.jsxs)("div",{children:[(0,l.jsx)(ft,{disabled:!0,infoLabel:!0,infoLabelTitle:"Set texture size",infoText:"Manually set the texture size.",explanationInfoBoxStyles:{left:-120,width:100,zIndex:1},checked:!!this.state.floorTextureRepeatCount,onChange:this.onManualTextureToggleChange}),(0,l.jsx)("div",{style:{display:[0,void 0].includes(this.state.floorTextureRepeatCount)?"none":"block"},children:(0,l.jsx)(fn,{disabled:!0,ref:this.repeatSliderComponentRef,sliderInputRef:this.repeatSliderInputRef,minValue:this.MIN_REPEAT_VALUE,maxValue:this.MAX_REPEAT_VALUE,sliderStep:this.STEP_VALUE,onSliderValueChanged:this.onTextureRepeatCountChange})})]})}}const bh=fh;class wh extends o.Component{constructor(){super(),this.fontSizeNumberSliderInput=o.createRef(),this.modifyFontSizeSlider=o.createRef(),this.textColorsSelectionRef=o.createRef(),this.modifyTextContent=o.createRef()}componentDidMount(){this.props.textItemFontSizeValueRef.current.textContent=this.props.targetObject2D.value.size,this.modifyFontSizeSlider.current.value=this.props.targetObject2D.value.size,this.fontSizeNumberSliderInput.current.setNumberInputInitialValues(this.props.targetObject2D.value.size),this.modifyTextContent.current.value=this.props.targetObject2D.value.text,this.textColorsSelectionRef.current.setSelectedItem(this.props.targetObject2D.type),this.props.restoreSelectedBinderCall&&this.props.mainComponentThis.onModifyFontSizeChange(this.props.targetObject2D.value.size)}render(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(fn,{ref:this.fontSizeNumberSliderInput,disabled:!0,sliderInputRef:this.modifyFontSizeSlider,valueLabelText:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(ps,{}),"Font size : ",(0,l.jsx)("span",{ref:this.props.textItemFontSizeValueRef})]}),sliderStep:.1,minValue:10,maxValue:70,onSliderValueChanged:this.props.mainComponentThis.onModifyFontSizeChange,onSliderChangeFinished:()=>{this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}}),(0,l.jsx)(ut,{disabled:!0,label:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(us,{}),"Text content:"]}),labelStyle:{display:"flex",alignItems:"center"},inputRef:this.modifyTextContent,onChange:this.props.mainComponentThis.onModifyTextContentChange}),(0,l.jsx)(xt,{labelStyle:{display:"flex",alignItems:"center"},label:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(fs,{}),"Text color:"]}),children:(0,l.jsx)(gh,{ref:this.textColorsSelectionRef,disabled:!0,items:Di,isColor:!0,onClickCallback:this.props.mainComponentThis.onModifyTextColorButonClick})})]})}}const Ch=wh;class xh extends o.Component{constructor(){super(),this.setRotationInputValues=e=>{this.itemRotationSlider.current.value=e,this.props.itemRotationValueRef.current.textContent=e,this.itemRotationNumberSliderInput.current.inputNumberComponentRef.current.setValue(e)},this.onRotationChange=e=>{let t=!0;"floorFree"===this.props.targetObject2D.family&&(t=this.props.mainComponentThis.floorFreeObjectPositionValidation({x:this.props.targetObject2D.x,y:this.props.targetObject2D.y},this.props.mainComponentThis.WALLS,this.props.targetObject2D.size/2,this.props.targetObject2D.thick/2,e)),t?(this.lastSavedAngleValue=e,this.props.mainComponentThis.setItemRotationAngle(e,this.props.targetObject2D),this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.rotateSelectedItem(),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)):this.setRotationInputValues(this.lastSavedAngleValue)},this.itemRotationSlider=o.createRef(),this.itemRotationNumberSliderInput=o.createRef(),this.lastSavedAngleValue=null,this.setRotationInputValues=this.setRotationInputValues.bind(this),this.onRotationChange=this.onRotationChange.bind(this)}componentDidMount(){this.setRotationInputValues(this.props.targetObject2D.angle),this.itemRotationNumberSliderInput.current.setNumberInputInitialValues(this.props.targetObject2D.angle),this.lastSavedAngleValue=this.props.targetObject2D.angle,this.props.restoreSelectedBinderCall&&this.onRotationChange(this.props.targetObject2D.angle)}render(){return(0,l.jsx)(xt,{children:(0,l.jsx)(fn,{ref:this.itemRotationNumberSliderInput,disabled:!0,sliderInputRef:this.itemRotationSlider,valueLabelText:(0,l.jsxs)("div",{style:{display:"flex"},children:[(0,l.jsx)(cs,{}),"Rotation:\xa0",(0,l.jsx)("span",{ref:this.props.itemRotationValueRef})," \xb0"]}),sliderStep:1,minValue:-180,maxValue:180,onSliderValueChanged:this.onRotationChange,onSliderChangeFinished:()=>{this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}})})}}const yh=xh;class Sh extends o.Component{constructor(e){super(),this.saveChanges=(e,t,i,o,s)=>{const n=[this.props.targetObject2D];this.props.mainComponentThis.selectedBinder&&n.push(this.props.mainComponentThis.selectedBinder),n.forEach((e=>{t&&(e[t]=i),e.update(this.props.mainComponentThis)})),this.props.targetObject2D.additionalParams[e]=i,this[s]=o,this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.resizeSelectedItem(),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)},this.onWidthChange=()=>e=>{const t=this.widthInputComponentRef.current.getValue(),i=e||this.props.mainComponentThis.convertValueToSvgUnits(t),o=90===this.props.targetObject2D.params.onWallOffsetAngle?"thick":"size";let s=!0;e||("inWall"===this.props.targetObject2D.family||"onWall"===this.props.targetObject2D.family?s=this.props.mainComponentThis.onWallItemWidthChange(i,this.props.targetObject2D,this.props.mainComponentThis.WALLS):"floorFree"===this.props.targetObject2D.family&&(s=this.props.mainComponentThis.floorFreeObjectPositionValidation({x:this.props.targetObject2D.x,y:this.props.targetObject2D.y},this.props.mainComponentThis.WALLS,"size"===o?i/2:this.props.targetObject2D.thick/2,"size"===o?this.props.targetObject2D.thick/2:i/2,this.props.targetObject2D.angle))),s?this.saveChanges("width3D",o,i,t,"lastSavedWidthValue"):this.widthInputComponentRef.current.setValue(this.lastSavedWidthValue)},this.onDepthChange=()=>e=>{const t=this.depthInputComponentRef.current.getValue(),i=e||this.props.mainComponentThis.convertValueToSvgUnits(t),o=90===this.props.targetObject2D.params.onWallOffsetAngle?"size":"thick";let s=!0;e||"floorFree"===this.props.targetObject2D.family&&(s=this.props.mainComponentThis.floorFreeObjectPositionValidation({x:this.props.targetObject2D.x,y:this.props.targetObject2D.y},this.props.mainComponentThis.WALLS,"size"===o?i/2:this.props.targetObject2D.size/2,"size"===o?this.props.targetObject2D.size/2:i/2,this.props.targetObject2D.angle)),s?this.saveChanges("depth3D",o,i,t,"lastSavedDepthValue"):this.depthInputComponentRef.current.setValue(this.lastSavedDepthValue)},this.onHeightChange=()=>()=>{const e=this.heightInputComponentRef.current.getValue(),t=this.props.mainComponentThis.convertValueToSvgUnits(e);t<this.props.mainComponentThis.floorHeight?this.saveChanges("height3D",null,t,e,"lastSavedHeightValue"):this.heightInputComponentRef.current.setValue(this.lastSavedHeightValue)},this.widthInputComponentRef=o.createRef(),this.depthInputComponentRef=o.createRef(),this.heightInputComponentRef=o.createRef(),this.dimensionItem={min:-1/0,max:1/0,step:e.mainComponentThis.itemDimensionsInputStep},this.lastSavedWidthValue=null,this.lastSavedDepthValue=null,this.lastSavedHeightValue=null,this.saveChanges=this.saveChanges.bind(this),this.onWidthChange=this.onWidthChange.bind(this),this.onDepthChange=this.onDepthChange.bind(this),this.onHeightChange=this.onHeightChange.bind(this)}componentDidMount(){new Array({inputRef:this.widthInputComponentRef,dimensionPropertyName:"width3D",lastSavedPropertyName:"lastSavedWidthValue"},{inputRef:this.depthInputComponentRef,dimensionPropertyName:"depth3D",lastSavedPropertyName:"lastSavedDepthValue"},{inputRef:this.heightInputComponentRef,dimensionPropertyName:"height3D",lastSavedPropertyName:"lastSavedHeightValue"}).forEach((e=>{const t=this.props.mainComponentThis.convertSvgToValueUnits(this.props.targetObject2D.additionalParams[e.dimensionPropertyName]);e.inputRef.current.setValue(t),e.inputRef.current.setInitialValue(t),this[e.lastSavedPropertyName]=t})),this.props.restoreSelectedBinderCall&&(this.onWidthChange()(this.props.targetObject2D.additionalParams.width3D),this.onDepthChange()(this.props.targetObject2D.additionalParams.depth3D))}render(){return(0,l.jsxs)(xt,{label:"Dimensions(".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"cm":"in",")"),children:[(0,l.jsx)(_t,{disabled:!0,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:this.widthInputComponentRef,isNumberInput:!0,controledNumberInput:!1,label:(0,l.jsx)(ii,{longText:"Height:",shortText:"Width:"}),labelClasses:"label-form-control-cancel",item:this.dimensionItem,onChange:this.onWidthChange}),(0,l.jsx)(_t,{disabled:!0,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:this.depthInputComponentRef,isNumberInput:!0,controledNumberInput:!1,label:(0,l.jsx)(ii,{longText:"Height:",shortText:"Depth:"}),labelClasses:"label-form-control-cancel",item:this.dimensionItem,onChange:this.onDepthChange}),(0,l.jsx)(_t,{disabled:!0,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:this.heightInputComponentRef,isNumberInput:!0,controledNumberInput:!1,label:"Height:",labelClasses:"label-form-control-cancel",item:this.dimensionItem,onChange:this.onHeightChange})]})}}const vh=Sh;class Dh extends o.Component{constructor(e){var t;super(),t=this,this.onPositionYChange=()=>()=>{const e=this.positionYInputComponentRef.current.getValue(),t=this.props.mainComponentThis.convertValueToSvgUnits(e),i=t+this.props.targetObject2D.additionalParams.height3D<=this.props.mainComponentThis.floorHeight&&t>=0;i&&(this.lastSavedPositionYValue=e,this.props.targetObject2D.additionalParams.positionY=t,this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedItemVerticalPosition(),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)),i?this.positionYInputComponentRef.current.inputRef.current.classList.remove("is-invalid"):this.positionYInputComponentRef.current.inputRef.current.classList.add("is-invalid")},this.setPositionYInputValues=function(e){let i=e;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(i=t.props.mainComponentThis.convertSvgToValueUnits(e)),t.positionYInputComponentRef.current.setValue(i)},this.positionYInputComponentRef=o.createRef(),this.positionItem={min:0,max:1/0,step:e.mainComponentThis.itemDimensionsInputStep},this.lastSavedPositionYValue=null,this.onPositionYChange=this.onPositionYChange.bind(this),this.setPositionYInputValues=this.setPositionYInputValues.bind(this)}componentDidMount(){const e=this.props.mainComponentThis.convertSvgToValueUnits(this.props.targetObject2D.additionalParams.positionY);this.setPositionYInputValues(e),this.positionYInputComponentRef.current.setInitialValue(e),this.lastSavedPositionYValue=e}render(){return(0,l.jsxs)(xt,{children:[(0,l.jsxs)("div",{className:"label form-control label-info-box-container",style:{display:"flex"},children:[(0,l.jsx)("span",{children:"Vertical position(".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"cm":"in",")")}),(0,l.jsx)(st,{infoText:(0,l.jsxs)("span",{children:["Vertical position of the item's ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"bottom"})," relative to the"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"floor"})]}),explanationInfoBoxStyles:{left:-150,width:130,zIndex:1}})]}),(0,l.jsx)(_t,{disabled:!0,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:this.positionYInputComponentRef,isNumberInput:!0,controledNumberInput:!1,labelClasses:"label-form-control-cancel",item:this.positionItem,onChange:this.onPositionYChange})]})}}const Th=Dh;var jh=i(1317);class _h extends o.Component{constructor(e){super(),this.handleRotationOptionChange=e=>()=>{jh.log("handleRotationOptionChange");const t=[...this.state.rotationOptions];t.forEach((e=>e.selected=!1));const i=t.find((t=>t===e.choices[0].value));i&&(i.selected=!0,this.setState({rotationOptions:t},(()=>{this.props.windowObj2D.additionalParams.rotationAxis=i.rotationAxis,this.props.windowObj2D.additionalParams.rotationDirection=i.rotationDirection,this.props.mainComponentThis.setWindowObjectRotationProperties(this.props.windowObj2D),this.props.mainComponentThis.floorplan3DComponent.current?this.props.mainComponentThis.floorplan3DComponent.current.onSelectedWindowItemRotationOptionChange():this.props.mainComponentThis.createWindowRotationPropertiesBinder(this.props.windowObj2D),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!1)})))},this.state={rotationOptions:[{rotationAxis:"start",rotationDirection:"up",imageURI:null,selected:"start"===(e.windowObj2D.additionalParams.rotationAxis||"start")&&"up"===(e.windowObj2D.additionalParams.rotationDirection||"up")},{rotationAxis:"end",rotationDirection:"up",imageURI:null,selected:"end"===(e.windowObj2D.additionalParams.rotationAxis||"start")&&"up"===(e.windowObj2D.additionalParams.rotationDirection||"up")},{rotationAxis:"start",rotationDirection:"down",imageURI:null,selected:"start"===(e.windowObj2D.additionalParams.rotationAxis||"start")&&"down"===(e.windowObj2D.additionalParams.rotationDirection||"up")},{rotationAxis:"end",rotationDirection:"down",imageURI:null,selected:"end"===(e.windowObj2D.additionalParams.rotationAxis||"start")&&"down"===(e.windowObj2D.additionalParams.rotationDirection||"up")}]},this.handleRotationOptionChange=this.handleRotationOptionChange.bind(this)}componentDidMount(){!this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.createWindowRotationPropertiesBinder(this.props.windowObj2D);let e=[...this.state.rotationOptions];for(let t=0;t<e.length;t++){const i=_e(e[t].rotationAxis,e[t].rotationDirection,this.props.windowObj2D),o=this.props.mainComponentThis.createWindowRotationSvg(this.props.windowObj2D,{point1:{x:i.curvePoint1X,y:i.curvePoint1Y},point2:{x:i.curvePoint2X,y:i.curvePoint2Y},controlPoint:{x:i.controlPointX,y:i.controlPointY}},e[t].rotationDirection);o.svgGroupElement.appendChild(o.curveArrowPath);const s=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","defs"),a=document.createElementNS("http://www.w3.org/2000/svg","marker");a.setAttribute("id","window-rotation-direction-arrow-triangle"),a.setAttribute("viewBox","0 0 10 10"),a.setAttribute("refX","5"),a.setAttribute("refY","5"),a.setAttribute("markerUnits","strokeWidth"),a.setAttribute("markerWidth","4"),a.setAttribute("markerHeight","4"),a.setAttribute("orient","auto");const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d","M 0 0 L 10 5 L 0 10 z"),r.setAttribute("fill","#f00"),a.appendChild(r),n.appendChild(a),s.appendChild(n),s.appendChild(o.svgGroupElement),document.body.appendChild(s);const{arrowHalfLength:l,translateX:h,translateY:c}=Ie(this.props.windowObj2D,e[t].rotationDirection);let d=(this.props.windowObj2D.angle+90)*(Math.PI/180),p=[{x:-l,y:i.controlPointY/2},{x:l,y:i.controlPointY/2},{x:l,y:0},{x:-l,y:0}],m={x:0,y:0};p.forEach((e=>{e.x+=h,e.y+=c})),m.x+=h,m.y+=c,ke(p,m,d);const u=Pe(p),g=5;s.setAttribute("viewBox","".concat(u.minX-g," ").concat(u.minY-g," ").concat(u.width+2*g," ").concat(u.height+2*g)),s.setAttribute("width",u.width+2*g),s.setAttribute("height",u.height+2*g),e[t].imageURI="data:image/svg+xml;base64,"+btoa((new XMLSerializer).serializeToString(s)),document.body.removeChild(document.body.lastChild)}this.setState({rotationOptions:e})}render(){const{rotationOptions:e}=this.state;return jh.log(e),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:"Rotation options"}),(0,l.jsx)("div",{children:e.filter((e=>e.imageURI)).map(((t,i)=>(0,l.jsx)("div",{children:(0,l.jsx)(wt,{disabled:!0,choiceRowStyle:{display:"flex",alignItems:"center"},onChange:this.handleRotationOptionChange,item:{choices:[{name:null,value:t,inputSiblingElement:(0,l.jsx)("img",{style:{paddingLeft:"0.5rem"},src:t.imageURI})}],value:e.find((e=>e.selected))}})},i)))})]})}}const Ih=_h;class kh extends o.Component{constructor(){super(),this.MATERIAL_OPTIONS={DEFAULT:{label:"Default",value:"default"},COLOR:{label:"Color",value:"color"},TEXTURE:{label:"Texture",value:"texture"}},this.HIGHLIGHT_COLOR=2600544,this.setMaterialColor=(e,t)=>{this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((i=>i.setPaintedColor(t,e.name)),this.props.selectedItem)},this.resetMaterialColor=e=>{this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((t=>t.setPartColor("default",e.name)),this.props.selectedItem)},this.getPartListItemClickHandler=()=>(e,t)=>{const i=this.state.edit[t];if(this.state.selectedMesh){const e=this.state.edit[this.state.selectedMesh.index],t=Object.values(this.MATERIAL_OPTIONS).findIndex((t=>t.value===e.value.type));this.syncMeshWithItemOption(e,Object.values(this.MATERIAL_OPTIONS)[t])}this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((e=>{e.setPartColor(this.HIGHLIGHT_COLOR,i.value.meshName)}),this.props.selectedItem),this.highlightedTimeout&&clearTimeout(this.highlightedTimeout),this.highlightedTimeout=setTimeout((()=>{this.syncMeshWithItemOption(this.state.edit[t],Object.values(this.MATERIAL_OPTIONS).find((e=>e.value===this.state.edit[t].value.type)))}),this.partHiglightTimeoutMs),this.partSelectListsRef.current.setValue(i.label);const o=Object.values(this.MATERIAL_OPTIONS).find((e=>e.value===i.value.type));o?this.partMaterialSelectListsRef.current.setValue(o.label):this.partMaterialSelectListsRef.current.setValue(Object.values(this.MATERIAL_OPTIONS)[0].label),this.setState({selectedMesh:{name:i.value.meshName,index:t}});o.value===this.MATERIAL_OPTIONS.COLOR.value?this.props.selectedItem.setUnselected():this.props.selectedItem.setSelected()},this.getPartMaterialListItemClickHandler=(e,t)=>(e,i)=>{const o=Object.values(this.MATERIAL_OPTIONS)[i];o.value===this.MATERIAL_OPTIONS.COLOR.value?this.props.selectedItem.setUnselected():this.props.selectedItem.setSelected(),this.setState({edit:this.state.edit.map(((e,i)=>{if(i===t){const{colorPickerColor:t,textureName:i}=this.syncMeshWithItemOption(e,o);return o.value===this.MATERIAL_OPTIONS.TEXTURE.value&&this.partTextureSelectRef.current.setSelectedItem(i),{...e,value:{...e.value,type:o.value,...o.value===this.MATERIAL_OPTIONS.COLOR.value&&{color:t}}}}return e}))},(()=>{this.save()})),this.partMaterialSelectListsRef.current&&this.partMaterialSelectListsRef.current.setValue(o.label)},this.getOnItemColorChange=e=>{let{mesh:t}=e;return e=>{let{target:i}=e;const o=i.value;this.setState({edit:this.state.edit.map((e=>e.value.meshName===t.name?{...e,value:{...e.value,color:o}}:e))},(()=>{this.save()}));const s=parseInt(o.split("#").at(-1),16);this.setMaterialColor(t,s)}},this.texturesSelectionCallbackHandler=(e,t)=>{this.setState({edit:this.state.edit.map((e=>e.value.meshName===this.state.selectedMesh.name?{...e,value:{...e.value,type:this.MATERIAL_OPTIONS.TEXTURE.value,textureName:t}}:e))},(()=>{this.save()})),this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((e=>{e.setCustomTextureByName(t,this.state.selectedMesh.name)}),this.props.selectedItem)},this.state={edit:[],selectedMesh:null},this.meshes={},this.partHiglightTimeoutMs=2e3,this.partSelectListsRef=o.createRef(),this.partMaterialSelectListsRef=o.createRef(),this.selectListsColorPickerRef=o.createRef(),this.partTextureSelectRef=o.createRef(),this.save=this.save.bind(this),this.getPartMaterialListItemClickHandler=this.getPartMaterialListItemClickHandler.bind(this),this.getOnItemColorChange=this.getOnItemColorChange.bind(this),this.setMaterialColor=this.setMaterialColor.bind(this),this.resetMaterialColor=this.resetMaterialColor.bind(this),this.syncMeshWithItemOption=this.syncMeshWithItemOption.bind(this),this.highlightedTimeout=null}save(){const e=this.state.edit.map((e=>e.value));this.props.targetObject2D.additionalParams.materials=e,this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}syncMeshWithItemOption(e,t){let i,o;if(t.value===this.MATERIAL_OPTIONS.DEFAULT.value&&this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((t=>{t.removePaintedColor(e.value.meshName,!1),t.removeCustomTexture(e.value.meshName,!1)}),this.props.selectedItem),t.value===this.MATERIAL_OPTIONS.COLOR.value){const t=this.props.selectedItem.getPartColor("default",e.value.meshName,!0),o=t?"#".concat(t.toString(16).padStart(6,"0")):null;i=e.value.color||o||"#000000";const s=parseInt(i.split("#").at(-1),16);this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((t=>t.setPaintedColor(s,e.value.meshName)),this.props.selectedItem)}return t.value===this.MATERIAL_OPTIONS.TEXTURE.value&&this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((t=>{o=t.restoreCustomTexture(e.value.meshName)}),this.props.selectedItem),{colorPickerColor:i,textureName:o}}componentDidMount(){const e=this.props.targetObject2D.additionalParams.materials||[];this.setState({edit:this.props.selectedItem.mesh.children.filter((e=>e.name&&e.name.length>0)).map(((t,i)=>(this.meshes[t.name]=t,{mesh:t,label:"Part ".concat(i+1),value:e.find((e=>e.meshName===t.name))||{type:this.MATERIAL_OPTIONS.DEFAULT.value,meshName:t.name}}))),selectedMesh:{name:this.props.selectedItem.mesh.children[0].name,index:0}},(()=>{const e=this.state.selectedMesh&&this.state.edit[this.state.selectedMesh.index];if(e&&(this.partSelectListsRef.current&&this.partSelectListsRef.current.setValue(e.label),this.partMaterialSelectListsRef.current)){const t=Object.values(this.MATERIAL_OPTIONS).find((t=>t.value===e.value.type));t?(t.value===this.MATERIAL_OPTIONS.COLOR.value?this.props.selectedItem.setUnselected():t.value===this.MATERIAL_OPTIONS.TEXTURE.value&&this.partTextureSelectRef.current.setSelectedItem(e.value.textureName),this.partMaterialSelectListsRef.current.setValue(t.label)):this.partMaterialSelectListsRef.current.setValue(Object.values(this.MATERIAL_OPTIONS)[0].label)}}))}reset(){if(this.props.mainComponentThis.floorplan3DComponent.current){const e=this.state.selectedMesh.index,t=this.state.edit[e],i=Object.values(this.MATERIAL_OPTIONS).findIndex((e=>e.value===t.value.type));this.syncMeshWithItemOption(t,Object.values(this.MATERIAL_OPTIONS)[i])}}render(){const e=this.state.edit.map((e=>e.label)),t=this.state.selectedMesh&&this.state.selectedMesh.index,i=t>=0&&this.state.edit[t];return i?(0,l.jsxs)(xt,{label:"Item material",containerClasses:"select-object-material-container",children:[(0,l.jsx)(Ot,{ref:this.partSelectListsRef,onListItemClick:this.getPartListItemClickHandler(),listItems:e}),(0,l.jsx)("div",{style:{marginBottom:"0.5rem"}}),(0,l.jsx)(Ot,{disabled:!0,ref:this.partMaterialSelectListsRef,onListItemClick:this.getPartMaterialListItemClickHandler(i,t),listItems:Object.values(this.MATERIAL_OPTIONS).filter((e=>e.value!==this.MATERIAL_OPTIONS.TEXTURE.value||this.props.selectedItem.isPartUVUnwrapped(this.state.selectedMesh.name))).map((e=>e.label))}),i.value.type===this.MATERIAL_OPTIONS.COLOR.value&&(0,l.jsx)(Tt,{disabled:!0,containerStyle:{marginTop:"0.5rem",zIndex:this.state.edit.length-t},item:{...i,value:i.value.color},onChange:this.getOnItemColorChange,boxContainer:this.props.colorPickerBoxContainer}),(0,l.jsx)("div",{style:{display:i.value.type===this.MATERIAL_OPTIONS.TEXTURE.value?"block":"none"},children:(0,l.jsx)(xt,{label:"Select texture",containerClasses:"room-floor-textures-form-group-container ",children:(0,l.jsx)("div",{className:"room-floor-textures-component-container",style:{height:"500px"},children:(0,l.jsx)(gh,{disabled:!0,ref:this.partTextureSelectRef,items:bo,onClickCallback:this.texturesSelectionCallbackHandler})})})})]}):null}}const Ph=kh;var Fh=i(1317);function Oh(){let e=null!==this.selectedBinder.realRoomArea?this.selectedBinder.realRoomArea/(this.meter*this.meter):null;this.selectedBinder.setAttribute("fill","none"),this.selectedBinder.setAttribute("stroke","#ddf00a"),this.selectedBinder.setAttribute("stroke-width",7),document.getElementsByClassName("size")[0].innerHTML=null!==e?je(e,this.measureSystemContext.userUnit,"square meter","square foot",this.roomSurfaceDecimalPrecision,!0,!0):"Cannot be determined";const t=this.ROOM.find((e=>e.id===parseInt(this.selectedBinder.id)));if(Fh.log("targetRoom"),Fh.log(t),this.selectedRoomId=t.id,t.surface){const e=je(t.surface,this.measureSystemContext.userUnit,"square meter","square foot",this.roomSurfaceDecimalPrecision);this.roomSurface.current.setValue(e),this.roomSurface.current.setInitialValue(e)}else this.roomSurface.current.setValue(""),this.roomSurface.current.setInitialValue("");let i=t.name;this.roomName.current.value=i,""!==t.name?this.roomNameSelectRef.current.setValue(i):this.roomNameSelectRef.current.setValue("None"),s.render((0,l.jsx)(gh,{ref:this.roomFloorTypesSelectionRef,disabled:!0,items:bo,onClickCallback:this.onRoomFloorTextureChange}),this.roomFloorTexturesComponentContainerRef.current,(()=>this.roomFloorTypesSelectionRef.current.setSelectedItem(t.floorTexture))),s.render((0,l.jsx)(bh,{ref:this.roomFloorTexturesRepeatComponentRef,onRepeatChangeCallback:this.onRoomFloorTextureRepeatChange,mainComponentThis:this}),this.roomFloorTexturesRepeatComponentContainerRef.current,(()=>this.roomFloorTexturesRepeatComponentRef.current.setValue(t.floorTextureRepeatCount)))}function Mh(e){const t=De(e.thick/this.meter,this.measureSystemContext.userUnit,"meter","metric"===this.measureSystemContext.userUnit?"centimeter":"inch",this.wallWidthDecimalPrecision,!1,!1,!0),i=De(Ce(e.start,e.end)/this.meter,this.measureSystemContext.userUnit,"meter","feet",this.wallLengthDecimalPrecision);this.wallWidth.current.value=t,this.wallWidthValue.current.textContent=t,this.wallWidthNumberSliderInput.current.setNumberInputInitialValues(t),this.wallLengthValue.current.textContent=i,this.wallLength.current.setValue(i),this.wallLength.current.setInitialValue(i),this.wallMaterialRef.current.setSelectedWallMaterialData(e),this.wallAlwaysHideRef.current.setSelectWallAlwaysHideStatus(e,t),this.wallCustomHeightRef.current.setSelectedCustomWallHeightData(e)}function Lh(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("text"===e.class)s.render((0,l.jsx)(yh,{targetObject2D:e,itemRotationValueRef:this.itemRotationValue,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.freeItemRotationsRef.current),s.render((0,l.jsx)(Ch,{targetObject2D:e,textItemFontSizeValueRef:this.textItemFontSizeValue,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.freeItemTextToolsRef.current),s.unmountComponentAtNode(this.freeItemDimensionsRef.current),s.unmountComponentAtNode(this.freeItemPositionsRef.current),s.unmountComponentAtNode(this.freeItemTypesSelectionBoxRef.current);else{if("lightSource"===e.type)s.unmountComponentAtNode(this.freeItemDimensionsRef.current),s.unmountComponentAtNode(this.freeItemPositionsRef.current),s.unmountComponentAtNode(this.freeItemRotationsRef.current);else{if(s.render((0,l.jsx)(yh,{ref:this.activeItemRotationsRef,targetObject2D:e,itemRotationValueRef:this.itemRotationValue,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.freeItemRotationsRef.current),s.render((0,l.jsx)(vh,{targetObject2D:e,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.freeItemDimensionsRef.current),this.floorplan3DComponent.current){const t=this.floorplan3DComponent.current.userInteractionCurrentController.selectedObject;this.freeItemMaterialsRef.current&&s.render((0,l.jsx)(Ph,{ref:this.freeItemMaterialsComponentRef,selectedItem:t,mainComponentThis:this,colorPickerBoxContainer:this.freeItemMaterialsRef.current,targetObject2D:e},(new Date).getTime()),this.freeItemMaterialsRef.current)}else s.unmountComponentAtNode(this.freeItemMaterialsRef.current);Pi.includes(this.getObjectItemType(e.type))?s.unmountComponentAtNode(this.freeItemPositionsRef.current):s.render((0,l.jsx)(Th,{ref:this.activeItemPositionsRef,targetObject2D:e,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.freeItemPositionsRef.current)}const o=this.folderNameToModelsMapping[this.getObjectFolderName(e.type)];s.render((0,l.jsx)(xt,{children:(0,l.jsx)(mh,{disabled:!0,containerClasses:"right-box-floorplan-item-type-selection-container",gridContainerClasses:"single-column",initialSelectedItemModel:e.type,items:[{...o,models:o.models.filter((t=>t===e.type))}],onFloorplanItemSelectionCallback:t=>{e.type=t,e.update(),this.saveNeeded=!0,this.save(!1,!1)},mainComponentThis:this},(new Date).getTime())}),this.freeItemTypesSelectionBoxRef.current),s.unmountComponentAtNode(this.freeItemTextToolsRef.current),this.freeItemMirroredRef.current&&this.freeItemMirroredRef.current.setSelectedObjectData(e),this.freeItemToolsCustomSetter(e,t)}}function Rh(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=this.folderNameToModelsMapping[this.getObjectFolderName(e.type)];if(s.render((0,l.jsx)(xt,{children:(0,l.jsx)(mh,{disabled:!0,containerClasses:"right-box-floorplan-item-type-selection-container",gridContainerClasses:"single-column",initialSelectedItemModel:e.type,items:[{...o,models:o.models.filter((t=>t===e.type))}],onFloorplanItemSelectionCallback:t=>{e.type=t,this.saveNeeded=!0,this.save(!1,!1)},mainComponentThis:this},(new Date).getTime())}),this.wallItemTypesSelectionBoxRef.current),s.render((0,l.jsx)(vh,{targetObject2D:e,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.wallItemDimensionsRef.current),this.floorplan3DComponent.current){const t=this.floorplan3DComponent.current.userInteractionCurrentController.selectedObject;this.wallItemMaterialsRef.current&&s.render((0,l.jsx)(Ph,{ref:this.wallItemMaterialsComponentRef,selectedItem:t,mainComponentThis:this,colorPickerBoxContainer:this.wallItemMaterialsRef.current,targetObject2D:e},(new Date).getTime()),this.wallItemMaterialsRef.current)}else s.unmountComponentAtNode(this.wallItemMaterialsRef.current);Pi.includes(this.getObjectItemType(e.type))?s.unmountComponentAtNode(this.wallItemPositionsRef.current):s.render((0,l.jsx)(Th,{ref:this.activeItemPositionsRef,targetObject2D:e,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.wallItemPositionsRef.current),this.isWindowObject(e.type)?s.render((0,l.jsx)(Ih,{mainComponentThis:this,windowObj2D:e},(new Date).getTime()),this.windowRotationOptionsContainerRef.current):s.unmountComponentAtNode(this.windowRotationOptionsContainerRef.current),this.wallItemHideWithWallRef.current.setSelectedObjectData(e),this.wallItemToolsCustomSetter(e,t)}var Bh=i(1317);class Ah extends o.Component{constructor(e){var t;super(e),t=this,this.generateFloorplanImageCanvas=e=>{const t=this.props.mainComponentThis.qSVG.create("none","svg",{preserveAspectRatio:"xMidYMin slice"}),i=this.props.mainComponentThis.qSVG.create("none","g");return this.props.mainComponentThis.floorplanFloorsData.forEach((e=>{this.props.mainComponentThis.setWallsChildParentValues(e.wallData),this.props.mainComponentThis.editor.wallsComputing(e.wallData,!1,i,!1)})),t.appendChild(i),this.props.mainComponentThis.downloadSvg(!1,!1,!0,e,!1,{svgElement:t})},this.addFloorplanImageLayer=e=>{this.currentFloorplanImageCanvasCoordinates=this.calculateFloorplanImageCanvasCoordinatesForBearing(this.state.edit.find((e=>"bearing_angle"===e.field)).value),this._map.addSource("floorplan-image-source",{type:"canvas",canvas:this.floorplanCanvas,coordinates:this.currentFloorplanImageCanvasCoordinates,animate:!1}),this._map.addLayer({id:"floorplan-image-layer",type:"raster",source:"floorplan-image-source"}),e&&this.setState({floorplanImageLayerAdded:!0},(()=>this.focusFloorplanImageCanvas(!1)))},this.focusFloorplanImageCanvas=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!t.floorplanImageCanvasCurrentBearingPolygon||e&&!t.isStyleChangeAllowed()||t.setState({mapCenter:(0,aa.Z)(t.floorplanImageCanvasCurrentBearingPolygon).geometry.coordinates},(()=>{pe(t._map,t.currentFloorplanImageCanvasCoordinates,Number(t.floorplanBearingSliderRef.current.value))}))},this.closeShowFloorplanOnMapModal=(e,t,i)=>{e&&this.props.mainComponentThis.showMapLayer2DInputRef.current.getCheckedStatus()&&s.unmountComponentAtNode(this.props.mainComponentThis.mapLayer2DContainerRef.current),X(this.props.containerRef.current,200,(()=>{s.unmountComponentAtNode(this.props.containerRef.current),e&&this.props.mainComponentThis.showMapLayer2DInputRef.current.getCheckedStatus()&&s.render((0,l.jsx)(_a,{ref:this.props.mainComponentThis.showMapLayer2D3DRef,is3D:!1,center:[16.8557,44.0462],floorplanGpsCoords:[t,i],onMapContextLoadedCallback:this.props.mainComponentThis.onMapContextLoadedCallback2D,preserveDrawingBuffer:!1,mapStylesChangeRef:this.props.mainComponentThis.mapStylesChangeRef,mainComponentThis:this.props.mainComponentThis}),this.props.mainComponentThis.mapLayer2DContainerRef.current)}),!1)},this.onMapZoom=()=>{this._map&&(this._zoom=this._map.getZoom())},this.onMapClick=(e,t)=>{if(this._map&&this.state.changeTopLeftGpsCoordinatesEnabled){const e=this.state.edit.map((e=>"gps_lat"===e.field?{...e,value:t.lngLat.lat.toString()}:"gps_long"===e.field?{...e,value:t.lngLat.lng.toString()}:{...e}));this.setState({edit:e},(()=>this.handleFloorplanImageCanvasCoordinateChange(t.lngLat.lng,t.lngLat.lat)))}},this.switchLayer=e=>()=>{if(this._map&&this.isStyleChangeAllowed()&&this.state.selectedMapStyle!==e&&this.mounted){let t=this.state.selectedMapStyle;this.setState({selectedMapStyle:e,mapStyleLoaded:!1},(()=>{this._map.getStyle().layers.forEach((e=>{this._map.removeLayer(e.id)}));const{callback:i,newStyle:o}=((e,t,i)=>{let o=null,s="mapbox/"+e;return"TERRAIN"!==e&&"TERRAIN"===t&&(i.setTerrain(null),i.removeSource("mapbox-dem")),"TERRAIN"===e&&(s="mapbox-map-design/ckhqrf2tz0dt119ny6azh975y",o=()=>{i.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),i.setTerrain({source:"mapbox-dem",exaggeration:1.5}),i.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,0],"sky-atmosphere-sun-intensity":15}})}),"BUILDINGS"===e&&(s="mapbox/light-v10",o=()=>{const e=i.getStyle().layers;let t;for(let i=0;i<e.length;i++)if("symbol"===e[i].type&&e[i].layout["text-field"]){t=e[i].id;break}i.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}},t)}),{callback:o,newStyle:s}})(e,t,this._map);this._map.setStyle("mapbox://styles/"+o,{diff:!1}),this._map.once("idle",(()=>{this.mounted&&this.setState({mapStyleLoaded:!0},(()=>{i&&i(),this.state.floorplanImageLayerAdded&&this.addFloorplanImageLayer(!1)}))}))}))}},this.isStyleChangeAllowed=()=>{if(this.state.mapStyleLoaded){const e=this._map.getStyle();let t=e&&e.layers;return t?this.state.floorplanImageLayerAdded&&!t.find((e=>"floorplan-image-layer"===e.id))?(Bh.log("False, nema floorplanImageCanvas layera"),!1):"BUILDINGS"!==this.state.selectedMapStyle||"BUILDINGS"===this.state.selectedMapStyle&&t.find((e=>"3d-buildings"===e.id))?"TERRAIN"!==this.state.selectedMapStyle||"TERRAIN"===this.state.selectedMapStyle&&t.find((e=>"sky"===e.id))&&e.sources["mapbox-dem"]?(Bh.log("Omogucena promjena stila"),!0):(Bh.log("False. nema terrain layera"),!1):(Bh.log("False. nema buildings layera"),!1):(Bh.log("Nema layera"),!1)}return Bh.log("Vanjski if. Nije loadan stil"),!1},this.calculateFloorplanImageCanvasCoordinatesForBearing=e=>{const t={pivot:[this.state.edit.find((e=>"gps_long"===e.field)).value,this.state.edit.find((e=>"gps_lat"===e.field)).value]};return this.floorplanImageCanvasCurrentBearingPolygon=(0,la.Z)(this.floorplanImageCanvasZeroBearingPolygon,e,t),this.floorplanImageCanvasCurrentBearingPolygon.geometry.coordinates[0].slice(0,-1)},this.handleFloorplanImageCanvasCoordinateChange=(e,t)=>{this.state.floorplanBearingAngleMechanismDisabled?this.createFloorplanImageCanvas(e,t,{floorplanBearingAngleMechanismDisabled:!1}):this.translateFloorplanImageCanvas(e,t)},this.createFloorplanImageCanvas=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;t.floorplanImageCanvasZeroBearingPolygon.geometry.coordinates=[[...de(i,e,t.floorplanDimensions.width,t.floorplanDimensions.height),[e,i]]],t.generateFloorplanImageCanvas(!t.state.showFloorplanImageBackground).then((e=>{let i=new Image;i.onload=()=>{t.state.showFloorplanImageBackground?t.floorplanWhiteBgImage=i:t.floorplanTransparentBgImage=i,t.floorplanCanvas.width=i.width,t.floorplanCanvas.height=i.height,t.floorplanCanvas.getContext("2d").drawImage(i,0,0),t.setState({...o,floorplanImageLoaded:!0,loading:!1,mapCenter:(0,aa.Z)(t.floorplanImageCanvasZeroBearingPolygon).geometry.coordinates},(()=>!!s&&s()))},i.onerror=e=>{t.setState({error:e,visibleErrorPopup:!0,loading:!1,mapCenter:(0,aa.Z)(t.floorplanImageCanvasZeroBearingPolygon).geometry.coordinates})},i.src=e}))},this.translateFloorplanImageCanvas=(e,t)=>{const i=q()(this.floorplanImageCanvasCurrentBearingPolygon.geometry.coordinates[0][0]),o=q()([e,t]),s=(0,ha.Z)(i,o),n=(0,ca.Z)(i,o);this.floorplanImageCanvasZeroBearingPolygon=(0,ra.Z)(this.floorplanImageCanvasZeroBearingPolygon,n,s),this.floorplanImageCanvasCurrentBearingPolygon=(0,ra.Z)(this.floorplanImageCanvasCurrentBearingPolygon,n,s),this.currentFloorplanImageCanvasCoordinates=this.floorplanImageCanvasCurrentBearingPolygon.geometry.coordinates[0].slice(0,-1),this._map.getSource("floorplan-image-source").setCoordinates(this.currentFloorplanImageCanvasCoordinates)},this.changeFloorplanImageCanvasImage=e=>{this._map.removeLayer("floorplan-image-layer"),this._map.removeSource("floorplan-image-source"),this.floorplanCanvas.width=e.width,this.floorplanCanvas.height=e.height,this.floorplanCanvas.getContext("2d").drawImage(e,0,0),this.addFloorplanImageLayer()},this.onChangeFloorplanImageCanvasBackgroundOptionClick=()=>{if(this.isStyleChangeAllowed()){let e=!0,t=!this.state.showFloorplanImageBackground;t?this.floorplanWhiteBgImage&&(e=!1):this.floorplanTransparentBgImage&&(e=!1),e?this.generateFloorplanImageCanvas(!t).then((e=>{let i=new Image;i.onload=()=>{t?this.floorplanWhiteBgImage=i:this.floorplanTransparentBgImage=i,this.changeFloorplanImageCanvasImage(i),this.setState({showFloorplanImageBackground:t})},i.onerror=e=>{this.setState({error:e,visibleErrorPopup:!0})},i.src=e})):(this.changeFloorplanImageCanvasImage(t?this.floorplanWhiteBgImage:this.floorplanTransparentBgImage),this.setState({showFloorplanImageBackground:t}))}},this.state={edit:null,originalData:{},floorplanImageLoaded:!1,floorplanImageLayerAdded:!1,floorplanNoInitialBearing:!1,loading:!0,error:null,floorplanLoadingError:null,tooltip:null,visibleErrorPopup:!1,mapCenter:[],selectedMapStyle:"light-v8",mapStyleLoaded:!0,changeTopLeftGpsCoordinatesEnabled:!1,changeBearingAngleEnabled:!1,floorplanGpsCoordinatesMechanismDisabled:!1,floorplanBearingAngleMechanismDisabled:!1,showFloorplanImageBackground:!0},this._map=null,this.zoomRange=4,this._zoom=9,this.mounted=!1,this.floorplanDimensions={width:0,height:0},this.floorplanImageCanvasZeroBearingPolygon={type:"Feature",geometry:{type:"Polygon",coordinates:[]},properties:{}},this.getBaseStations=!1,this.floorplanGeneral=null,this.floorplanImageCanvasCurrentBearingPolygon=null,this.currentFloorplanImageCanvasCoordinates=null,this.floorplanBearingNumberSliderInput=o.createRef(),this.floorplanBearingSliderRef=o.createRef(),this.floorplanCanvas=document.createElement("canvas"),this.floorplanWhiteBgImage=null,this.floorplanTransparentBgImage=null,this.addFloorplanImageLayer=this.addFloorplanImageLayer.bind(this),this.closeShowFloorplanOnMapModal=this.closeShowFloorplanOnMapModal.bind(this),this.onMapZoom=this.onMapZoom.bind(this),this.onMapClick=this.onMapClick.bind(this),this.switchLayer=this.switchLayer.bind(this),this.isStyleChangeAllowed=this.isStyleChangeAllowed.bind(this),this.calculateFloorplanImageCanvasCoordinatesForBearing=this.calculateFloorplanImageCanvasCoordinatesForBearing.bind(this),this.focusFloorplanImageCanvas=this.focusFloorplanImageCanvas.bind(this),this.handleFloorplanImageCanvasCoordinateChange=this.handleFloorplanImageCanvasCoordinateChange.bind(this),this.createFloorplanImageCanvas=this.createFloorplanImageCanvas.bind(this),this.translateFloorplanImageCanvas=this.translateFloorplanImageCanvas.bind(this),this.changeFloorplanImageCanvasImage=this.changeFloorplanImageCanvasImage.bind(this),this.onChangeFloorplanImageCanvasBackgroundOptionClick=this.onChangeFloorplanImageCanvasBackgroundOptionClick.bind(this),this.generateFloorplanImageCanvas=this.generateFloorplanImageCanvas.bind(this)}componentWillUnmount(){this.mounted=!1}componentDidMount(){this.mounted=!0,this.props.floorplanID?C.get.call(this,"/klet3d/entity/".concat(this.props.floorplanID,"/").concat(this.props.mainComponentThis.props.licenseKey),(e=>{if(e&&e.length>0){this.floorplanGeneral=e[0].plan_general;const o=this.props.mainComponentThis.getFloorplanGpsLongitude(e[0].plan_general),s=this.props.mainComponentThis.getFloorplanGpsLatitude(e[0].plan_general),n=this.props.mainComponentThis.getFloorplanBBoxCoords();this.floorplanDimensions.width=j(n.width/this.props.mainComponentThis.meter,2),this.floorplanDimensions.height=j(n.height/this.props.mainComponentThis.meter,2);const a=e[0].plan_general.floorplan_bearing||pi.find((e=>"bearing_angle"===e.field)).defaultValue,r=(t={gps_lat:s&&s.toString(),gps_long:o&&o.toString(),bearing_angle:a},i=pi,Object.entries(t).map((e=>{let[t,o]=e;return{...i.find((e=>e.field===t)),value:void 0!==o&&null!==o?o:""}})));F(s)||F(o)?N.call(this,"mapCenter",this.props.setResponseError,(()=>this.setState({edit:r,originalData:r,loading:!1,floorplanNoInitialBearing:!0,floorplanBearingAngleMechanismDisabled:!0},(()=>{this.floorplanBearingSliderRef.current.value=a,this.floorplanBearingNumberSliderInput.current.setNumberInputInitialValues(a)})))):this.createFloorplanImageCanvas(o,s,{edit:r,originalData:r,floorplanNoInitialBearing:!e[0].plan_general.floorplan_bearing&&0!==e[0].plan_general.floorplan_bearing},(()=>{this.floorplanBearingSliderRef.current.value=a,this.floorplanBearingNumberSliderInput.current.setNumberInputInitialValues(a)}))}var t,i})):this.setState({loading:!1,floorplanLoadingError:"Floorplan couldn't be found. Please save it first then try again."})}render(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(pt,{onCloseModalClick:()=>this.closeShowFloorplanOnMapModal(!1),children:(0,l.jsx)("div",{className:"layout__section",style:{height:"auto",maxHeight:"85vh"},children:(()=>this.state.loading?(0,l.jsx)(Mt,{center:!0}):this.state.floorplanLoadingError?(0,l.jsx)("p",{className:"show-floorplan-on-map-error",children:this.state.floorplanLoadingError}):(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("section",{className:"show-floorplan-on-map-form-controls-container",children:this.state.edit&&(0,l.jsxs)(o.Fragment,{children:[(0,l.jsxs)("div",{className:"form-controls-container",children:[(0,l.jsx)("div",{className:"form-container",children:this.state.edit.slice(0,2).map((e=>(0,l.jsx)(ut,{disabled:!0,label:e.label,placeholder:e.placeholder,item:e,value:e.value||"",type:e.type,error:e.error},e.label)))}),(0,l.jsx)(Et.Z,{theme:Yt,children:(0,l.jsx)("div",{title:"Change floorplan coordinates",children:(0,l.jsx)(qt.Z,{disabled:!0,checked:this.state.changeTopLeftGpsCoordinatesEnabled})})})]}),(0,l.jsxs)("div",{className:"form-controls-container",children:[(0,l.jsx)("div",{className:"form-container",children:(0,l.jsx)(fn,{disabled:!0,ref:this.floorplanBearingNumberSliderInput,sliderInputRef:this.floorplanBearingSliderRef,valueLabelText:pi.find((e=>"bearing_angle"===e.field)).label,sliderStep:1,minValue:0,maxValue:359,defaultValue:pi.find((e=>"bearing_angle"===e.field)).defaultValue})}),(0,l.jsx)(Et.Z,{theme:Yt,children:(0,l.jsx)("div",{title:"Change floorplan bearing",children:(0,l.jsx)(qt.Z,{disabled:!0,checked:this.state.changeBearingAngleEnabled})})})]})]})}),(this.state.changeTopLeftGpsCoordinatesEnabled||this.state.changeBearingAngleEnabled)&&(0,l.jsx)("p",{className:"above-map-note",children:this.state.changeTopLeftGpsCoordinatesEnabled?"Select coordinates of the top left corner of your floorplan":"Rotate floorplan around the top left corner"}),(0,l.jsxs)("section",{className:"layout__section map",children:[(0,l.jsx)("div",{className:"layer-change show-floorplan-on-map map-feature-icon svg-center-inside-container"}),(0,l.jsx)("div",{className:"layer-dropdown",style:{top:105},children:(0,l.jsx)(Xt,{mapStyles:mi,switchLayer:this.switchLayer,selectedMapStyle:this.state.selectedMapStyle})}),this.state.floorplanImageLayerAdded&&(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{className:"last-point-center show-floorplan-on-map map-feature-icon svg-center-inside-container",onClick:this.focusFloorplanImageCanvas,children:(0,l.jsx)(za,{})}),(0,l.jsx)("div",{className:"feature-info",children:(0,l.jsx)("div",{children:"Focus floorplan image"})}),(0,l.jsx)("div",{className:"floorplan-image-background-option map-feature-icon svg-center-inside-container",onClick:this.onChangeFloorplanImageCanvasBackgroundOptionClick,children:this.state.showFloorplanImageBackground?(0,l.jsx)("svg",{viewBox:"0 0 512.000000 512.000000",preserveAspectRatio:"xMidYMid meet",children:(0,l.jsx)("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:(0,l.jsx)("path",{d:"M2448 4784 c-97 -23 -157 -60 -248 -153 -116 -119 -245 -286 -415\r -541 -564 -845 -870 -1711 -817 -2305 45 -495 297 -921 710 -1198 164 -110\r 377 -198 585 -239 160 -32 434 -32 593 0 579 116 1039 517 1223 1070 58 175\r 76 294 75 512 0 154 -5 222 -22 324 -93 545 -363 1176 -767 1796 -158 243\r -378 526 -488 627 -113 104 -276 145 -429 107z m178 -320 c65 -31 283 -302\r 471 -584 296 -443 562 -1006 663 -1400 6 -25 13 -53 16 -62 5 -17 -58 -18\r -1215 -18 -672 0 -1221 1 -1221 3 0 2 15 57 34 123 119 418 342 886 633 1329\r 192 291 418 575 484 608 43 21 92 21 135 1z"})})}):(0,l.jsx)("svg",{viewBox:"0 0 512.000000 512.000000",preserveAspectRatio:"xMidYMid meet",children:(0,l.jsx)("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:(0,l.jsx)("path",{d:"M2448 4784 c-97 -23 -157 -60 -248 -153 -116 -119 -245 -286 -415\r\n-541 -564 -845 -870 -1711 -817 -2305 65 -721 582 -1295 1295 -1437 160 -32\r\n434 -32 593 0 579 116 1039 517 1223 1070 58 175 76 294 75 512 0 154 -5 222\r\n-22 324 -93 545 -363 1176 -767 1796 -158 243 -378 526 -488 627 -113 104\r\n-276 145 -429 107z m178 -320 c65 -31 283 -302 471 -584 296 -443 562 -1006\r\n663 -1400 6 -25 13 -53 16 -62 5 -17 -58 -18 -1215 -18 -672 0 -1221 1 -1221\r\n3 0 2 15 57 34 123 119 418 342 886 633 1329 192 291 418 575 484 608 43 21\r\n92 21 135 1z m1210 -2431 c11 -71 -4 -287 -25 -383 -99 -438 -410 -789 -831\r\n-938 -152 -53 -237 -67 -425 -66 -137 0 -187 5 -261 22 -260 61 -452 168 -635\r\n351 -188 188 -297 386 -350 636 -22 107 -35 288 -25 368 l7 57 1269 0 1269 0\r\n7 -47z"})})})}),(0,l.jsx)("div",{className:"feature-info",style:{width:this.state.showFloorplanImageBackground?150:180},children:(0,l.jsx)("div",{children:this.state.showFloorplanImageBackground?"White background":"Transparent background"})})]}),(0,l.jsx)("div",{className:"glamos-bottom-left-logo",children:(0,l.jsx)("img",{alt:"Glamos logo",src:"dark-v10"===this.state.selectedMapStyle||"satellite-v9"===this.state.selectedMapStyle||"TERRAIN"===this.state.selectedMapStyle?Fa:a})}),(0,l.jsxs)(Qt,{preserveDrawingBuffer:!0,mapStyle:"mapbox://styles/mapbox/light-v8",center:this.state.mapCenter,zoom:[this._zoom],minZoom:3,maxZoom:15,onZoom:this.onMapZoom,onClick:this.onMapClick,children:[(0,l.jsx)(Zt.Ly,{className:"zoom-control"}),(0,l.jsx)(Zt.AI,{className:"rotation-control"}),(0,l.jsx)(Zt.jf,{className:"scale-control",measurement:"metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"km":"mi"}),(0,l.jsx)(Zt.X$.Consumer,{children:e=>{this._map=e,this.state.floorplanImageLoaded&&!this.state.floorplanImageLayerAdded&&(this._map.setMaxZoom(22),this.addFloorplanImageLayer(!0))}})]})]}),(0,l.jsx)("div",{className:"button-centered-container",style:{marginTop:"1rem"},children:(0,l.jsx)(Ge,{type:"dull",disabled:!0,children:"Save changes"})})]}))()})}),(0,l.jsx)(ei,{visible:this.state.visibleErrorPopup,loading:!1,error:this.state.error,singleButton:!0,statePropertyName:"visibleErrorPopup",setChoice:this.setState.bind(this)})]})}}const Wh=Ah;var Vh=i(1317);function Nh(e,t){e&&(window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("keydown",this.handleKeyDown,{capture:!0})),t&&(window.addEventListener("resize",this.handleWindowResize),window.addEventListener("keydown",this.handleKeyDown,{capture:!0}))}function Eh(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isFloorplanNoWalls())this.setShow3DStatus(!1,(()=>{!e&&s.unmountComponentAtNode(this.loadingComponentContainer.current),K(this.showFloorplanNoWallsErrorModal.current,this.modalTimeout)}));else{this.hideActiveRightBox();const t=()=>{window.removeEventListener("keydown",this.handleKeyDown,{capture:!0}),!0!==this.state.show3D?this.setShow3DStatus(!0,(()=>this.floorplan3DComponent.current.onDataLoadedCallback())):this.floorplan3DComponent.current.onDataLoadedCallback()};e?s.render((0,l.jsx)(xn,{}),this.loadingComponentContainer.current,(()=>t())):t()}}function zh(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.panel.current.querySelectorAll(".panel-icon-button-container");if(e===this.smallScreenMinimizedPanelSize){const e=this.panel.current.querySelectorAll(".panel-action-button > button");for(let t of e)t.classList.add("small-screen-minimized"),t.classList.add("floorplan")}else{const e=this.panel.current.querySelectorAll(".panel-action-button > button");for(let t of e)t.classList.remove("small-screen-minimized"),t.classList.remove("floorplan")}this.panel.current.classList.add("panel-small-screen-minimized"),this.panelControl.current.title="Show panel",this.boxPlanName.current.style.paddingLeft="".concat(e+30,"px"),this.boxInfo.current.style.left="".concat(e+30,"px"),this.panel.current.style.width="".concat(e,"px"),t&&(this.panelControl.current.style.transform="translateX(".concat(e,"px)")),this.panelControl.current.children[0].style.transform="rotate(180deg)",this.panel.current.addEventListener("transitionend",(()=>{this.panel.current.classList.add("panel-centered");for(let e of i)e.classList.add("panel-icon-button-no-text"),e.classList.remove("fully");this.layersListArrowRef.current.classList.add("hidden");const t=this.panel.current.querySelectorAll(".checked-input-container");for(let e of t)e.classList.add("checked-input-container-no-label");document.querySelector(".show-map-switch-container.panel2D").classList.add("hide-label"),this.uploadImageFloorplanSettingsIconRef.current.classList.add("hide"),e===this.smallScreenMinimizedPanelSize?this.uploadFloorplanPanelButtonContainer.current.style.flexWrap="wrap":this.uploadFloorplanPanelButtonContainer.current.style.flexWrap="nowrap",e===this.smallScreenMinimizedPanelSize?this.uploadFloorplanImageStatusContainerRef.current.classList.add("small-screen-minimized"):this.uploadFloorplanImageStatusContainerRef.current.classList.remove("small-screen-minimized"),this.floorplanFloorsPanelBoxContainerRef.current.classList.add("hide-labels")}),{once:!0}),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.hidePanel()}function Hh(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.panel.current.querySelectorAll(".panel-icon-button-container");this.isSmallScreen()&&this.hideRightBox(),this.panel.current.classList.remove("panel-small-screen-minimized");const o=this.panel.current.querySelectorAll(".panel-action-button > button");for(let s of o)s.classList.remove("small-screen-minimized"),s.classList.remove("floorplan");this.panelControl.current.title="Hide panel",this.boxPlanName.current.style.paddingLeft="".concat(e+10,"px"),this.boxInfo.current.style.left="".concat(e+30,"px"),this.panel.current.style.width="".concat(e,"px"),this.panel.current.classList.remove("panel-centered"),t&&(this.panelControl.current.style.transform="translateX(".concat(e,"px)")),this.panelControl.current.children[0].style.transform="rotate(0deg)",this.panel.current.addEventListener("transitionend",(()=>{for(let e of i)e.classList.remove("panel-icon-button-no-text"),e.classList.add("fully");this.layersListArrowRef.current.classList.remove("hidden");const t=this.panel.current.querySelectorAll(".checked-input-container");for(let e of t)e.classList.remove("checked-input-container-no-label");document.querySelector(".show-map-switch-container.panel2D").classList.remove("hide-label"),e!==this.smallScreenMaximizedPanelSize&&this.uploadImageFloorplanSettingsIconRef.current.classList.remove("hide"),this.uploadFloorplanPanelButtonContainer.current.style.flexWrap="nowrap",this.uploadFloorplanImageStatusContainerRef.current.classList.remove("small-screen-minimized"),this.floorplanFloorsPanelBoxContainerRef.current.classList.remove("hide-labels")}),{once:!0})}function Gh(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isPanelMaximized()){const t=this.isSmallScreen()?this.smallScreenMinimizedPanelSize:this.bigScreenMinimizedPanelSize;this.minimizePanel(t,e)}else{const t=this.isSmallScreen()?this.smallScreenMaximizedPanelSize:this.bigScreenMaximizedPanelSize;this.maximizePanel(t,e)}}function Uh(e){this.resetKlet3DBinderParams(),this.resetSelectedObjectMaterial(),this.foncButton("select_mode"),this.boxInfo.current.innerHTML="Select mode",this.translateRightBox(e.current,this.rightBoxWidth,!1)}function qh(){this.foncButton("select_mode"),this.boxInfo.current.innerHTML="Select mode",this.translateRightBox(this.floorParameters.current,250,!1)}function Yh(){this.foncButton("select_mode"),this.boxInfo.current.innerHTML="Select mode",this.translateRightBox(this.wallTools.current,this.rightBoxWidth,!1),this.wallMaterialRef.current.resetWallMaterialData(),this.wallAlwaysHideRef.current.resetWallAlwaysHideStatus(),this.wallCustomHeightRef.current.resetCustomWallHeightData()}function Kh(){this.resetKlet3DBinderParams(),this.resetSelectedObjectMaterial(),this.foncButton("select_mode"),this.boxInfo.current.innerHTML="Select mode",this.translateRightBox(this.wallItemToolsRef.current,this.rightBoxWidth,!1),this.rib()}function Xh(){let e=this.linRef.current.getBoundingClientRect();if(this.taille_h!==e.height||this.taille_w!==e.width){Vh.log("Window resize"),this.taille_w=e.width,this.taille_h=e.height,this.offset={left:e.left,top:e.top,scrollY:window.scrollY},this.determineMaxZoomInLevel(),this.showHideLeftRightBoxes(),this.handleRightControlsBoxResize(),this.width_viewbox=this.taille_w,this.height_viewbox=this.taille_h,this.ratio_viewbox=this.height_viewbox/this.width_viewbox,this.zoomFactor=1,this.zoom=this.defaultZoomLevel,this.centerAndShowFloorplanAndUploadedFloorplanImage(!0);const t=this.zoom-this.defaultZoomLevel;this.zoomToSpecificLevel(t>0?"zoomin":"zoomout",Math.abs(t)),this.drawingAreaPopupActive&&this.drawingAreaPopupZoomTranslateControl(),this.setSvgViewBoxes(),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.onWindowResize()}}function Zh(e){if("INPUT"!==e.target.nodeName&&"TEXTAREA"!==e.target.nodeName&&!e.repeat)if(Vh.log("Key down"),e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)!e.ctrlKey||e.altKey||e.metaKey||e.shiftKey||Vh.log("Ctrl key combos");else if(Vh.log("Single key"),"ArrowLeft"===e.key)this.onZoomButonClick("zoomleft");else if("ArrowUp"===e.key)this.onZoomButonClick("zoomtop");else if("ArrowRight"===e.key)this.onZoomButonClick("zoomright");else if("ArrowDown"===e.key)this.onZoomButonClick("zoombottom");else if("+"===e.key)this.onZoomButonClick("zoomin");else if("-"===e.key)this.onZoomButonClick("zoomout");else if("Escape"===e.key)this.action=0,"select_mode"!==this.mode&&(Vh.log("On escape binder"),Vh.log(this.binder),this.removeBinder(),this.cursor("default"),this.boxInfo.current.innerHTML="Select mode",this.foncButton("select_mode")),Vh.log("Escape pressed"),this.hideActiveRightBox(),this.removeSelectedBinder();else if("Delete"===e.key){Vh.log("delete pressed");let e=ae();if(Vh.log("Queried element"),Vh.log(e),e){let t=e.querySelector(".button--type-delete");Vh.log("Delete button"),Vh.log(t),t.click()}}}function Jh(){this.showRib?(X(this.boxScale.current,this.othersTimeout,null,!1,!0),X(this.boxRib.current,this.othersTimeout,null,!1),this.showRibRef.current.checked=!1,this.showRib=!1):(K(this.boxScale.current,this.othersTimeout,null,"inline",!1),K(this.boxRib.current,this.othersTimeout,null,"inline",!1),this.showRibRef.current.checked=!0,this.showRib=!0)}function Qh(){this.showBoxGridChecked?(this.showBoxGridChecked=!1,this.showBoxGrid.current.checked=!1,X(this.boxGridRef.current,this.othersTimeout,null,!1)):(this.showBoxGridChecked=!0,this.showBoxGrid.current.checked=!0,K(this.boxGridRef.current,this.othersTimeout,null,"inline",!1))}function $h(){this.removeSelectedBinder(),this.showMapLayer2DInputRef.current.getCheckedStatus()?(this.showMapLayer2DInputRef.current.setCheckedStatus(!1),s.unmountComponentAtNode(this.mapLayer2DContainerRef.current)):this.isFloorplanNoWalls()?(this.showMapLayer2DInputRef.current.setCheckedStatus(!1),K(this.showFloorplanNoWallsErrorModal.current,this.modalTimeout)):C.get.call(this,"/klet3d/entity/".concat(this.getFloorplanID(),"/").concat(this.props.licenseKey),(e=>{e&&e.length>0?F(this.getFloorplanGpsLatitude(e[0].plan_general))&&F(this.getFloorplanGpsLongitude(e[0].plan_general))?(this.showMapLayer2DInputRef.current.setCheckedStatus(!1),this.onFloorplanGpsCoordsClick()):(this.floorplanGeneral=e[0].plan_general,this.showMapLayer2DInputRef.current.setCheckedStatus(!0),s.render((0,l.jsx)(_a,{ref:this.showMapLayer2D3DRef,is3D:!1,center:[16.8557,44.0462],floorplanGpsCoords:[this.getFloorplanGpsLongitude(e[0].plan_general),this.getFloorplanGpsLatitude(e[0].plan_general)],onMapContextLoadedCallback:this.onMapContextLoadedCallback2D,preserveDrawingBuffer:!1,mapStylesChangeRef:this.mapStylesChangeRef,mainComponentThis:this}),this.mapLayer2DContainerRef.current)):(this.showMapLayer2DInputRef.current.setCheckedStatus(!1),this.boxInfo.current.innerHTML="There is no floorplan with specified id")}))}function ec(){const e=this.ROOM.find((e=>e.id===this.selectedRoomId));this.updateSelectedRoomFill(e.floorTexture,e.floorTextureRepeatCount),this.translateRightBox(this.roomTools.current,this.rightBoxWidth,!1),this.roomNameDropdownMenu.current.classList.remove("show"),this.boxInfo.current.innerHTML="Select mode",this.foncButton("select_mode")}function tc(e){this.zoom_maker(e,!this.showMapLayer2D3DRef.current||"zoomin"!==e&&"zoomout"!==e?this.zoomXMove:this.zoomXMoveOnMapScaleFactor*this.zoomXMove,this.zoomXView)}function ic(){this.isFloorplanNoWalls()?K(this.showFloorplanNoWallsErrorModal.current,this.modalTimeout):K(this.showFloorplanOnMapContainerRef.current,200,(()=>{s.render((0,l.jsx)(Wh,{floorplanID:this.getFloorplanID(),containerRef:this.showFloorplanOnMapContainerRef,setResponseError:this.setState.bind(this),mainComponentThis:this}),this.showFloorplanOnMapContainerRef.current)}),"block",!1)}function oc(){this.floorHeight=Te(parseFloat(this.floorHeightInputRef.current.getValue()),this.context.userUnit,"metric"===this.context.userUnit?"centimeter":"inch","meter",!0)*this.meter}function sc(e){s.render((0,l.jsx)(xn,{}),this.loadingComponentContainer.current,(()=>{this.resetHistory(),this.floorplanFloorsPanelBoxRef.current.setSelectedFloorplanFloor(e,(()=>{this.loadFloorplanFloor(e),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.floorplanFloorsPanelSelection3DRef.current.handleFloorplanFloor3DChange(e.floorNumber),s.unmountComponentAtNode(this.loadingComponentContainer.current)}))}))}class nc extends o.Component{constructor(){super(),this.setSelectedWallMaterialData=e=>{this.setState({selectedWall:e,edit:_i.map((t=>({...t,value:e[t.field]})))},(()=>{this.state.edit.forEach((e=>{this[e.dropdownRefPropertyName].current.classList.remove("show"),this[e.selectRefPropertyName].current.setValue(z.isHexColor(e.value)?e.value:"Color"),this.drawWallSideMaterialPath(e)}))}))},this.drawWallSideMaterialPath=e=>{this.removeWallSidesColorLines(e);const{interiorLineCoords:t,exteriorLineCoords:i}=Me(this.state.selectedWall,this.props.mainComponentThis.isPointOnWallDecimalPrecision),o="interiorPlaneMaterial"===e.field?t:i;2===o.length&&this.props.mainComponentThis.qSVG.create(this.props.mainComponentThis.boxBind,"line",{id:e.field,x1:o[0].x,y1:o[0].y,x2:o[1].x,y2:o[1].y,"stroke-width":2,stroke:z.isHexColor(e.value)?"url(#".concat(e.value,")"):e.value})},this.removeWallSidesColorLines=e=>{const t=this.props.mainComponentThis.boxBind.current.querySelector("#".concat(e.field));t&&t.remove()},this.resetWallMaterialData=()=>{this.state.edit.forEach((e=>this.removeWallSidesColorLines(e))),this.setState({selectedWall:null,edit:[]})},this.onWallMaterialListItemClick=e=>(t,i)=>{let o;if(i>0){const e=ji[i];o=e.title}else o=e.defaultColorValue;this.props.mainComponentThis.selectedBinder.wall[e.field]=o,this.setState({edit:this.state.edit.map((t=>({...t,value:t.field===e.field?o:t.value})))},(()=>{this.drawWallSideMaterialPath(this.state.edit.find((t=>t.field===e.field))),this[e.selectRefPropertyName].current.setValue(i>0?o:"Color"),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}))},this.onWallSideColorChange=e=>t=>{this.setState({edit:this.state.edit.map((i=>({...i,value:i.field===e.field?t.target.value:i.value})))},(()=>{this.props.mainComponentThis.selectedBinder.wall[e.field]=t.target.value,this.props.mainComponentThis.boxBind.current.querySelector("#".concat(e.field)).setAttribute("stroke",t.target.value),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}))},this.state={selectedWall:null,edit:[]},_i.forEach((e=>{this[e.selectRefPropertyName]=o.createRef(),this[e.dropdownRefPropertyName]=o.createRef()})),this.setSelectedWallMaterialData=this.setSelectedWallMaterialData.bind(this),this.drawWallSideMaterialPath=this.drawWallSideMaterialPath.bind(this),this.removeWallSidesColorLines=this.removeWallSidesColorLines.bind(this),this.onWallMaterialListItemClick=this.onWallMaterialListItemClick.bind(this),this.onWallSideColorChange=this.onWallSideColorChange.bind(this)}render(){return(0,l.jsx)(xt,{label:"Wall material",children:this.state.edit.map(((e,t)=>(0,l.jsxs)("div",{className:"form-group inline",children:[(0,l.jsx)("div",{className:"label-container",children:(0,l.jsx)("label",{className:"label form-control label-form-control-cancel",children:e.label})}),(0,l.jsxs)("div",{className:"input-container",style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,l.jsx)(Ot,{disabled:!0,ref:this[e.selectRefPropertyName],dropdownMenuRef:this[e.dropdownRefPropertyName],containerClasses:"wall-material-select ".concat(0===t?"first":""),onListItemClick:this.onWallMaterialListItemClick(e),listItems:ji.map((e=>e.title))}),!z.isHexColor(e.value)&&(0,l.jsx)(Tt,{disabled:!0,containerStyle:{marginTop:"0.5rem",zIndex:0===t?3:1},item:e,onChange:this.onWallSideColorChange,boxContainer:this.props.mainComponentThis.wallTools.current})]})]},e.field)))})}}const ac=nc;class rc extends o.Component{constructor(){super(),this.setSelectWallAlwaysHideStatus=(e,t)=>{this.wallNotHiddenWidthValue=t,this.setState({alwaysHide:e.alwaysHide||!1})},this.resetWallAlwaysHideStatus=()=>{this.setState({alwaysHide:!1})},this.state={alwaysHide:!1},this.wallNotHiddenWidthValue=null,this.setSelectWallAlwaysHideStatus=this.setSelectWallAlwaysHideStatus.bind(this),this.resetWallAlwaysHideStatus=this.resetWallAlwaysHideStatus.bind(this)}render(){return(0,l.jsx)(xt,{children:(0,l.jsx)(ft,{disabled:!0,infoLabel:!0,infoLabelTitle:"Always hide",infoText:"Check this box to hide wall in 3D view.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:this.state.alwaysHide})})}}const lc=rc;class hc extends o.Component{constructor(){super(),this.setSelectedObjectData=e=>{this.selectedObject2D=e,this.setState({checked:e.additionalParams.hideWithWall})},this.onWallItemHideWithWallChange=()=>{this.selectedObject2D.additionalParams.hideWithWall=!this.state.checked,this.setState({checked:this.selectedObject2D.additionalParams.hideWithWall}),this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.updateWallsVisibility(),this.props.mainComponentThis.save(!1,!0)},this.state={checked:!0},this.selectedObject2D=null,this.setSelectedObjectData=this.setSelectedObjectData.bind(this),this.onWallItemHideWithWallChange=this.onWallItemHideWithWallChange.bind(this)}render(){return(0,l.jsx)(xt,{children:(0,l.jsx)(ft,{disabled:!0,infoLabel:!0,infoLabelTitle:"Hide with wall",infoText:"Check this box to hide the object along with the wall.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:this.state.checked,onChange:this.onWallItemHideWithWallChange})})}}const cc=hc;class dc extends o.Component{constructor(){super(),this.setSelectedCustomWallHeightData=e=>{const t=this.props.mainComponentThis.convertSvgToValueUnits(e.wallHeight,"centimeter","inch",this.props.mainComponentThis.wallHeightDecimalPrecision);this.wallCustomHeightRef.current.setValue(t),this.wallCustomHeightRef.current.setInitialValue(t)},this.resetCustomWallHeightData=()=>{this.wallCustomHeightRef.current.setValue(""),this.wallCustomHeightRef.current.setInitialValue("")},this.onWallCustomHeightInputChange=()=>{const e=this.props.mainComponentThis.convertValueToSvgUnits(parseFloat(this.wallCustomHeightRef.current.getValue()));this.props.mainComponentThis.selectedBinder.wall.wallHeight=e,this.props.mainComponentThis.save(!1,!0)},this.wallCustomHeightRef=o.createRef(),this.wallCustomHeightInitialValue=null,this.setSelectedCustomWallHeightData=this.setSelectedCustomWallHeightData.bind(this),this.resetCustomWallHeightData=this.resetCustomWallHeightData.bind(this),this.onWallCustomHeightInputChange=this.onWallCustomHeightInputChange.bind(this)}render(){return(0,l.jsx)(xt,{label:"Wall height(".concat("metric"===this.props.mainComponentThis.context.userUnit?"cm":"in",")"),children:(0,l.jsx)(at,{ref:this.wallCustomHeightRef,disabled:!0,title:"Set custom wall height",inputStep:Math.pow(10,-this.props.mainComponentThis.wallHeightDecimalPrecision),inputMin:1,inputMax:this.props.mainComponentThis.wallHeightMaxValue,onInputValueChanged:this.onWallCustomHeightInputChange})})}}const pc=dc;var mc=i(8847);const uc=class{constructor(e,t,i,o){if(this.binderIDPropertyName=o.connectorIDbinderIDPropertyName,this[this.binderIDPropertyName]=e[this.binderIDPropertyName],this.objID=t,this.params={},i&&(s=i,0!==Object.keys(s).length))this.params=i;else if(this.objID.length>0){let e=o.OBJDATA.find((e=>e.id===this.objID[0].id));if(e){const t=o.getKlet3DBinderParamsDefaultValues(e);t&&(this.params=t)}}var s}};var gc=i(9325),fc=i(3284),bc=i(6433);const wc=e=>{const t=e.entity_id.split(".")[0];return"sensor"===t?"sensor":"input_boolean"===t||"binary_sensor"===t?"doorWindow":"light"===t||"switch"===t?"lights":"fan"===t?"fan":"cover"===t?"cover":"binary_sensor"===t?"presence":"other"},Cc=["air_quality","alarm_control_panel","binary_sensor","button","calendar","camera","climate","cover","date","datetime","device_tracker","event","fan","humidifier","image","lawn_mower","light","lock","media_player","number","remote","scene","select","sensor","siren","stt","switch","sun","text","time","todo","tts","update","vacuum","valve","wake_word","water_heater","weather","zone"],xc=["input_boolean","binary_sensor","light","sensor","switch","fan","cover"];var yc=i(7267),Sc=i(1317);class vc extends o.Component{constructor(e){super(),this.closePopup=()=>{this.props.floorplan3DThis&&this.props.floorplan3DThis.userInteractionCurrentController.setSelectedObject(null),X(this.props.containerRef.current,200,(()=>{s.unmountComponentAtNode(this.props.containerRef.current)}),!1)},this.handleBinderCheckboxClick=e=>{const t=this.state.selectedBinder&&this.state.selectedBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]?null:e;let i=!1;i=this.state.initialBinder?!t||t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]!==this.state.initialBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]:!!t,this.setState({selectedBinder:t,needsSave:i})},this.handlePageChange=(e,t)=>{this.setState({currentPage:t})},this.updateSelectedBinderData=e=>{const t=this.props.mainComponentThis.getObjectConnectorKlet3DBinderData(this.state.selectedBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]);if(t){const i=e.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.state.selectedBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));i?i.objID.push({id:this.props.obj2D.id}):e.push(new uc(t,[{id:this.props.obj2D.id}],null,this.props.mainComponentThis))}},this.onSaveChangesClick=()=>{this.setState({loading:!0});let e=this.props.mainComponentThis.klet3DLastSavedData.map((e=>({...e})));if(this.state.initialBinder){const t=e.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.state.initialBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));t&&(t.objID=t.objID.filter((e=>e.id!==this.props.obj2D.id))),this.state.selectedBinder&&this.updateSelectedBinderData(e),e=e.filter((e=>e.objID.length>0))}else{if(!this.state.selectedBinder)return void this.closePopup();this.updateSelectedBinderData(e)}C.post.call(this,"/klet3d/entity/".concat(this.props.mainComponentThis.props.floorplanID,"/").concat(this.props.mainComponentThis.props.licenseKey),{entitydata:e},(t=>{if(Sc.log("Klet post API response"),Sc.log(t),this.props.mainComponentThis.klet3DLastSavedData=e,this.props.floorplan3DThis){for(let i=0;i<e.length;i++){const t=this.props.floorplan3DThis.getObjectConnectorParamsData(e[i][this.props.mainComponentThis.connectorIDbinderIDPropertyName]);if(t){const o=this.props.floorplan3DThis.getIsFixed2DObjectsValue(t);let s=this.props.floorplan3DThis.objectConnectorsArray.find((t=>t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e[i][this.props.mainComponentThis.connectorIDbinderIDPropertyName]));if(s){let t=[];for(let o=0;o<s.bindedObjects.length;o++)e[i].objID.find((e=>e.id===s.bindedObjects[o].object2D.id))||t.push(o);t.sort(((e,t)=>t-e));for(let e=0;e<t.length;e++)Sc.log("removeBindedObject"),s.removeBindedObject(s.bindedObjects[t[e]]);for(let n=0;n<e[i].objID.length;n++)if(!s.bindedObjects.find((t=>t.object2D.id===e[i].objID[n].id)))if(o){let t;for(let o=0;o<this.props.floorplan3DThis.floorplan3DViewScene.children.length;o++)if(this.props.floorplan3DThis.floorplan3DViewScene.children[o].object2D&&this.props.floorplan3DThis.floorplan3DViewScene.children[o].object2D.id===e[i].objID[n].id){t=this.props.floorplan3DThis.floorplan3DViewScene.children[o];break}Sc.log("addBindedObject fixed"),t&&s.addBindedObject(t)}else{let t,o={};for(let s=0;s<this.props.floorplan3DThis.floorplanFloors.length;s++)if(t=this.props.floorplan3DThis.floorplanFloors[s].objData.find((t=>t.id===e[i].objID[n].id)),t){o={object2D:t,floorNumber:this.props.floorplan3DThis.floorplanFloors[s].floorNumber};break}Sc.log("addBindedObject unfixed"),s.addBindedObject(this.props.floorplan3DThis.getObjectsConnectorUnfixedBindedObjectParameters(o),!0)}}else this.props.floorplan3DThis.addObjectConnectorObject(e[i])}}let t=[];for(let i=0;i<this.props.floorplan3DThis.objectConnectorsArray.length;i++)e.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.props.floorplan3DThis.objectConnectorsArray[i][this.props.mainComponentThis.connectorIDbinderIDPropertyName]))||t.push(i);t.sort(((e,t)=>t-e));for(let e=0;e<t.length;e++)Sc.log("Remove ObjectsConnector object",this.props.floorplan3DThis.objectConnectorsArray[t[e]]),this.props.floorplan3DThis.objectConnectorsArray[t[e]].remove(),this.props.floorplan3DThis.objectConnectorsArray.splice(t[e],1);this.props.floorplan3DThis.updateControlPanelState()}this.props.updateKlet3DBinderState&&this.props.updateKlet3DBinderState(e.find((e=>e.objID.find((e=>e.id===this.props.obj2D.id))))),this.closePopup()}))},this.handleSearchChange=e=>{if(e){const t=this.props.availableBinders.filter((t=>this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]).toLowerCase().includes(e.toLowerCase())||this.props.customSearchMethod&&this.props.customSearchMethod(t,e)));this.setState({searchFilteredData:t,currentPage:1,searchFilterText:e})}else this.setState({searchFilteredData:this.props.availableBinders,currentPage:1,searchFilterText:e})},this.state={initialBinder:null,selectedBinder:null,currentPage:1,rowsPerPage:10,searchFilteredData:e.availableBinders,needsSave:!1,loading:!1},this.mounted=!1,this.closePopup=this.closePopup.bind(this),this.updateSelectedBinderData=this.updateSelectedBinderData.bind(this),this.onSaveChangesClick=this.onSaveChangesClick.bind(this),this.handleBinderCheckboxClick=this.handleBinderCheckboxClick.bind(this),this.handlePageChange=this.handlePageChange.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this)}componentDidMount(){this.mounted=!0,this.setState({initialBinder:this.props.klet3DBinder,selectedBinder:this.props.klet3DBinder})}componentWillUnmount(){this.mounted=!1}render(){const{selectedBinder:e,currentPage:t,rowsPerPage:i,searchFilteredData:o,searchFilterText:s,needsSave:n,loading:a}=this.state,{pageFirstRowIndex:r,pageLastRowIndex:h}=((e,t,i)=>{const o=(e-1)*t;return{pageFirstRowIndex:o,pageLastRowIndex:o+t>i?i:o+t}})(t,i,this.props.availableBinders.length),c=o.slice(r,h);return(0,l.jsx)(pt,{onCloseModalClick:this.closePopup,children:(0,l.jsxs)("section",{className:"layout__section door-window-ha-entities-binding-popup-content-container",style:{height:"auto",maxHeight:"85vh"},children:[(0,l.jsxs)("div",{className:"table-responsive form-group",children:[(0,l.jsxs)("div",{className:"search-row-container",children:[(0,l.jsx)("h2",{children:this.props.tableTitle}),(0,l.jsxs)("div",{className:"search-entities-container",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"hidden-placeholder",children:"Search entities"}),(0,l.jsx)("input",{placeholder:"Search entities",className:"form-control input",value:s,onChange:e=>this.handleSearchChange(e.target.value)})]}),(0,l.jsx)("div",{className:"search-icon-container",children:(0,l.jsx)(dh.Z,{})})]})]}),(0,l.jsxs)("table",{className:"table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"#"}),(0,l.jsx)("th",{}),(0,l.jsx)("th",{children:"ID"}),(0,l.jsx)("th",{children:"Name"}),this.props.hasDomain&&(0,l.jsx)("th",{children:"Domain"}),(0,l.jsx)("th",{children:"Last change"}),(0,l.jsx)("th",{children:"Last update"})]})}),(0,l.jsx)("tbody",{children:c.length>0?c.map(((t,i)=>{const o=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));let s=0;return o&&(s=o.objID.filter((e=>e.id!==this.props.obj2D.id)).length),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:r+i+1}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"entity-binding-option-choice-container",children:[(0,l.jsx)(ft,{checked:!!e&&e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===t[this.props.mainComponentThis.connectorIDbinderIDPropertyName],onChange:()=>this.handleBinderCheckboxClick(t)}),s>0&&(0,l.jsx)(st,{explanationInfoBoxStyles:{textAlign:"left"},infoText:(0,l.jsxs)("span",{children:[(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"NOTE:"})," This entity is binded with"," ",(0,l.jsx)("span",{children:s})," more floorplan\xa0",(0,l.jsx)("span",{children:1===s?"object":"objects"})]})})]})}),(0,l.jsx)("td",{children:this.props.binderIDLayoutMethod(t)}),(0,l.jsx)("td",{children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(t[this.props.mainComponentThis.connectorIDbinderIDPropertyName])}),this.props.hasDomain&&(0,l.jsx)("td",{children:t.domain}),(0,l.jsx)("td",{children:A(new Date(t.last_changed))}),(0,l.jsx)("td",{children:A(new Date(t.last_updated))})]},t[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:7,children:"No entities found"})})})]}),(0,l.jsx)(yc.Z,{className:"table-pagination",count:Math.ceil(o.length/i),page:t,onChange:this.handlePageChange})]}),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ye,{disabled:!n,buttonType:n?"primary":"dull",spinnerColor:"#ffffff",buttonText:" Save changes",loading:a,spinnerLoading:!0,onClick:this.onSaveChangesClick})})]})})}}const Dc=vc;class Tc extends o.Component{constructor(){super(),this.onSaveClick=()=>{this.simpleOnSaveHandlerBinded(this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null)},this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.onStateValueChange=Le.bind(this),this.onSaveClick=this.onSaveClick.bind(this),this.simpleOnSaveHandlerBinded=Re.bind(this),this.update3DViewState=Be.bind(this),this.callSaveAPI=We.bind(this)}componentDidMount(){const e=yo.map((e=>({...e,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field])})));this.setState({edit:e,originalData:e})}render(){const{edit:e,needsSave:t,loading:i}=this.state;return 0===e.length?null:(0,l.jsxs)(xt,{containerClasses:"door-window-parameters-container",children:[(0,l.jsx)(si,{labelText:"States",infoText:(0,l.jsxs)("span",{children:["Specify"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","sensor values which correspond to given states"]})}),e.map((e=>(0,l.jsx)(_t,{containerStyle:{marginBottom:"0.5rem"},label:e.keepTextWidth?(0,l.jsx)(ii,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.onStateValueChange},e.field))),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ye,{disabled:!t,buttonType:t?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:i,spinnerLoading:!0,onClick:this.onSaveClick})})]})}}const jc=Tc;var _c=i(1317);class Ic extends o.Component{constructor(){super(),this.onLightVariantChange=e=>{const t=this.onLightParameterValueChange(e);return e=>{const i=e.target.value.value;i!==this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,["variant"])&&(this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,["variant"],null,i),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState(),t(e))}},this.onSpotLightAngleValueChange=e=>{const t=this.onLightParameterValueChange(e);return e=>{const i=e&&e.target?e.target.value:e;this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,["spot_angle"],null,i),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState(),t(e)}},this.spotDistanceSliderToSvg=e=>e*this.SPOT_DISTANCE_STEP,this.spotDistanceSvgToSlider=e=>e/this.SPOT_DISTANCE_STEP,this.onSpotLightDistanceValueChange=e=>{const t=this.onLightParameterValueChange(e);return i=>{const o=this.spotDistanceSliderToSvg(i);this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,["spot_distance"],null,o),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState(),t({target:{value:o}}),this.setState({edit:this.state.edit.map((t=>({...t,value:t.field===e.field?i:t.value})))})}},this.simpleOnSaveHandlerBinded=()=>{Re.call(this,this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null,this.klet3DDataCustomSetterMethod)},this.onLightPowerChange=e=>{const t=this.onLightParameterValueChange(e);return e=>{const i=e&&e.target?e.target.value:e;this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,["power"],null,i),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState(),t(e)}},this.onLightColorChange=e=>{const t=this.onLightParameterValueChange(e);return e=>{const i=e&&e.target?e.target.value:e;this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,["color"],null,i),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState(),t(e)}},this.onSyncColorChange=e=>{const t=this.onLightParameterValueChange(e);return()=>{const e=!this.state.edit.find((e=>"color_sync"===e.field)).value;this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,["color_sync"],null,e),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState(),t({target:{value:e}})}},this.onSyncPowerChange=e=>{const t=this.onLightParameterValueChange(e);return()=>{const e=!this.state.edit.find((e=>"power_sync"===e.field)).value;this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,["power_sync"],null,e),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState(),t({target:{value:e}})}},this.klet3DDataCustomSetterMethod=e=>{this.state.edit.forEach((t=>{"spot_distance"===t.field?this.props.mainComponentThis.setKlet3DDataParamValue(e,this.props.targetObject2D,[t.field],null,this.spotDistanceSliderToSvg(t.value)):this.props.mainComponentThis.setKlet3DDataParamValue(e,this.props.targetObject2D,[t.field],t)}))},this.onSaveClick=()=>{this.state.edit.some((e=>e.error))||this.simpleOnSaveHandlerBinded()},this.resetValues=()=>{this.state.needsSave&&(_c.log("original data",this.state.originalData,this.props.klet3DBinder),this.state.originalData.forEach((e=>{if(So.find((t=>t.field===e.field))){const t=e.selectInput?e.value.value:e.value;this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field],null,"spot_distance"===e.field?this.spotDistanceSliderToSvg(t):t)}})),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState())},this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.spotLightDistanceSlider=o.createRef(),this.spotLightDistanceSliderInput=o.createRef(),this.onLightParameterValueChange=Le.bind(this),this.onSaveClick=this.onSaveClick.bind(this),this.update3DViewState=Be.bind(this),this.callSaveAPI=We.bind(this),this.onSyncPowerChange=this.onSyncPowerChange.bind(this),this.onSyncColorChange=this.onSyncColorChange.bind(this),this.onLightPowerChange=this.onLightPowerChange.bind(this),this.onLightColorChange=this.onLightColorChange.bind(this),this.onSpotLightAngleValueChange=this.onSpotLightAngleValueChange.bind(this),this.onLightVariantChange=this.onLightVariantChange.bind(this),this.spotDistanceSliderToSvg=this.spotDistanceSliderToSvg.bind(this),this.spotDistanceSvgToSlider=this.spotDistanceSvgToSlider.bind(this),this.onSpotLightDistanceValueChange=this.onSpotLightDistanceValueChange.bind(this),this.klet3DDataCustomSetterMethod=this.klet3DDataCustomSetterMethod.bind(this),this.resetValues=this.resetValues.bind(this),this.simpleOnSaveHandlerBinded=this.simpleOnSaveHandlerBinded.bind(this)}componentDidMount(){const e=So.map((e=>{const t=this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field]);if(e.selectInput)return{...e,value:e.options.find((e=>e.value===t))||e.options[0]};return"spot_distance"===e.field?(this.SPOT_DISTANCE_STEP=this.props.mainComponentThis.SPOT_DISTANCE_MAX/e.max,{...e,value:this.spotDistanceSvgToSlider(t)}):{...e,value:t}}));this.setState({edit:e,originalData:e})}componentWillUnmount(){this.resetValues()}render(){const{edit:e,needsSave:t,loading:i}=this.state;_c.log(e);const o=e.filter((e=>"switched_on_state"===e.field||"switched_off_state"===e.field)),s=e.find((e=>"power_sync"===e.field)),n=e.find((e=>"power"===e.field)),a=e.find((e=>"color_sync"===e.field)),r=e.find((e=>"color"===e.field)),h=e.find((e=>"variant"===e.field)),c=e.find((e=>"spot_angle"===e.field)),d=e.find((e=>"spot_distance"===e.field));return 0===e.length?null:(_c.log(r.value),(0,l.jsxs)(xt,{containerClasses:"light-parameters-container",children:[(0,l.jsx)(si,{labelText:"States",infoText:(0,l.jsxs)("span",{children:["Specify"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","light values which correspond to given states"]})}),o.map(((e,t)=>(0,l.jsx)(_t,{containerStyle:{marginBottom:t===o.length-1?"1rem":"0.5rem"},label:e.keepTextWidth?(0,l.jsx)(ii,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.onLightParameterValueChange},e.field))),(0,l.jsxs)(xt,{label:n.label,children:[(0,l.jsx)(ft,{infoLabel:!0,infoLabelTitle:s.label,infoText:"If checked, power will be automatically set from HomeAssistant. If unchecked, power will be manually set.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:s.value||s.defaultValue,onChange:this.onSyncPowerChange(s)}),!s.value&&(0,l.jsx)(ht,{placeholder:n.placeholder,inputStep:n.step,inputMin:n.min,inputMax:n.max,usePropsValue:!0,value:n.value,onInputValueChanged:this.onLightPowerChange(n)})]}),(0,l.jsxs)(xt,{label:r.label,children:[(0,l.jsx)(ft,{infoLabel:!0,infoLabelTitle:a.label,infoText:"If checked, color will be automatically set from HomeAssistant. If unchecked, color will be manually set.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:a.value||a.defaultValue,onChange:this.onSyncColorChange(a)}),!a.value&&(0,l.jsx)(Tt,{item:r,onChange:this.onLightColorChange,boxContainer:ae()})]}),(0,l.jsx)(ut,{selectInput:!0,fullWidth:!0,label:h.label,item:h,onChange:this.onLightVariantChange}),h.value&&"spot"===h.value.value&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(xt,{label:c.label,children:(0,l.jsx)(ht,{placeholder:c.placeholder,inputStep:c.step,inputMin:c.min,inputMax:c.max,usePropsValue:!0,value:c.value,onInputValueChanged:this.onSpotLightAngleValueChange(c)})}),(0,l.jsx)(xt,{children:(0,l.jsx)(fn,{ref:this.spotLightDistanceSliderInput,sliderInputRef:this.spotLightDistanceSlider,valueLabelText:(0,l.jsxs)("div",{style:{display:"flex"},children:["Distance:\xa0",j(d.value,Math.log(d.step))]}),defaultValue:j(d.value,Math.log(d.step)),minValue:d.min,maxValue:d.max,sliderStep:d.step,onSliderValueChanged:this.onSpotLightDistanceValueChange(d)})})]}),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ye,{disabled:!t,buttonType:t?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:i,spinnerLoading:!0,onClick:this.onSaveClick})})]}))}}const kc=Ic;var Pc=i(1095);class Fc extends o.Component{render(){return(0,l.jsxs)("div",{className:"palette-color-container",children:[(0,l.jsxs)("div",{className:"content-container",children:[(0,l.jsx)(_t,{containerStyle:{marginBottom:"0.5rem",justifyContent:"space-between"},label:this.props.valueFormItem.label,value:this.props.valueFormItem.value,labelClasses:"label-form-control-cancel",item:this.props.valueFormItem,error:this.props.valueFormItem.error,onChange:this.props.onChange}),(0,l.jsx)(_t,{containerStyle:{margin:0,justifyContent:"space-between"},colorPickerBoxContainer:ae(),isColorInput:!0,label:this.props.colorFormItem.label,labelClasses:"label-form-control-cancel",item:this.props.colorFormItem,error:this.props.colorFormItem.error,onChange:this.props.onChange})]}),this.props.isRemovable&&(0,l.jsx)("div",{className:"options-container",children:this.props.isRemovable&&(0,l.jsx)("div",{title:"Delete color",className:"action-icon-container svg-center-inside-container",onClick:this.props.onDeletePaletteColorClick,children:(0,l.jsx)(Pc.Z,{})})})]})}}const Oc=Fc;var Mc=i(6302),Lc=i(1317);class Rc extends o.Component{constructor(e){super(),this.onAddIntermediateColorClick=()=>{this.props.addIntermediateColor(this.props.colorPaletteFormItem,this.intermediateColorsCount),this.intermediateColorsCount++},this.getMinMaxColorPaletteData=()=>({minValue:this.props.colorPaletteFormItem.find((e=>e.field.includes("min_value"))),minColor:this.props.colorPaletteFormItem.find((e=>e.field.includes("min_color"))),maxValue:this.props.colorPaletteFormItem.find((e=>e.field.includes("max_value"))),maxColor:this.props.colorPaletteFormItem.find((e=>e.field.includes("max_color")))}),this.paletteColorsValidation=()=>{const{minValue:e,minColor:t,maxValue:i,maxColor:o}=this.getMinMaxColorPaletteData(),s=[e,t,i,o];let n=!0;for(let h=0;h<s.length;h++)s[h].error="",s[h].validate(s[h].value)&&(s[h].error=s[h].validate(s[h].value),n=!1);const a=this.props.colorPaletteFormItem.find((e=>e.field.includes("intermediate_colors"))).value;if(a.forEach((e=>{e.form[0].error="",e.form[1].error=""})),!n)return n;Lc.log(e),Lc.log(i);const r=parseFloat(e.value),l=parseFloat(i.value);if(r>=l)return n=!1,e.error="Min value must be less than max",n;for(let h=0;h<a.length;h++)if(a[h].form[1].validate(a[h].form[1].value)&&(a[h].form[1].error=a[h].form[1].validate(a[h].form[1].value),n=!1),a[h].form[0].validate(a[h].form[0].value))a[h].form[0].error=a[h].form[0].validate(a[h].form[0].value),n=!1;else{const e=parseFloat(a[h].form[0].value);if(e>r&&e<l){const t=a[h-1],i=a[h+1];t&&e<=parseFloat(t.form[0].value)?(a[h].form[0].error="Value must be greater than predecessor value",Lc.log("Invalid 3"),n=!1):i&&e>=parseFloat(i.form[0].value)&&(a[h].form[0].error="Value must be less than successor value",Lc.log("Invalid 4"),n=!1)}else a[h].form[0].error="Value must be between min and max",Lc.log("Invalid 2"),n=!1}return n},this.updateColorPalette=()=>{if(Lc.log("updateColorPalette",this.paletteColorsIsValid),this.colorPaletteCanvas&&this.colorPaletteCanvas.current){const e=30,t=this.formContainerRef.current.offsetHeight;if(this.paletteColorsIsValid){this.colorPaletteCanvas.current.width=e,this.colorPaletteCanvas.current.height=t,this.paletteContainerRef.current.style.height=t+"px";const i=document.createElement("canvas");i.width=e,i.height=t;const o=i.getContext("2d"),s=o.createLinearGradient(e/2,0,e/2,t),n=this.props.colorPaletteFormItem.find((e=>e.field.includes("intermediate_colors"))).value,{minValue:a,minColor:r,maxValue:l,maxColor:h}=this.getMinMaxColorPaletteData();let c={0:r.value};n.forEach((e=>{Lc.log((e.form[0].value-a.value)/(l.value-a.value)),c[(e.form[0].value-a.value)/(l.value-a.value)]=e.form[1].value})),c["1.0"]=h.value;for(const e in c)s.addColorStop(e,c[e]);Lc.log("canvasLinearGradientColorStops",c),o.fillStyle=s,o.fillRect(0,0,e,t);const d=this.colorPaletteCanvas.current.getContext("2d");d.fillStyle=s,d.fillRect(0,0,e,t)}else{this.colorPaletteCanvas.current.getContext("2d").clearRect(0,0,e,t)}}},this.intermediateColorsCount=e.colorPaletteFormItem.find((e=>e.field.includes("intermediate_colors"))).value.length,this.paletteColorsIsValid=!1,this.colorPaletteCanvas=o.createRef(),this.formContainerRef=o.createRef(),this.paletteContainerRef=o.createRef(),this.onAddIntermediateColorClick=this.onAddIntermediateColorClick.bind(this),this.getMinMaxColorPaletteData=this.getMinMaxColorPaletteData.bind(this),this.paletteColorsValidation=this.paletteColorsValidation.bind(this),this.updateColorPalette=this.updateColorPalette.bind(this)}componentDidMount(){this.updateColorPalette()}componentDidUpdate(){this.updateColorPalette()}render(){const{minValue:e,minColor:t,maxValue:i,maxColor:o}=this.getMinMaxColorPaletteData();return this.paletteColorsIsValid=this.paletteColorsValidation(),(0,l.jsxs)("div",{className:"color-palette-maker-container",style:this.props.containerStyle||{},children:[(0,l.jsxs)("div",{ref:this.formContainerRef,className:"form-container",children:[(0,l.jsx)(Oc,{valueFormItem:e,colorFormItem:t,onChange:this.props.onChange}),this.props.colorPaletteFormItem.find((e=>e.field.includes("intermediate_colors"))).value.map(((e,t)=>(0,l.jsx)(Oc,{valueFormItem:e.form[0],colorFormItem:e.form[1],onChange:this.props.onChange,isRemovable:!0,onDeletePaletteColorClick:()=>this.props.removeIntermediateColor(this.props.colorPaletteFormItem,e.counter),moveDown:!0,moveUp:!0},t))),(0,l.jsxs)("div",{className:"line-divider-container",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("div",{className:"svg-center-inside-container",title:"Add color",onClick:this.onAddIntermediateColorClick,children:(0,l.jsx)(Mc.Z,{})}),(0,l.jsx)("hr",{})]}),(0,l.jsx)(Oc,{valueFormItem:i,colorFormItem:o,onChange:this.props.onChange})]}),(0,l.jsx)("div",{ref:this.paletteContainerRef,className:"palette-container",children:(0,l.jsx)("canvas",{ref:this.colorPaletteCanvas})})]})}}const Bc=Rc;class Ac extends o.Component{componentDidUpdate(){this.props.disableRangeChoice&&"range"===this.props.coloringOptionFormItem.value&&this.props.onChange(this.props.coloringOptionFormItem)("")}render(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(wt,{formGroupContainerStyle:{marginBottom:"0.5rem"},rightLabel:!0,item:{...this.props.coloringOptionFormItem,choices:[this.props.coloringOptionFormItem.choices[0]]},onChange:this.props.onChange}),this.props.coloringOptionFormItem.choices[0].value===this.props.coloringOptionFormItem.value&&(0,l.jsx)(Tt,{item:this.props.coloringOptionFormItem.choices[0].form[0],onChange:this.props.onChange,boxContainer:ae(),containerStyle:{marginBottom:"0.5rem"}}),(0,l.jsx)(wt,{formGroupContainerStyle:{marginBottom:"0.5rem"},disabled:this.props.disableRangeChoice,rightLabel:!0,item:{...this.props.coloringOptionFormItem,choices:[this.props.coloringOptionFormItem.choices[1]]},onChange:this.props.onChange}),this.props.coloringOptionFormItem.choices[1].value===this.props.coloringOptionFormItem.value&&(0,l.jsx)(Bc,{ref:this.props.colorPaletteMakerRef,containerStyle:{marginBottom:"0.5rem"},colorPaletteFormItem:this.props.coloringOptionFormItem.choices[1].form,onChange:this.props.onChange,addIntermediateColor:this.props.addIntermediateColor,removeIntermediateColor:this.props.removeIntermediateColor}),(0,l.jsx)(_t,{containerStyle:{marginBottom:"0.5rem"},isNumberInput:this.props.opacityItem.isNumberInput,controledNumberInput:!!this.props.opacityItem.isNumberInput||null,label:this.props.opacityItem.keepTextWidth?(0,l.jsx)(ii,{longText:this.props.opacityItem.longText,shortText:this.props.opacityItem.label}):this.props.opacityItem.label,value:this.props.opacityItem.value,labelClasses:"label-form-control-cancel",item:this.props.opacityItem,error:this.props.opacityItem.error,onChange:this.props.onChange})]})}}const Wc=Ac;var Vc=i(1317);class Nc extends o.Component{constructor(){super(),this.cloneEditData=(e,t)=>e.map((e=>e.form?{...e,form:e.form.map((e=>e.formChoices?{...e,choices:e.choices.map((e=>({...e,form:e.form.map((e=>Array.isArray(e.value)?{...e,value:e.value.map((e=>e.form?{...e,form:e.form.map((e=>({...e,...t?{error:void 0}:{}})))}:{...e,...t?{error:void 0}:{}}))}:{...e,...t?{error:void 0}:{}}))})))}:{...e,...t?{error:void 0}:{}}))}:{...e,...t?{error:void 0}:{}})),this.calculateNeedsSaveCustom=e=>{return t=this.cloneEditData(e,!0),i=this.state.originalData,JSON.stringify(t)!==JSON.stringify(i);var t,i},this.addIntermediateColor=(e,t)=>{e.find((e=>e.field.includes("intermediate_colors"))).value.push(_o(t)),this.setState({needsSave:this.calculateNeedsSaveCustom(this.state.edit)})},this.removeIntermediateColor=(e,t)=>{e.find((e=>e.field.includes("intermediate_colors"))).value.splice(e.find((e=>e.field.includes("intermediate_colors"))).value.findIndex((e=>e.counter===t)),1),this.setState({needsSave:this.calculateNeedsSaveCustom(this.state.edit)})},this.onSaveClick=()=>{let e=!1;if(this.setState({edit:this.state.edit.map((t=>{const i=t.validate&&t.validate(t.value);return i&&(e=!0),t.form?{...t,error:i,form:t.form.map((i=>{const o=i.validate&&i.validate(i.value);return o&&(e=!0),i.formChoices?{...i,error:o,choices:i.choices.map((o=>{if("range"===o.value){if("range"===i.value){const i="background"===t.field?this.sensorBackgroundOptionColorPaletteRef:this.sensorTextColorPaletteRef;e=i.current&&!i.current.paletteColorsValidation()}return{...o}}return{...o,form:o.form.map((t=>{const i=t.validate&&t.validate(t.value);return i&&(e=!0),{...t,error:i}}))}}))}:{...i,error:o}}))}:{...t,error:i}}))}),Vc.log("On save isInvalid",e),!e){let e=[...this.props.mainComponentThis.klet3DLastSavedData],t=e.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));t&&(this.state.edit.forEach((e=>{e.form?(this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field,"checked"],e),e.form.forEach((i=>{this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field,i.field],null,void 0===i.value?null:i.value),i.formChoices&&i.choices.forEach((i=>{i.form.forEach((i=>{Array.isArray(i.value)?(this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field,i.field],null,[]),i.value.forEach((o=>{this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field,i.field],null,{value:o.form.find((e=>e.field.includes("intermediate_color_value"))).value,color:o.form.find((e=>e.field.includes("intermediate_color_color"))).value},!0)}))):this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field,i.field],i)}))}))}))):this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field],e)})),Vc.log("targetKlet3DData",t),this.callSaveAPI(t,e,this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null))}},this.onSensorParameterChange=e=>t=>{const i=t&&t.target?t.target.value:t;Vc.log("On sensor parameter change",e,i);const o=this.state.edit.map((t=>t.field===e.field?(Vc.log("Target find"),{...t,value:i}):t.form?{...t,form:t.form.map((t=>t.field===e.field?(Vc.log("Target find"),{...t,value:i}):t.formChoices?{...t,choices:t.choices.map((t=>({...t,form:t.form.map((t=>t.field===e.field?(Vc.log("Target find"),{...t,value:i}):Array.isArray(t.value)?{...t,value:t.value.map((t=>t.form?{...t,form:t.form.map((t=>({...t,value:t.field===e.field?i:t.value})))}:{...t}))}:{...t}))})))}:{...t}))}:{...t}));this.setState({edit:o,needsSave:this.calculateNeedsSaveCustom(o)})},this.onSensorCheckboxParameterChange=e=>()=>{const t=this.state.edit.map((t=>t.field===e.field?{...t,value:!t.value,form:t.form.map((e=>({...e,value:e.field.includes("_coloring_type")&&t.value?"":e.value})))}:{...t}));this.setState({edit:t,needsSave:this.calculateNeedsSaveCustom(t)})},this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.sensorBackgroundOptionColorPaletteRef=o.createRef(),this.sensorTextColorPaletteRef=o.createRef(),this.onSaveClick=this.onSaveClick.bind(this),this.callSaveAPI=We.bind(this),this.onSensorParameterChange=this.onSensorParameterChange.bind(this),this.onSensorCheckboxParameterChange=this.onSensorCheckboxParameterChange.bind(this),this.addIntermediateColor=this.addIntermediateColor.bind(this),this.removeIntermediateColor=this.removeIntermediateColor.bind(this),this.cloneEditData=this.cloneEditData.bind(this),this.calculateNeedsSaveCustom=this.calculateNeedsSaveCustom.bind(this),this.update3DViewState=Be.bind(this)}componentDidMount(){const e=Io.map((e=>e.form?{...e,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,"checked"]),form:e.form.map((t=>t.formChoices?{...t,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,t.field]),choices:t.choices.map((t=>({...t,form:t.form.map((t=>Array.isArray(this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,t.field]))?{...t,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,t.field]).map(((e,t)=>_o(t,e.value,e.color)))}:{...t,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,t.field])}))})))}:{...t,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,t.field])}))}:{...e,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field])}));this.setState({edit:e,originalData:this.cloneEditData(e)})}render(){const{needsSave:e,loading:t,edit:i}=this.state;Vc.log(i);const s=i.find((e=>"sensor_type"===e.field)),n=i.find((e=>"background"===e.field)),a=i.find((e=>"text"===e.field));return 0===i.length?null:(0,l.jsxs)("div",{className:"sensor-parameters-container",children:[(0,l.jsx)(xt,{children:(0,l.jsx)(wt,{rightLabel:!0,label:s.label,onChange:this.onSensorParameterChange,item:s,radioGroupContainerStyle:{justifyContent:"space-evenly"}})}),(0,l.jsxs)(xt,{label:"Coloring",labelStyle:{marginBottom:0},children:[(0,l.jsx)(ft,{infoLabel:!0,infoLabelTitle:n.label,infoText:n.infoText,explanationInfoBoxStyles:n.explanationInfoBoxStyles,checked:n.value,onChange:this.onSensorCheckboxParameterChange(n)}),!0===n.value&&(0,l.jsx)(Wc,{colorPaletteMakerRef:this.sensorBackgroundOptionColorPaletteRef,disableRangeChoice:"number"!==s.value,coloringOptionItem:n,coloringOptionFormItem:n.form[0],opacityItem:n.form.find((e=>"background_opacity"===e.field)),addIntermediateColor:this.addIntermediateColor,removeIntermediateColor:this.removeIntermediateColor,onChange:this.onSensorParameterChange}),(0,l.jsx)(ft,{infoLabel:!0,infoLabelTitle:a.label,infoText:a.infoText,explanationInfoBoxStyles:a.explanationInfoBoxStyles,checked:a.value,onChange:this.onSensorCheckboxParameterChange(a)}),!0===a.value?(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(Wc,{colorPaletteMakerRef:this.sensorTextColorPaletteRef,disableRangeChoice:"number"!==s.value||"range"===n.form[0].value,coloringOptionItem:a,coloringOptionFormItem:a.form[0],opacityItem:a.form.find((e=>"text_opacity"===e.field)),addIntermediateColor:this.addIntermediateColor,removeIntermediateColor:this.removeIntermediateColor,onChange:this.onSensorParameterChange}),a.form.slice(-1).map((e=>(0,l.jsx)(_t,{containerStyle:{marginBottom:"0.5rem"},isNumberInput:e.isNumberInput,controledNumberInput:!!e.isNumberInput||null,label:e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.onSensorParameterChange},e.field)))]}):null]}),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ye,{disabled:!e,buttonType:e?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:t,spinnerLoading:!0,onClick:this.onSaveClick})})]})}}const Ec=Nc;var zc=i(1317);class Hc extends o.Component{constructor(){super(),this.onSaveClick=()=>{this.simpleOnSaveHandlerBinded(this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null)},this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.onParameterValueChange=Le.bind(this),this.simpleOnSaveHandlerBinded=Re.bind(this),this.onSaveClick=this.onSaveClick.bind(this),this.update3DViewState=Be.bind(this),this.callSaveAPI=We.bind(this)}componentDidMount(){zc.log(ko);const e=ko.map((e=>({...e,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field])})));this.setState({edit:e,originalData:e})}render(){const{edit:e,needsSave:t,loading:i}=this.state;return zc.log("OtherBindingParameters",e),0===e.length?null:(0,l.jsxs)(xt,{children:[(0,l.jsx)(si,{labelText:"Text",infoText:(0,l.jsxs)("span",{children:["Define text preferences to display"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","value"]})}),e.map((e=>(0,l.jsx)(_t,{containerStyle:{marginBottom:"0.5rem"},isNumberInput:e.isNumberInput,controledNumberInput:!!e.isNumberInput||null,isColorInput:e.isColorInput,colorPickerBoxContainer:e.isColorInput&&ae(),label:e.keepTextWidth?(0,l.jsx)(ii,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.onParameterValueChange},e.field))),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ye,{disabled:!t,buttonType:t?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:i,spinnerLoading:!0,onClick:this.onSaveClick})})]})}}const Gc=Hc;var Uc=i(1317);class qc extends o.Component{constructor(){super(),this.onSaveClick=()=>{this.simpleOnSaveHandlerBinded(this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null)},this.onCeilingFanDirectionChange=e=>{const t=this.onCeilingFanParameterValueChange(e);return e=>{const i=e&&e.target?e.target.value:e;this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,["direction"],null,i.value),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState(),t(e)}},this.onCeilingFanPercentageChange=e=>{const t=this.onCeilingFanParameterValueChange(e);return e=>{const i=e&&e.target?e.target.value:e;this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,["percentage"],null,i),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState(),t(e)}},this.setPercentageNumberSliderInputValues=e=>{this.fanPercentageNumberSliderInput.current&&(this.fanPercentageSlider.current.value=e,this.fanPercentageNumberSliderInput.current.inputNumberComponentRef.current.setValue(e))},this.onSyncCeilingFanDirectionChange=e=>{const t=this.onCeilingFanParameterValueChange(e);return()=>{const e=!this.state.edit.find((e=>"direction_sync"===e.field)).value;this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,["direction_sync"],null,e),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState(),t({target:{value:e}})}},this.onSyncCeilingFanPercentageChange=e=>{const t=this.onCeilingFanParameterValueChange(e);return()=>{const e=!this.state.edit.find((e=>"percentage_sync"===e.field)).value;this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,["percentage_sync"],null,e),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState(),t({target:{value:e}})}},this.resetValues=()=>Ae.call(this,vo),this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.fanPercentageNumberSliderInput=o.createRef(),this.fanPercentageSlider=o.createRef(),this.setPercentageNumberSliderInputValues=this.setPercentageNumberSliderInputValues.bind(this),this.onCeilingFanParameterValueChange=Le.bind(this),this.simpleOnSaveHandlerBinded=Re.bind(this),this.onSaveClick=this.onSaveClick.bind(this),this.update3DViewState=Be.bind(this),this.callSaveAPI=We.bind(this),this.onSyncCeilingFanDirectionChange=this.onSyncCeilingFanDirectionChange.bind(this),this.onSyncCeilingFanPercentageChange=this.onSyncCeilingFanPercentageChange.bind(this),this.onCeilingFanDirectionChange=this.onCeilingFanDirectionChange.bind(this),this.onCeilingFanPercentageChange=this.onCeilingFanPercentageChange.bind(this),this.resetValues=this.resetValues.bind(this)}componentDidMount(){const e=vo.map((e=>{const t=this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field]);return{...e,value:e.selectInput?e.options.find((e=>e.value===t)):t}}));this.setState({edit:e,originalData:e},(()=>this.setPercentageNumberSliderInputValues(e.find((e=>"percentage"===e.field)).value)))}componentWillUnmount(){this.resetValues()}render(){const{edit:e,needsSave:t,loading:i}=this.state;Uc.log(e);const o=e.find((e=>"direction"===e.field)),s=e.find((e=>"direction_sync"===e.field)),n=e.find((e=>"percentage"===e.field)),a=e.find((e=>"percentage_sync"===e.field)),r=e.filter((e=>"switched_on_state"===e.field||"switched_off_state"===e.field));return 0===e.length?null:(0,l.jsxs)(xt,{containerClasses:"fan-parameters-container",children:[(0,l.jsxs)(xt,{label:o.label,children:[(0,l.jsx)(ft,{infoLabel:!0,infoLabelTitle:s.label,infoText:"If checked, direction will be automatically set from HomeAssistant. If unchecked, direction will be manually set.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:s.value||s.defaultValue,onChange:this.onSyncCeilingFanDirectionChange(s)}),!s.value&&o&&(0,l.jsx)(ut,{selectInput:!0,fullWidth:!0,item:o,onChange:this.onCeilingFanDirectionChange})]}),(0,l.jsxs)(xt,{label:(0,l.jsxs)("div",{style:{display:"flex"},children:["Fan percentage:\xa0",a.value?"Synced":"".concat(n.value," %")]}),children:[(0,l.jsx)(ft,{infoLabel:!0,infoLabelTitle:a.label,infoText:"If checked, percentage will be automatically set from HomeAssistant. If unchecked, percentage will be manually set.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:a.value||a.defaultValue,onChange:this.onSyncCeilingFanPercentageChange(a)}),!a.value&&(0,l.jsx)(fn,{ref:this.fanPercentageNumberSliderInput,sliderInputRef:this.fanPercentageSlider,valueLabelText:"",defaultValue:n.value,sliderStep:n.step,minValue:n.min,maxValue:n.max,onSliderValueChanged:e=>{this.setPercentageNumberSliderInputValues(e),this.onCeilingFanPercentageChange(n)(e)}})]}),(0,l.jsx)(si,{labelText:"States",infoText:(0,l.jsxs)("span",{children:["Specify"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","fan values which correspond to given states"]})}),r.map(((e,t)=>(0,l.jsx)(_t,{containerStyle:{marginBottom:t===r.length-1?"1rem":"0.5rem"},label:e.keepTextWidth?(0,l.jsx)(ii,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.onCeilingFanParameterValueChange},e.field))),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ye,{disabled:!t,buttonType:t?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:i,spinnerLoading:!0,onClick:this.onSaveClick})})]})}}const Yc=qc;class Kc extends o.Component{constructor(){super(),this.onCoverParameterValueChange=e=>t=>{if("closing_direction"===e.field){const i=t&&t.target?t.target.value:t;this.setState({edit:this.state.edit.map((e=>({...e,error:"open_offset"===e.field||"closed_offset"===e.field?this.offsetValuesErrorCheck(this.state.edit.find((e=>"open_offset"===e.field)).value,this.state.edit.find((e=>"closed_offset"===e.field)).value,i.value,e.field):e.error})))},(()=>Le.call(this,e)(t)))}else Le.call(this,e)(t)},this.simpleOnSaveHandlerBinded=()=>{Re.call(this,this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null,this.klet3DDataCustomSetterMethod)},this.klet3DDataCustomSetterMethod=e=>{this.state.edit.forEach((t=>{"open_offset"===t.field||"closed_offset"===t.field?this.props.mainComponentThis.setKlet3DDataParamValue(e,this.props.targetObject2D,[t.field],null,this.props.mainComponentThis.convertValueToSvgUnits(t.value)):this.props.mainComponentThis.setKlet3DDataParamValue(e,this.props.targetObject2D,[t.field],t)}))},this.onSaveClick=()=>{this.state.edit.some((e=>e.error))||this.simpleOnSaveHandlerBinded()},this.onOpenClosedOffsetChangeHandler=e=>t=>{const i="open_offset"===e.field?t&&t.target?t.target.value:t:this.state.edit.find((e=>"open_offset"===e.field)).value,o="closed_offset"===e.field?t&&t.target?t.target.value:t:this.state.edit.find((e=>"closed_offset"===e.field)).value,s=this.state.edit.map((t=>({...t,value:t.field===e.field?"open_offset"===e.field?i:o:t.value,error:"open_offset"===t.field||"closed_offset"===t.field?this.offsetValuesErrorCheck(i,o,this.state.edit.find((e=>"closing_direction"===e.field)).value.value,t.field):t.error})));this.setState({edit:s,needsSave:H(s,this.state.originalData)})},this.offsetValuesErrorCheck=(e,t,i,o)=>{const s=this.props.mainComponentThis.convertValueToSvgUnits(e),n=this.props.mainComponentThis.convertValueToSvgUnits(t),a="top"===i?this.props.targetObject2D.additionalParams.height3D:this.props.targetObject2D.additionalParams.width3D;if(("open_offset"===o?s:n)<0)return"Number is too low";return!!(s+n>a)&&"Number is too high"},this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.onCoverParameterValueChange=this.onCoverParameterValueChange.bind(this),this.simpleOnSaveHandlerBinded=this.simpleOnSaveHandlerBinded.bind(this),this.klet3DDataCustomSetterMethod=this.klet3DDataCustomSetterMethod.bind(this),this.onSaveClick=this.onSaveClick.bind(this),this.update3DViewState=Be.bind(this),this.callSaveAPI=We.bind(this),this.onOpenClosedOffsetChangeHandler=this.onOpenClosedOffsetChangeHandler.bind(this),this.offsetValuesErrorCheck=this.offsetValuesErrorCheck.bind(this)}componentDidMount(){const e=Do.map((e=>{const t=this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field]);return{...e,value:e.selectInput?e.options.find((e=>e.value===t)):"open_offset"===e.field||"closed_offset"===e.field?this.props.mainComponentThis.convertSvgToValueUnits(t):t,step:"open_offset"===e.field||"closed_offset"===e.field?this.props.mainComponentThis.itemDimensionsInputStep:null}}));this.setState({edit:e,originalData:e})}render(){const{edit:e,needsSave:t,loading:i}=this.state,o=e.find((e=>"closing_direction"===e.field)),s=e.filter((e=>"open_offset"===e.field||"closed_offset"===e.field)).map((e=>{const t="open_offset"===e.field,i=this.state.edit.find((e=>"closing_direction"===e.field)).value.value;let o=e.label;return t?"top"===i?o="Top":"left"===i?o="Left":"right"===i&&(o="Right"):"top"===i?o="Bottom":"left"===i?o="Right":"right"===i&&(o="Left"),{...e,label:o}})).sort((e=>"Top"===e.label?-1:"Bottom"===e.label?1:"Left"===e.label?-1:"Right"===e.label?1:0));return 0!==e.length&&o?(0,l.jsxs)(xt,{containerClasses:"cover-parameters-container",children:[(0,l.jsx)(ut,{selectInput:!0,fullWidth:!0,label:(0,l.jsx)(si,{labelText:o.label,infoText:(0,l.jsxs)("span",{children:["Specify in which direction the cover closes",(0,l.jsx)("br",{}),(0,l.jsx)("b",{children:"Top"})," - cover closes from bottom to top",(0,l.jsx)("br",{}),(0,l.jsx)("b",{children:"Left"})," - cover closes from right to left",(0,l.jsx)("br",{}),(0,l.jsx)("b",{children:"Right"})," - cover closes from left to right"]})}),item:o,onChange:this.onCoverParameterValueChange}),(0,l.jsx)(si,{labelText:"Offsets",infoText:(0,l.jsxs)("span",{children:["Specify the ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"offsets"})," for the cover in the open and closed position",(0,l.jsx)("br",{}),"If value is different from 0, the 3D model will not open/close completely"]})}),s.map(((e,t)=>{const i="metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"cm":"in",o="".concat(e.label," (").concat(i,"):");return(0,l.jsx)(_t,{containerStyle:{marginBottom:1===t?"1rem":"0.5rem"},label:e.keepTextWidth?(0,l.jsx)(ii,{longText:e.longText,shortText:o}):o,step:e.step,item:e,value:e.value,error:e.error,onChange:this.onOpenClosedOffsetChangeHandler,labelClasses:"label-form-control-cancel",isNumberInput:!0,controledNumberInput:!0,usePropsValue:!0},e.field)})),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ye,{disabled:!t,buttonType:t?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:i,spinnerLoading:!0,onClick:this.onSaveClick})})]}):null}}const Xc=Kc;class Zc extends o.Component{constructor(){super(),this.setOpacityNumberSliderInputValues=(e,t)=>{e.sliderInputRef.current.value=t,e.valueRef.current.textContent=t,e.numberSliderInputPairRef.current.inputNumberComponentRef.current.setValue(t)},this.onSaveClick=()=>{this.simpleOnSaveHandlerBinded(this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null)},this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.onStateValueChange=Le.bind(this),this.onSaveClick=this.onSaveClick.bind(this),this.simpleOnSaveHandlerBinded=Re.bind(this),this.update3DViewState=Be.bind(this),this.callSaveAPI=We.bind(this),this.setOpacityNumberSliderInputValues=this.setOpacityNumberSliderInputValues.bind(this),this.onPresenceParameterValueChange=Le.bind(this)}componentDidMount(){const e=To.map((e=>({...e,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field]),..."detected_opacity"===e.field||"undetected_opacity"===e.field?{numberSliderInputPairRef:o.createRef(),sliderInputRef:o.createRef(),valueRef:o.createRef()}:{}})));this.setState({edit:e,originalData:e},(()=>{this.state.edit.filter((e=>"detected_opacity"===e.field||"undetected_opacity"===e.field)).forEach((e=>this.setOpacityNumberSliderInputValues(e,e.value)))}))}render(){const{edit:e,needsSave:t,loading:i}=this.state,o=e.filter((e=>"detected_state"===e.field||"undetected_state"===e.field)),s=e.filter((e=>"detected_opacity"===e.field||"undetected_opacity"===e.field));return 0===e.length?null:(0,l.jsxs)(xt,{containerClasses:"door-window-parameters-container",children:[(0,l.jsx)(si,{labelText:"States",infoText:(0,l.jsxs)("span",{children:["Specify"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","sensor values which correspond to given states"]})}),o.map((e=>(0,l.jsx)(_t,{containerStyle:{marginBottom:"0.5rem"},label:e.keepTextWidth?(0,l.jsx)(ii,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.onStateValueChange},e.field))),s.map((e=>(0,l.jsx)(fn,{ref:e.numberSliderInputPairRef,sliderInputRef:e.sliderInputRef,valueLabelText:(0,l.jsxs)("div",{style:{display:"flex"},children:["".concat(e.label,":"),"\xa0",(0,l.jsx)("span",{ref:e.valueRef})," %"]}),sliderStep:e.step,minValue:e.min,maxValue:e.max,onSliderValueChanged:t=>{this.setOpacityNumberSliderInputValues(e,t),this.onPresenceParameterValueChange(e)(t)}},e.field))),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ye,{disabled:!t,buttonType:t?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:i,spinnerLoading:!0,onClick:this.onSaveClick})})]})}}const Jc=Zc;class Qc extends o.Component{constructor(e){super(),this.updateKlet3DBinderState=e=>{this.setState({klet3DBinder:e})},this.state={klet3DBinder:e.klet3DBinder},this.updateKlet3DBinderState=this.updateKlet3DBinderState.bind(this),this.activeParameters=o.createRef()}render(){const{klet3DBinder:e}=this.state;return(0,l.jsxs)(o.Fragment,{children:[this.props.renderDivider&&(0,l.jsx)("h3",{children:(0,l.jsx)("hr",{})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:this.props.title}),(0,l.jsxs)("div",{className:"door-window-ha-entities-binding-right-box-content-container",children:[(0,l.jsx)(ut,{disabled:!0,label:"Entity",formGroupStyle:{marginBottom:"0.5rem"},inputStyle:{textAlign:"center"},value:e?this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]):"-"}),(0,l.jsx)(Ge,{type:"light-blue",onClick:()=>this.props.mainComponentThis.openBindingPopup(this.props.selectedObj,e,this.props.floorplan3DThis,this.updateKlet3DBinderState),children:e?"Change entity":"Add entity"})]}),e&&"doorWindow"===this.props.selectedObj.class&&(0,l.jsx)(jc,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&"lights"===this.props.selectedObj.class&&(0,l.jsx)(kc,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&"sensors"===this.props.selectedObj.class&&(0,l.jsx)(Ec,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&"homeAssistant"===this.props.selectedObj.class&&(0,l.jsx)(Gc,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&this.props.mainComponentThis.isFanObject(this.props.selectedObj.type)&&(0,l.jsx)(Yc,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&this.props.mainComponentThis.isCoverObject(this.props.selectedObj.type)&&(0,l.jsx)(Xc,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&this.props.mainComponentThis.isPresenceObject(this.props.selectedObj.type)&&(0,l.jsx)(Jc,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis})]})]})}}const $c=Qc;var ed=i(1317);function td(e,t){let i=[];if(e[t])for(const[o,s]of Object.entries(e[t]))i.push({name:o,serviceDataProperties:Object.entries(s.fields).map((e=>{let[t,i]=e;return{name:t,isRequired:i.required||!1}}))});return i}function id(){this.onShow3DClick(!1),this.unsubscribeConfig=(0,gc.wQ)(this.homeAssistantConnection,this.onConfigChangeCallback),this.unsubscribeServices=(0,fc.R)(this.homeAssistantConnection,this.onServicesChangeCallback)}async function od(e){if(ed.log("Entities!",e),Object.keys(e).length!==this.homeAssistantEntities.length){ed.log("Entities count changed");try{const t=await(0,bc.U2)(this.homeAssistantConnection);ed.log("Get services socket result",t),this.homeAssistantEntities=[];for(const[i,o]of Object.entries(e)){const e=i.split(".")[0];this.homeAssistantEntities.push({entity_id:i,domain:e,...o,services:this.getServicesForEntity(t,e)})}}catch(t){ed.log("Get services socket error",t)}}else for(const[i,o]of Object.entries(e)){let e=this.homeAssistantEntities.find((e=>e.entity_id===i));if(e)for(const[t,i]of Object.entries(o))e[t]=i}ed.log("Parsed entities",this.homeAssistantEntities),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.onHAEntitiesChangeCallback(this.homeAssistantEntities),0===this.onEntitiesChangeCallCounter&&this.onEntitiesLoadedCallback(),this.onEntitiesChangeCallCounter++}function sd(e){for(let t=0;t<this.homeAssistantEntities.length;t++){const i=this.homeAssistantEntities[t].domain;this.homeAssistantEntities[t].services=this.getServicesForEntity(e,i)}ed.log("New services",e)}function nd(e){ed.log("New config",e),this.homeAssistantConfigObject&&(se(this.homeAssistantConfigObject,e)||(ed.log("HA config change"),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.onHAConfigChange(e))),this.homeAssistantConfigObject=e}async function ad(e,t,i,o){try{const s=await(0,bc._D)(this.homeAssistantConnection,e,t,{entity_id:i,...o},{entity_id:i});return ed.log("Call service result",s),s.context}catch(s){return ed.log("Call service error",s),null}}function rd(e,t){this.homeAssistantBindingsToolsTitle.current.innerHTML="sensor"===e.type?"Modify sensor":"Modify entity",this.hideActiveRightBox(),this.translateRightBox(this.homeAssistantBindingsToolsRef.current,-this.rightBoxWidth,!0),this.renderBindingRightBox(e,t,this.homeAssistantBindingsContainerRef,!1)}function ld(e,t,i,o){let n=this.klet3DLastSavedData.find((t=>t.objID.find((t=>t.id===e.id))));n&&(this.homeAssistantEntities.find((e=>e.entity_id===n.entity_id))||(n=null)),s.render((0,l.jsx)($c,{ref:this.bindingRightBoxComponentRef,mainComponentThis:this,floorplan3DThis:t,klet3DBinder:n,title:"Home Assistant",selectedObj:e,renderDivider:o,setResponseError:this.setState.bind(this)},(new Date).getTime()),i.current)}function hd(e,t,i,o){const n=this.availableEntitiesDomainNamesToObject2DMapping(e);if(0===n.length)return;if(!this.getKlet3DBinderParamsDefaultValues(e))return;let a=this.homeAssistantEntities.filter((e=>n.includes(e.domain)));a=a.filter((t=>{const i=this.klet3DLastSavedData.find((e=>e.entity_id===t.entity_id));if(i){let t;for(let e=0;e<i.objID.length&&(t=this.OBJDATA.find((t=>t.id===i.objID[e].id)),!t);e++);return!!t&&this.isSameBindedObjectType(t.type,e.type)}return!0})),K(this.bindingPopupRightBoxContainerRef.current,200,(()=>{s.render((0,l.jsx)(Dc,{updateKlet3DBinderState:o,containerRef:this.bindingPopupRightBoxContainerRef,klet3DBinder:t,obj2D:e,availableBinders:a,customSearchMethod:(e,t)=>e.entity_id.split(".")[1].toLowerCase().includes(t.toLowerCase()),binderIDLayoutMethod:e=>e.entity_id.split(".")[1],tableTitle:"Available Home Assistant entities",hasDomain:!0,floorplan3DThis:i,setResponseError:this.setState.bind(this),mainComponentThis:this}),this.bindingPopupRightBoxContainerRef.current)}),"block",!1)}function cd(){this.unsubscribeEntities&&this.unsubscribeEntities(),this.unsubscribeServices&&this.unsubscribeServices(),this.unsubscribeConfig&&this.unsubscribeConfig(),this.homeAssistantConnection&&this.homeAssistantConnection.close()}function dd(e,t){this.availableEntitiesDomainNamesToObject2DMapping(e).length>0?this.renderBindingRightBox(e,t,this.bindingFreeItemContainerRef,!0):s.unmountComponentAtNode(this.bindingFreeItemContainerRef.current)}function pd(e,t){this.availableEntitiesDomainNamesToObject2DMapping(e).length>0?this.renderBindingRightBox(e,t,this.bindingWallItemContainerRef,!0):s.unmountComponentAtNode(this.bindingWallItemContainerRef.current)}function md(e){const t=this.getObjectConnectorKlet3DBinderData(e);return t?(i=t).attributes&&i.attributes.friendly_name||i.entity_id.split(".")[1]:"";var i}function ud(e){return this.homeAssistantEntities.find((t=>t.entity_id===e))}function gd(e){return"doorWindow"===e.class?["input_boolean","binary_sensor"]:"lights"===e.class?["light","switch"]:"sensors"===e.class?["sensor"]:"furniture"===e.class?this.isFanObject(e.type)?["fan"]:this.isCoverObject(e.type)?["cover"]:this.isPresenceObject(e.type)?["binary_sensor"]:[]:"homeAssistant"===e.class?Cc.filter((e=>!xc.includes(e))):[]}function fd(e,t){if(this.isPresenceObject(t.object2D.type))return"on";return{input_boolean:"off",binary_sensor:"off",light:"off",switch:"off",fan:"off"}[e]}const bd=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.mainComponentThis=e,this.controlerParams=t,this.mainComponentThis.HAAddonCurrentVersion="1.0.10",this.mainComponentThis.homeAssistantConnection=null,this.mainComponentThis.homeAssistantEntities=[],this.mainComponentThis.homeAssistantConfigObject=this.mainComponentThis.props.customProps.userConfig,this.mainComponentThis.onEntitiesChangeCallCounter=0,this.mainComponentThis.unsubscribeEntities=null,this.mainComponentThis.unsubscribeServices=null,this.mainComponentThis.unsubscribeConfig=null,this.mainComponentThis.homeAssistantBindingsToolsRef=o.createRef(),this.mainComponentThis.homeAssistantBindingsToolsTitle=o.createRef(),this.mainComponentThis.homeAssistantBindingsContainerRef=o.createRef(),this.mainComponentThis.homeAssistantConnection=this.mainComponentThis.props.customProps.connection,this.mainComponentThis.connectorIDbinderIDPropertyName="entity_id",this.mainComponentThis.getServicesForEntity=td.bind(this.mainComponentThis),this.mainComponentThis.onEntitiesLoadedCallback=id.bind(this.mainComponentThis),this.mainComponentThis.onEntitiesChangeCallback=od.bind(this.mainComponentThis),this.mainComponentThis.onServicesChangeCallback=sd.bind(this.mainComponentThis),this.mainComponentThis.onConfigChangeCallback=nd.bind(this.mainComponentThis),this.mainComponentThis.callHomeAssistantService=ad.bind(this.mainComponentThis),this.mainComponentThis.openHomeAssistantBindingsToolsRightBox=rd.bind(this.mainComponentThis),this.mainComponentThis.renderBindingRightBox=ld.bind(this.mainComponentThis),this.mainComponentThis.openBindingPopup=hd.bind(this.mainComponentThis),this.mainComponentThis.freeItemToolsCustomSetter=dd.bind(this.mainComponentThis),this.mainComponentThis.wallItemToolsCustomSetter=pd.bind(this.mainComponentThis),this.mainComponentThis.getObjectConnectorKlet3DBinderName=md.bind(this.mainComponentThis),this.mainComponentThis.getObjectConnectorKlet3DBinderData=ud.bind(this.mainComponentThis),this.mainComponentThis.availableEntitiesDomainNamesToObject2DMapping=gd.bind(this.mainComponentThis),this.mainComponentThis.HAEntityFixed2DObjectsBindDefaultStateValue=fd.bind(this.mainComponentThis),this.mainComponentThis.componentWillUnmountCustomCallback=cd.bind(this.mainComponentThis),((e,t)=>{const i=document.createElement("div");s.render(e,i,(()=>{for(;i.firstChild;)t.appendChild(i.firstChild)}))})((0,l.jsxs)($s,{containerRef:this.mainComponentThis.homeAssistantBindingsToolsRef,onCloseRightBox:()=>this.mainComponentThis.onFreeItemToolsCloseClick(this.mainComponentThis.homeAssistantBindingsToolsRef),children:[(0,l.jsx)("h3",{ref:this.mainComponentThis.homeAssistantBindingsToolsTitle}),(0,l.jsx)("div",{ref:this.mainComponentThis.homeAssistantBindingsContainerRef})]}),this.mainComponentThis.mainContainerRef.current),this.onFloorplanDataLoadCallback=this.onFloorplanDataLoadCallback.bind(this.mainComponentThis)}onFloorplanDataLoadCallback(e){if(this.homeAssistantConnection){let t=e[0].entitydata||[];this.klet3DLastSavedData=t.filter((e=>(e.objID=e.objID.map((e=>e.id?e:{id:e})),e.objID=e.objID.filter((e=>this.OBJDATA.find((t=>t.id===e.id)))),e.objID.length>0))).map((e=>new uc(e,e.objID,e.params,this))),this.unsubscribeEntities=(0,mc.p)(this.homeAssistantConnection,this.onEntitiesChangeCallback)}}};var wd=i(1317);function Cd(e){const t=JSON.parse(JSON.stringify(this.HAConfigObject));if(this.HAConfigObject=e,e.time_zone!==t.time_zone&&(wd.log("HA time zone change"),this.floorplanStartDate=W(e.time_zone),this.floorplanStartDateSetTimestamp=(new Date).getTime(),this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene?(this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DOnMapInterval,!0),this.initializeSunLightPositionIntervalCalculation(!0,this.floorplan3DOnMapScene,this.sunLightPositionFloorplan3DOnMapCameraHelpers),this.textFont&&this.createFloorplanTimeMesh(this.floorplan3DViewScene,this.floorplanStartDate)):(this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DViewInterval),this.initializeSunLightPositionIntervalCalculation(!1,this.floorplan3DViewScene,this.sunLightPositionFloorplan3DViewCameraHelpers))),!se(t.unit_system,e.unit_system)){wd.log("HA unit system change");for(let e=0;e<this.objectConnectorsArray.length;e++)"sensor"!==this.objectConnectorsArray[e].class&&"other"!==this.objectConnectorsArray[e].class||this.objectConnectorsArray[e].update({entity:this.objectConnectorsArray[e].entity})}}function xd(e){let t=[];for(let i=0;i<this.objectConnectorsArray.length;i++){let o=e.find((e=>e.entity_id===this.objectConnectorsArray[i].entity.entity_id));o?se(this.objectConnectorsArray[i].entity,o)||this.objectConnectorsArray[i].update({entity:{...o}}):t.push(i)}t.sort(((e,t)=>t-e));for(let i=0;i<t.length;i++)this.objectConnectorsArray[t[i]].remove(),this.objectConnectorsArray.splice(t[i],1);if(this.isInitialFloorplanDrawingFinished)for(let i=0;i<e.length;i++){const t=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.entity_id===e[i].entity_id));t&&!this.objectConnectorsArray.find((t=>t.entity_id===e[i].entity_id))&&this.addObjectConnectorObject(t)}wd.log("objectConnectorsArray",this.objectConnectorsArray)}function yd(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.entity_id===e.entity_id)),s=wc(e);if(o){if("doorWindow"===s)return this.props.mainComponentThis.isPresenceObject(i.object2D.type)?this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"detected_state":"undetected_state"]):this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"open_state":"closed_state"]);if("lights"===s)return this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"switched_on_state":"switched_off_state"]);if("fan"===s)return this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"switched_on_state":"switched_off_state"]);if("cover"===s){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));return t?t.attributes.current_position||0:null}return""}return""}function Sd(e,t){let i=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.objID.find((e=>e.id===t.id))));if(i){const t=this.props.mainComponentThis.homeAssistantEntities.find((e=>e.entity_id===i.entity_id));t&&(e.entity=t,e.entity_id=t.entity_id)}if(this.isFloorplanItemMeshBinded(e)){let i={};this.props.mainComponentThis.isLightObject(t.type)&&(i.isInitialRenderCall=!0),e.changeStateMethod(e,{entity:e.entity,...i})}}function vd(e){return!!e.entity}function Dd(e){const t=e.light;if(!this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.entity_id===e.entity_id)))return!1;const i=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));return!!i&&("on"===t.state?i.state!==this.getHAEntityUserSpecificedStateValue(i,"off",e)&&i.state===this.getHAEntityUserSpecificedStateValue(i,"on",e):i.state===this.getHAEntityUserSpecificedStateValue(i,"on",e)||(i.state,this.getHAEntityUserSpecificedStateValue(i,"off",e),!1))}function Td(e){let t={};const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.entity_id===e.entity_id)),o=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id)),s=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["power"]);if(this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["power_sync"])&&o.attributes.brightness&&o.attributes.brightness<=255&&o.attributes.brightness>=1){const e=o.attributes.brightness;t.power=e/255*20}else t.power=s;const n=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["color"]);if(this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["color_sync"])&&o.attributes.rgb_color){const e=o.attributes.rgb_color;t.color=new Ne.Ilk("rgb(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")"))}else t.color=new Ne.Ilk(n);return t.variant=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["variant"]),t.spot_angle=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["spot_angle"]),t.spot_distance=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["spot_distance"]),t}function jd(e){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));return!!t&&("open"===e.status?t.state!==this.getHAEntityUserSpecificedStateValue(t,"off",e)&&t.state===this.getHAEntityUserSpecificedStateValue(t,"on",e):t.state===this.getHAEntityUserSpecificedStateValue(t,"on",e)||(t.state,this.getHAEntityUserSpecificedStateValue(t,"off",e),!1))}function _d(e){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));return t?"on"===e.state?t.state===this.getHAEntityUserSpecificedStateValue(t,"off",e)?"off":t.state===this.getHAEntityUserSpecificedStateValue(t,"on",e)?"on":"off":t.state===this.getHAEntityUserSpecificedStateValue(t,"on",e)?"on":(t.state,this.getHAEntityUserSpecificedStateValue(t,"off",e),"off"):"off"}function Id(e){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));return t?"on"===e.state?t.state===this.getHAEntityUserSpecificedStateValue(t,"off",e)?"off":(t.state,this.getHAEntityUserSpecificedStateValue(t,"on",e),"on"):t.state===this.getHAEntityUserSpecificedStateValue(t,"on",e)?"on":t.state===this.getHAEntityUserSpecificedStateValue(t,"off",e)?"off":"on":"on"}function kd(e){let t={};const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.entity_id===e.entity_id)),o=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id)),s=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["direction"]);this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["direction_sync"])&&o.attributes.direction?t.direction=o.attributes.direction:t.direction=s;const n=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["percentage"]);return this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["percentage_sync"])&&o.attributes.percentage?t.percentage=o.attributes.percentage:t.percentage=n,t}function Pd(e){let t={};const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.entity_id===e.entity_id)),o=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));return t.openOffset=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["open_offset"]),t.closedOffset=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["closed_offset"]),t.closingDirection=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["closing_direction"]),t.currentPosition=o&&void 0!==o.attributes.current_position?o.attributes.current_position:0,t}function Fd(e){let t={};const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.entity_id===e.entity_id));return wd.log("targetKlet3DData",i),t.detectedOpacity=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["detected_opacity"])/100,t.undetectedOpacity=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["undetected_opacity"])/100,t}async function Od(e){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));if(t){if(t.services.find((e=>"toggle"===e.name))){await this.props.mainComponentThis.callHomeAssistantService(e.entity_id.split(".")[0],"toggle",e.entity_id,{})||this.alertRef.current.showAlert("Error while trying to toggle light. Please check your connection and try again.","error")}}}async function Md(e){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));if(t){if(t.services.find((e=>"toggle"===e.name))){await this.props.mainComponentThis.callHomeAssistantService(e.entity_id.split(".")[0],"toggle",e.entity_id,{})||this.alertRef.current.showAlert("Error while trying to toggle fan. Please check your connection and try again.","error")}}}async function Ld(e){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));if(t){if(t.services.find((e=>"set_cover_position"===e.name))){let i=0;0===t.attributes.current_position&&(i=100);await this.props.mainComponentThis.callHomeAssistantService(e.entity_id.split(".")[0],"set_cover_position",e.entity_id,{position:i})||this.alertRef.current.showAlert("Error while trying to toggle cover. Please check your connection and try again.","error")}}}function Rd(e,t){t.entity=e.entity,t.entity_id=e.entity_id}function Bd(e){const t=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.objID.find((t=>t.id===e.object2D.id))));if(!t)return"";const i=this.props.mainComponentThis.homeAssistantEntities.find((e=>e.entity_id===t.entity_id));return i&&i.attributes.unit_of_measurement||""}function Ad(e){return wc(e.entity)}function Wd(e,t){e.entity={...t.entity},e.entity_id=e.entity.entity_id,e.domain=e.entity_id.split(".")[0]}function Vd(e){const t={...e.entity};e.entity=null;const i=this.getHAEntityUserSpecificedStateValue(t,this.props.mainComponentThis.HAEntityFixed2DObjectsBindDefaultStateValue(t.entity_id.split(".")[0],e),e);return{entity:{...t,state:""!==i?i:void 0}}}function Nd(e,t){return e.entity=t.entity,{entity:t.entity}}function Ed(e,t){const i=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.entity_id===t.entity.entity_id));if(!i)return null;let o={};return o.isSensorNumberValue=this.getIsSensorNumberValue(t.entity.entity_id,e.object2D),o.sensorOutputValue=o.isSensorNumberValue?j(parseFloat(t.entity.state),this.sensorValueDecimalPrecision):t.entity.state,o.connectorInstanceSavedParameters=i,o.sensorMeshPropertiesSetter=e=>{e.name=t.entity.entity_id,e.entity=t.entity},o}function zd(e,t){const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e)),o=this.props.mainComponentThis.homeAssistantEntities.find((e=>e.entity_id===i.entity_id));return"number"===this.props.mainComponentThis.getKlet3DDataParamValue(i,t,["sensor_type"])&&!z.isNumber(o.state)}function Hd(e,t){const i=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.entity_id===t.entity_id));if(!i)return null;let o={};return o.otherValue=t.entity.state,o.connectorInstanceSavedParameters=i,o.otherMeshPropertiesSetter=e=>{e.name=t.entity.entity_id,e.entity=t.entity},o}function Gd(e){return{entity:{...this.props.mainComponentThis.getObjectConnectorKlet3DBinderData(e)}}}function Ud(e){return e.entity.entity_id}async function qd(e){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity.entity_id));if(t){if(t.services.find((e=>"toggle"===e.name))){await this.props.mainComponentThis.callHomeAssistantService(e.entity.entity_id.split(".")[0],"toggle",e.entity.entity_id,{})||this.alertRef.current.showAlert("Error while trying to toggle ".concat(e.type,". Please check your connection and try again."),"error")}}}function Yd(e,t){if(t)return{value:this.getObjectPanelItemValue(e,!0,this.getObjectConnectorParamsData(e.entity.entity_id)),name:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(e.entity.entity_id),entity_id:e.entity.entity_id,entity:e.entity};{const t=this.getIsSensorNumberValue(e.entity_id,e.object2D);return{value:this.getObjectPanelItemValue(e,!1,this.getObjectConnectorParamsData(e.entity.entity_id),t),name:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(e.entity.entity_id),isNumberValue:t,entity_id:e.entity.entity_id,entity:e.entity}}}function Kd(e,t,i,o){return t?this.props.mainComponentThis.isCoverObject(e.object2D.type)?this.getHAEntityUserSpecificedStateValue(i.entity,null,e):i.entity.state===this.getHAEntityUserSpecificedStateValue(i.entity,"on",e):o?j(i.entity.state,this.sensorValueDecimalPrecision):i.entity.state}var Xd=i(1317);const Zd=class{constructor(e,t){Xd.log("HomeAssistant3DViewController constructor",t),this.mainComponentThis=e,this.controlerParams=t,this.floorplan3DThis=this.controlerParams.floorplan3DThis,this.floorplan3DThis.HAConfigObject={},this.floorplan3DThis.onHAConfigChange=Cd.bind(this.floorplan3DThis),this.floorplan3DThis.onHAEntitiesChangeCallback=xd.bind(this.floorplan3DThis),this.floorplan3DThis.getHAEntityUserSpecificedStateValue=yd.bind(this.floorplan3DThis),this.floorplan3DThis.setFloorplanItemMeshProperties=Sd.bind(this.floorplan3DThis),this.floorplan3DThis.isFloorplanItemMeshBinded=vd.bind(this.floorplan3DThis),this.floorplan3DThis.getLightTurnOnState=Dd.bind(this.floorplan3DThis),this.floorplan3DThis.getLightProperties=Td.bind(this.floorplan3DThis),this.floorplan3DThis.getDoorWindowOpenStatus=jd.bind(this.floorplan3DThis),this.floorplan3DThis.getFanState=_d.bind(this.floorplan3DThis),this.floorplan3DThis.getPresenceState=Id.bind(this.floorplan3DThis),this.floorplan3DThis.getFanProperties=kd.bind(this.floorplan3DThis),this.floorplan3DThis.getCoverProperties=Pd.bind(this.floorplan3DThis),this.floorplan3DThis.getPresenceProperties=Fd.bind(this.floorplan3DThis),this.floorplan3DThis.toggleLightStateAction=Od.bind(this.floorplan3DThis),this.floorplan3DThis.toggleFanStateAction=Md.bind(this.floorplan3DThis),this.floorplan3DThis.toggleCoverStateAction=Ld.bind(this.floorplan3DThis),this.floorplan3DThis.cloneUnfixedBindedObject3DCustomCallback=Rd.bind(this.floorplan3DThis),this.floorplan3DThis.getSensorUnitOfMeasurement=Bd.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectConnectorClassValue=Ad.bind(this.floorplan3DThis),this.floorplan3DThis.setObjectsConnectorInstanceCustomProperties=Wd.bind(this.floorplan3DThis),this.floorplan3DThis.removeBindedFixedObjectCallback=Vd.bind(this.floorplan3DThis),this.floorplan3DThis.addBindedFixedObjectCallback=Nd.bind(this.floorplan3DThis),this.floorplan3DThis.getSensorMeshParameters=Ed.bind(this.floorplan3DThis),this.floorplan3DThis.getIsSensorNumberValue=zd.bind(this.floorplan3DThis),this.floorplan3DThis.getOtherMeshParameters=Hd.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectConnectorParamsData=Gd.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectConnectorParamsDataIDValue=Ud.bind(this.floorplan3DThis),this.floorplan3DThis.onDoorWindowSwitchChange=qd.bind(this.floorplan3DThis),this.floorplan3DThis.getPanelItemProperties=Yd.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectPanelItemValue=Kd.bind(this.floorplan3DThis)}};const Jd=class{constructor(e,t){this.mainComponentThis=e,this.addOnIntegrationType=t,this.view2DController=null,this.view3DController=null,this.target2DViewControllerClass=null,this.target3DViewControllerClass=null,"HomeAssistant"===this.addOnIntegrationType&&(this.target2DViewControllerClass=bd,this.target3DViewControllerClass=Zd)}initializeController(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"2D"===e?this.view2DController=new this.target2DViewControllerClass(this.mainComponentThis,t):this.view3DController=new this.target3DViewControllerClass(this.mainComponentThis,t)}};class Qd extends o.Component{constructor(){super(),this.setSelectedObjectData=e=>{this.selectedObject2D=e,this.setState({checked:e.additionalParams.mirrored})},this.state={checked:!0},this.selectedObject2D=null,this.setSelectedObjectData=this.setSelectedObjectData.bind(this)}render(){return(0,l.jsx)(xt,{children:this.selectedObject2D&&this.props.mainComponentThis.isFurnitureObject(this.selectedObject2D.type)?(0,l.jsx)(ft,{disabled:!0,infoLabel:!0,infoLabelTitle:"Mirror object",infoText:"Check this box to mirror the object.",explanationInfoBoxStyles:{left:-120,width:100,zIndex:1},checked:this.state.checked}):null})}}const $d=Qd;class ep extends o.Component{constructor(){super(),this.setFloorplanFloorsData=(e,t)=>this.setState({floorplanFloors:e},(()=>t&&t())),this.setSelectedFloorplanFloor=(e,t)=>this.setState({selectedFloor:e},(()=>{this.props.mainComponentThis.floorplan3DComponent.current||(this.props.mainComponentThis.hideActiveRightBox(),this.props.mainComponentThis.translateRightBox(this.props.mainComponentThis.floorParameters.current,-250,!0)),t&&t()})),this.getSelectedFloorplanFloor=()=>this.state.selectedFloor,this.getTargetSwitchFloor=()=>this.state.targetSwitchFloor,this.getTargetDeleteFloor=()=>this.state.targetDeleteFloor,this.onFloorplanFloorClick=e=>()=>{this.state.selectedFloor.floorNumber!==e.floorNumber?this.setState({targetSwitchFloor:e},(()=>this.props.mainComponentThis.handleFloorplanFloorClick(e))):this.props.mainComponentThis.floorplan3DComponent.current||(this.props.mainComponentThis.hideActiveRightBox(),this.props.mainComponentThis.translateRightBox(this.props.mainComponentThis.floorParameters.current,-250,!0))},this.state={floorplanFloors:[],selectedFloor:null,targetSwitchFloor:null,targetDeleteFloor:null},this.setFloorplanFloorsData=this.setFloorplanFloorsData.bind(this),this.setSelectedFloorplanFloor=this.setSelectedFloorplanFloor.bind(this),this.getSelectedFloorplanFloor=this.getSelectedFloorplanFloor.bind(this),this.getTargetSwitchFloor=this.getTargetSwitchFloor.bind(this),this.getTargetDeleteFloor=this.getTargetDeleteFloor.bind(this),this.onFloorplanFloorClick=this.onFloorplanFloorClick.bind(this)}render(){const{floorplanFloors:e,selectedFloor:t}=this.state;return(0,l.jsx)("div",{ref:this.props.containerRef,className:"floorplan-floors-buttons-container",children:t&&e.sort(((e,t)=>e.floorNumber-t.floorNumber)).map((e=>(0,l.jsxs)("div",{className:"panel-option-container",children:[(0,l.jsxs)("div",{className:"option-name-note-container",children:[(0,l.jsxs)("button",{title:"Floor ".concat(e.floorNumber),className:"option-button btn ".concat(t.floorNumber===e.floorNumber?"btn-active":""),style:{margin:"5px 0"},onClick:this.onFloorplanFloorClick(e),children:[(0,l.jsx)("span",{className:"label-span",children:"Floor\xa0"}),(0,l.jsx)("span",{children:e.floorNumber})]}),(0,l.jsx)("div",{className:"floor-info",children:(0,l.jsx)(st,{indoorPanelExplanationBox:this.props.mainComponentThis.panelFloorNoteExplanationBox,infoText:Ve(e)})})]}),(0,l.jsx)("a",{href:"https://app.klet3d.com/floorplan/".concat(this.props.mainComponentThis.getFloorplanID()),target:"_blank",rel:"noreferrer",style:{textDecoration:"none",visibility:"hidden"},children:(0,l.jsx)("button",{className:"btn btn-default action-icon-button",title:"Delete floor ".concat(e.floorNumber),children:(0,l.jsx)(Pc.Z,{})})})]},e.floorNumber)))})}}const tp=ep;class ip extends o.Component{constructor(){super(),this.setFloorNumber=e=>{this.numberInputRef.current.setValue(e),this.numberInputRef.current.setInitialValue(e),this.setState({floorNumberError:null})},this.state={floorNumberError:null},this.numberInputRef=o.createRef(),this.setFloorNumber=this.setFloorNumber.bind(this)}render(){return(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"parameter-title",children:"FLOOR NUMBER"}),(0,l.jsx)("div",{className:"parameter-input-container",children:(0,l.jsxs)(xt,{children:[(0,l.jsx)(ht,{ref:this.numberInputRef,disabled:!0,placeholder:"Floor number",allowEmpty:!0,inputStep:1,inputMin:0,inputMax:300}),this.state.floorNumberError&&(0,l.jsx)("div",{className:"form-control feedback",children:this.state.floorNumberError})]})})]})}}const op=ip;class sp extends o.Component{constructor(){super(),this.setFloorNoteValue=e=>{this.setState({value:e})},this.state={value:""},this.setFloorNoteValue=this.setFloorNoteValue.bind(this)}render(){return(0,l.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,l.jsx)("h3",{className:"parameter-title",children:"FLOOR NOTE"}),(0,l.jsx)("div",{className:"parameter-input-container",children:(0,l.jsx)("textarea",{disabled:!0,style:{fontFamily:"inherit"},placeholder:"Insert floor notes",className:"form-control input",value:this.state.value,type:"text"})})]})}}const np=sp;class ap extends o.Component{constructor(){super(),this.getCheckedStatus=()=>this.state.showFloorDrawingHelper,this.onFloorDrawingHelperChange=()=>{this.state.showFloorDrawingHelper?X(this.props.mainComponentThis.boxFloorDrawingHelper.current,this.props.mainComponentThis.othersTimeout,null,!1):(this.props.mainComponentThis.drawUnderlyingFloorDrawingHelper(this.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor()),K(this.props.mainComponentThis.boxFloorDrawingHelper.current,this.props.mainComponentThis.othersTimeout,null,"inline",!1)),this.setState({showFloorDrawingHelper:!this.state.showFloorDrawingHelper})},this.state={showFloorDrawingHelper:!0},this.onFloorDrawingHelperChange=this.onFloorDrawingHelperChange.bind(this),this.getCheckedStatus=this.getCheckedStatus.bind(this)}render(){return(0,l.jsxs)("div",{className:"floor-drawing-helper-container",children:[(0,l.jsxs)("div",{className:"label-container",children:[(0,l.jsx)("h3",{className:"parameter-title",children:"UNDERLYING FLOOR"}),(0,l.jsx)(st,{infoText:"Show or hide the floor below as a drawing guide",explanationInfoBoxStyles:{left:-150,width:130,zIndex:1}})]}),(0,l.jsx)("div",{className:"switch-container parameter-input-container",children:(0,l.jsx)(Et.Z,{theme:Yt,children:(0,l.jsx)(qt.Z,{checked:this.state.showFloorDrawingHelper,onChange:this.onFloorDrawingHelperChange})})})]})}}const rp=ap;var lp=i(1317);class hp extends o.Component{constructor(e){super(e),this.setShow3DStatus=(e,t)=>this.setState({show3D:e},(()=>t&&t())),this.onFloorplanDataLoadCallback=e=>{lp.log("ucitavaj"),this.floorplanFloorsData=e[0].plan_object,this.floorplanFloorsData.forEach((e=>{Object.hasOwn(e,"floorID")||(e.floorID=(0,di.v4)()),Object.hasOwn(e,"floorHeight")||(e.floorHeight=e.wallHeight),e.wallData.forEach((t=>{Object.hasOwn(t,"wallHeight")?Object.hasOwn(t,"startHeight")&&Object.hasOwn(t,"endHeight")||(t.startHeight=t.endHeight=t.wallHeight):t.wallHeight=t.startHeight=t.endHeight=e.floorHeight}))})),this.floorplanFloorsPanelBoxRef.current.setFloorplanFloorsData(this.floorplanFloorsData,(()=>{this.setFloorplanEnvironmentSettings(e[0].plan_object,e[0].plan_general),this.determineBoxPlanNameValue("set_name",e[0].plan_name),this.loadFloorplanFloor(this.getLowestFloorData()),this.floorplanGeneral=e[0].plan_general;const t=this.getFloorplanBBoxCoords();this.floorplanLastSavedTopLeftSvgCoords={x:t.minX,y:t.minY},this.addOnDrawingControlerInstance.view2DController.onFloorplanDataLoadCallback(e)}))},this.state={responseError:null,customResponseError:null,show3D:!0},this.mounted=!1,this.useGenerateHMWebWorkers="undefined"!==typeof Worker&&"undefined"!==typeof OffscreenCanvas,this.measureSystemContext={userUnit:this.props.userUnit},this.WALLS=[],this.ORPHANWALLS=[],this.OBJDATA=[],this.ROOM=[],this.HISTORY=[],this.userAddedObjects=[],this.windowModels=[...Li],this.doorModels=[...Ri],this.lightModels=[...Bi],this.bathroomModels=[...Ai],this.bedroomModels=[...Wi],this.exteriorModels=[...Vi],this.kitchenModels=[...Ni],this.livingRoomModels=[...Ei],this.otherModels=[...zi],this.officeModels=[...Hi],this.staircaseModels=[...Gi],this.vehiclesModels=[...Ui],this.fanModels=[...qi],this.coverModels=[...Yi],this.presenceModels=[...Ki],this.furnitureModels=[...go],this.windowsDetails={...Qi},this.doorsDetails={...$i},this.lightsDetails={...eo},this.bathroomDetails={...to},this.bedroomDetails={...io},this.exteriorDetails={...oo},this.kitchenDetails={...so},this.livingRoomDetails={...no},this.fanDetails={...ao},this.coverDetails={...ro},this.presenceDetails={...lo},this.otherDetails={...ho},this.officeDetails={...co},this.staircaseDetails={...po},this.vehiclesDetails={...mo},this.furnitureDetails={...fo},this.furnitureDimensions={...uo},this.folderNameToModelsMapping={window:{title:"Windows",models:this.windowModels,details:this.windowsDetails},door:{title:"Doors",models:this.doorModels,details:this.doorsDetails},light:{title:"Lights",models:this.lightModels,details:this.lightsDetails},fan:{title:"Fans",models:this.fanModels,details:this.fanDetails},cover:{title:"Covers",models:this.coverModels,details:this.coverDetails},presence:{title:"Presence",models:this.presenceModels,details:this.presenceDetails},livingRoom:{title:"Living room",models:this.livingRoomModels,details:this.livingRoomDetails,isFurnitureCategory:!0},kitchen:{title:"Kitchen",models:this.kitchenModels,details:this.kitchenDetails,isFurnitureCategory:!0},bedroom:{title:"Bedroom",models:this.bedroomModels,details:this.bedroomDetails,isFurnitureCategory:!0},office:{title:"Office",models:this.officeModels,details:this.officeDetails,isFurnitureCategory:!0},bathroom:{title:"Bathroom",models:this.bathroomModels,details:this.bathroomDetails,isFurnitureCategory:!0},staircase:{title:"Staircase",models:this.staircaseModels,details:this.staircaseDetails,isFurnitureCategory:!0},exterior:{title:"Exterior",models:this.exteriorModels,details:this.exteriorDetails,isFurnitureCategory:!0},other:{title:"Other",models:this.otherModels,details:this.otherDetails,isFurnitureCategory:!0},vehicles:{title:"Vehicles",models:this.vehiclesModels,details:this.vehiclesDetails,isFurnitureCategory:!0}},this.wallIdCounter=0,this.roomIdCounter=0,this.drag="off",this.action=0,this.magnetic=0,this.construc=0,this.wallDrawingStartClick=!1,this.nearWallNodeRange=10,this.selectModeNearWallNodeRange=1,this.Rcircle=4,this.wallBinderBallsRadius=4,this.wallBinderPulsingBallRadius=5,this.nearWallBinderRadius=6,this.nearWallConstrucRadius=12,this.wallThicknessMinValue="metric"===this.measureSystemContext.userUnit?3:1,this.wallThicknessMaxValue="metric"===this.measureSystemContext.userUnit?50:20,this.wallWidthInputStep=.1,this.wallWidthDecimalPrecision=-Math.log10(this.wallWidthInputStep),this.wallLengthInputStep="metric"===this.measureSystemContext.userUnit?.01:.1,this.wallLengthDecimalPrecision=-Math.log10(this.wallLengthInputStep),this.doorWidthMinValue="metric"===this.measureSystemContext.userUnit?40:15,this.doorWidthMaxValue="metric"===this.measureSystemContext.userUnit?120:50,this.windowWidthMinValue="metric"===this.measureSystemContext.userUnit?30:10,this.windowWidthMaxValue="metric"===this.measureSystemContext.userUnit?300:120,this.itemDimensionsInputStep="metric"===this.measureSystemContext.userUnit?1:.1,this.itemDimensionsDecimalPrecision=-Math.log10(this.itemDimensionsInputStep),this.roomSurfaceInputStep=.1,this.roomSurfaceDecimalPrecision=-Math.log10(this.roomSurfaceInputStep),this.isPointOnWallDecimalPrecision=8,this.mode="select_mode",this.modeOption=void 0,this.selectModeRightClickDraggOn=!1,this.taille_w=null,this.taille_h=null,this.offset=null,this.grid=20,this.showRib=!0,this.meter=30,this.floorplan3DScaleFactor=3,this.imperialSystemSquareFeetSize=3,this.wallThicknessDefaultValue="metric"===this.measureSystemContext.userUnit?16:6,this.wallHeightDefaultValue="metric"===this.measureSystemContext.userUnit?2.6*this.meter:Te(120,this.measureSystemContext.userUnit,"inch","meter",!0)*this.meter,this.groundColorDefaultValue="#8b4513",this.clockVisibilityDefaultValue="visible",this.skyColorDefaultType="dynamic",this.skyColorDefaultValue="#000000",this.wallHeightDecimalPrecision=0,this.wallHeightMaxValue="metric"===this.measureSystemContext.userUnit?5e3:2e3,this.floorHeight=null,this.floorThickness=.05*this.meter,this.groundColor=null,this.skyColor=null,this.skyColorType=null,this.clockVisibility=null,this.floorNumber=null,this.floorNote="",this.wallSize=Te(this.wallThicknessDefaultValue,this.measureSystemContext.userUnit,"metric"===this.measureSystemContext.userUnit?"centimeter":"inch","meter",!0)*this.meter,this.grid_snap="off",this.colorWall="#666",this.pox=0,this.poy=0,this.touchZoomDollyStartDistance=null,this.touchZoomDollyEndDistance=null,this.touchStartPageCoordinates=null,this.touchZoomTouches=[],this.zoomTouchFocusPoint=null,this.wallStartX=0,this.wallStartY=0,this.smallScreenPixelSize=600,this.smallScreenMinimizedPanelSize=50,this.smallScreenMaximizedPanelSize=150,this.bigScreenMinimizedPanelSize=100,this.bigScreenMaximizedPanelSize=200,this.rightBoxWidth=250,this.width_viewbox=null,this.height_viewbox=null,this.ratio_viewbox=null,this.originX_viewbox=0,this.originY_viewbox=0,this.defaultZoomLevel=9,this.zoom=this.defaultZoomLevel,this.zoomXMove=200,this.zoomXMoveOnMapScaleFactor=20,this.zoomXView=50,this.maxZoomOutLevel=-1/0,this.maxZoomInLevelDefaultValue=15,this.maxZoomInLevel=this.maxZoomInLevelDefaultValue,this.zoomFactor=1,this.globalArea=null,this.snap=null,this.lineIntersectionP=null,this.sizeText=[],this.showAllSizeStatus=0,this.editor=null,this.qSVG=null,this.binder=null,this.selectedBinder=null,this.windowRotationAxisDirectionGraph=null,this.selectedRoomId=null,this.equation1=null,this.equation2=null,this.equation3=null,this.Rooms=null,this.wallEndConstruc=!1,this.lengthTemp=null,this.wallListRun=[],this.wallListObj=[],this.equationFollowers=[],this.equationsObj=[],this.x=void 0,this.y=void 0,this.distX=null,this.distY=null,this.multiChecked=!0,this.showBoxGridChecked=!0,this.decimalPrecision=12,this.boxWallCoordinates=null,this.exportPngShowGrid=!1,this.exportPngShowMeasures=!1,this.lastSavedObject=null,this.exportPngResolutionScale=4,this.selectedWallMaterial="Unknown",this.modalTimeout=500,this.othersTimeout=200,this.floorplanGeneral=null,this.floorplanFloorsData=[],this.hiddenFloorplanFloors3D=[],this.floorplanLastSavedTopLeftSvgCoords=null,this.testLocationNumberDefaultSizes={radius:this.meter/2,fontSize:15},this._map=null,this.mapCornersGpsCoords=[],this.mapCornerCoordsDebug=!1,this.addOnDrawingControlerInstance=null,this.klet3DLastSavedData=[],this.SPOT_DISTANCE_MAX=1e3,this.linRef=o.createRef(),this.mainContainerRef=o.createRef(),this.mapLayer2DContainerRef=o.createRef(),this.floorplan3DContainerRef=o.createRef(),this.showFloorplanOnMapContainerRef=o.createRef(),this.floorplan3DComponent=o.createRef(),this.boxPlanName=o.createRef(),this.boxFloorplanImage=o.createRef(),this.boxFloorDrawingHelper=o.createRef(),this.boxSurface=o.createRef(),this.boxRoom=o.createRef(),this.boxWall=o.createRef(),this.boxArea=o.createRef(),this.boxText=o.createRef(),this.boxDebug=o.createRef(),this.boxCarpentry=o.createRef(),this.boxGridRef=o.createRef(),this.boxScale=o.createRef(),this.boxRib=o.createRef(),this.boxBind=o.createRef(),this.wallMaterialsAsyncPatternRef=o.createRef(),this.roomTexturesAsyncPatternRef=o.createRef(),this.furnitureAsyncPatternRef=o.createRef(),this.furnitureDefsContainerRef=o.createRef(),this.roomTextureContainerRef=o.createRef(),this.roomTexturePreviewContainerRef=o.createRef(),this.uploadFloorplanPanelButtonContainer=o.createRef(),this.boxInfo=o.createRef(),this.wallWidthValue=o.createRef(),this.wallLengthValue=o.createRef(),this.freeItemToolsRef=o.createRef(),this.freeItemTitleRef=o.createRef(),this.freeItemDimensionsRef=o.createRef(),this.freeItemPositionsRef=o.createRef(),this.freeItemRotationsRef=o.createRef(),this.freeItemMaterialsRef=o.createRef(),this.freeItemMaterialsComponentRef=o.createRef(),this.freeItemTextToolsRef=o.createRef(),this.freeItemTypesSelectionBoxRef=o.createRef(),this.textItemFontSizeValue=o.createRef(),this.itemRotationValue=o.createRef(),this.labelBox=o.createRef(),this.textLayerModalContent=o.createRef(),this.showFloorplanNoWallsErrorModal=o.createRef(),this.selectedFloorNoWallsErrorModal=o.createRef(),this.panel=o.createRef(),this.showRibRef=o.createRef(),this.showBoxGrid=o.createRef(),this.showMapLayer2DInputRef=o.createRef(),this.roomTools=o.createRef(),this.wallTools=o.createRef(),this.floorParameters=o.createRef(),this.roomName=o.createRef(),this.wallItemToolsRef=o.createRef(),this.wallItemToolsTitle=o.createRef(),this.wallItemDimensionsRef=o.createRef(),this.wallItemPositionsRef=o.createRef(),this.wallItemMaterialsRef=o.createRef(),this.wallItemMaterialsComponentRef=o.createRef(),this.activeItemRotationsRef=o.createRef(),this.activeItemPositionsRef=o.createRef(),this.roomNameSelectRef=o.createRef(),this.wallMaterialRef=o.createRef(),this.wallAlwaysHideRef=o.createRef(),this.wallCustomHeightRef=o.createRef(),this.scaleVal=o.createRef(),this.selectMode=o.createRef(),this.roomMode=o.createRef(),this.layerMode=o.createRef(),this.layerList=o.createRef(),this.floorplanImageTools=o.createRef(),this.floorplanImagePattern=o.createRef(),this.floorplanImage=o.createRef(),this.areaValue=o.createRef(),this.roomSurface=o.createRef(),this.doorHinge=o.createRef(),this.wallLength=o.createRef(),this.wallWidth=o.createRef(),this.rightControlsBox=o.createRef(),this.panelControl=o.createRef(),this.roomNameDropdownMenu=o.createRef(),this.uploadFloorplanImageMode=o.createRef(),this.loadingComponentContainer=o.createRef(),this.uploadImageFloorplanSettingsIconRef=o.createRef(),this.uploadFloorplanImageStatusContainerRef=o.createRef(),this.uploadImageFloorplanHideRef=o.createRef(),this.uploadImageFloorplanShowRef=o.createRef(),this.uploadFloorplanImageErrorModal=o.createRef(),this.uploadFloorplanImageErrorMessageRef=o.createRef(),this.wallDrawingAltHint=o.createRef(),this.wallWidthNumberSliderInput=o.createRef(),this.floorHeightInputRef=o.createRef(),this.uploadFloorplanImageToolsRef=o.createRef(),this.layersListArrowRef=o.createRef(),this.mapStylesChangeRef=o.createRef(),this.showMapLayer2D3DRef=o.createRef(),this.gridSvgElementRef=o.createRef(),this.windowRotationOptionsContainerRef=o.createRef(),this.wallItemTypesSelectionBoxRef=o.createRef(),this.roomFloorTexturesComponentContainerRef=o.createRef(),this.roomFloorTexturesRepeatComponentRef=o.createRef(),this.roomFloorTexturesRepeatComponentContainerRef=o.createRef(),this.roomFloorTypesSelectionRef=o.createRef(),this.wallItemHideWithWallRef=o.createRef(),this.freeItemMirroredRef=o.createRef(),this.bindingWallItemContainerRef=o.createRef(),this.bindingPopupRightBoxContainerRef=o.createRef(),this.bindingFreeItemContainerRef=o.createRef(),this.bindingRightBoxComponentRef=o.createRef(),this.floorplanFloorsPanelBoxContainerRef=o.createRef(),this.floorplanFloorsPanelBoxRef=o.createRef(),this.panelFloorNoteExplanationBox=o.createRef(),this.floorNoteInputRef=o.createRef(),this.floorNumberInputRef=o.createRef(),this.floorDrawingHelperOptionsRef=o.createRef(),this.panelInfoExplanationBox=o.createRef(),this.onShow3DClick=Eh.bind(this),this.resetHistory=Vr.bind(this),this.save=Er.bind(this),this.determineBoxPlanNameValue=Nr.bind(this),this.load=zr.bind(this),this.removeSelectedBinder=vr.bind(this),this.removeBinder=Dr.bind(this),this.exportFloorplanPngOnLoadCallback=Br.bind(this),this.downloadSvg=Ar.bind(this),this.onShowBoxGridClick=Qh.bind(this),this.onShowOnMapLayer2DClick=$h.bind(this),this.onShowRibClick=Jh.bind(this),this.onResetRoomToolsClick=ec.bind(this),this.onZoomButonClick=tc.bind(this),this.onFloorplanGpsCoordsClick=ic.bind(this),this.onFloorHeightInputChange=oc.bind(this),this.zoom_maker=gr.bind(this),this.handleMouseMove=Uo.bind(this),this.handleMouseDown=Xo.bind(this),this.handleMouseUp=Yo.bind(this),this.handleContextMenu=ts.bind(this),this.handleMouseWheel=Zo.bind(this),this.handleTouchStart=Jo.bind(this),this.handleTouchMove=$o.bind(this),this.handleTouchEnd=es.bind(this),this.textAndUploadFloorplanImageBinderCreation=Vo.bind(this),this.roomModeBinderCreation=No.bind(this),this.selectModeObj2DWallNodeWallSegmentBinderCreation=Eo.bind(this),this.createWindowRotationPropertiesBinder=zo.bind(this),this.inWallonWallObjectBinderCreation=dl.bind(this),this.inWallonWallObjectBinderAngleCalculation=hl.bind(this),this.inWallonWallObjectBinderJoinToWall=cl.bind(this),this.floorFreeObjectPositionValidation=pl.bind(this),this.openWallItemToolsRightBox=ml.bind(this),this.openFreeItemToolsRightBox=ul.bind(this),this.convertValueToSvgUnits=gl.bind(this),this.convertSvgToValueUnits=fl.bind(this),this.updateSelectedRoomFill=bl.bind(this),this.handleObj2DMouseUp=wl.bind(this),this.setFloorplanEnvironmentSettings=vl.bind(this),this.resetSelectedObjectMaterial=Dl.bind(this),this.getFloorplanGpsLatitude=Tl.bind(this),this.getFloorplanGpsLongitude=jl.bind(this),this.getFloorplanGroundColorClockVisibilityValue=Cl.bind(this),this.setFloorplanGroundColorClockVisibilityValues=xl.bind(this),this.getSkyColorTypeColorValue=yl.bind(this),this.setSkyColorTypeColorValue=Sl.bind(this),this.getKlet3DBinderParamsDefaultValues=_l.bind(this),this.getKlet3DBinderObjectLevelParams=Il.bind(this),this.resetKlet3DBinderParams=kl.bind(this),this.isWindowObject=Pl.bind(this),this.isDoorObject=Fl.bind(this),this.isDoorWindowObject=Ol.bind(this),this.isLightObject=Ml.bind(this),this.isStaircaseObject=Ll.bind(this),this.isFanObject=Rl.bind(this),this.isCoverObject=Bl.bind(this),this.isPresenceObject=Al.bind(this),this.isFurnitureObject=Wl.bind(this),this.isSameBindedObjectType=Vl.bind(this),this.getObjectClass=Nl.bind(this),this.getObjectFolderName=Hl.bind(this),this.getObjectItemType=Gl.bind(this),this.createFurniturePatternImagePathData=El.bind(this),this.getFurniturePatternImagePaths=zl.bind(this),this.createUserAddedObjectModelsDetailsDimensionsData=Ul.bind(this),this.setKlet3DDataParamValue=Yl.bind(this),this.getKlet3DDataParamValue=Kl.bind(this),this.centerAndShowWholeFloor=dr.bind(this),this.centerAndShowFloorplanAndUploadedFloorplanImage=fr.bind(this),this.isOverMaxZoomIn=br.bind(this),this.isOverMaxZoomOut=wr.bind(this),this.determineMaxZoomInLevel=Cr.bind(this),this.setScaleValueWidth=xr.bind(this),this.centerAndShowWholeBoxOperations=cr.bind(this),this.showWholeBoxZoom=hr.bind(this),this.setZoomParameters=ur.bind(this),this.zoomToSpecificLevel=mr.bind(this),this.calcul_snap=Yr.bind(this),this.calcul_snap_inverse=Kr.bind(this),this.intersectionOff=lh.bind(this),this.intersection=hh.bind(this),this.hideAllSize=nh.bind(this),this.inWallRib=ah.bind(this),this.rib=rh.bind(this),this.cursor=Xr.bind(this),this.razButton=Or.bind(this),this.foncButton=Mr.bind(this),this.onLayerModeClick=jr.bind(this),this.onRoomModeClick=_r.bind(this),this.onSelectModeClick=Ir.bind(this),this.onUploadFloorplanImageClick=Pr.bind(this),this.handleKeyDown=Zh.bind(this),this.handleWindowResize=Xh.bind(this),this.hideRightBox=$r.bind(this),this.showHideLeftRightBoxes=el.bind(this),this.isSmallScreen=ol.bind(this),this.isPanelMaximized=il.bind(this),this.onWallToolsCloseClick=Yh.bind(this),this.onWallItemToolsCloseClick=Kh.bind(this),this.onFreeItemToolsCloseClick=Uh.bind(this),this.onFloorParametersCloseClick=qh.bind(this),this.translateRightBox=Jr.bind(this),this.onPanelControlClick=Gh.bind(this),this.minimizePanel=zh.bind(this),this.maximizePanel=Hh.bind(this),this.hideActiveRightBox=Zr.bind(this),this.hideSubItems=Fr.bind(this),this.isFloorplanEmpty=Gr.bind(this),this.isFloorplanNoWalls=Ur.bind(this),this.onUploadedFloorplanImageStatusChangeClick=kr.bind(this),this.resizeAndKeyDownEventListenersControl=Nh.bind(this),this.setWallToolsValues=Mh.bind(this),this.createRoomPath=yr.bind(this),this.createRoomBinderPath=Sr.bind(this),this.setRoomToolsValues=Oh.bind(this),this.setWallItemToolsValue=Rh.bind(this),this.setFreeItemToolsValue=Lh.bind(this),this.componentWillUnmountCustomCallback=null,this.carpentryCalc=Qr.bind(this),this.showWholeBoxZoomOperations=pr.bind(this),this.getBoxDimensionsForCurrentZoom=ar.bind(this),this.boxZoomSimulation=lr.bind(this),this.boxZoomSimulationSetZoomParameters=rr.bind(this),this.getFloorplanID=sl.bind(this),this.getFloorplanName=nl.bind(this),this.setSvgViewBoxes=al.bind(this),this.handleRightControlsBoxResize=tl.bind(this),this.createWindowRotationSvg=rl.bind(this),this.setWindowObjectRotationProperties=ll.bind(this),this.calculateGpsCoordinatesForNewSvgPoint=pa.bind(this),this.handleMapDrag=ga.bind(this),this.handleMapZoomChange=fa.bind(this),this.onMapContextLoadedCallback2D=ba.bind(this),this.onMapCameraOptionsSetFinishCallback=wa.bind(this),this.calculateMapCornersCoordinatesFromTopLeftPoint=ua.bind(this),this.alignFloorplanTopLeftCornerOnMap=ma.bind(this),this.getCurrentMapCornersGpsCoords=Ca.bind(this),this.handleMapLayerWindowResize=xa.bind(this),this.coordinateFloorplanSvgZoomWithMap=ya.bind(this),this.setShow3DStatus=this.setShow3DStatus.bind(this),this.onFloorplanDataLoadCallback=this.onFloorplanDataLoadCallback.bind(this),this.handleFloorplanFloorClick=sc.bind(this),this.loadFloorplanFloor=Hr.bind(this),this.getLowestFloorData=Xl.bind(this),this.getHighestFloorData=Zl.bind(this),this.getFloorStartElevation=Jl.bind(this),this.setFloorHeightInputValue=Ql.bind(this),this.setFloorParametersValues=$l.bind(this),this.createObj2DClassInstanceFromObj=eh.bind(this),this.getFloorplanBBoxCoords=th.bind(this),this.setWallsChildParentValues=ih.bind(this),this.drawUnderlyingFloorDrawingHelper=oh.bind(this)}componentDidMount(){this.mounted=!0,this.qSVG=new Fo(this),this.editor=new Bo(this.boxWall,this.boxArea,this.panel,this.boxRoom,this.boxSurface,this.boxRib,this.areaValue,this.boxScale,this),this.linRef.current.addEventListener("wheel",(e=>{e.preventDefault(),this.handleMouseWheel(e)}),{passive:!1}),this.linRef.current.addEventListener("touchstart",(e=>{e.preventDefault(),this.handleTouchStart(e,this)}),{passive:!1}),this.linRef.current.addEventListener("touchmove",(e=>{e.preventDefault(),this.handleTouchMove(e,this)}),{passive:!1}),this.linRef.current.addEventListener("touchend",(e=>{e.preventDefault(),this.handleTouchEnd(e,this)}),{passive:!1}),document.getElementsByClassName("header-info-track")[0]&&window.addEventListener("applicationInfoHidden",(()=>{this.offset.top=this.linRef.current.getBoundingClientRect().top,this.offset.scrollY=window.scrollY})),this.resizeAndKeyDownEventListenersControl(!1,!0);let e=this.linRef.current.getBoundingClientRect();this.taille_w=e.width,this.taille_h=e.height,this.offset={left:e.left,top:e.top,scrollY:window.scrollY},this.determineMaxZoomInLevel(),this.width_viewbox=this.taille_w,this.height_viewbox=this.taille_h,this.ratio_viewbox=this.height_viewbox/this.width_viewbox,this.setSvgViewBoxes();const t=()=>requestAnimationFrame((()=>{this.panel.current.style.transform="translateX(200px)",this.panelControl.current.style.transform="translateX(".concat(this.panel.current.style.width,")")}));this.isSmallScreen()?(this.onPanelControlClick(!1),t()):t(),this.addOnDrawingControlerInstance=new Jd(this,this.props.addOnIntegrationType),this.addOnDrawingControlerInstance.initializeController("2D"),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.initialize3DViewController(),s.render((0,l.jsx)(xn,{}),this.loadingComponentContainer.current,(()=>{C.get.call(this,"/klet3d/objects2/".concat(this.props.floorplanID),(e=>{this.userAddedObjects=e,this.userAddedObjects.forEach((e=>this.createUserAddedObjectModelsDetailsDimensionsData(e))),C.get.call(this,"/klet3d/entity/".concat(this.props.floorplanID,"/").concat(this.props.licenseKey),(e=>{lp.log("Floorplan response data"),lp.log(e);let t=null;if(0===e.length?t=(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("span",{children:"There is no data for specified floorplan."})," ",(0,l.jsx)("br",{}),(0,l.jsx)("span",{children:"Check floorplanID from add-on configuration and try again."})]}):e[0]&&"expired"===e[0].status&&(t=(0,l.jsx)("span",{children:e[0].info})),t)return this.setState({customResponseError:t}),void s.unmountComponentAtNode(this.loadingComponentContainer.current);e[0].entitygeneral&&e[0].entitygeneral.version&&e[0].entitygeneral.version===this.HAAddonCurrentVersion?this.onFloorplanDataLoadCallback(e):(lp.log("Update version",e[0].entitygeneral),e[0].entitygeneral||(e[0].entitygeneral={}),e[0].entitygeneral.version=this.HAAddonCurrentVersion,C.post.call(this,"/klet3d/entity/".concat(this.props.floorplanID,"/").concat(this.props.licenseKey),{entitygeneral:e[0].entitygeneral},(t=>{lp.log("Klet post API response"),lp.log(t),this.onFloorplanDataLoadCallback(e)})))}))}))}))}componentWillUnmount(){lp.log("Component will unmount"),this.componentWillUnmountCustomCallback&&this.componentWillUnmountCustomCallback(),this.mounted=!1}render(){const{responseError:e,customResponseError:t}=this.state;return lp.log("Context",this.measureSystemContext),(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{ref:this.loadingComponentContainer})," ",(0,l.jsx)(et,{responseError:e,customResponseError:t,children:(0,l.jsx)(ze,{indoorMapping:!0,responseError:e,children:(0,l.jsxs)("div",{ref:this.mainContainerRef,className:"main-container full-height",style:{overflow:"hidden"},children:[(0,l.jsxs)("div",{className:"svg-canvases-container full-height",children:[(0,l.jsx)("div",{ref:this.mapLayer2DContainerRef,className:"map-layer-container"}),(0,l.jsxs)("svg",{ref:this.gridSvgElementRef,className:"grid-svg-element lin full-height",viewBox:"0 0 1100 700",preserveAspectRatio:"xMidYMin slice",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("defs",{children:(0,l.jsx)(Os,{measureSystemContext:this.measureSystemContext,svgMeterUnits:this.meter,imperialSystemSquareFeetSize:this.imperialSystemSquareFeetSize})}),(0,l.jsx)("g",{ref:this.boxGridRef,className:"svgGrid box-grid fade-in",children:(0,l.jsx)("rect",{width:2e4,height:2e4,x:-3500,y:-2e3,fill:"url(#grid)"})})]}),(0,l.jsxs)("svg",{ref:this.linRef,viewBox:"0 0 1100 700",preserveAspectRatio:"xMidYMin slice",xmlns:"http://www.w3.org/2000/svg",className:"lin full-height",onClick:e=>e.preventDefault(),onMouseUp:e=>this.handleMouseUp(e),onMouseDown:e=>this.handleMouseDown(e),onMouseMove:e=>{_(e,(e=>{this.handleMouseMove(e)}),30)()},onContextMenu:e=>this.handleContextMenu(e),children:[(0,l.jsx)(zs,{floorplanImagePattern:this.floorplanImagePattern,floorplanImage:this.floorplanImage,measureSystemContext:this.measureSystemContext,svgMeterUnits:this.meter,floorplan3DScaleFactor:this.floorplan3DScaleFactor,imperialSystemSquareFeetSize:this.imperialSystemSquareFeetSize,wallMaterialsAsyncPatternRef:this.wallMaterialsAsyncPatternRef,roomTexturesAsyncPatternRef:this.roomTexturesAsyncPatternRef,furnitureAsyncPatternRef:this.furnitureAsyncPatternRef,roomTextureContainerRef:this.roomTextureContainerRef,roomTexturePreviewContainerRef:this.roomTexturePreviewContainerRef,mainComponentThis:this}),(0,l.jsx)("g",{className:"boxGrid",style:{opacity:0},children:(0,l.jsx)("rect",{width:2e4,height:2e4,x:-3500,y:-2e3,fill:"url(#grid)"})}),(0,l.jsx)("g",{id:"boxFloorDrawingHelper",ref:this.boxFloorDrawingHelper,className:"box-floor-drawing-helper fade-in"}),(0,l.jsx)("g",{id:"boxFloorplan",ref:this.boxFloorplanImage,className:"box-floorplan fade-in"}),(0,l.jsx)("g",{id:"boxSurface",ref:this.boxSurface}),(0,l.jsx)("g",{id:"boxRoom",ref:this.boxRoom}),(0,l.jsx)("g",{id:"boxWall",ref:this.boxWall}),(0,l.jsx)("g",{id:"boxCarpentry",ref:this.boxCarpentry}),(0,l.jsx)("g",{id:"boxBind",ref:this.boxBind}),(0,l.jsx)("g",{id:"boxArea",ref:this.boxArea}),(0,l.jsx)("g",{id:"boxRib",ref:this.boxRib,className:"box-rib fade-in"}),(0,l.jsx)("g",{id:"boxScale",ref:this.boxScale,className:"box-scale fade-in"}),(0,l.jsx)("g",{id:"boxText",ref:this.boxText}),(0,l.jsx)("g",{id:"boxDebug",ref:this.boxDebug})]})]}),this.state.show3D&&(0,l.jsx)("div",{ref:this.floorplan3DContainerRef,className:"floorplan3D-container full-height hidden fade-in",style:{display:"block"},children:(0,l.jsx)(sr,{ref:this.floorplan3DComponent,setResponseError:this.setState.bind(this),mainComponentThis:this})}),(0,l.jsx)("div",{ref:this.showFloorplanOnMapContainerRef,className:"indoor-modal show-floorplan-on-map-container"}),(0,l.jsx)("div",{ref:this.areaValue,className:"areaValue hidden"}),(0,l.jsx)("div",{ref:this.bindingPopupRightBoxContainerRef,className:"indoor-modal door-window-ha-entities-binding-popup-container"}),(0,l.jsxs)("div",{ref:this.drawingAreaPopup,className:"drawing-area-popup",children:[(0,l.jsx)("div",{className:"popup-tip"}),(0,l.jsx)("div",{className:"popup-content",children:(0,l.jsxs)("div",{className:"popup-content-container",children:[(0,l.jsx)("div",{className:"close-tooltip",children:(0,l.jsx)("div",{onClick:this.onDrawingAreaPopupCloseClick,children:(0,l.jsx)(ni.Z,{})})}),(0,l.jsx)("div",{ref:this.popupContentRef,className:"content-mounting-container"})]})})]}),(0,l.jsxs)($s,{containerRef:this.wallTools,onCloseRightBox:this.onWallToolsCloseClick,children:[(0,l.jsx)("h3",{children:"Modify the wall"}),(0,l.jsx)(fn,{disabled:!0,ref:this.wallWidthNumberSliderInput,sliderInputRef:this.wallWidth,valueLabelText:(0,l.jsxs)(o.Fragment,{children:["Width [",(0,l.jsx)("span",{children:"".concat(this.wallThicknessMinValue,"-").concat(this.wallThicknessMaxValue)}),"] :"," ",(0,l.jsx)("span",{ref:this.wallWidthValue})," ",(0,l.jsx)("span",{children:"".concat("metric"===this.measureSystemContext.userUnit?"cm":"in")})]}),sliderStep:this.wallWidthInputStep,minValue:this.wallThicknessMinValue,maxValue:this.wallThicknessMaxValue}),(0,l.jsx)(xt,{label:(0,l.jsxs)(o.Fragment,{children:["Length: ",(0,l.jsx)("span",{ref:this.wallLengthValue})," ",(0,l.jsx)("span",{children:"".concat("metric"===this.measureSystemContext.userUnit?"m":"ft")})]}),children:(0,l.jsx)(at,{disabled:!0,ref:this.wallLength,inputStep:this.wallLengthInputStep,inputMin:this.wallLengthInputStep,inputMax:1/0,checkInputValueChangeBeforeCall:!0})}),(0,l.jsx)(ac,{ref:this.wallMaterialRef,mainComponentThis:this}),(0,l.jsx)(lc,{ref:this.wallAlwaysHideRef,mainComponentThis:this}),(0,l.jsx)(pc,{ref:this.wallCustomHeightRef,mainComponentThis:this}),(0,l.jsx)(Xe,{mainComponentThis:this})]}),(0,l.jsxs)($s,{containerRef:this.wallItemToolsRef,onCloseRightBox:this.onWallItemToolsCloseClick,children:[(0,l.jsx)("h3",{ref:this.wallItemToolsTitle}),(0,l.jsx)("div",{ref:this.doorHinge,children:(0,l.jsx)("div",{className:"button-centered-container form-group",children:(0,l.jsx)(Ge,{disabled:!0,type:"dull",onClick:this.onChangeDoorHingeClick,children:"REVERSE SWING"})})}),(0,l.jsx)("div",{ref:this.windowRotationOptionsContainerRef}),(0,l.jsx)("div",{ref:this.wallItemDimensionsRef}),(0,l.jsx)("div",{ref:this.wallItemPositionsRef}),(0,l.jsx)("div",{ref:this.wallItemMaterialsRef}),(0,l.jsx)(cc,{ref:this.wallItemHideWithWallRef,mainComponentThis:this}),(0,l.jsx)("div",{ref:this.wallItemTypesSelectionBoxRef}),(0,l.jsx)(Xe,{mainComponentThis:this}),(0,l.jsx)("div",{ref:this.bindingWallItemContainerRef})]}),(0,l.jsxs)($s,{containerRef:this.freeItemToolsRef,onCloseRightBox:()=>this.onFreeItemToolsCloseClick(this.freeItemToolsRef),children:[(0,l.jsx)("h3",{ref:this.freeItemTitleRef}),(0,l.jsx)("div",{ref:this.freeItemDimensionsRef}),(0,l.jsx)($d,{ref:this.freeItemMirroredRef,mainComponentThis:this}),(0,l.jsx)("div",{ref:this.freeItemPositionsRef}),(0,l.jsx)("div",{ref:this.freeItemRotationsRef}),(0,l.jsx)("div",{ref:this.freeItemMaterialsRef}),(0,l.jsx)("div",{ref:this.freeItemTypesSelectionBoxRef}),(0,l.jsx)("div",{ref:this.freeItemTextToolsRef}),(0,l.jsx)(Xe,{mainComponentThis:this}),(0,l.jsx)("div",{ref:this.bindingFreeItemContainerRef})]}),(0,l.jsx)(cn,{ref:this.uploadFloorplanImageToolsRef,mainComponentThis:this,floorplanImageTools:this.floorplanImageTools,uploadImageFloorplanSettingsIconRef:this.uploadImageFloorplanSettingsIconRef,uploadFloorplanImageStatusContainerRef:this.uploadFloorplanImageStatusContainerRef,uploadImageFloorplanHideRef:this.uploadImageFloorplanHideRef,uploadImageFloorplanShowRef:this.uploadImageFloorplanShowRef,boxFloorplanImage:this.boxFloorplanImage,uploadFloorplanImageErrorMessageRef:this.uploadFloorplanImageErrorMessageRef,uploadFloorplanImageErrorModal:this.uploadFloorplanImageErrorModal,floorplanImagePattern:this.floorplanImagePattern,floorplanImage:this.floorplanImage}),(0,l.jsxs)($s,{containerRef:this.roomTools,containerClasses:"flex",onCloseRightBox:this.onResetRoomToolsClick,children:[(0,l.jsx)(xt,{label:(0,l.jsxs)(o.Fragment,{children:["Estimated surface: ",(0,l.jsx)("span",{className:"size"})]})}),(0,l.jsx)(xt,{label:"If you have the actual area, you can write it(".concat("metric"===this.measureSystemContext.userUnit?"m\xb2":"ft\xb2",")"),children:(0,l.jsx)(at,{disabled:!0,ref:this.roomSurface,placeholder:"Real surface",inputStep:this.roomSurfaceInputStep,inputMin:this.roomSurfaceInputStep,inputMax:1/0,checkInputValueChangeBeforeCall:!0})}),(0,l.jsx)(ut,{disabled:!0,label:"Type room name",inputRef:this.roomName,placeholder:"e.g. Bedroom"}),(0,l.jsx)(xt,{label:"or select it:",children:(0,l.jsx)(Ot,{disabled:!0,ref:this.roomNameSelectRef,dropdownMenuRef:this.roomNameDropdownMenu,listItems:Ti})}),(0,l.jsxs)(xt,{label:"Room floor",containerClasses:"room-floor-textures-form-group-container",children:[(0,l.jsx)("div",{ref:this.roomFloorTexturesRepeatComponentContainerRef}),(0,l.jsx)("div",{ref:this.roomFloorTexturesComponentContainerRef,className:"room-floor-textures-component-container"})]}),(0,l.jsx)(Xe,{mainComponentThis:this})]}),(0,l.jsxs)($s,{containerRef:this.floorParameters,containerClasses:"floor-parameters-container",onCloseRightBox:this.onFloorParametersCloseClick,children:[(0,l.jsx)(np,{ref:this.floorNoteInputRef,mainComponentThis:this}),(0,l.jsx)(op,{ref:this.floorNumberInputRef,mainComponentThis:this}),(0,l.jsx)(Xe,{mainComponentThis:this}),(0,l.jsx)(rp,{ref:this.floorDrawingHelperOptionsRef,mainComponentThis:this})]}),(0,l.jsx)("div",{ref:this.panelInfoExplanationBox,className:"panel-info-explanation-box"}),(0,l.jsx)("div",{ref:this.panelFloorNoteExplanationBox,className:"panel-info-explanation-box",style:{width:"auto",maxWidth:200}}),(0,l.jsxs)(As,{panelRef:this.panel,panelControlRef:this.panelControl,onPanelControlClick:this.onPanelControlClick,children:[(0,l.jsx)("div",{className:"button-centered-container panel-action-button",children:(0,l.jsx)(Ge,{type:"blue",className:"show3d-button panel-transition",onClick:this.onShow3DClick,children:"View 3D"})}),(0,l.jsx)(tp,{ref:this.floorplanFloorsPanelBoxRef,containerRef:this.floorplanFloorsPanelBoxContainerRef,mainComponentThis:this}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("li",{children:(0,l.jsxs)("button",{className:"btn btn-default fully panel-icon-button-container",title:"Export as PNG",onClick:()=>{0===this.WALLS.length?K(this.selectedFloorNoWallsErrorModal.current,this.modalTimeout):this.downloadSvg(!0,!0,!1,!1)},children:[(0,l.jsx)(is.Z,{}),(0,l.jsx)("p",{children:"EXPORT PNG"})]})}),(0,l.jsx)("br",{}),(0,l.jsx)("li",{children:(0,l.jsxs)("button",{className:"btn btn-default fully panel-icon-button-container",title:"Edit floorplan GPS location",onClick:this.onFloorplanGpsCoordsClick,children:[(0,l.jsx)(Ss,{}),(0,l.jsx)("p",{children:"GPS COORDS"})]})}),(0,l.jsx)("li",{children:(0,l.jsx)(wn,{ref:this.showMapLayer2DInputRef,containerClasses:"panel2D",onChangeCallback:this.onShowOnMapLayer2DClick})}),(0,l.jsx)("br",{}),(0,l.jsx)(xt,{label:"Floor height(".concat("metric"===this.measureSystemContext.userUnit?"cm":"in",")"),containerStyle:{marginBottom:0},children:(0,l.jsx)(at,{disabled:!0,ref:this.floorHeightInputRef,title:"Set floor height",inputStep:Math.pow(10,-this.wallHeightDecimalPrecision),inputMin:1,inputMax:this.wallHeightMaxValue,onInputValueChanged:this.onFloorHeightInputChange})}),(0,l.jsx)("br",{}),(0,l.jsxs)("li",{ref:this.uploadFloorplanPanelButtonContainer,className:"upload-floorplan-panel-button-container",children:[(0,l.jsxs)("button",{className:"btn btn-default fully panel-icon-button-container",title:"Upload floorplan image",ref:this.uploadFloorplanImageMode,onClick:this.onUploadFloorplanImageClick,style:{position:"relative"},children:[(0,l.jsx)(xs,{}),(0,l.jsx)(rs.Z,{className:"settings-icon hidden",ref:this.uploadImageFloorplanSettingsIconRef}),(0,l.jsx)("p",{children:"IMAGE"})]}),(0,l.jsxs)("button",{ref:this.uploadFloorplanImageStatusContainerRef,onClick:this.onUploadedFloorplanImageStatusChangeClick,className:"btn btn-default show-hide-uploaded-floorplan-image-container hidden",children:[(0,l.jsx)(ns.Z,{ref:this.uploadImageFloorplanShowRef,style:{display:"none"}}),(0,l.jsx)(as.Z,{ref:this.uploadImageFloorplanHideRef,style:{display:"none"}})]})]}),(0,l.jsx)("br",{}),(0,l.jsx)("li",{children:(0,l.jsxs)("button",{title:"Select mode",className:"btn btn-success fully panel-icon-button-container",ref:this.selectMode,onClick:this.onSelectModeClick,children:[(0,l.jsx)(ws,{}),(0,l.jsx)("p",{children:"SELECT"})]})}),(0,l.jsx)("br",{}),(0,l.jsx)("li",{children:(0,l.jsxs)("button",{title:"Select room",className:"btn btn-default fully panel-icon-button-container",ref:this.roomMode,onClick:this.onRoomModeClick,children:[(0,l.jsx)(ls.Z,{style:{fill:"none"}}),(0,l.jsx)("p",{children:"ROOM"})]})}),(0,l.jsx)("br",{}),(0,l.jsxs)("div",{style:{position:"relative"},children:[(0,l.jsx)("li",{children:(0,l.jsxs)("button",{title:"Show layers",className:"btn btn-default fully panel-icon-button-container",style:{position:"relative"},ref:this.layerMode,onClick:this.onLayerModeClick,children:[(0,l.jsx)(os.Z,{style:{fill:"none"}}),(0,l.jsx)("p",{children:"LAYERS"}),(0,l.jsx)(ss.Z,{ref:this.layersListArrowRef,className:"layers-list-arrow"})]})}),(0,l.jsxs)("div",{ref:this.layerList,className:"list-unstyled layer-list hidden",children:[(0,l.jsx)(ft,{title:"Show floorplan measures",inputRef:this.showRibRef,onChange:this.onShowRibClick,defaultChecked:!0,label:"MEASURES"}),(0,l.jsx)(ft,{title:"Show grid",inputRef:this.showBoxGrid,onChange:this.onShowBoxGridClick,defaultChecked:!0,label:"GRID"})]})]}),(0,l.jsx)("br",{}),(0,l.jsx)(Pt,{label:"Add-on URL",value:"".concat(window.location.pathname).concat(window.location.search),containerStyle:{marginBottom:"1rem"}})]}),(0,l.jsx)(Ls,{modalRef:this.selectedFloorNoWallsErrorModal,modalBody:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{children:(0,l.jsx)("p",{className:"indoor-paragraph-centered",children:"Floor must contain at least one wall in order to use this feature"})}),(0,l.jsx)("div",{className:"indoor-modal-row center",children:(0,l.jsx)(Ge,{type:"primary",onClick:()=>X(this.selectedFloorNoWallsErrorModal.current,this.modalTimeout),children:"OK"})})]}),modalFooter:null}),(0,l.jsx)(Ls,{modalRef:this.showFloorplanNoWallsErrorModal,modalBody:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{children:(0,l.jsx)("p",{className:"indoor-paragraph-centered",children:"Floorplan must contain at least one wall in order to use this feature"})}),(0,l.jsx)("div",{className:"indoor-modal-row center",children:(0,l.jsx)(Ge,{type:"primary",onClick:()=>X(this.showFloorplanNoWallsErrorModal.current,this.modalTimeout),children:"OK"})})]}),modalFooter:null}),(0,l.jsx)("div",{ref:this.boxInfo,className:"boxInfo box-info panel-transition"}),(0,l.jsx)("div",{ref:this.boxPlanName,className:"box-plan-name panel-transition"}),(0,l.jsx)(Js,{mainComponentThis:this})]})})})]})}}const cp=hp;var dp=i(5164),pp=i(9049),mp=i(3377),up=i(1317);class gp extends o.Component{constructor(){super(),this.authenticateToHomeAssistant=async()=>{try{return await(0,dp.v0)({hassUrl:window.location.origin,redirectUrl:void 0,loadTokens:async()=>window._env_.token?(0,dp.pf)(window.location.origin,window._env_.token).data:void 0,saveTokens:e=>{0}})}catch(e){return up.log("Auth error",e),up.log(e===pp.DJ),up.log(e===pp.rh),up.log(e===pp.Zh),null}},this.connectToHomeAssistant=async()=>{if(up.log("Home assistant forwarded variables",window._env_),window._env_){let t,i;if(this.floorplanID=window._env_.floorplanID,this.licenseKey=window._env_.licenseKey,up.log("Auth token storage",t),t=await this.authenticateToHomeAssistant(),!t)return void this.setState({loading:!1,error:"Home Assistant authentication failed"});up.log("Auth token parsed",t),up.log(JSON.stringify(t));try{i=await(0,mp.I5)({auth:t})}catch(e){up.log("Create connection error",e),up.log(e===pp.OH),up.log(e===pp.DJ);let t=(0,l.jsx)("span",{children:"Connection to Home Assistant failed."});return e===pp.DJ?(t=(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("span",{children:"Connection authentication failed."})," ",(0,l.jsx)("br",{}),(0,l.jsx)("span",{children:"Check if access token from add-on configuration has expired."})]}),localStorage.removeItem("glamos_token")):e===pp.OH&&(t=(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("span",{children:"Connection to your Home Assistant instance failed."}),(0,l.jsx)("br",{})," ",(0,l.jsx)("span",{children:"Please try again."})]})),void this.setState({loading:!1,error:t})}this.homeAssistantUserConfig=await(0,bc.iE)(i),up.log("HA config",this.homeAssistantUserConfig),this.homeAssistantConnection=i,this.customProps={connection:this.homeAssistantConnection,userConfig:this.homeAssistantUserConfig},this.userUnit="km"===this.homeAssistantUserConfig.unit_system.length?"metric":"imperial",this.setState({loading:!1})}else this.setState({loading:!1,error:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("span",{style:{display:"inline-block"},children:"Can't read configuration variables."}),(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:{marginTop:"1em",display:"inline-block"},children:"Please restart add-on."})]})})},this.state={loading:!0,error:null},this.homeAssistantConnection=null,this.homeAssistantUserConfig={},this.floorplanID="",this.licenseKey="",this.userUnit="metric",this.customProps={},this.authenticateToHomeAssistant=this.authenticateToHomeAssistant.bind(this),this.connectToHomeAssistant=this.connectToHomeAssistant.bind(this)}componentDidMount(){"HomeAssistant"===this.props.addOnIntegrationType&&this.connectToHomeAssistant()}render(){const{loading:e,error:t}=this.state;return e?(0,l.jsx)(Mt,{screenCenter:!0}):t?(0,l.jsx)(Qe,{message:t}):(0,l.jsx)(cp,{customProps:this.customProps,userUnit:this.userUnit,floorplanID:this.floorplanID,licenseKey:this.licenseKey,addOnIntegrationType:this.props.addOnIntegrationType})}}const fp=gp;class bp extends o.Component{render(){return(0,l.jsx)(ci,{children:(0,l.jsxs)("div",{className:"page-container",children:[(0,l.jsx)("div",{className:"page-content-container",children:(0,l.jsx)(fp,{addOnIntegrationType:"HomeAssistant"})}),(0,l.jsx)("div",{className:"footer",children:(0,l.jsxs)("div",{children:["Powered by",(0,l.jsx)("img",{srcSet:"\n                    ".concat(r.default," 1x,\n                    ").concat(r.retina," 2x\n                "),alt:""})]})})]})})}}const wp=bp;var Cp=i(1317);Cp.log=function(){},Cp.warn=function(){},Cp.error=function(){},s.render((0,l.jsx)(wp,{}),document.getElementById("root"))}},e=>{e.O(0,[473],(()=>{return t=8044,e(e.s=t);var t}));e.O()}]);